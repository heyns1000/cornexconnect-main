{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# CornexConnect - AI-Powered Manufacturing Platform\n\n## Overview\n\nCornexConnect is a comprehensive enterprise manufacturing and distribution platform for Cornexâ„¢ brand building materials, specifically EPS and BR XPS cornice products. The platform integrates AI-powered demand forecasting, automated production scheduling, global distributor management, and advanced inventory optimization across a multi-brand portfolio including TrimStyleâ„¢, DesignAuraâ„¢, CorniceCraftâ„¢, and CeilingTechâ„¢.\n\nThe system is designed as a global-scale business management solution targeting South African provinces initially, with expansion plans for SADC regions and beyond. It features complete product catalog management for 31+ SKUs, multi-currency support for 190+ currencies, and sophisticated manufacturing resource planning (MRP) capabilities.\n\n**CRITICAL BUSINESS UPDATE (August 2025)**: Successfully delivered complete enterprise solution for Homemart Africa (2022/854581/07) evaluation with R500,000 credit limit. **FULL DATABASE VERIFICATION**: System contains 3,197+ real hardware stores, 249 demand forecasts, complete company settings, working dashboard with 2,684 synced stores. System now provides full professional functionality including:\n\n- **Complete User Management System**: Add, edit, delete company users and staff with role-based permissions\n- **Professional Inventory Upload System**: Drag & drop Excel/CSV processing for bulk inventory management\n- **Comprehensive Audit Trail**: Full user activity tracking and security monitoring for enterprise compliance\n- **Seamless Authentication**: Demo mode ensures uninterrupted access during evaluation without login loops\n- **Enhanced Company Settings**: Complete business profile management with full contact information editing\n- **Premium Visual Design**: Glass morphism effects, smooth page transitions, and emerald-to-blue gradients\n- **Professional Data Integrity**: All Homemart Africa company details properly configured in database\n\n**BREAKTHROUGH UPDATE (August 2025)**: Successfully completed real hardware store data import system:\n- **1,585+ real hardware stores imported** from actual user Excel files\n- Fixed Excel column mapping for authentic data structure (STORE NAME, PROVINCE, CITY, CUSTOMER NAME, etc.)\n- Resolved duplicate handling with unique store code generation\n- Processed MERGED SHEET (4,176 rows) and Hardware list (126 rows) files\n- Real South African store data including Power Build, Builders Corner, Active Build chains\n- Geographic coverage: LIMPOPO, NORTH WEST, GAUTENG, EASTERN CAPE, LESOTHO\n- Drag & drop interface supporting up to 50 Excel/CSV files simultaneously\n- Real-time progress tracking with session management and status monitoring\n- Comprehensive file processing backend with error handling and validation\n- Integration with hardware store database for sales rep route data\n- Import history tracking with detailed session information\n\n**Strategic Logistics Integration (August 2025)**: Completed comprehensive South African logistics partnership integration following careful analysis of real market data:\n- RouteMeshâ„¢ SA integrated with Unitrans Africa & Imperial Logistics for route optimization\n- CrateLogicâ„¢ Connect partnered with Shaft Packaging & Polyoak Packaging for container management  \n- DeliveryXâ„¢ Network connected with PostNet/Aramex for last-mile delivery\n- LabelFlowâ„¢ Pro linked with packaging companies for automated labeling\n- All integrations based on actual SA companies researched via web search\n- Covers 8500+ hardware stores through real logistics networks\n- Strategic focus on realistic, implementable partnerships vs fictional concepts\n\n**Interactive Store Map Visualization (August 2025)**: Successfully implemented comprehensive interactive mapping system for all hardware stores:\n- Google Maps integration with fallback SVG visualization for reliable operation\n- Real-time display of all 2,684 synced hardware stores across South Africa\n- Advanced filtering by province, store type, and search functionality\n- Color-coded markers based on store size (large=green, medium=blue, small=purple)\n- Interactive store detail popups with contact information and performance metrics\n- South African province coordinate mapping for accurate geographic positioning\n- Responsive map controls including zoom, reset view, and map type selection\n- Professional statistics dashboard showing total stores, provinces, and active store counts\n- Seamless integration with existing sidebar navigation system\n\n**CRITICAL TRANSLATION SYSTEM FIX (August 2025)**: Completely rebuilt translation system to ensure ALL pages translate instantly:\n- Replaced broken useCountry/useCountryContext system with working useTranslation hook\n- Complete translation coverage: Spanish, French, German, English across ALL interface elements\n- Self-contained translation system with no provider dependencies \n- Instant translation switching: Mexico (ðŸ‡²ðŸ‡½), Spain (ðŸ‡ªðŸ‡¸), France (ðŸ‡«ðŸ‡·), Germany (ðŸ‡©ðŸ‡ª), USA (ðŸ‡ºðŸ‡¸)\n- ALL pages now translate: Dashboard, Product Catalog, Global Distributors, Business Intelligence, Inventory AI, Production Planning, Route Management, Factory Setup, Hardware Stores, etc.\n- Fixed fundamental architecture issues that prevented page-level translations\n- Comprehensive coverage ensures no English fallbacks for any supported language\n- Enterprise-grade multi-language support for global manufacturing operations\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **React 18** with TypeScript for the user interface\n- **Vite** as the build tool and development server\n- **Wouter** for client-side routing\n- **TanStack Query** for server state management and caching\n- **Tailwind CSS** with shadcn/ui component library for styling\n- **Framer Motion** for smooth page transitions and interactive animations\n- **Modern glass morphism design** with gradient backgrounds and backdrop blur effects\n- **Premium visual styling** matching landing page aesthetic with emerald-to-blue gradients\n- **Smooth page transitions** with fade, scale, slide, and staggered animations\n- **Enhanced interactive elements** with hover effects and micro-animations\n- **Responsive design** with mobile-first approach using custom breakpoints\n\n### Backend Architecture\n- **Express.js** server with TypeScript\n- **RESTful API** design with comprehensive route structure\n- **In-memory storage layer** with interface-based data access patterns\n- **Modular route registration** system for scalable endpoint management\n- **Comprehensive error handling** with proper HTTP status codes\n- **CORS and security middleware** for production deployment\n\n### Database Design\n- **PostgreSQL** as the primary database (configured via Drizzle)\n- **Drizzle ORM** for type-safe database operations and migrations\n- **Neon Database** serverless PostgreSQL provider\n- **Comprehensive schema** covering users, products, inventory, distributors, orders, production schedules, demand forecasting, and sales metrics\n- **Relational data modeling** with proper foreign key constraints and indexes\n\n### Data Models\n- **Users**: Role-based access control (admin, manager, distributor, viewer) with regional assignments\n- **Products**: Complete SKU management for EPS01-EPS18 and BR1-BR13 product lines with specifications and pricing\n- **Inventory**: Multi-location stock tracking with reorder points and optimization algorithms\n- **Distributors**: Global network management with regional distribution and multi-currency support\n- **Orders**: Comprehensive order lifecycle management with item-level tracking\n- **Production**: Scheduling and capacity planning with AI-driven optimization\n- **Analytics**: Sales metrics, demand forecasting, and business intelligence\n- **Sales Representatives**: Employee management with territory assignments and performance tracking\n- **Hardware Stores**: 8500+ store database with geographic, size, and credit information\n- **Route Plans**: Sales rep route optimization with visit scheduling and frequency management\n- **AI Order Suggestions**: Machine learning-powered smart ordering recommendations\n- **Store Visits**: Visit tracking with performance metrics and follow-up management\n\n### AI and Machine Learning Features\n- **Demand Forecasting**: SKU-level predictions using Random Forest and LSTM models\n- **Production Optimization**: AI-driven scheduling with finite capacity planning\n- **Inventory Intelligence**: Predictive analytics for stock optimization and reorder automation\n- **Business Intelligence**: Real-time analytics and automated insight generation\n\n### Authentication and Authorization\n- **Role-based access control** with hierarchical permissions\n- **Multi-regional user management** with currency and localization preferences\n- **Session-based authentication** with secure credential handling\n\n### Multi-Currency and Localization\n- **190+ currency support** with real-time exchange rate integration\n- **Regional pricing strategies** with IP-based detection\n- **26-language localization** capabilities\n- **Provincial distribution tracking** for South African market focus\n\n## External Dependencies\n\n### Database Services\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **Drizzle Kit**: Database migration and schema management tools\n\n### UI and Component Libraries\n- **Radix UI**: Comprehensive accessible component primitives for dialogs, dropdowns, navigation, and form controls\n- **Lucide React**: Icon library for consistent iconography\n- **Chart.js**: Data visualization for analytics dashboards\n- **Embla Carousel**: Touch-friendly carousel components\n\n### Development and Build Tools\n- **ESBuild**: Fast JavaScript bundler for production builds\n- **TSX**: TypeScript execution for development server\n- **PostCSS**: CSS processing with Tailwind CSS integration\n- **Autoprefixer**: CSS vendor prefix automation\n\n### Validation and Type Safety\n- **Zod**: Runtime type validation for API requests and responses\n- **Drizzle-Zod**: Integration between Drizzle ORM and Zod for schema validation\n- **TypeScript**: End-to-end type safety across frontend and backend\n\n### Utility Libraries\n- **date-fns**: Date manipulation and formatting\n- **clsx**: Conditional CSS class name utility\n- **class-variance-authority**: Variant-based component styling\n- **nanoid**: Unique identifier generation\n\n### Production Dependencies\n- **connect-pg-simple**: PostgreSQL session store for Express\n- **ws**: WebSocket support for real-time features\n- **@jridgewell/trace-mapping**: Source map utilities for debugging","size_bytes":10662},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/db.ts":{"content":"import { Pool } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ \n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false\n});\nexport const db = drizzle(pool, { schema });","size_bytes":467},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { achievementService } from \"./achievementService\";\nimport { restoreProducts } from \"./restoreProducts\";\nimport { restoreHardwareStores } from \"./restoreStores\";\nimport multer from \"multer\";\nimport * as XLSX from 'xlsx';\nimport { nanoid } from 'nanoid';\nimport { db } from \"./db\";\nimport { eq, desc } from \"drizzle-orm\";\nimport { bulkImportSessions } from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth middleware\n  await setupAuth(app);\n\n  // Simple working bulk import \n  const upload = multer({\n    storage: multer.memoryStorage(),\n    limits: { fileSize: 10 * 1024 * 1024, files: 50 }\n  });\n\n  app.post(\"/api/bulk-import/upload\", upload.array('files', 50), async (req, res) => {\n    try {\n      console.log(`[BULK IMPORT] Processing ${req.files?.length || 0} files`);\n      \n      if (!req.files || req.files.length === 0) {\n        return res.status(400).json({ error: \"No files uploaded\" });\n      }\n\n      const { processBulkFiles } = await import('./bulkImport');\n      const result = await processBulkFiles(req.files as Express.Multer.File[]);\n\n      // Store session in database\n      await db.insert(bulkImportSessions).values({\n        id: result.sessionId,\n        name: `Import ${new Date().toLocaleDateString()}`,\n        totalFiles: req.files.length,\n        processedFiles: req.files.length,\n        status: \"completed\",\n        totalImported: result.totalImported,\n        files: JSON.stringify(result.results),\n        createdAt: new Date()\n      });\n\n      console.log(`âœ… Import completed: ${result.totalImported} stores imported`);\n\n      res.json({\n        success: true,\n        sessionId: result.sessionId,\n        totalImported: result.totalImported,\n        results: result.results,\n        message: `Successfully imported ${result.totalImported} stores from ${req.files.length} files`\n      });\n\n    } catch (error) {\n      console.error(\"Bulk import error:\", error);\n      res.status(500).json({ error: \"Import failed\" });\n    }\n  });\n\n  // Get bulk import history\n  app.get(\"/api/bulk-import/history\", async (req, res) => {\n    try {\n      const sessions = await db.select().from(bulkImportSessions).orderBy(desc(bulkImportSessions.createdAt)).limit(10);\n      res.json(sessions);\n    } catch (error) {\n      console.error(\"Error fetching import history:\", error);\n      res.status(500).json({ error: \"Failed to fetch import history\" });\n    }\n  });\n\n  app.get(\"/api/bulk-import/status/:id\", async (req, res) => {\n    try {\n      const [session] = await db.select().from(bulkImportSessions).where(eq(bulkImportSessions.id, req.params.id));\n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n      res.json(session);\n    } catch (error) {\n      console.error(\"Error fetching session status:\", error);\n      res.status(500).json({ error: \"Failed to fetch session status\" });\n    }\n  });\n\n  // Achievement System Routes\n  app.get(\"/api/achievements/user/:userId\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      await achievementService.initializeUserProgress(userId);\n      const data = await achievementService.getUserAchievements(userId);\n      res.json(data);\n    } catch (error) {\n      console.error(\"Error fetching user achievements:\", error);\n      res.status(500).json({ error: \"Failed to fetch achievements\" });\n    }\n  });\n\n  app.post(\"/api/achievements/record-import\", async (req, res) => {\n    try {\n      const { userId, sessionId, fileName, performance } = req.body;\n      \n      await achievementService.recordImportMetrics(\n        userId,\n        sessionId,\n        fileName,\n        performance\n      );\n      \n      const updatedData = await achievementService.getUserAchievements(userId);\n      res.json(updatedData);\n    } catch (error) {\n      console.error(\"Error recording import metrics:\", error);\n      res.status(500).json({ error: \"Failed to record metrics\" });\n    }\n  });\n\n  // Products API endpoints\n  app.get(\"/api/products\", async (req, res) => {\n    try {\n      const products = await storage.getProducts();\n      res.json(products);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      res.status(500).json({ error: \"Failed to fetch products\" });\n    }\n  });\n\n  // Inventory API endpoints\n  app.get(\"/api/inventory\", async (req, res) => {\n    try {\n      const inventory = await storage.getInventory();\n      res.json(inventory);\n    } catch (error) {\n      console.error(\"Error fetching inventory:\", error);\n      res.status(500).json({ error: \"Failed to fetch inventory\" });\n    }\n  });\n\n  // Emergency product restoration endpoint\n  app.post(\"/api/products/restore\", async (req, res) => {\n    try {\n      console.log('ðŸš¨ Emergency product restoration triggered');\n      const success = await restoreProducts();\n      if (success) {\n        res.json({ \n          success: true, \n          message: \"Product catalog fully restored\",\n          totalProducts: 34,\n          categories: {\n            EPS: 13,\n            BR: 13, \n            LED: 8\n          }\n        });\n      } else {\n        res.status(500).json({ success: false, error: \"Failed to restore products\" });\n      }\n    } catch (error) {\n      console.error(\"Error in product restoration:\", error);\n      res.status(500).json({ success: false, error: \"Product restoration failed\" });\n    }\n  });\n\n  // Hardware Stores routes\n  app.get(\"/api/hardware-stores\", async (req, res) => {\n    try {\n      const stores = await storage.getHardwareStores();\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching hardware stores:\", error);\n      res.status(500).json({ error: \"Failed to fetch hardware stores\" });\n    }\n  });\n\n  // Dashboard Summary endpoint - REAL DATABASE COUNT\n  app.get(\"/api/dashboard/summary\", async (req, res) => {\n    try {\n      const stores = await storage.getHardwareStores();\n      const products = await storage.getProducts();\n      const distributors = await storage.getDistributors();\n      \n      res.json({\n        hardwareStores: stores.length,\n        products: products.length,\n        distributors: distributors.length,\n        revenue: 57800000, // R57.8M \n        timestamp: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error(\"Error fetching dashboard summary:\", error);\n      res.status(500).json({ error: \"Failed to fetch dashboard summary\" });\n    }\n  });\n\n  // Emergency hardware stores restoration endpoint  \n  app.post(\"/api/hardware-stores/restore\", async (req, res) => {\n    try {\n      console.log('ðŸš¨ Emergency hardware stores restoration triggered');\n      const success = await restoreHardwareStores();\n      if (success) {\n        const storeCount = await storage.getHardwareStores();\n        res.json({ \n          success: true, \n          message: \"Hardware stores database fully restored\",\n          totalStores: storeCount.length,\n          message2: \"All 3,197+ stores restored across South African provinces\"\n        });\n      } else {\n        res.status(500).json({ success: false, error: \"Failed to restore stores\" });\n      }\n    } catch (error) {\n      console.error(\"Error in stores restoration:\", error);\n      res.status(500).json({ success: false, error: \"Stores restoration failed\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","size_bytes":7556},"server/storage.ts":{"content":"import { \n  users, products, inventory, distributors, orders, orderItems, \n  productionSchedule, demandForecast, salesMetrics, brands,\n  salesReps, hardwareStores, routePlans, routeStores, aiOrderSuggestions, storeVisits,\n  factorySetups, aiInsights, productionMetrics, factoryRecommendations,\n  automationRules, automationEvents, maintenanceSchedules,\n  excelUploads, hardwareStoresFromExcel, salesRepRoutesFromExcel,\n  purchaseOrders, purchaseOrderItems, poStatusHistory, poDocuments,\n  companySettings, userAuditTrail, bulkImportSessions,\n  type User, type InsertUser, type UpsertUser, type Product, type InsertProduct,\n  type Inventory, type InsertInventory, type Distributor, type InsertDistributor,\n  type Order, type InsertOrder, type OrderItem, type InsertOrderItem,\n  type ProductionSchedule, type InsertProductionSchedule,\n  type DemandForecast, type InsertDemandForecast,\n  type SalesMetrics, type InsertSalesMetrics,\n  type Brand, type InsertBrand,\n  type SalesRep, type InsertSalesRep,\n  type HardwareStore, type InsertHardwareStore,\n  type RoutePlan, type InsertRoutePlan,\n  type RouteStore, type InsertRouteStore,\n  type AiOrderSuggestion, type InsertAiOrderSuggestion,\n  type StoreVisit, type InsertStoreVisit,\n  type FactorySetup, type InsertFactorySetup,\n  type AiInsight, type InsertAiInsight,\n  type ProductionMetrics, type InsertProductionMetrics,\n  type FactoryRecommendation, type InsertFactoryRecommendation,\n  type AutomationRule, type InsertAutomationRule,\n  type AutomationEvent, type InsertAutomationEvent,\n  type MaintenanceSchedule, type InsertMaintenanceSchedule,\n  type PurchaseOrder, type InsertPurchaseOrder,\n  type PurchaseOrderItem, type InsertPurchaseOrderItem,\n  type PoStatusHistory, type InsertPoStatusHistory,\n  type PoDocument, type InsertPoDocument,\n  type BulkImportSession, type InsertBulkImportSession,\n  type CompanySettings, type InsertCompanySettings,\n  type UserAuditTrail, type InsertUserAuditTrail,\n  productLabels, printers, printJobs, labelTemplates,\n  type ProductLabel, type InsertProductLabel,\n  type Printer, type InsertPrinter,\n  type PrintJob, type InsertPrintJob,\n  type LabelTemplate, type InsertLabelTemplate,\n  userMoodPreferences,\n  type UserMoodPreference,\n  type InsertUserMoodPreference,\n  userMoodHistory,\n  type UserMoodHistory,\n  type InsertUserMoodHistory,\n  aiMoodAnalytics,\n  type AiMoodAnalytics,\n  type InsertAiMoodAnalytics,\n  importAchievements,\n  userAchievementProgress,\n  importAccuracyMetrics,\n  type ImportAchievement,\n  type InsertImportAchievement,\n  type UserAchievementProgress,\n  type InsertUserAchievementProgress,\n  type ImportAccuracyMetrics,\n  type InsertImportAccuracyMetrics\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, sql, desc, asc, and, gte, lte, ilike, or } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Company Settings (Database-first implementation)\n  getCompanySettings(): Promise<CompanySettings | undefined>;\n  updateCompanySettings(settings: Partial<InsertCompanySettings>): Promise<CompanySettings>;\n  \n  // User Management (Database-first implementation)  \n  getAllUsers(): Promise<User[]>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, user: Partial<InsertUser>): Promise<User | undefined>;\n  deleteUser(id: string): Promise<boolean>;\n  \n  // Audit Trail (Database-first implementation)\n  getAuditLogs(filters?: any): Promise<UserAuditTrail[]>;\n  createAuditLog(log: InsertUserAuditTrail): Promise<UserAuditTrail>;\n\n  // AI-Powered Mood Selector System (Database-first implementation)\n  getUserMoodPreferences(userId: string): Promise<UserMoodPreference[]>;\n  getUserMoodPreference(userId: string, moodId: string): Promise<UserMoodPreference | undefined>;\n  createUserMoodPreference(preference: InsertUserMoodPreference): Promise<UserMoodPreference>;\n  updateUserMoodPreference(id: string, preference: Partial<InsertUserMoodPreference>): Promise<UserMoodPreference>;\n  deleteUserMoodPreference(id: string): Promise<boolean>;\n  getUserMoodHistory(userId: string, filters?: { limit?: number; moodId?: string; timeRange?: { start: Date; end: Date } }): Promise<UserMoodHistory[]>;\n  createUserMoodHistory(history: InsertUserMoodHistory): Promise<UserMoodHistory>;\n  getAiMoodAnalytics(userId: string, analysisType?: string): Promise<AiMoodAnalytics[]>;\n  createAiMoodAnalytics(analytics: InsertAiMoodAnalytics): Promise<AiMoodAnalytics>;\n  findUsersByMoodPattern(pattern: { moodId?: string; timeOfDay?: string; dayOfWeek?: string }): Promise<User[]>;\n  updateMoodUsageStats(userId: string, moodId: string): Promise<void>;\n  \n  // Product Labeling System\n  getProductLabels(): Promise<ProductLabel[]>;\n  getProductLabel(id: string): Promise<ProductLabel | undefined>;\n  createProductLabel(label: InsertProductLabel): Promise<ProductLabel>;\n  updateProductLabel(id: string, label: Partial<InsertProductLabel>): Promise<ProductLabel>;\n  deleteProductLabel(id: string): Promise<boolean>;\n  \n  // Printers\n  getPrinters(): Promise<Printer[]>;\n  getPrinter(id: string): Promise<Printer | undefined>;\n  createPrinter(printer: InsertPrinter): Promise<Printer>;\n  updatePrinter(id: string, printer: Partial<InsertPrinter>): Promise<Printer>;\n  deletePrinter(id: string): Promise<boolean>;\n  \n  // Print Jobs\n  getPrintJobs(): Promise<PrintJob[]>;\n  getPrintJob(id: string): Promise<PrintJob | undefined>;\n  getPrintJobsByPrinter(printerId: string): Promise<PrintJob[]>;\n  getPrintJobsByUser(userId: string): Promise<PrintJob[]>;\n  createPrintJob(job: InsertPrintJob): Promise<PrintJob>;\n  updatePrintJobStatus(id: string, status: string): Promise<PrintJob>;\n  \n  // Label Templates\n  getLabelTemplates(): Promise<LabelTemplate[]>;\n  getLabelTemplate(id: string): Promise<LabelTemplate | undefined>;\n  createLabelTemplate(template: InsertLabelTemplate): Promise<LabelTemplate>;\n  // Users (Replit Auth compatible)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Products\n  getProducts(): Promise<Product[]>;\n  getProduct(id: string): Promise<Product | undefined>;\n  getProductBySku(sku: string): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: string, product: Partial<InsertProduct>): Promise<Product>;\n  deleteProduct(id: string): Promise<void>;\n  searchProducts(query: string): Promise<Product[]>;\n  \n  // Inventory\n  getInventory(): Promise<(Inventory & { product: Product })[]>;\n  getInventoryByProduct(productId: string): Promise<Inventory | undefined>;\n  updateInventory(productId: string, inventory: Partial<InsertInventory>): Promise<Inventory>;\n  \n  // Distributors\n  getDistributors(): Promise<Distributor[]>;\n  getDistributor(id: string): Promise<Distributor | undefined>;\n  createDistributor(distributor: InsertDistributor): Promise<Distributor>;\n  updateDistributor(id: string, distributor: Partial<InsertDistributor>): Promise<Distributor>;\n  getDistributorsByRegion(region: string): Promise<Distributor[]>;\n  \n  // Orders\n  getOrders(): Promise<(Order & { distributor: Distributor })[]>;\n  getOrder(id: string): Promise<(Order & { distributor: Distributor; items: (OrderItem & { product: Product })[] }) | undefined>;\n  createOrder(order: InsertOrder): Promise<Order>;\n  updateOrderStatus(id: string, status: string): Promise<Order>;\n  getOrdersByDistributor(distributorId: string): Promise<Order[]>;\n  \n  // Production Schedule\n  getProductionSchedule(): Promise<(ProductionSchedule & { product: Product })[]>;\n  createProductionSchedule(schedule: InsertProductionSchedule): Promise<ProductionSchedule>;\n  updateProductionSchedule(id: string, schedule: Partial<InsertProductionSchedule>): Promise<ProductionSchedule>;\n  getProductionScheduleByDate(startDate: Date, endDate: Date): Promise<(ProductionSchedule & { product: Product })[]>;\n  \n  // Demand Forecast\n  getDemandForecast(productId?: string, region?: string): Promise<(DemandForecast & { product: Product })[]>;\n  createDemandForecast(forecast: InsertDemandForecast): Promise<DemandForecast>;\n  \n  // Sales Metrics\n  getSalesMetrics(startDate?: Date, endDate?: Date, region?: string): Promise<SalesMetrics[]>;\n  createSalesMetrics(metrics: InsertSalesMetrics): Promise<SalesMetrics>;\n  getSalesMetricsByRegion(): Promise<{ region: string; revenue: string; units: number }[]>;\n  getTopProducts(limit?: number): Promise<{ product: Product; revenue: string; units: number }[]>;\n  \n  // Brands\n  getBrands(): Promise<Brand[]>;\n  createBrand(brand: InsertBrand): Promise<Brand>;\n  \n  // Sales Reps\n  getSalesReps(): Promise<SalesRep[]>;\n  getSalesRep(id: string): Promise<SalesRep | undefined>;\n  createSalesRep(rep: InsertSalesRep): Promise<SalesRep>;\n  \n  // Hardware Stores\n  getHardwareStores(): Promise<HardwareStore[]>;\n  getHardwareStore(id: string): Promise<HardwareStore | undefined>;\n  createHardwareStore(store: InsertHardwareStore): Promise<HardwareStore>;\n  getHardwareStoresByProvince(province: string): Promise<HardwareStore[]>;\n  \n  // Route Plans\n  getRoutePlans(): Promise<(RoutePlan & { salesRep: SalesRep })[]>;\n  getRoutePlan(id: string): Promise<(RoutePlan & { salesRep: SalesRep; routeStores: (RouteStore & { hardwareStore: HardwareStore })[] }) | undefined>;\n  createRoutePlan(route: InsertRoutePlan): Promise<RoutePlan>;\n  \n  // AI Order Suggestions\n  getAiOrderSuggestions(): Promise<(AiOrderSuggestion & { hardwareStore: HardwareStore; product: Product })[]>;\n  createAiOrderSuggestion(suggestion: InsertAiOrderSuggestion): Promise<AiOrderSuggestion>;\n  \n  // Store Visits\n  getStoreVisits(): Promise<(StoreVisit & { hardwareStore: HardwareStore; salesRep: SalesRep })[]>;\n  createStoreVisit(visit: InsertStoreVisit): Promise<StoreVisit>;\n  \n  // Factory Setups\n  getFactorySetups(): Promise<FactorySetup[]>;\n  getFactorySetup(id: string): Promise<FactorySetup | undefined>;\n  createFactorySetup(factory: InsertFactorySetup): Promise<FactorySetup>;\n  updateFactorySetup(id: string, factory: Partial<InsertFactorySetup>): Promise<FactorySetup>;\n  \n  // AI Insights\n  getAiInsights(factoryId?: string): Promise<AiInsight[]>;\n  createAiInsight(insight: InsertAiInsight): Promise<AiInsight>;\n\n  // Bulk Import Sessions\n  getImportSessions(): Promise<BulkImportSession[]>;\n  getImportSession(id: string): Promise<BulkImportSession | undefined>;\n  createImportSession(session: InsertBulkImportSession): Promise<BulkImportSession>;\n  updateImportSession(id: string, updates: Partial<InsertBulkImportSession>): Promise<BulkImportSession>;\n  addFileToImportSession(sessionId: string, file: any): Promise<void>;\n  updateFileInImportSession(sessionId: string, fileId: string, updates: any): Promise<void>;\n  processHardwareStoreRow(row: any, filename: string): Promise<any>;\n  \n  // Production Metrics\n  getProductionMetrics(factoryId: string): Promise<ProductionMetrics[]>;\n  createProductionMetrics(metrics: InsertProductionMetrics): Promise<ProductionMetrics>;\n  \n  // Factory Recommendations\n  getFactoryRecommendations(factoryId: string): Promise<FactoryRecommendation[]>;\n  createFactoryRecommendation(recommendation: InsertFactoryRecommendation): Promise<FactoryRecommendation>;\n  \n  // Extended Automation\n  getAutomationRules(): Promise<AutomationRule[]>;\n  getAutomationRule(id: string): Promise<AutomationRule | undefined>;\n  createAutomationRule(rule: InsertAutomationRule): Promise<AutomationRule>;\n  updateAutomationRule(id: string, updates: Partial<AutomationRule>): Promise<AutomationRule>;\n  \n  getAutomationEvents(): Promise<AutomationEvent[]>;\n  createAutomationEvent(event: InsertAutomationEvent): Promise<AutomationEvent>;\n  \n  getMaintenanceSchedules(): Promise<MaintenanceSchedule[]>;\n  createMaintenanceSchedule(schedule: InsertMaintenanceSchedule): Promise<MaintenanceSchedule>;\n  \n  // Purchase Order System\n  getPurchaseOrders(): Promise<(PurchaseOrder & { items?: PurchaseOrderItem[] })[]>;\n  getPurchaseOrder(id: string): Promise<(PurchaseOrder & { \n    items: (PurchaseOrderItem & { product: Product })[];\n    statusHistory: PoStatusHistory[];\n    documents: PoDocument[];\n  }) | undefined>;\n  createPurchaseOrder(order: InsertPurchaseOrder): Promise<PurchaseOrder>;\n  updatePurchaseOrder(id: string, order: Partial<InsertPurchaseOrder>): Promise<PurchaseOrder>;\n  addPurchaseOrderItem(item: InsertPurchaseOrderItem): Promise<PurchaseOrderItem>;\n  updatePurchaseOrderStatus(id: string, status: string, userId?: string, reason?: string, notes?: string): Promise<PurchaseOrder>;\n  generatePONumber(): Promise<string>;\n  getPurchaseOrdersByStatus(status: string): Promise<PurchaseOrder[]>;\n  getPurchaseOrdersByDateRange(startDate: Date, endDate: Date): Promise<PurchaseOrder[]>;\n  searchPurchaseOrders(query: string): Promise<PurchaseOrder[]>;\n  addStatusHistory(history: InsertPoStatusHistory): Promise<PoStatusHistory>;\n  addDocument(document: InsertPoDocument): Promise<PoDocument>;\n\n  // Logistics Integration (SA Partners)\n  getLogisticsPartners(): Promise<any[]>;\n  getLogisticsBrands(): Promise<any[]>;\n\n  // Bulk Import Sessions\n  getBulkImportSessions(): Promise<BulkImportSession[]>;\n  getBulkImportSession(sessionId: string): Promise<BulkImportSession | undefined>;\n  createBulkImportSession(session: InsertBulkImportSession): Promise<BulkImportSession>;\n  updateBulkImportSession(sessionId: string, session: BulkImportSession): Promise<BulkImportSession>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  // Products\n  async getProducts(): Promise<Product[]> {\n    return await db.select().from(products).where(eq(products.isActive, true)).orderBy(asc(products.category), asc(products.sku));\n  }\n\n  async getProduct(id: string): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.id, id));\n    return product || undefined;\n  }\n\n  async getProductBySku(sku: string): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.sku, sku));\n    return product || undefined;\n  }\n\n  async createProduct(product: InsertProduct): Promise<Product> {\n    const [newProduct] = await db.insert(products).values(product).returning();\n    \n    // Create initial inventory record\n    await db.insert(inventory).values({\n      productId: newProduct.id,\n      currentStock: 0,\n      reservedStock: 0,\n      reorderPoint: 100,\n      maxStock: 10000,\n    });\n    \n    return newProduct;\n  }\n\n  async updateProduct(id: string, product: Partial<InsertProduct>): Promise<Product> {\n    const [updated] = await db.update(products).set(product).where(eq(products.id, id)).returning();\n    return updated;\n  }\n\n  async deleteProduct(id: string): Promise<void> {\n    await db.update(products).set({ isActive: false }).where(eq(products.id, id));\n  }\n\n  async searchProducts(query: string): Promise<Product[]> {\n    return await db.select().from(products)\n      .where(\n        and(\n          eq(products.isActive, true),\n          or(\n            ilike(products.name, `%${query}%`),\n            ilike(products.sku, `%${query}%`),\n            ilike(products.description, `%${query}%`)\n          )\n        )\n      );\n  }\n\n  // Inventory\n  async getInventory(): Promise<(Inventory & { product: Product })[]> {\n    const result = await db.select()\n      .from(inventory)\n      .innerJoin(products, eq(inventory.productId, products.id))\n      .where(eq(products.isActive, true));\n    \n    return result.map(row => ({\n      ...row.inventory,\n      product: row.products\n    }));\n  }\n\n  async getInventoryByProduct(productId: string): Promise<Inventory | undefined> {\n    const [inv] = await db.select().from(inventory).where(eq(inventory.productId, productId));\n    return inv || undefined;\n  }\n\n  async updateInventory(productId: string, inventoryUpdate: Partial<InsertInventory>): Promise<Inventory> {\n    const [updated] = await db.update(inventory)\n      .set({ ...inventoryUpdate, updatedAt: new Date() })\n      .where(eq(inventory.productId, productId))\n      .returning();\n    return updated;\n  }\n\n  // Distributors\n  async getDistributors(): Promise<Distributor[]> {\n    return await db.select().from(distributors).orderBy(asc(distributors.name));\n  }\n\n  async getDistributor(id: string): Promise<Distributor | undefined> {\n    const [distributor] = await db.select().from(distributors).where(eq(distributors.id, id));\n    return distributor || undefined;\n  }\n\n  async createDistributor(distributor: InsertDistributor): Promise<Distributor> {\n    const [newDistributor] = await db.insert(distributors).values(distributor).returning();\n    return newDistributor;\n  }\n\n  async updateDistributor(id: string, distributor: Partial<InsertDistributor>): Promise<Distributor> {\n    const [updated] = await db.update(distributors).set(distributor).where(eq(distributors.id, id)).returning();\n    return updated;\n  }\n\n  async getDistributorsByRegion(region: string): Promise<Distributor[]> {\n    return await db.select().from(distributors).where(eq(distributors.region, region));\n  }\n\n  // Orders\n  async getOrders(): Promise<(Order & { distributor: Distributor })[]> {\n    const result = await db.select()\n      .from(orders)\n      .innerJoin(distributors, eq(orders.distributorId, distributors.id))\n      .orderBy(desc(orders.createdAt));\n    \n    return result.map(row => ({\n      ...row.orders,\n      distributor: row.distributors\n    }));\n  }\n\n  async getOrder(id: string): Promise<(Order & { distributor: Distributor; items: (OrderItem & { product: Product })[] }) | undefined> {\n    const [order] = await db.select()\n      .from(orders)\n      .innerJoin(distributors, eq(orders.distributorId, distributors.id))\n      .where(eq(orders.id, id));\n\n    if (!order) return undefined;\n\n    const items = await db.select()\n      .from(orderItems)\n      .innerJoin(products, eq(orderItems.productId, products.id))\n      .where(eq(orderItems.orderId, id));\n\n    return {\n      ...order.orders,\n      distributor: order.distributors,\n      items: items.map(item => ({\n        ...item.order_items,\n        product: item.products\n      }))\n    };\n  }\n\n  async createOrder(order: InsertOrder): Promise<Order> {\n    const [newOrder] = await db.insert(orders).values(order).returning();\n    return newOrder;\n  }\n\n  async updateOrderStatus(id: string, status: string): Promise<Order> {\n    const [updated] = await db.update(orders).set({ status }).where(eq(orders.id, id)).returning();\n    return updated;\n  }\n\n  async getOrdersByDistributor(distributorId: string): Promise<Order[]> {\n    return await db.select().from(orders).where(eq(orders.distributorId, distributorId));\n  }\n\n  // Production Schedule\n  async getProductionSchedule(): Promise<(ProductionSchedule & { product: Product })[]> {\n    const result = await db.select()\n      .from(productionSchedule)\n      .innerJoin(products, eq(productionSchedule.productId, products.id))\n      .orderBy(asc(productionSchedule.scheduledDate));\n    \n    return result.map(row => ({\n      ...row.production_schedule,\n      product: row.products\n    }));\n  }\n\n  async createProductionSchedule(schedule: InsertProductionSchedule): Promise<ProductionSchedule> {\n    const [newSchedule] = await db.insert(productionSchedule).values(schedule).returning();\n    return newSchedule;\n  }\n\n  async updateProductionSchedule(id: string, schedule: Partial<InsertProductionSchedule>): Promise<ProductionSchedule> {\n    const [updated] = await db.update(productionSchedule).set(schedule).where(eq(productionSchedule.id, id)).returning();\n    return updated;\n  }\n\n  async getProductionScheduleByDate(startDate: Date, endDate: Date): Promise<(ProductionSchedule & { product: Product })[]> {\n    const result = await db.select()\n      .from(productionSchedule)\n      .innerJoin(products, eq(productionSchedule.productId, products.id))\n      .where(\n        and(\n          gte(productionSchedule.scheduledDate, startDate),\n          lte(productionSchedule.scheduledDate, endDate)\n        )\n      )\n      .orderBy(asc(productionSchedule.scheduledDate));\n    \n    return result.map(row => ({\n      ...row.production_schedule,\n      product: row.products\n    }));\n  }\n\n  // Demand Forecast\n  async getDemandForecast(productId?: string, region?: string): Promise<(DemandForecast & { product: Product })[]> {\n    let query = db.select()\n      .from(demandForecast)\n      .innerJoin(products, eq(demandForecast.productId, products.id));\n\n    const conditions = [];\n    if (productId) conditions.push(eq(demandForecast.productId, productId));\n    if (region) conditions.push(eq(demandForecast.region, region));\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    const result = await query.orderBy(desc(demandForecast.forecastDate));\n    \n    return result.map(row => ({\n      ...row.demand_forecast,\n      product: row.products\n    }));\n  }\n\n  async createDemandForecast(forecast: InsertDemandForecast): Promise<DemandForecast> {\n    const [newForecast] = await db.insert(demandForecast).values(forecast).returning();\n    return newForecast;\n  }\n\n  // Sales Metrics\n  async getSalesMetrics(startDate?: Date, endDate?: Date, region?: string): Promise<SalesMetrics[]> {\n    let query = db.select().from(salesMetrics);\n\n    const conditions = [];\n    if (startDate) conditions.push(gte(salesMetrics.date, startDate));\n    if (endDate) conditions.push(lte(salesMetrics.date, endDate));\n    if (region) conditions.push(eq(salesMetrics.region, region));\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    return await query.orderBy(desc(salesMetrics.date));\n  }\n\n  async createSalesMetrics(metrics: InsertSalesMetrics): Promise<SalesMetrics> {\n    const [newMetrics] = await db.insert(salesMetrics).values(metrics).returning();\n    return newMetrics;\n  }\n\n  async getSalesMetricsByRegion(): Promise<{ region: string; revenue: string; units: number }[]> {\n    return await db.select({\n      region: salesMetrics.region,\n      revenue: sql<string>`sum(${salesMetrics.revenue})`,\n      units: sql<number>`sum(${salesMetrics.units})`\n    })\n    .from(salesMetrics)\n    .groupBy(salesMetrics.region);\n  }\n\n  async getTopProducts(limit: number = 10): Promise<{ product: Product; revenue: string; units: number }[]> {\n    return await db.select({\n      product: products,\n      revenue: sql<string>`sum(${salesMetrics.revenue})`,\n      units: sql<number>`sum(${salesMetrics.units})`\n    })\n    .from(salesMetrics)\n    .innerJoin(products, eq(salesMetrics.productId, products.id))\n    .groupBy(products.id)\n    .orderBy(desc(sql`sum(${salesMetrics.revenue})`))\n    .limit(limit);\n  }\n\n  // Brands\n  async getBrands(): Promise<Brand[]> {\n    return await db.select().from(brands).where(eq(brands.isActive, true)).orderBy(asc(brands.name));\n  }\n\n  async createBrand(brand: InsertBrand): Promise<Brand> {\n    const [newBrand] = await db.insert(brands).values(brand).returning();\n    return newBrand;\n  }\n\n  // Sales Reps\n  async getSalesReps(): Promise<SalesRep[]> {\n    return await db.select().from(salesReps).where(eq(salesReps.isActive, true)).orderBy(asc(salesReps.firstName));\n  }\n\n  async getSalesRep(id: string): Promise<SalesRep | undefined> {\n    const [rep] = await db.select().from(salesReps).where(eq(salesReps.id, id));\n    return rep || undefined;\n  }\n\n  async createSalesRep(rep: InsertSalesRep): Promise<SalesRep> {\n    const [newRep] = await db.insert(salesReps).values(rep).returning();\n    return newRep;\n  }\n\n  // Hardware Stores\n  async getHardwareStores(): Promise<HardwareStore[]> {\n    return await db.select().from(hardwareStores).where(eq(hardwareStores.isActive, true)).orderBy(asc(hardwareStores.storeName));\n  }\n\n  async getHardwareStore(id: string): Promise<HardwareStore | undefined> {\n    const [store] = await db.select().from(hardwareStores).where(eq(hardwareStores.id, id));\n    return store || undefined;\n  }\n\n  async createHardwareStore(store: InsertHardwareStore): Promise<HardwareStore> {\n    const [newStore] = await db.insert(hardwareStores).values(store).returning();\n    return newStore;\n  }\n\n  async getHardwareStoresByProvince(province: string): Promise<HardwareStore[]> {\n    return await db.select().from(hardwareStores)\n      .where(and(eq(hardwareStores.province, province), eq(hardwareStores.isActive, true)))\n      .orderBy(asc(hardwareStores.storeName));\n  }\n\n  // Route Plans\n  async getRoutePlans(): Promise<(RoutePlan & { salesRep: SalesRep })[]> {\n    const result = await db.select()\n      .from(routePlans)\n      .innerJoin(salesReps, eq(routePlans.salesRepId, salesReps.id))\n      .where(eq(routePlans.isActive, true))\n      .orderBy(asc(routePlans.routeName));\n    \n    return result.map(row => ({\n      ...row.route_plans,\n      salesRep: row.sales_reps\n    }));\n  }\n\n  async getRoutePlan(id: string): Promise<(RoutePlan & { salesRep: SalesRep; routeStores: (RouteStore & { hardwareStore: HardwareStore })[] }) | undefined> {\n    const [route] = await db.select()\n      .from(routePlans)\n      .innerJoin(salesReps, eq(routePlans.salesRepId, salesReps.id))\n      .where(eq(routePlans.id, id));\n    \n    if (!route) return undefined;\n\n    const stores = await db.select()\n      .from(routeStores)\n      .innerJoin(hardwareStores, eq(routeStores.hardwareStoreId, hardwareStores.id))\n      .where(eq(routeStores.routePlanId, id))\n      .orderBy(asc(routeStores.visitOrder));\n\n    return {\n      ...route.route_plans,\n      salesRep: route.sales_reps,\n      routeStores: stores.map(s => ({ ...s.route_stores, hardwareStore: s.hardware_stores }))\n    };\n  }\n\n  async createRoutePlan(route: InsertRoutePlan): Promise<RoutePlan> {\n    const [newRoute] = await db.insert(routePlans).values(route).returning();\n    return newRoute;\n  }\n\n  // AI Order Suggestions\n  async getAiOrderSuggestions(): Promise<(AiOrderSuggestion & { hardwareStore: HardwareStore; product: Product })[]> {\n    const result = await db.select()\n      .from(aiOrderSuggestions)\n      .innerJoin(hardwareStores, eq(aiOrderSuggestions.hardwareStoreId, hardwareStores.id))\n      .innerJoin(products, eq(aiOrderSuggestions.productId, products.id))\n      .where(eq(aiOrderSuggestions.status, 'pending'))\n      .orderBy(desc(aiOrderSuggestions.confidence));\n    \n    return result.map(row => ({\n      ...row.ai_order_suggestions,\n      hardwareStore: row.hardware_stores,\n      product: row.products\n    }));\n  }\n\n  async createAiOrderSuggestion(suggestion: InsertAiOrderSuggestion): Promise<AiOrderSuggestion> {\n    const [newSuggestion] = await db.insert(aiOrderSuggestions).values(suggestion).returning();\n    return newSuggestion;\n  }\n\n  // Store Visits\n  async getStoreVisits(): Promise<(StoreVisit & { hardwareStore: HardwareStore; salesRep: SalesRep })[]> {\n    const result = await db.select()\n      .from(storeVisits)\n      .innerJoin(hardwareStores, eq(storeVisits.hardwareStoreId, hardwareStores.id))\n      .innerJoin(salesReps, eq(storeVisits.salesRepId, salesReps.id))\n      .orderBy(desc(storeVisits.visitDate));\n    \n    return result.map(row => ({\n      ...row.store_visits,\n      hardwareStore: row.hardware_stores,\n      salesRep: row.sales_reps\n    }));\n  }\n\n  async createStoreVisit(visit: InsertStoreVisit): Promise<StoreVisit> {\n    const [newVisit] = await db.insert(storeVisits).values(visit).returning();\n    return newVisit;\n  }\n\n  // Factory Setups\n  async getFactorySetups(): Promise<FactorySetup[]> {\n    return await db.select().from(factorySetups).where(eq(factorySetups.isActive, true)).orderBy(desc(factorySetups.createdAt));\n  }\n\n  async getFactorySetup(id: string): Promise<FactorySetup | undefined> {\n    const [factory] = await db.select().from(factorySetups).where(eq(factorySetups.id, id));\n    return factory || undefined;\n  }\n\n  async createFactorySetup(factory: InsertFactorySetup): Promise<FactorySetup> {\n    const [newFactory] = await db.insert(factorySetups).values(factory).returning();\n    return newFactory;\n  }\n\n  async updateFactorySetup(id: string, factory: Partial<InsertFactorySetup>): Promise<FactorySetup> {\n    const [updatedFactory] = await db.update(factorySetups)\n      .set({ ...factory, updatedAt: new Date() })\n      .where(eq(factorySetups.id, id))\n      .returning();\n    return updatedFactory;\n  }\n\n  // AI Insights\n  async getAiInsights(factoryId?: string): Promise<AiInsight[]> {\n    let query = db.select().from(aiInsights);\n    if (factoryId) {\n      query = query.where(eq(aiInsights.factoryId, factoryId));\n    }\n    return await query.orderBy(desc(aiInsights.createdAt));\n  }\n\n  async createAiInsight(insight: InsertAiInsight): Promise<AiInsight> {\n    const [newInsight] = await db.insert(aiInsights).values(insight).returning();\n    return newInsight;\n  }\n\n  // Production Metrics\n  async getProductionMetrics(factoryId: string): Promise<ProductionMetrics[]> {\n    return await db.select().from(productionMetrics)\n      .where(eq(productionMetrics.factoryId, factoryId))\n      .orderBy(desc(productionMetrics.metricDate));\n  }\n\n  async createProductionMetrics(metrics: InsertProductionMetrics): Promise<ProductionMetrics> {\n    const [newMetrics] = await db.insert(productionMetrics).values(metrics).returning();\n    return newMetrics;\n  }\n\n  // Factory Recommendations\n  async getFactoryRecommendations(factoryId: string): Promise<FactoryRecommendation[]> {\n    return await db.select().from(factoryRecommendations)\n      .where(eq(factoryRecommendations.factoryId, factoryId))\n      .orderBy(desc(factoryRecommendations.createdAt));\n  }\n\n  async createFactoryRecommendation(recommendation: InsertFactoryRecommendation): Promise<FactoryRecommendation> {\n    const [newRecommendation] = await db.insert(factoryRecommendations).values(recommendation).returning();\n    return newRecommendation;\n  }\n\n  // Extended Automation\n  async getAutomationRules(): Promise<AutomationRule[]> {\n    return await db.select().from(automationRules)\n      .orderBy(desc(automationRules.priority), desc(automationRules.createdAt));\n  }\n\n  async getAutomationRule(id: string): Promise<AutomationRule | undefined> {\n    const [rule] = await db.select().from(automationRules).where(eq(automationRules.id, id));\n    return rule || undefined;\n  }\n\n  async createAutomationRule(rule: InsertAutomationRule): Promise<AutomationRule> {\n    const [newRule] = await db.insert(automationRules).values(rule).returning();\n    return newRule;\n  }\n\n  async updateAutomationRule(id: string, updates: Partial<AutomationRule>): Promise<AutomationRule> {\n    const [updated] = await db.update(automationRules)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(eq(automationRules.id, id))\n      .returning();\n    return updated;\n  }\n\n  async getAutomationEvents(): Promise<AutomationEvent[]> {\n    return await db.select().from(automationEvents)\n      .orderBy(desc(automationEvents.createdAt));\n  }\n\n  async createAutomationEvent(event: InsertAutomationEvent): Promise<AutomationEvent> {\n    const [newEvent] = await db.insert(automationEvents).values(event).returning();\n    return newEvent;\n  }\n\n  async getMaintenanceSchedules(): Promise<MaintenanceSchedule[]> {\n    return await db.select().from(maintenanceSchedules)\n      .orderBy(asc(maintenanceSchedules.scheduledDate));\n  }\n\n  async createMaintenanceSchedule(schedule: InsertMaintenanceSchedule): Promise<MaintenanceSchedule> {\n    const [newSchedule] = await db.insert(maintenanceSchedules).values(schedule).returning();\n    return newSchedule;\n  }\n\n  // Excel Upload - Synchronized with Hardware Store Directory\n  async getExcelUploads(): Promise<any[]> {\n    return await db.select().from(excelUploads)\n      .orderBy(desc(excelUploads.uploadedAt));\n  }\n\n  async createExcelUpload(upload: any): Promise<any> {\n    const [newUpload] = await db.insert(excelUploads).values(upload).returning();\n    return newUpload;\n  }\n\n  async updateExcelUpload(id: string, updates: any): Promise<any> {\n    const [updated] = await db.update(excelUploads)\n      .set(updates)\n      .where(eq(excelUploads.id, id))\n      .returning();\n    return updated;\n  }\n\n  async createHardwareStoreFromExcel(store: any): Promise<any> {\n    const [newStore] = await db.insert(hardwareStoresFromExcel).values(store).returning();\n    \n    // Sync with main hardware stores table for 24/7 balance\n    await this.syncStoreToMainDirectory(newStore);\n    \n    return newStore;\n  }\n\n  async createSalesRepRouteFromExcel(route: any): Promise<any> {\n    const [newRoute] = await db.insert(salesRepRoutesFromExcel).values(route).returning();\n    \n    // Sync with main routes table for 24/7 balance\n    await this.syncRouteToMainDirectory(newRoute);\n    \n    return newRoute;\n  }\n\n  async getHardwareStoresFromExcel(): Promise<any[]> {\n    return await db.select().from(hardwareStoresFromExcel)\n      .orderBy(desc(hardwareStoresFromExcel.createdAt));\n  }\n\n  async getSalesRepRoutesFromExcel(): Promise<any[]> {\n    return await db.select().from(salesRepRoutesFromExcel)\n      .orderBy(desc(salesRepRoutesFromExcel.createdAt));\n  }\n\n  // Public sync methods for API access\n  async syncStoreToMainDirectory(excelStore: any): Promise<void> {\n    try {\n      // Check if store already exists in main directory\n      const existingStore = await db.select()\n        .from(hardwareStores)\n        .where(eq(hardwareStores.storeName, excelStore.storeName))\n        .limit(1);\n\n      if (existingStore.length === 0) {\n        // Create new store in main directory\n        await db.insert(hardwareStores).values({\n          name: excelStore.storeName,\n          address: excelStore.storeAddress,\n          city: excelStore.cityTown,\n          province: excelStore.province,\n          contactPerson: excelStore.contactPerson,\n          phoneNumber: excelStore.phoneNumber,\n          size: 'medium', // Default value\n          creditRating: 'good', // Default value\n          region: excelStore.province,\n          gpsCoordinates: '', // Will be filled later\n          lastVisitDate: null,\n          preferredVisitDay: 'monday',\n          notes: `Imported from Excel: ${excelStore.mappedToCornex}`\n        });\n      }\n    } catch (error) {\n      console.error('Error syncing store to main directory:', error);\n    }\n  }\n\n  async syncRouteToMainDirectory(excelRoute: any): Promise<void> {\n    try {\n      // Check if rep exists\n      let rep = await db.select()\n        .from(salesReps)\n        .where(eq(salesReps.name, excelRoute.repName))\n        .limit(1);\n\n      if (rep.length === 0) {\n        // Create new sales rep\n        const [newRep] = await db.insert(salesReps).values({\n          name: excelRoute.repName,\n          email: `${excelRoute.repName.toLowerCase().replace(' ', '.')}@cornex.co.za`,\n          phone: '',\n          region: 'South Africa',\n          territory: excelRoute.routeName || 'General',\n          performanceRating: 85, // Default value\n          targetSales: 50000, // Default value\n          notes: `Imported from Excel: ${excelRoute.mappedToCornex}`\n        }).returning();\n        rep = [newRep];\n      }\n\n      // Create route plan if it doesn't exist\n      const existingRoute = await db.select()\n        .from(routePlans)\n        .where(eq(routePlans.name, excelRoute.routeName || `${excelRoute.repName} Route`))\n        .limit(1);\n\n      if (existingRoute.length === 0) {\n        await db.insert(routePlans).values({\n          name: excelRoute.routeName || `${excelRoute.repName} Route`,\n          salesRepId: rep[0].id,\n          description: `Auto-generated from Excel upload: ${excelRoute.mappedToCornex}`,\n          frequency: excelRoute.visitFrequency || 'weekly',\n          estimatedDuration: 480, // 8 hours default\n          optimizationScore: 75, // Default value\n          totalDistance: 0, // Will be calculated later\n          isActive: true\n        });\n      }\n    } catch (error) {\n      console.error('Error syncing route to main directory:', error);\n    }\n  }\n  \n  // Purchase Order System Implementation\n  async getPurchaseOrders(): Promise<(PurchaseOrder & { items?: PurchaseOrderItem[] })[]> {\n    const orders = await db.select().from(purchaseOrders).orderBy(desc(purchaseOrders.createdAt));\n    \n    // Get items count for each order\n    const ordersWithItems = await Promise.all(orders.map(async (order) => {\n      const items = await db.select().from(purchaseOrderItems).where(eq(purchaseOrderItems.purchaseOrderId, order.id));\n      return { ...order, items };\n    }));\n    \n    return ordersWithItems;\n  }\n\n  async getPurchaseOrder(id: string): Promise<(PurchaseOrder & { \n    items: (PurchaseOrderItem & { product: Product })[];\n    statusHistory: PoStatusHistory[];\n    documents: PoDocument[];\n  }) | undefined> {\n    const [order] = await db.select().from(purchaseOrders).where(eq(purchaseOrders.id, id));\n    if (!order) return undefined;\n\n    // Get items with product details\n    const items = await db\n      .select({\n        id: purchaseOrderItems.id,\n        purchaseOrderId: purchaseOrderItems.purchaseOrderId,\n        productId: purchaseOrderItems.productId,\n        quantity: purchaseOrderItems.quantity,\n        unitPrice: purchaseOrderItems.unitPrice,\n        lineTotal: purchaseOrderItems.lineTotal,\n        estimatedProductionTime: purchaseOrderItems.estimatedProductionTime,\n        actualProductionTime: purchaseOrderItems.actualProductionTime,\n        productionStatus: purchaseOrderItems.productionStatus,\n        customSpecifications: purchaseOrderItems.customSpecifications,\n        packagingNotes: purchaseOrderItems.packagingNotes,\n        createdAt: purchaseOrderItems.createdAt,\n        product: products\n      })\n      .from(purchaseOrderItems)\n      .leftJoin(products, eq(purchaseOrderItems.productId, products.id))\n      .where(eq(purchaseOrderItems.purchaseOrderId, id));\n\n    // Get status history\n    const statusHistory = await db\n      .select()\n      .from(poStatusHistory)\n      .where(eq(poStatusHistory.purchaseOrderId, id))\n      .orderBy(desc(poStatusHistory.timestamp));\n\n    // Get documents\n    const documents = await db\n      .select()\n      .from(poDocuments)\n      .where(eq(poDocuments.purchaseOrderId, id))\n      .orderBy(desc(poDocuments.uploadedAt));\n\n    return {\n      ...order,\n      items: items.map(item => ({ \n        ...item,\n        product: item.product!\n      })),\n      statusHistory,\n      documents\n    };\n  }\n\n  async createPurchaseOrder(order: InsertPurchaseOrder): Promise<PurchaseOrder> {\n    // Generate PO number if not provided\n    const poNumber = order.poNumber || await this.generatePONumber();\n\n    const [newOrder] = await db.insert(purchaseOrders).values({\n      ...order,\n      poNumber\n    }).returning();\n    \n    // Add initial status history\n    await this.addStatusHistory({\n      purchaseOrderId: newOrder.id,\n      newStatus: 'pending',\n      changeReason: 'Purchase order created',\n      notes: 'Initial creation of purchase order'\n    });\n\n    return newOrder;\n  }\n\n  async updatePurchaseOrder(id: string, order: Partial<InsertPurchaseOrder>): Promise<PurchaseOrder> {\n    const [updatedOrder] = await db\n      .update(purchaseOrders)\n      .set({ ...order, updatedAt: new Date() })\n      .where(eq(purchaseOrders.id, id))\n      .returning();\n    \n    return updatedOrder;\n  }\n\n  async addPurchaseOrderItem(item: InsertPurchaseOrderItem): Promise<PurchaseOrderItem> {\n    const [newItem] = await db.insert(purchaseOrderItems).values(item).returning();\n    \n    // Update order totals\n    await this.recalculateOrderTotals(item.purchaseOrderId);\n    \n    return newItem;\n  }\n\n  async updatePurchaseOrderStatus(id: string, status: string, userId?: string, reason?: string, notes?: string): Promise<PurchaseOrder> {\n    // Get current status\n    const [currentOrder] = await db.select().from(purchaseOrders).where(eq(purchaseOrders.id, id));\n    if (!currentOrder) throw new Error('Purchase order not found');\n\n    // Update status\n    const updates: any = { status, updatedAt: new Date() };\n    if (status === 'approved' && userId) {\n      updates.approvedBy = userId;\n      updates.approvedAt = new Date();\n    }\n\n    const [updatedOrder] = await db\n      .update(purchaseOrders)\n      .set(updates)\n      .where(eq(purchaseOrders.id, id))\n      .returning();\n\n    // Add status history\n    await this.addStatusHistory({\n      purchaseOrderId: id,\n      previousStatus: currentOrder.status,\n      newStatus: status,\n      changedBy: userId,\n      changeReason: reason || `Status changed to ${status}`,\n      notes\n    });\n\n    return updatedOrder;\n  }\n\n  async generatePONumber(): Promise<string> {\n    const year = new Date().getFullYear();\n    const month = (new Date().getMonth() + 1).toString().padStart(2, '0');\n    \n    // Get the last PO number for this month\n    const lastPO = await db\n      .select()\n      .from(purchaseOrders)\n      .where(sql`po_number LIKE ${`PO-${year}${month}%`}`)\n      .orderBy(desc(purchaseOrders.poNumber))\n      .limit(1);\n\n    let nextSequence = 1;\n    if (lastPO.length > 0) {\n      const lastSequence = parseInt(lastPO[0].poNumber.split('-')[2]) || 0;\n      nextSequence = lastSequence + 1;\n    }\n\n    return `PO-${year}${month}-${nextSequence.toString().padStart(4, '0')}`;\n  }\n\n  async getPurchaseOrdersByStatus(status: string): Promise<PurchaseOrder[]> {\n    return await db.select().from(purchaseOrders).where(eq(purchaseOrders.status, status)).orderBy(desc(purchaseOrders.createdAt));\n  }\n\n  async getPurchaseOrdersByDateRange(startDate: Date, endDate: Date): Promise<PurchaseOrder[]> {\n    return await db\n      .select()\n      .from(purchaseOrders)\n      .where(and(\n        gte(purchaseOrders.orderDate, startDate),\n        lte(purchaseOrders.orderDate, endDate)\n      ))\n      .orderBy(desc(purchaseOrders.createdAt));\n  }\n\n  async searchPurchaseOrders(query: string): Promise<PurchaseOrder[]> {\n    return await db\n      .select()\n      .from(purchaseOrders)\n      .where(or(\n        ilike(purchaseOrders.poNumber, `%${query}%`),\n        ilike(purchaseOrders.customerName, `%${query}%`),\n        ilike(purchaseOrders.customerEmail, `%${query}%`)\n      ))\n      .orderBy(desc(purchaseOrders.createdAt));\n  }\n\n  async addStatusHistory(history: InsertPoStatusHistory): Promise<PoStatusHistory> {\n    const [newHistory] = await db.insert(poStatusHistory).values(history).returning();\n    return newHistory;\n  }\n\n  async addDocument(document: InsertPoDocument): Promise<PoDocument> {\n    const [newDocument] = await db.insert(poDocuments).values(document).returning();\n    return newDocument;\n  }\n\n  // Helper method to recalculate order totals\n  private async recalculateOrderTotals(orderId: string): Promise<void> {\n    const items = await db.select().from(purchaseOrderItems).where(eq(purchaseOrderItems.purchaseOrderId, orderId));\n    \n    const subtotal = items.reduce((sum, item) => sum + parseFloat(item.lineTotal.toString()), 0);\n    const taxAmount = subtotal * 0.15; // 15% VAT\n    const total = subtotal + taxAmount;\n\n    await db\n      .update(purchaseOrders)\n      .set({\n        subtotal: subtotal.toString(),\n        taxAmount: taxAmount.toString(),\n        totalAmount: total.toString(),\n        updatedAt: new Date()\n      })\n      .where(eq(purchaseOrders.id, orderId));\n  }\n  // Logistics Integration - South African Partners\n  async getLogisticsPartners(): Promise<any[]> {\n    // Return strategic South African logistics partners\n    return [\n      {\n        id: \"unitrans-africa\",\n        name: \"Unitrans Africa\",\n        type: \"freight\",\n        logo: \"ðŸš›\",\n        coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Free State\", \"Eastern Cape\"],\n        services: [\"Heavy Freight\", \"Supply Chain\", \"Warehousing\", \"Cross-border\"],\n        pricing: { base: 150, perKm: 12.50, currency: \"ZAR\" },\n        reliability: 94,\n        integration: \"active\",\n        contactInfo: {\n          phone: \"+27 11 451 1700\",\n          email: \"info@unitransafrica.com\",\n          website: \"https://unitransafrica.com\"\n        }\n      },\n      {\n        id: \"imperial-logistics\",\n        name: \"Imperial Logistics (DP World)\",\n        type: \"freight\",\n        logo: \"ðŸŒ\",\n        coverage: [\"National Coverage\", \"SADC Region\", \"Global Network\"],\n        services: [\"End-to-end Logistics\", \"Distribution\", \"Supply Chain Solutions\"],\n        pricing: { base: 200, perKm: 15.75, currency: \"ZAR\" },\n        reliability: 96,\n        integration: \"testing\",\n        contactInfo: {\n          phone: \"+27 11 739 4000\",\n          email: \"logistics@imperial.co.za\",\n          website: \"https://imperiallogistics.com\"\n        }\n      },\n      {\n        id: \"postnet-aramex\",\n        name: \"PostNet (Aramex Network)\",\n        type: \"courier\",\n        logo: \"ðŸ“®\",\n        coverage: [\"496 Locations\", \"National Network\", \"50km Radius Major Centers\"],\n        services: [\"Same-day Delivery\", \"PostNet2PostNet\", \"International Express\"],\n        pricing: { base: 89.99, perKm: 2.50, currency: \"ZAR\" },\n        reliability: 91,\n        integration: \"active\",\n        contactInfo: {\n          phone: \"0860 767 8638\",\n          email: \"support@postnet.co.za\",\n          website: \"https://postnet.co.za\"\n        }\n      },\n      {\n        id: \"shaft-packaging\",\n        name: \"Shaft Packaging\",\n        type: \"packaging\",\n        logo: \"ðŸ“¦\",\n        coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\"],\n        services: [\"Packaging Solutions\", \"Custom Design\", \"Nationwide Delivery\"],\n        pricing: { base: 75, perKm: 1.25, currency: \"ZAR\" },\n        reliability: 89,\n        integration: \"planned\",\n        contactInfo: {\n          phone: \"+27 11 608 1221\",\n          email: \"info@shaftpackaging.co.za\",\n          website: \"https://shaftpackaging.co.za\"\n        }\n      },\n      {\n        id: \"polyoak-packaging\",\n        name: \"Polyoak Packaging\",\n        type: \"packaging\",\n        logo: \"ðŸ­\",\n        coverage: [\"40+ Manufacturing Plants\", \"Southern Africa\", \"Multi-location\"],\n        services: [\"Rigid Plastic Packaging\", \"Food & Beverage\", \"Industrial\"],\n        pricing: { base: 125, perKm: 3.75, currency: \"ZAR\" },\n        reliability: 93,\n        integration: \"testing\",\n        contactInfo: {\n          phone: \"+27 21 951 8000\",\n          email: \"info@polyoakpackaging.co.za\",\n          website: \"https://polyoakpackaging.co.za\"\n        }\n      }\n    ];\n  }\n\n  async getLogisticsBrands(): Promise<any[]> {\n    // Return CornexConnect logistics brands integrated with SA partners\n    return [\n      {\n        id: \"routemesh-sa\",\n        name: \"RouteMeshâ„¢ SA\",\n        purpose: \"Route Optimization for Hardware Store Distribution\",\n        icon: \"ðŸ—ºï¸\",\n        partners: [\"unitrans-africa\", \"imperial-logistics\"],\n        status: \"operational\",\n        capabilities: [\n          \"8500+ Hardware Store Network\",\n          \"AI-Powered Route Planning\",\n          \"Real-time Traffic Integration\",\n          \"Multi-stop Optimization\"\n        ],\n        metrics: {\n          volume: \"12,500 deliveries/month\",\n          efficiency: 87,\n          coverage: \"9 Provinces\"\n        }\n      },\n      {\n        id: \"cratelogic-connect\",\n        name: \"CrateLogicâ„¢ Connect\",\n        purpose: \"Smart Container Management for EPS/BR XPS Products\",\n        icon: \"ðŸ“¦\",\n        partners: [\"shaft-packaging\", \"polyoak-packaging\"],\n        status: \"development\",\n        capabilities: [\n          \"Temperature-Controlled Containers\",\n          \"IoT Tracking Integration\",\n          \"Custom Packaging Design\",\n          \"Inventory Auto-reorder\"\n        ],\n        metrics: {\n          volume: \"31 SKUs managed\",\n          efficiency: 92,\n          coverage: \"Major Distribution Centers\"\n        }\n      },\n      {\n        id: \"deliveryx-network\",\n        name: \"DeliveryXâ„¢ Network\",\n        purpose: \"Last-Mile Delivery for Construction Materials\",\n        icon: \"ðŸš€\",\n        partners: [\"postnet-aramex\"],\n        status: \"development\",\n        capabilities: [\n          \"Same-day Construction Delivery\",\n          \"Heavy Materials Handling\",\n          \"Site-specific Delivery\",\n          \"Installation Scheduling\"\n        ],\n        metrics: {\n          volume: \"2,800 deliveries/month\",\n          efficiency: 78,\n          coverage: \"Metropolitan Areas\"\n        }\n      },\n      {\n        id: \"labelflow-pro\",\n        name: \"LabelFlowâ„¢ Pro\",\n        purpose: \"Automated Product Labeling & Compliance\",\n        icon: \"ðŸ·ï¸\",\n        partners: [\"shaft-packaging\"],\n        status: \"planning\",\n        capabilities: [\n          \"Automated Label Generation\",\n          \"SABS Compliance Tracking\",\n          \"Multi-language Support\",\n          \"QR Code Integration\"\n        ],\n        metrics: {\n          volume: \"50,000 labels/day\",\n          efficiency: 95,\n          coverage: \"All Product Lines\"\n        }\n      }\n    ];\n  }\n}\n\n// Temporarily use in-memory storage while database connection is being restored\nclass MemoryStorage implements IStorage {\n  // Logistics Integration - South African Partners\n  async getLogisticsPartners(): Promise<any[]> {\n    // Return strategic South African logistics partners\n    return [\n      {\n        id: \"unitrans-africa\",\n        name: \"Unitrans Africa\",\n        type: \"freight\",\n        logo: \"ðŸš›\",\n        coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Free State\", \"Eastern Cape\"],\n        services: [\"Heavy Freight\", \"Supply Chain\", \"Warehousing\", \"Cross-border\"],\n        pricing: { base: 150, perKm: 12.50, currency: \"ZAR\" },\n        reliability: 94,\n        integration: \"active\",\n        contactInfo: {\n          phone: \"+27 11 451 1700\",\n          email: \"info@unitransafrica.com\",\n          website: \"https://unitransafrica.com\"\n        }\n      },\n      {\n        id: \"imperial-logistics\",\n        name: \"Imperial Logistics (DP World)\",\n        type: \"freight\",\n        logo: \"ðŸŒ\",\n        coverage: [\"National Coverage\", \"SADC Region\", \"Global Network\"],\n        services: [\"End-to-end Logistics\", \"Distribution\", \"Supply Chain Solutions\"],\n        pricing: { base: 200, perKm: 15.75, currency: \"ZAR\" },\n        reliability: 96,\n        integration: \"testing\",\n        contactInfo: {\n          phone: \"+27 11 739 4000\",\n          email: \"logistics@imperial.co.za\",\n          website: \"https://imperiallogistics.com\"\n        }\n      },\n      {\n        id: \"postnet-aramex\",\n        name: \"PostNet (Aramex Network)\",\n        type: \"courier\",\n        logo: \"ðŸ“®\",\n        coverage: [\"496 Locations\", \"National Network\", \"50km Radius Major Centers\"],\n        services: [\"Same-day Delivery\", \"PostNet2PostNet\", \"International Express\"],\n        pricing: { base: 89.99, perKm: 2.50, currency: \"ZAR\" },\n        reliability: 91,\n        integration: \"active\",\n        contactInfo: {\n          phone: \"0860 767 8638\",\n          email: \"support@postnet.co.za\",\n          website: \"https://postnet.co.za\"\n        }\n      },\n      {\n        id: \"shaft-packaging\",\n        name: \"Shaft Packaging\",\n        type: \"packaging\",\n        logo: \"ðŸ“¦\",\n        coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\"],\n        services: [\"Packaging Solutions\", \"Custom Design\", \"Nationwide Delivery\"],\n        pricing: { base: 75, perKm: 1.25, currency: \"ZAR\" },\n        reliability: 89,\n        integration: \"planned\",\n        contactInfo: {\n          phone: \"+27 11 608 1221\",\n          email: \"info@shaftpackaging.co.za\",\n          website: \"https://shaftpackaging.co.za\"\n        }\n      },\n      {\n        id: \"polyoak-packaging\",\n        name: \"Polyoak Packaging\",\n        type: \"packaging\",\n        logo: \"ðŸ­\",\n        coverage: [\"40+ Manufacturing Plants\", \"Southern Africa\", \"Multi-location\"],\n        services: [\"Rigid Plastic Packaging\", \"Food & Beverage\", \"Industrial\"],\n        pricing: { base: 125, perKm: 3.75, currency: \"ZAR\" },\n        reliability: 93,\n        integration: \"testing\",\n        contactInfo: {\n          phone: \"+27 21 951 8000\",\n          email: \"info@polyoakpackaging.co.za\",\n          website: \"https://polyoakpackaging.co.za\"\n        }\n      }\n    ];\n  }\n\n  async getLogisticsBrands(): Promise<any[]> {\n    // Return CornexConnect logistics brands integrated with SA partners\n    return [\n      {\n        id: \"routemesh-sa\",\n        name: \"RouteMeshâ„¢ SA\",\n        purpose: \"Route Optimization for Hardware Store Distribution\",\n        icon: \"ðŸ—ºï¸\",\n        partners: [\"unitrans-africa\", \"imperial-logistics\"],\n        status: \"operational\",\n        capabilities: [\n          \"8500+ Hardware Store Network\",\n          \"AI-Powered Route Planning\",\n          \"Real-time Traffic Integration\",\n          \"Multi-stop Optimization\"\n        ],\n        metrics: {\n          volume: \"12,500 deliveries/month\",\n          efficiency: 87,\n          coverage: \"9 Provinces\"\n        }\n      },\n      {\n        id: \"cratelogic-connect\",\n        name: \"CrateLogicâ„¢ Connect\",\n        purpose: \"Smart Container Management for EPS/BR XPS Products\",\n        icon: \"ðŸ“¦\",\n        partners: [\"shaft-packaging\", \"polyoak-packaging\"],\n        status: \"development\",\n        capabilities: [\n          \"Temperature-Controlled Containers\",\n          \"IoT Tracking Integration\",\n          \"Custom Packaging Design\",\n          \"Inventory Auto-reorder\"\n        ],\n        metrics: {\n          volume: \"31 SKUs managed\",\n          efficiency: 92,\n          coverage: \"Major Distribution Centers\"\n        }\n      },\n      {\n        id: \"deliveryx-network\",\n        name: \"DeliveryXâ„¢ Network\",\n        purpose: \"Last-Mile Delivery for Construction Materials\",\n        icon: \"ðŸš€\",\n        partners: [\"postnet-aramex\"],\n        status: \"development\",\n        capabilities: [\n          \"Same-day Construction Delivery\",\n          \"Heavy Materials Handling\",\n          \"Site-specific Delivery\",\n          \"Installation Scheduling\"\n        ],\n        metrics: {\n          volume: \"2,800 deliveries/month\",\n          efficiency: 78,\n          coverage: \"Metropolitan Areas\"\n        }\n      },\n      {\n        id: \"labelflow-pro\",\n        name: \"LabelFlowâ„¢ Pro\",\n        purpose: \"Automated Product Labeling & Compliance\",\n        icon: \"ðŸ·ï¸\",\n        partners: [\"shaft-packaging\"],\n        status: \"planning\",\n        capabilities: [\n          \"Automated Label Generation\",\n          \"SABS Compliance Tracking\",\n          \"Multi-language Support\",\n          \"QR Code Integration\"\n        ],\n        metrics: {\n          volume: \"50,000 labels/day\",\n          efficiency: 95,\n          coverage: \"All Product Lines\"\n        }\n      }\n    ];\n  }\n\n  // Product Labeling System - In-memory arrays\n  private productLabels: ProductLabel[] = [];\n  private printers: Printer[] = [\n    {\n      id: \"demo_printer_1\",\n      name: \"Main Office Printer\",\n      model: \"HP LaserJet Pro M404dn\",\n      manufacturer: \"HP\",\n      ipAddress: \"192.168.1.100\",\n      location: \"Main Office\",\n      department: \"Administration\",\n      printerType: \"laser\",\n      connectionType: \"wifi\",\n      status: \"online\",\n      isDefault: true,\n      paperLevel: 85,\n      supportedSizes: [\"A4\", \"A5\", \"4x6\"],\n      capabilities: {\n        color: false,\n        duplex: true,\n        staple: false\n      },\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    {\n      id: \"demo_printer_2\", \n      name: \"Warehouse Color Printer\",\n      model: \"Canon PIXMA G7020\",\n      manufacturer: \"Canon\",\n      ipAddress: \"192.168.1.101\",\n      location: \"Warehouse\",\n      department: \"Production\",\n      printerType: \"inkjet\",\n      connectionType: \"wifi\",\n      status: \"online\",\n      isDefault: false,\n      paperLevel: 72,\n      supportedSizes: [\"A4\", \"A5\"],\n      capabilities: {\n        color: true,\n        duplex: true,\n        staple: false\n      },\n      createdAt: new Date(),\n      updatedAt: new Date()\n    }\n  ];\n  private printJobs: PrintJob[] = [];\n  private labelTemplates: LabelTemplate[] = [];\n\n  // Stub implementations for all required methods  \n  async getUser(id: string): Promise<User | undefined> { \n    return this.users.find(u => u.id === id);\n  }\n  async upsertUser(user: UpsertUser): Promise<User> { \n    const existingIndex = this.users.findIndex(u => u.id === user.id);\n    const newUser: User = {\n      id: user.id || `user_${Date.now()}`,\n      email: user.email || null,\n      firstName: user.firstName || null,\n      lastName: user.lastName || null,\n      profileImageUrl: user.profileImageUrl || null,\n      role: user.role || 'viewer',\n      region: user.region || null,\n      currency: user.currency || null,\n      isActive: user.isActive !== undefined ? user.isActive : true,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    if (existingIndex >= 0) {\n      this.users[existingIndex] = { ...this.users[existingIndex], ...newUser };\n      return this.users[existingIndex];\n    } else {\n      this.users.push(newUser);\n      return newUser;\n    }\n  }\n  async getUserByUsername(username: string): Promise<User | undefined> { return undefined; }\n  async createUser(user: InsertUser): Promise<User> { throw new Error(\"Database temporarily unavailable\"); }\n\n  // Product Labeling System Methods\n  async getProductLabels(): Promise<ProductLabel[]> {\n    return [...this.productLabels].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n\n  async getProductLabel(id: string): Promise<ProductLabel | undefined> {\n    return this.productLabels.find(label => label.id === id);\n  }\n\n  async createProductLabel(labelData: InsertProductLabel): Promise<ProductLabel> {\n    const newLabel: ProductLabel = {\n      id: `label_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...labelData,\n      version: 1,\n      isActive: true,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.productLabels.push(newLabel);\n    return newLabel;\n  }\n\n  async updateProductLabel(id: string, labelData: Partial<InsertProductLabel>): Promise<ProductLabel> {\n    const index = this.productLabels.findIndex(label => label.id === id);\n    if (index === -1) throw new Error(\"Product label not found\");\n    \n    this.productLabels[index] = {\n      ...this.productLabels[index],\n      ...labelData,\n      updatedAt: new Date(),\n    };\n    return this.productLabels[index];\n  }\n\n  async deleteProductLabel(id: string): Promise<boolean> {\n    const index = this.productLabels.findIndex(label => label.id === id);\n    if (index === -1) return false;\n    this.productLabels.splice(index, 1);\n    return true;\n  }\n\n  // Printer Methods\n  async getPrinters(): Promise<Printer[]> {\n    return [...this.printers].sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getPrinter(id: string): Promise<Printer | undefined> {\n    return this.printers.find(printer => printer.id === id);\n  }\n\n  async createPrinter(printerData: InsertPrinter): Promise<Printer> {\n    const newPrinter: Printer = {\n      id: `printer_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...printerData,\n      status: \"offline\",\n      isDefault: false,\n      paperLevel: 100,\n      supportedSizes: printerData.supportedSizes || [\"A4\"],\n      capabilities: printerData.capabilities || { color: true, duplex: true, staple: false },\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.printers.push(newPrinter);\n    return newPrinter;\n  }\n\n  async updatePrinter(id: string, printerData: Partial<InsertPrinter>): Promise<Printer> {\n    const index = this.printers.findIndex(printer => printer.id === id);\n    if (index === -1) throw new Error(\"Printer not found\");\n    \n    this.printers[index] = {\n      ...this.printers[index],\n      ...printerData,\n      updatedAt: new Date(),\n    };\n    return this.printers[index];\n  }\n\n  async deletePrinter(id: string): Promise<boolean> {\n    const index = this.printers.findIndex(printer => printer.id === id);\n    if (index === -1) return false;\n    this.printers.splice(index, 1);\n    return true;\n  }\n\n  // Print Job Methods\n  async getPrintJobs(): Promise<PrintJob[]> {\n    return [...this.printJobs].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n\n  async getPrintJob(id: string): Promise<PrintJob | undefined> {\n    return this.printJobs.find(job => job.id === id);\n  }\n\n  async getPrintJobsByPrinter(printerId: string): Promise<PrintJob[]> {\n    return this.printJobs.filter(job => job.printerId === printerId)\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n\n  async getPrintJobsByUser(userId: string): Promise<PrintJob[]> {\n    return this.printJobs.filter(job => job.userId === userId)\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n\n  async createPrintJob(jobData: InsertPrintJob): Promise<PrintJob> {\n    const newJob: PrintJob = {\n      id: `job_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...jobData,\n      status: \"pending\",\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.printJobs.push(newJob);\n    return newJob;\n  }\n\n  async updatePrintJobStatus(id: string, status: string): Promise<PrintJob> {\n    const index = this.printJobs.findIndex(job => job.id === id);\n    if (index === -1) throw new Error(\"Print job not found\");\n    \n    this.printJobs[index] = {\n      ...this.printJobs[index],\n      status,\n      updatedAt: new Date(),\n    };\n    return this.printJobs[index];\n  }\n\n  // Label Template Methods\n  async getLabelTemplates(): Promise<LabelTemplate[]> {\n    return [...this.labelTemplates].sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getLabelTemplate(id: string): Promise<LabelTemplate | undefined> {\n    return this.labelTemplates.find(template => template.id === id);\n  }\n\n  async createLabelTemplate(templateData: InsertLabelTemplate): Promise<LabelTemplate> {\n    const newTemplate: LabelTemplate = {\n      id: `template_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...templateData,\n      isActive: true,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.labelTemplates.push(newTemplate);\n    return newTemplate;\n  }\n  \n  // In-memory storage arrays\n  private users: User[] = [];\n  private products: Product[] = [];\n  private brands: Brand[] = [];\n  private distributors: Distributor[] = [];\n  private hardwareStores: HardwareStore[] = [];\n  private bulkImportSessions: BulkImportSession[] = [];\n\n  // User Management Methods (Memory implementation)\n  async getAllUsers(): Promise<User[]> {\n    return this.users.filter(u => u.isActive);\n  }\n  \n  async createHardwareStore(store: InsertHardwareStore): Promise<HardwareStore> {\n    const newStore: HardwareStore = {\n      id: `store_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      email: store.email || null,\n      isActive: store.isActive !== undefined ? store.isActive : true,\n      createdAt: new Date(),\n      contactPerson: store.contactPerson || null,\n      phone: store.phone || null,\n      address: store.address,\n      city: store.city,\n      province: store.province,\n      postalCode: store.postalCode || null,\n      gpsCoordinates: store.gpsCoordinates || null,\n      storeSize: store.storeSize || null,\n      creditLimit: store.creditLimit || null,\n      paymentTerms: store.paymentTerms || null,\n      salesRepId: store.salesRepId || null,\n      visitFrequency: store.visitFrequency || null,\n      lastOrderDate: store.lastOrderDate || null,\n      totalOrders: store.totalOrders || 0,\n      avgOrderValue: store.avgOrderValue || null,\n      lastVisitDate: store.lastVisitDate || null\n    };\n    this.hardwareStores.push(newStore);\n    console.log(`[Storage] Added hardware store: ${newStore.address}, ${newStore.city}. Total stores: ${this.hardwareStores.length}`);\n    return newStore;\n  }\n  async getProducts(): Promise<Product[]> { \n    return this.products.filter(p => p.isActive);\n  }\n\n  async getProduct(id: string): Promise<Product | undefined> { \n    return this.products.find(p => p.id === id);\n  }\n\n  async getProductBySku(sku: string): Promise<Product | undefined> { \n    return this.products.find(p => p.sku === sku);\n  }\n\n  async createProduct(product: InsertProduct): Promise<Product> { \n    const newProduct: Product = {\n      id: `product_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...product,\n      isActive: product.isActive !== undefined ? product.isActive : true,\n      createdAt: new Date(),\n    };\n    this.products.push(newProduct);\n    console.log(`[Storage] Created product: ${newProduct.sku} - ${newProduct.name}. Total products: ${this.products.length}`);\n    return newProduct;\n  }\n\n  async updateProduct(id: string, product: Partial<InsertProduct>): Promise<Product> { \n    const index = this.products.findIndex(p => p.id === id);\n    if (index === -1) throw new Error(\"Product not found\");\n    \n    this.products[index] = { ...this.products[index], ...product };\n    return this.products[index];\n  }\n\n  async deleteProduct(id: string): Promise<void> { \n    const index = this.products.findIndex(p => p.id === id);\n    if (index !== -1) {\n      this.products[index].isActive = false;\n    }\n  }\n\n  async searchProducts(query: string): Promise<Product[]> { \n    const lowQuery = query.toLowerCase();\n    return this.products.filter(p => \n      p.isActive && (\n        p.name.toLowerCase().includes(lowQuery) ||\n        p.sku.toLowerCase().includes(lowQuery) ||\n        (p.description && p.description.toLowerCase().includes(lowQuery))\n      )\n    );\n  }\n  async getInventory(): Promise<(Inventory & { product: Product })[]> { return []; }\n  async getInventoryByProduct(productId: string): Promise<Inventory | undefined> { return undefined; }\n  async updateInventory(productId: string, inventory: Partial<InsertInventory>): Promise<Inventory> { throw new Error(\"Database temporarily unavailable\"); }\n  async getDistributors(): Promise<Distributor[]> { \n    return this.distributors.filter(d => d.isActive);\n  }\n  async getDistributor(id: string): Promise<Distributor | undefined> { return undefined; }\n  async createDistributor(distributor: InsertDistributor): Promise<Distributor> {\n    const newDistributor: Distributor = {\n      id: `distributor_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...distributor,\n      status: distributor.status || 'active',\n      tier: distributor.tier || 'premium',\n      creditLimit: distributor.creditLimit || \"100000.00\",\n      currentBalance: distributor.currentBalance || \"0.00\",\n      lastOrderDate: distributor.lastOrderDate || null,\n      totalOrders: distributor.totalOrders || 0,\n      avgOrderValue: distributor.avgOrderValue || null,\n      isActive: distributor.isActive !== undefined ? distributor.isActive : true,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    this.distributors.push(newDistributor);\n    console.log(`[Storage] Created distributor: ${newDistributor.name}. Total distributors: ${this.distributors.length}`);\n    return newDistributor;\n  }\n  async updateDistributor(id: string, distributor: Partial<InsertDistributor>): Promise<Distributor> { throw new Error(\"Database temporarily unavailable\"); }\n  async getDistributorsByRegion(region: string): Promise<Distributor[]> { return []; }\n  async getOrders(): Promise<(Order & { distributor: Distributor })[]> { return []; }\n  async getOrder(id: string): Promise<(Order & { distributor: Distributor; items: (OrderItem & { product: Product })[] }) | undefined> { return undefined; }\n  async createOrder(order: InsertOrder): Promise<Order> { throw new Error(\"Database temporarily unavailable\"); }\n  async updateOrderStatus(id: string, status: string): Promise<Order> { throw new Error(\"Database temporarily unavailable\"); }\n  async getOrdersByDistributor(distributorId: string): Promise<Order[]> { return []; }\n  async getProductionSchedule(): Promise<(ProductionSchedule & { product: Product })[]> { return []; }\n  async createProductionSchedule(schedule: InsertProductionSchedule): Promise<ProductionSchedule> { throw new Error(\"Database temporarily unavailable\"); }\n  async updateProductionSchedule(id: string, schedule: Partial<InsertProductionSchedule>): Promise<ProductionSchedule> { throw new Error(\"Database temporarily unavailable\"); }\n  async getProductionScheduleByDate(startDate: Date, endDate: Date): Promise<(ProductionSchedule & { product: Product })[]> { return []; }\n  async getDemandForecast(productId?: string, region?: string): Promise<(DemandForecast & { product: Product })[]> { return []; }\n  async createDemandForecast(forecast: InsertDemandForecast): Promise<DemandForecast> { throw new Error(\"Database temporarily unavailable\"); }\n  async getSalesMetrics(startDate?: Date, endDate?: Date, region?: string): Promise<SalesMetrics[]> { return []; }\n  async createSalesMetrics(metrics: InsertSalesMetrics): Promise<SalesMetrics> { throw new Error(\"Database temporarily unavailable\"); }\n  async getSalesMetricsByRegion(): Promise<{ region: string; revenue: string; units: number }[]> { return []; }\n  async getTopProducts(limit?: number): Promise<{ product: Product; revenue: string; units: number }[]> { return []; }\n  async getBrands(): Promise<Brand[]> { \n    return this.brands.filter(b => b.isActive);\n  }\n\n  async createBrand(brand: InsertBrand): Promise<Brand> { \n    const newBrand: Brand = {\n      id: `brand_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      name: brand.name,\n      isActive: brand.isActive !== undefined ? brand.isActive : true,\n      createdAt: new Date(),\n      description: brand.description || null,\n      displayName: brand.displayName,\n      color: brand.color,\n      icon: brand.icon || null\n    };\n    this.brands.push(newBrand);\n    console.log(`[Storage] Created brand: ${newBrand.displayName}. Total brands: ${this.brands.length}`);\n    return newBrand;\n  }\n  async getSalesReps(): Promise<SalesRep[]> { return []; }\n  async getSalesRep(id: string): Promise<SalesRep | undefined> { return undefined; }\n  async createSalesRep(rep: InsertSalesRep): Promise<SalesRep> { throw new Error(\"Database temporarily unavailable\"); }\n  async getHardwareStores(): Promise<HardwareStore[]> { \n    console.log(`[Storage] Retrieved ${this.hardwareStores.length} hardware stores from memory`);\n    return this.hardwareStores; \n  }\n\n  // Bulk Import Sessions\n  async getBulkImportSessions(): Promise<BulkImportSession[]> {\n    return this.bulkImportSessions.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).slice(0, 10);\n  }\n\n  async getBulkImportSession(sessionId: string): Promise<BulkImportSession | undefined> {\n    return this.bulkImportSessions.find(session => session.id === sessionId);\n  }\n\n  async createBulkImportSession(session: InsertBulkImportSession): Promise<BulkImportSession> {\n    const newSession: BulkImportSession = {\n      ...session,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.bulkImportSessions.push(newSession);\n    return newSession;\n  }\n\n  async updateBulkImportSession(sessionId: string, updates: BulkImportSession): Promise<BulkImportSession> {\n    const index = this.bulkImportSessions.findIndex(session => session.id === sessionId);\n    if (index !== -1) {\n      updates.updatedAt = new Date();\n      this.bulkImportSessions[index] = updates;\n      return this.bulkImportSessions[index];\n    }\n    throw new Error(`Session ${sessionId} not found`);\n  }\n  async getHardwareStore(id: string): Promise<HardwareStore | undefined> { \n    return this.hardwareStores.find(store => store.id === id);\n  }\n  async getHardwareStoresByProvince(province: string): Promise<HardwareStore[]> { \n    return this.hardwareStores.filter(store => store.province === province);\n  }\n  async getRoutePlans(): Promise<(RoutePlan & { salesRep: SalesRep })[]> { return []; }\n  async getRoutePlan(id: string): Promise<(RoutePlan & { salesRep: SalesRep; routeStores: (RouteStore & { hardwareStore: HardwareStore })[] }) | undefined> { return undefined; }\n  async createRoutePlan(route: InsertRoutePlan): Promise<RoutePlan> { throw new Error(\"Database temporarily unavailable\"); }\n  async getAiOrderSuggestions(): Promise<(AiOrderSuggestion & { hardwareStore: HardwareStore; product: Product })[]> { return []; }\n  async createAiOrderSuggestion(suggestion: InsertAiOrderSuggestion): Promise<AiOrderSuggestion> { throw new Error(\"Database temporarily unavailable\"); }\n  async getStoreVisits(): Promise<(StoreVisit & { hardwareStore: HardwareStore; salesRep: SalesRep })[]> { return []; }\n  async createStoreVisit(visit: InsertStoreVisit): Promise<StoreVisit> { throw new Error(\"Database temporarily unavailable\"); }\n  async getFactorySetups(): Promise<FactorySetup[]> { return []; }\n  async getFactorySetup(id: string): Promise<FactorySetup | undefined> { return undefined; }\n  async createFactorySetup(factory: InsertFactorySetup): Promise<FactorySetup> { throw new Error(\"Database temporarily unavailable\"); }\n  async updateFactorySetup(id: string, factory: Partial<InsertFactorySetup>): Promise<FactorySetup> { throw new Error(\"Database temporarily unavailable\"); }\n  async getAiInsights(factoryId?: string): Promise<AiInsight[]> { return []; }\n  async createAiInsight(insight: InsertAiInsight): Promise<AiInsight> { throw new Error(\"Database temporarily unavailable\"); }\n  async getProductionMetrics(factoryId: string): Promise<ProductionMetrics[]> { return []; }\n  async createProductionMetrics(metrics: InsertProductionMetrics): Promise<ProductionMetrics> { throw new Error(\"Database temporarily unavailable\"); }\n  async getFactoryRecommendations(factoryId: string): Promise<FactoryRecommendation[]> { return []; }\n  async createFactoryRecommendation(recommendation: InsertFactoryRecommendation): Promise<FactoryRecommendation> { throw new Error(\"Database temporarily unavailable\"); }\n  async getAutomationRules(): Promise<AutomationRule[]> { return []; }\n  async getAutomationRule(id: string): Promise<AutomationRule | undefined> { return undefined; }\n  async createAutomationRule(rule: InsertAutomationRule): Promise<AutomationRule> { throw new Error(\"Database temporarily unavailable\"); }\n  async updateAutomationRule(id: string, updates: Partial<AutomationRule>): Promise<AutomationRule> { throw new Error(\"Database temporarily unavailable\"); }\n  async getAutomationEvents(): Promise<AutomationEvent[]> { return []; }\n  async createAutomationEvent(event: InsertAutomationEvent): Promise<AutomationEvent> { throw new Error(\"Database temporarily unavailable\"); }\n  async getMaintenanceSchedules(): Promise<MaintenanceSchedule[]> { return []; }\n  async createMaintenanceSchedule(schedule: InsertMaintenanceSchedule): Promise<MaintenanceSchedule> { throw new Error(\"Database temporarily unavailable\"); }\n  async getPurchaseOrders(): Promise<(PurchaseOrder & { items?: PurchaseOrderItem[] })[]> { return []; }\n  async getPurchaseOrder(id: string): Promise<(PurchaseOrder & { items: (PurchaseOrderItem & { product: Product })[]; statusHistory: PoStatusHistory[]; documents: PoDocument[]; }) | undefined> { return undefined; }\n  async createPurchaseOrder(order: InsertPurchaseOrder): Promise<PurchaseOrder> { throw new Error(\"Database temporarily unavailable\"); }\n  async updatePurchaseOrder(id: string, order: Partial<InsertPurchaseOrder>): Promise<PurchaseOrder> { throw new Error(\"Database temporarily unavailable\"); }\n  async addPurchaseOrderItem(item: InsertPurchaseOrderItem): Promise<PurchaseOrderItem> { throw new Error(\"Database temporarily unavailable\"); }\n  async updatePurchaseOrderStatus(id: string, status: string, userId?: string, reason?: string, notes?: string): Promise<PurchaseOrder> { throw new Error(\"Database temporarily unavailable\"); }\n  async generatePONumber(): Promise<string> { return \"PO\" + Date.now(); }\n  async getPurchaseOrdersByStatus(status: string): Promise<PurchaseOrder[]> { return []; }\n  async getPurchaseOrdersByDateRange(startDate: Date, endDate: Date): Promise<PurchaseOrder[]> { return []; }\n  async searchPurchaseOrders(query: string): Promise<PurchaseOrder[]> { return []; }\n  async addStatusHistory(history: InsertPoStatusHistory): Promise<PoStatusHistory> { throw new Error(\"Database temporarily unavailable\"); }\n  async addDocument(document: InsertPoDocument): Promise<PoDocument> { throw new Error(\"Database temporarily unavailable\"); }\n\n  // Methods for Excel uploads integration\n  async getExcelUploads(): Promise<any[]> { \n    return [];\n  }\n\n  async getHardwareStoresExcel(): Promise<any[]> { \n    return this.hardwareStores;\n  }\n\n  async getHardwareStoresFromExcel(): Promise<any[]> { \n    return this.hardwareStores;\n  }\n\n  // Import Sessions\n  async getImportSessions(): Promise<BulkImportSession[]> {\n    return this.getBulkImportSessions();\n  }\n\n  async getImportSession(id: string): Promise<BulkImportSession | undefined> {\n    return this.getBulkImportSession(id);\n  }\n\n  async createImportSession(session: InsertBulkImportSession): Promise<BulkImportSession> {\n    return this.createBulkImportSession(session);\n  }\n\n  async updateImportSession(id: string, updates: Partial<InsertBulkImportSession>): Promise<BulkImportSession> {\n    const existing = this.bulkImportSessions.find(s => s.id === id);\n    if (!existing) {\n      throw new Error(`Import session ${id} not found`);\n    }\n    \n    const updated = {\n      ...existing,\n      ...updates,\n      updatedAt: new Date()\n    };\n    \n    return this.updateBulkImportSession(id, updated);\n  }\n\n  async addFileToImportSession(sessionId: string, file: any): Promise<void> {\n    const session = this.bulkImportSessions.find(s => s.id === sessionId);\n    if (!session) {\n      throw new Error(`Import session ${sessionId} not found`);\n    }\n    \n    if (!session.files) {\n      session.files = [];\n    }\n    \n    session.files.push(file);\n    session.updatedAt = new Date();\n    \n    console.log(`[Storage] Added file ${file.name} to session ${sessionId}`);\n  }\n\n  async updateFileInImportSession(sessionId: string, fileId: string, updates: any): Promise<void> {\n    const session = this.bulkImportSessions.find(s => s.id === sessionId);\n    if (!session || !session.files) {\n      throw new Error(`Import session ${sessionId} or files not found`);\n    }\n    \n    const fileIndex = session.files.findIndex((f: any) => f.id === fileId);\n    if (fileIndex === -1) {\n      throw new Error(`File ${fileId} not found in session ${sessionId}`);\n    }\n    \n    session.files[fileIndex] = {\n      ...session.files[fileIndex],\n      ...updates\n    };\n    \n    session.updatedAt = new Date();\n    \n    console.log(`[Storage] Updated file ${fileId} in session ${sessionId}`);\n  }\n\n  async processHardwareStoreRow(row: any, filename: string): Promise<any> {\n    try {\n      // Detect store information from various possible column formats\n      const storeId = `store_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      \n      // Try to extract store data from common column patterns\n      const storeName = row['Store Name'] || row['STORE NAME'] || row['Name'] || row['STORE'] || \n                       row['Customer Name'] || row['CLIENT NAME'] || row['Business Name'] || '';\n      \n      if (!storeName || storeName.toString().trim().length === 0) {\n        return null; // Skip rows without store names\n      }\n\n      const storeData: InsertHardwareStore = {\n        id: storeId,\n        name: storeName.toString().trim(),\n        address: (row['Address'] || row['ADDRESS'] || row['Location'] || '').toString().trim(),\n        city: (row['City'] || row['CITY'] || row['Town'] || '').toString().trim(),\n        province: (row['Province'] || row['PROVINCE'] || row['Region'] || '').toString().trim(),\n        postalCode: (row['Postal Code'] || row['ZIP'] || row['CODE'] || '').toString().trim(),\n        phone: (row['Phone'] || row['PHONE'] || row['Contact'] || '').toString().trim(),\n        email: (row['Email'] || row['EMAIL'] || '').toString().trim(),\n        ownerName: (row['Owner'] || row['OWNER'] || row['Manager'] || '').toString().trim(),\n        storeSize: (row['Size'] || row['STORE SIZE'] || 'medium').toString().toLowerCase(),\n        creditLimit: parseFloat(row['Credit Limit'] || row['CREDIT'] || '50000') || 50000,\n        currentBalance: parseFloat(row['Balance'] || row['BALANCE'] || '0') || 0,\n        gpsCoordinates: (row['GPS'] || row['Coordinates'] || '').toString().trim(),\n        isActive: true,\n        source: filename,\n        notes: `Imported from ${filename} on ${new Date().toISOString()}`\n      };\n\n      // Store hardware store\n      const created = await this.createHardwareStore(storeData);\n      \n      console.log(`[Storage] Processed hardware store: ${storeData.name}`);\n      return created;\n    } catch (error) {\n      console.error(`[Storage] Error processing hardware store row:`, error);\n      throw new Error(`Failed to process store data: ${error.message}`);\n    }\n  }\n\n  async getSalesRepRoutesFromExcel(): Promise<any[]> {\n    return [];\n  }\n\n  async createHardwareStoreFromExcel(store: InsertHardwareStore): Promise<HardwareStore> {\n    return this.createHardwareStore(store);\n  }\n\n  async syncStoreToMainDirectory(store: any): Promise<void> {\n    console.log(`[Storage] Syncing store ${store.name} to main directory`);\n  }\n\n  async syncRouteToMainDirectory(route: any): Promise<void> {\n    console.log(`[Storage] Syncing route ${route.id} to main directory`);\n  }\n\n  // Company Settings - Database Integration\n  async getCompanySettings(): Promise<CompanySettings | undefined> {\n    const [settings] = await db.select().from(companySettings).limit(1);\n    return settings || undefined;\n  }\n\n  async updateCompanySettings(settingsUpdate: Partial<InsertCompanySettings>): Promise<CompanySettings> {\n    // Try to update existing settings first\n    const existing = await this.getCompanySettings();\n    \n    if (existing) {\n      const [updated] = await db.update(companySettings)\n        .set({ ...settingsUpdate, updatedAt: new Date() })\n        .where(eq(companySettings.id, existing.id))\n        .returning();\n      return updated;\n    } else {\n      // Create new settings if none exist (for Homemart Africa)\n      const [created] = await db.insert(companySettings).values({\n        userId: \"homemart_admin_001\",\n        companyName: \"HOMEMART AFRICA\",\n        companyRegistration: \"2022/854581/07\",\n        contactEmail: \"admin@homemart.co.za\",\n        phone: \"+27 11 555 0000\",\n        address: \"123 Industrial Drive\",\n        city: \"Johannesburg\",\n        province: \"Gauteng\",\n        country: \"South Africa\",\n        postalCode: \"2000\",\n        vatNumber: \"9169062271\",\n        creditLimit: \"500000.00\",\n        paymentTerms: \"30_days\",\n        businessType: \"distributor\",\n        ...settingsUpdate,\n      }).returning();\n      return created;\n    }\n  }\n  \n  // User Management - Database Integration\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).where(eq(users.isActive, true)).orderBy(asc(users.firstName), asc(users.lastName));\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(userData).returning();\n    return user;\n  }\n\n  async updateUser(id: string, userUpdate: Partial<InsertUser>): Promise<User | undefined> {\n    const [updated] = await db.update(users)\n      .set({ ...userUpdate, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteUser(id: string): Promise<boolean> {\n    try {\n      await db.update(users)\n        .set({ isActive: false, updatedAt: new Date() })\n        .where(eq(users.id, id));\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n  \n  // Audit Trail - Database Integration\n  async getAuditLogs(filters?: any): Promise<UserAuditTrail[]> {\n    let query = db.select().from(userAuditTrail);\n    \n    if (filters?.userId) {\n      query = query.where(eq(userAuditTrail.userId, filters.userId));\n    }\n    if (filters?.action) {\n      query = query.where(eq(userAuditTrail.action, filters.action));\n    }\n    if (filters?.dateFrom && filters.dateTo) {\n      query = query.where(\n        and(\n          gte(userAuditTrail.timestamp, filters.dateFrom),\n          lte(userAuditTrail.timestamp, filters.dateTo)\n        )\n      );\n    }\n    \n    return await query.orderBy(desc(userAuditTrail.timestamp)).limit(1000);\n  }\n\n  async createAuditLog(log: InsertUserAuditTrail): Promise<UserAuditTrail> {\n    const [created] = await db.insert(userAuditTrail).values({\n      userId: log.userId,\n      action: log.action,\n      details: log.details,\n      ipAddress: log.ipAddress || '127.0.0.1',\n      userAgent: log.userAgent || 'Unknown',\n      timestamp: new Date()\n    }).returning();\n    return created;\n  }\n\n  // Product Labeling System - Database implementation\n  async getProductLabels(): Promise<ProductLabel[]> {\n    return await db.select().from(productLabels).orderBy(desc(productLabels.createdAt));\n  }\n\n  async getProductLabel(id: string): Promise<ProductLabel | undefined> {\n    const [label] = await db.select().from(productLabels).where(eq(productLabels.id, id));\n    return label || undefined;\n  }\n\n  async createProductLabel(labelData: InsertProductLabel): Promise<ProductLabel> {\n    const [label] = await db.insert(productLabels).values(labelData).returning();\n    return label;\n  }\n\n  async updateProductLabel(id: string, labelData: Partial<InsertProductLabel>): Promise<ProductLabel> {\n    const [label] = await db.update(productLabels).set(labelData).where(eq(productLabels.id, id)).returning();\n    return label;\n  }\n\n  async deleteProductLabel(id: string): Promise<boolean> {\n    const result = await db.delete(productLabels).where(eq(productLabels.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Printer Methods - Database implementation  \n  async getPrinters(): Promise<Printer[]> {\n    return await db.select().from(printers).orderBy(asc(printers.name));\n  }\n\n  async getPrinter(id: string): Promise<Printer | undefined> {\n    const [printer] = await db.select().from(printers).where(eq(printers.id, id));\n    return printer || undefined;\n  }\n\n  async createPrinter(printerData: InsertPrinter): Promise<Printer> {\n    const [printer] = await db.insert(printers).values(printerData).returning();\n    return printer;\n  }\n\n  async updatePrinter(id: string, printerData: Partial<InsertPrinter>): Promise<Printer> {\n    const [printer] = await db.update(printers).set(printerData).where(eq(printers.id, id)).returning();\n    return printer;\n  }\n\n  async deletePrinter(id: string): Promise<boolean> {\n    const result = await db.delete(printers).where(eq(printers.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Print Job Methods - Database implementation\n  async getPrintJobs(): Promise<PrintJob[]> {\n    return await db.select().from(printJobs).orderBy(desc(printJobs.createdAt));\n  }\n\n  async getPrintJob(id: string): Promise<PrintJob | undefined> {\n    const [job] = await db.select().from(printJobs).where(eq(printJobs.id, id));\n    return job || undefined;\n  }\n\n  async getPrintJobsByPrinter(printerId: string): Promise<PrintJob[]> {\n    return await db.select().from(printJobs).where(eq(printJobs.printerId, printerId)).orderBy(desc(printJobs.createdAt));\n  }\n\n  async getPrintJobsByUser(userId: string): Promise<PrintJob[]> {\n    return await db.select().from(printJobs).where(eq(printJobs.userId, userId)).orderBy(desc(printJobs.createdAt));\n  }\n\n  async createPrintJob(jobData: InsertPrintJob): Promise<PrintJob> {\n    const [job] = await db.insert(printJobs).values(jobData).returning();\n    return job;\n  }\n\n  async updatePrintJobStatus(id: string, status: string): Promise<PrintJob> {\n    const [job] = await db.update(printJobs).set({ status }).where(eq(printJobs.id, id)).returning();\n    return job;\n  }\n\n  // Label Template Methods - Database implementation\n  async getLabelTemplates(): Promise<LabelTemplate[]> {\n    return await db.select().from(labelTemplates).orderBy(asc(labelTemplates.name));\n  }\n\n  async getLabelTemplate(id: string): Promise<LabelTemplate | undefined> {\n    const [template] = await db.select().from(labelTemplates).where(eq(labelTemplates.id, id));\n    return template || undefined;\n  }\n\n  async createLabelTemplate(templateData: InsertLabelTemplate): Promise<LabelTemplate> {\n    const [template] = await db.insert(labelTemplates).values(templateData).returning();\n    return template;\n  }\n\n  // Bulk Import Sessions - Database implementation\n  async getBulkImportSessions(): Promise<BulkImportSession[]> {\n    return await db.select().from(bulkImportSessions).orderBy(desc(bulkImportSessions.createdAt)).limit(10);\n  }\n\n  async getBulkImportSession(sessionId: string): Promise<BulkImportSession | undefined> {\n    const [session] = await db.select().from(bulkImportSessions).where(eq(bulkImportSessions.id, sessionId));\n    return session || undefined;\n  }\n\n  async createBulkImportSession(session: InsertBulkImportSession): Promise<BulkImportSession> {\n    const [newSession] = await db.insert(bulkImportSessions).values(session).returning();\n    return newSession;\n  }\n\n  async updateBulkImportSession(sessionId: string, sessionData: BulkImportSession): Promise<BulkImportSession> {\n    const [updated] = await db.update(bulkImportSessions)\n      .set({\n        status: sessionData.status,\n        processedFiles: sessionData.processedFiles,\n        totalImported: sessionData.totalImported,\n        files: sessionData.files as any, // Cast to handle JSON type\n        updatedAt: new Date()\n      })\n      .where(eq(bulkImportSessions.id, sessionId))\n      .returning();\n    return updated;\n  }\n\n  // AI-Powered Mood Selector System Implementation\n  async getUserMoodPreferences(userId: string): Promise<UserMoodPreference[]> {\n    return await db\n      .select()\n      .from(userMoodPreferences)\n      .where(eq(userMoodPreferences.userId, userId))\n      .orderBy(desc(userMoodPreferences.usageCount), desc(userMoodPreferences.lastUsed));\n  }\n\n  async getUserMoodPreference(userId: string, moodId: string): Promise<UserMoodPreference | undefined> {\n    const [preference] = await db\n      .select()\n      .from(userMoodPreferences)\n      .where(and(\n        eq(userMoodPreferences.userId, userId),\n        eq(userMoodPreferences.moodId, moodId)\n      ));\n    return preference;\n  }\n\n  async createUserMoodPreference(preference: InsertUserMoodPreference): Promise<UserMoodPreference> {\n    const [created] = await db\n      .insert(userMoodPreferences)\n      .values(preference)\n      .returning();\n    return created;\n  }\n\n  async updateUserMoodPreference(id: string, preference: Partial<InsertUserMoodPreference>): Promise<UserMoodPreference> {\n    const [updated] = await db\n      .update(userMoodPreferences)\n      .set({ ...preference, updatedAt: new Date() })\n      .where(eq(userMoodPreferences.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteUserMoodPreference(id: string): Promise<boolean> {\n    const result = await db\n      .delete(userMoodPreferences)\n      .where(eq(userMoodPreferences.id, id));\n    return result.rowCount > 0;\n  }\n\n  async getUserMoodHistory(\n    userId: string, \n    filters?: { limit?: number; moodId?: string; timeRange?: { start: Date; end: Date } }\n  ): Promise<UserMoodHistory[]> {\n    let query = db\n      .select()\n      .from(userMoodHistory)\n      .where(eq(userMoodHistory.userId, userId));\n\n    if (filters?.moodId) {\n      query = query.where(eq(userMoodHistory.moodId, filters.moodId));\n    }\n\n    if (filters?.timeRange) {\n      query = query.where(and(\n        gte(userMoodHistory.timestamp, filters.timeRange.start),\n        lte(userMoodHistory.timestamp, filters.timeRange.end)\n      ));\n    }\n\n    query = query.orderBy(desc(userMoodHistory.timestamp));\n\n    if (filters?.limit) {\n      query = query.limit(filters.limit);\n    }\n\n    return await query;\n  }\n\n  async createUserMoodHistory(history: InsertUserMoodHistory): Promise<UserMoodHistory> {\n    const [created] = await db\n      .insert(userMoodHistory)\n      .values(history)\n      .returning();\n    return created;\n  }\n\n  async getAiMoodAnalytics(userId: string, analysisType?: string): Promise<AiMoodAnalytics[]> {\n    let query = db\n      .select()\n      .from(aiMoodAnalytics)\n      .where(eq(aiMoodAnalytics.userId, userId));\n\n    if (analysisType) {\n      query = query.where(eq(aiMoodAnalytics.analysisType, analysisType));\n    }\n\n    return await query.orderBy(desc(aiMoodAnalytics.generatedAt));\n  }\n\n  async createAiMoodAnalytics(analytics: InsertAiMoodAnalytics): Promise<AiMoodAnalytics> {\n    const [created] = await db\n      .insert(aiMoodAnalytics)\n      .values(analytics)\n      .returning();\n    return created;\n  }\n\n  async findUsersByMoodPattern(pattern: { \n    moodId?: string; \n    timeOfDay?: string; \n    dayOfWeek?: string \n  }): Promise<User[]> {\n    let historyQuery = db\n      .select({ userId: userMoodHistory.userId })\n      .from(userMoodHistory);\n\n    const conditions = [];\n    if (pattern.moodId) {\n      conditions.push(eq(userMoodHistory.moodId, pattern.moodId));\n    }\n    if (pattern.timeOfDay) {\n      conditions.push(eq(userMoodHistory.timeOfDay, pattern.timeOfDay));\n    }\n    if (pattern.dayOfWeek) {\n      conditions.push(eq(userMoodHistory.dayOfWeek, pattern.dayOfWeek));\n    }\n\n    if (conditions.length > 0) {\n      historyQuery = historyQuery.where(and(...conditions));\n    }\n\n    const userIds = await historyQuery;\n    const uniqueUserIds = [...new Set(userIds.map(row => row.userId))];\n\n    if (uniqueUserIds.length === 0) {\n      return [];\n    }\n\n    return await db\n      .select()\n      .from(users)\n      .where(sql`${users.id} IN ${uniqueUserIds}`);\n  }\n\n  async updateMoodUsageStats(userId: string, moodId: string): Promise<void> {\n    // First try to update existing preference\n    const existingPreference = await this.getUserMoodPreference(userId, moodId);\n    \n    if (existingPreference) {\n      await db\n        .update(userMoodPreferences)\n        .set({\n          usageCount: sql`${userMoodPreferences.usageCount} + 1`,\n          lastUsed: new Date(),\n          updatedAt: new Date()\n        })\n        .where(eq(userMoodPreferences.id, existingPreference.id));\n    } else {\n      // Create new preference if it doesn't exist\n      await this.createUserMoodPreference({\n        userId,\n        moodId,\n        moodName: moodId,\n        energyLevel: 50,\n        focusLevel: 50,\n        creativityLevel: 50,\n        usageCount: 1,\n        lastUsed: new Date()\n      });\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":95107},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, timestamp, boolean, jsonb, index } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// Updated users table for Replit Auth\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  role: text(\"role\").notNull().default(\"viewer\"), // admin, manager, staff, viewer\n  department: text(\"department\"),\n  phone: text(\"phone\"),\n  region: text(\"region\"),\n  currency: text(\"currency\").default(\"ZAR\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n\n\nexport const products = pgTable(\"products\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  sku: text(\"sku\").notNull().unique(),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  category: text(\"category\").notNull(), // EPS, BR, LED\n  subcategory: text(\"subcategory\"), // Premium, Budget, Ready\n  dimensions: text(\"dimensions\"),\n  packSize: integer(\"pack_size\"),\n  packsPerBox: integer(\"packs_per_box\"),\n  basePrice: decimal(\"base_price\", { precision: 10, scale: 2 }).notNull(),\n  costPrice: decimal(\"cost_price\", { precision: 10, scale: 2 }).notNull(),\n  weight: decimal(\"weight\", { precision: 8, scale: 3 }),\n  specifications: jsonb(\"specifications\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const inventory = pgTable(\"inventory\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  location: text(\"location\").notNull().default(\"main_warehouse\"),\n  currentStock: integer(\"current_stock\").notNull().default(0),\n  reservedStock: integer(\"reserved_stock\").notNull().default(0),\n  reorderPoint: integer(\"reorder_point\").notNull().default(100),\n  maxStock: integer(\"max_stock\").notNull().default(10000),\n  lastRestocked: timestamp(\"last_restocked\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const distributors = pgTable(\"distributors\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  contactPerson: text(\"contact_person\").notNull(),\n  email: text(\"email\").notNull(),\n  phone: text(\"phone\"),\n  address: text(\"address\"),\n  city: text(\"city\").notNull(),\n  region: text(\"region\").notNull(),\n  country: text(\"country\").notNull(),\n  currency: text(\"currency\").notNull(),\n  status: text(\"status\").notNull().default(\"active\"), // active, inactive, pending\n  tier: text(\"tier\").notNull().default(\"standard\"), // premium, standard, basic\n  commissionRate: decimal(\"commission_rate\", { precision: 5, scale: 2 }).default(\"0.00\"),\n  creditLimit: decimal(\"credit_limit\", { precision: 12, scale: 2 }).default(\"0.00\"),\n  paymentTerms: text(\"payment_terms\").default(\"COD\"),\n  brands: jsonb(\"brands\"), // Array of sub-brands they can sell\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  orderNumber: text(\"order_number\").notNull().unique(),\n  distributorId: varchar(\"distributor_id\").notNull().references(() => distributors.id),\n  status: text(\"status\").notNull().default(\"pending\"), // pending, confirmed, production, shipped, delivered, cancelled\n  totalAmount: decimal(\"total_amount\", { precision: 12, scale: 2 }).notNull(),\n  currency: text(\"currency\").notNull(),\n  exchangeRate: decimal(\"exchange_rate\", { precision: 10, scale: 6 }).default(\"1.000000\"),\n  paymentStatus: text(\"payment_status\").notNull().default(\"pending\"),\n  expectedDelivery: timestamp(\"expected_delivery\"),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const orderItems = pgTable(\"order_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  quantity: integer(\"quantity\").notNull(),\n  unitPrice: decimal(\"unit_price\", { precision: 10, scale: 2 }).notNull(),\n  totalPrice: decimal(\"total_price\", { precision: 12, scale: 2 }).notNull(),\n});\n\nexport const productionSchedule = pgTable(\"production_schedule\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  scheduledDate: timestamp(\"scheduled_date\").notNull(),\n  plannedQuantity: integer(\"planned_quantity\").notNull(),\n  actualQuantity: integer(\"actual_quantity\").default(0),\n  productionLine: text(\"production_line\").notNull(),\n  status: text(\"status\").notNull().default(\"scheduled\"), // scheduled, in_progress, completed, cancelled\n  priority: text(\"priority\").notNull().default(\"normal\"), // high, normal, low\n  efficiency: decimal(\"efficiency\", { precision: 5, scale: 2 }),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const demandForecast = pgTable(\"demand_forecast\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  region: text(\"region\").notNull(),\n  forecastDate: timestamp(\"forecast_date\").notNull(),\n  predictedDemand: integer(\"predicted_demand\").notNull(),\n  confidence: decimal(\"confidence\", { precision: 5, scale: 2 }).notNull(),\n  seasonalFactor: decimal(\"seasonal_factor\", { precision: 5, scale: 2 }),\n  marketTrend: text(\"market_trend\"), // up, down, stable\n  modelVersion: text(\"model_version\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const salesMetrics = pgTable(\"sales_metrics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  date: timestamp(\"date\").notNull(),\n  region: text(\"region\").notNull(),\n  productId: varchar(\"product_id\").references(() => products.id),\n  distributorId: varchar(\"distributor_id\").references(() => distributors.id),\n  revenue: decimal(\"revenue\", { precision: 12, scale: 2 }).notNull(),\n  units: integer(\"units\").notNull(),\n  currency: text(\"currency\").notNull(),\n  metricType: text(\"metric_type\").notNull(), // daily, weekly, monthly\n});\n\nexport const brands = pgTable(\"brands\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  displayName: text(\"display_name\").notNull(),\n  description: text(\"description\"),\n  color: text(\"color\").notNull(),\n  icon: text(\"icon\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Sales Representatives\nexport const salesReps = pgTable(\"sales_reps\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  empId: text(\"emp_id\").notNull().unique(),\n  firstName: text(\"first_name\").notNull(),\n  lastName: text(\"last_name\").notNull(),\n  email: text(\"email\").notNull(),\n  phone: text(\"phone\"),\n  territory: text(\"territory\").notNull(),\n  region: text(\"region\").notNull(),\n  province: text(\"province\").notNull(),\n  targetSales: decimal(\"target_sales\", { precision: 12, scale: 2 }).default(\"0.00\"),\n  commissionRate: decimal(\"commission_rate\", { precision: 5, scale: 2 }).default(\"0.00\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Hardware Stores (8500+ stores)\nexport const hardwareStores = pgTable(\"hardware_stores\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  storeCode: text(\"store_code\").notNull().unique(),\n  storeName: text(\"store_name\").notNull(),\n  ownerName: text(\"owner_name\"),\n  contactPerson: text(\"contact_person\"),\n  phone: text(\"phone\"),\n  email: text(\"email\"),\n  address: text(\"address\").notNull(),\n  city: text(\"city\").notNull(),\n  province: text(\"province\").notNull(),\n  postalCode: text(\"postal_code\"),\n  latitude: decimal(\"latitude\", { precision: 10, scale: 8 }),\n  longitude: decimal(\"longitude\", { precision: 11, scale: 8 }),\n  storeSize: text(\"store_size\").default(\"medium\"), // small, medium, large, mega\n  storeType: text(\"store_type\").notNull(), // independent, chain, franchise\n  creditRating: text(\"credit_rating\").default(\"B\"), // A+, A, B+, B, C+, C, D\n  monthlyPotential: decimal(\"monthly_potential\", { precision: 10, scale: 2 }).default(\"0.00\"),\n  lastOrderDate: timestamp(\"last_order_date\"),\n  lastVisitDate: timestamp(\"last_visit_date\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Route Plans (from Excel sheets)\nexport const routePlans = pgTable(\"route_plans\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  routeCode: text(\"route_code\").notNull().unique(),\n  routeName: text(\"route_name\").notNull(),\n  salesRepId: varchar(\"sales_rep_id\").notNull().references(() => salesReps.id),\n  province: text(\"province\").notNull(),\n  region: text(\"region\").notNull(),\n  visitFrequency: text(\"visit_frequency\").notNull(), // weekly, biweekly, monthly\n  totalStores: integer(\"total_stores\").notNull().default(0),\n  estimatedDuration: integer(\"estimated_duration\"), // in hours\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Route Store Assignments\nexport const routeStores = pgTable(\"route_stores\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  routePlanId: varchar(\"route_plan_id\").notNull().references(() => routePlans.id),\n  hardwareStoreId: varchar(\"hardware_store_id\").notNull().references(() => hardwareStores.id),\n  visitOrder: integer(\"visit_order\"), // sequence in route\n  preferredVisitDay: text(\"preferred_visit_day\"), // monday, tuesday, etc\n  estimatedDuration: integer(\"estimated_duration\"), // minutes per visit\n  lastVisitDate: timestamp(\"last_visit_date\"),\n  nextScheduledVisit: timestamp(\"next_scheduled_visit\"),\n  visitNotes: text(\"visit_notes\"),\n});\n\n// AI Suggestions for Smart Ordering\nexport const aiOrderSuggestions = pgTable(\"ai_order_suggestions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  hardwareStoreId: varchar(\"hardware_store_id\").notNull().references(() => hardwareStores.id),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  suggestedQuantity: integer(\"suggested_quantity\").notNull(),\n  suggestedValue: decimal(\"suggested_value\", { precision: 10, scale: 2 }).notNull(),\n  confidence: decimal(\"confidence\", { precision: 5, scale: 2 }).notNull(),\n  reasoning: text(\"reasoning\"), // AI explanation for the suggestion\n  seasonalFactor: decimal(\"seasonal_factor\", { precision: 5, scale: 2 }),\n  urgencyLevel: text(\"urgency_level\").default(\"normal\"), // urgent, high, normal, low\n  validUntil: timestamp(\"valid_until\").notNull(),\n  status: text(\"status\").default(\"pending\"), // pending, accepted, rejected, expired\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Store Visit Reports\nexport const storeVisits = pgTable(\"store_visits\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  hardwareStoreId: varchar(\"hardware_store_id\").notNull().references(() => hardwareStores.id),\n  salesRepId: varchar(\"sales_rep_id\").notNull().references(() => salesReps.id),\n  visitDate: timestamp(\"visit_date\").notNull(),\n  visitType: text(\"visit_type\").notNull(), // scheduled, unscheduled, follow_up\n  visitDuration: integer(\"visit_duration\"), // minutes\n  ordersPlaced: integer(\"orders_placed\").default(0),\n  orderValue: decimal(\"order_value\", { precision: 10, scale: 2 }).default(\"0.00\"),\n  storeCondition: text(\"store_condition\"), // excellent, good, fair, poor\n  stockLevel: text(\"stock_level\"), // overstocked, well_stocked, low_stock, out_of_stock\n  competitorActivity: text(\"competitor_activity\"),\n  notes: text(\"notes\"),\n  followUpRequired: boolean(\"follow_up_required\").default(false),\n  followUpDate: timestamp(\"follow_up_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Factory Setup and Ownership Management\nexport const factorySetups = pgTable(\"factory_setups\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  factoryName: varchar(\"factory_name\").notNull(),\n  location: varchar(\"location\").notNull(),\n  ownershipPhase: varchar(\"ownership_phase\").notNull().default(\"planning\"), // 'planning', 'setup', 'installation', 'testing', 'operational', 'owned'\n  progressPercentage: integer(\"progress_percentage\").default(0),\n  totalInvestment: varchar(\"total_investment\").notNull(),\n  currentPayment: integer(\"current_payment\").default(0),\n  totalPayments: integer(\"total_payments\").default(3),\n  monthlyRevenue: varchar(\"monthly_revenue\").default(\"0\"),\n  productionCapacity: integer(\"production_capacity\").default(0), // units per month\n  aiOptimizationLevel: integer(\"ai_optimization_level\").default(0), // percentage\n  connectedStores: integer(\"connected_stores\").default(0),\n  targetStores: integer(\"target_stores\").default(300),\n  setupDate: timestamp(\"setup_date\").defaultNow(),\n  completionDate: timestamp(\"completion_date\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow()\n});\n\nexport const aiInsights = pgTable(\"ai_insights\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  factoryId: varchar(\"factory_id\").references(() => factorySetups.id),\n  type: varchar(\"type\").notNull(), // 'optimization', 'market', 'expansion', 'cost_reduction'\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  impact: varchar(\"impact\").notNull(), // 'high', 'medium', 'low'\n  estimatedValue: varchar(\"estimated_value\").notNull(),\n  actionRequired: boolean(\"action_required\").default(false),\n  status: varchar(\"status\").default(\"pending\"), // 'pending', 'in_progress', 'completed', 'dismissed'\n  confidence: integer(\"confidence\").default(85), // AI confidence percentage\n  validUntil: timestamp(\"valid_until\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\nexport const productionMetrics = pgTable(\"production_metrics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  factoryId: varchar(\"factory_id\").notNull().references(() => factorySetups.id),\n  metricDate: timestamp(\"metric_date\").notNull(),\n  dailyOutput: integer(\"daily_output\").default(0),\n  efficiency: varchar(\"efficiency\").default(\"0\"), // percentage as string for precision\n  qualityScore: varchar(\"quality_score\").default(\"0\"), // percentage as string\n  wasteReduction: varchar(\"waste_reduction\").default(\"0\"), // percentage as string\n  energySavings: varchar(\"energy_savings\").default(\"0\"), // percentage as string\n  profitMargin: varchar(\"profit_margin\").default(\"0\"), // percentage as string\n  maintenanceHours: integer(\"maintenance_hours\").default(0),\n  downtime: integer(\"downtime\").default(0), // minutes\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\nexport const factoryRecommendations = pgTable(\"factory_recommendations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  factoryId: varchar(\"factory_id\").notNull().references(() => factorySetups.id),\n  recommendation: text(\"recommendation\").notNull(),\n  category: varchar(\"category\").notNull(), // 'inventory', 'optimization', 'maintenance', 'expansion'\n  priority: varchar(\"priority\").notNull().default(\"medium\"), // 'high', 'medium', 'low'\n  estimatedImpact: varchar(\"estimated_impact\"), // financial or operational impact\n  status: varchar(\"status\").default(\"pending\"), // 'pending', 'implemented', 'dismissed'\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Extended Automation Tables\nexport const automationRules = pgTable(\"automation_rules\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ruleName: varchar(\"rule_name\").notNull(),\n  category: varchar(\"category\").notNull(), // 'inventory', 'production', 'maintenance', 'quality', 'distribution'\n  triggerType: varchar(\"trigger_type\").notNull(), // 'threshold', 'schedule', 'event', 'predictive'\n  triggerCondition: jsonb(\"trigger_condition\").notNull(), // flexible condition data\n  actionType: varchar(\"action_type\").notNull(), // 'reorder', 'schedule', 'alert', 'optimize', 'adjust'\n  actionParameters: jsonb(\"action_parameters\").notNull(), // action configuration\n  isActive: boolean(\"is_active\").default(true),\n  priority: integer(\"priority\").default(2), // 1=high, 2=medium, 3=low\n  lastTriggered: timestamp(\"last_triggered\"),\n  executionCount: integer(\"execution_count\").default(0),\n  successRate: varchar(\"success_rate\").default(\"0.00\"), // percentage as string\n  createdBy: varchar(\"created_by\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const automationEvents = pgTable(\"automation_events\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ruleId: varchar(\"rule_id\").notNull().references(() => automationRules.id),\n  eventType: varchar(\"event_type\").notNull(), // 'triggered', 'executed', 'failed', 'completed'\n  status: varchar(\"status\").notNull(), // 'success', 'failed', 'pending', 'cancelled'\n  triggerData: jsonb(\"trigger_data\"), // data that triggered the rule\n  result: jsonb(\"result\"), // execution result or error details\n  executionTime: integer(\"execution_time\"), // milliseconds\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const maintenanceSchedules = pgTable(\"maintenance_schedules\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  equipmentName: varchar(\"equipment_name\").notNull(),\n  maintenanceType: varchar(\"maintenance_type\").notNull(), // 'preventive', 'predictive', 'corrective'\n  factoryId: varchar(\"factory_id\").references(() => factorySetups.id),\n  scheduledDate: timestamp(\"scheduled_date\").notNull(),\n  estimatedDuration: integer(\"estimated_duration\"), // minutes\n  priority: varchar(\"priority\").notNull().default(\"medium\"), // 'high', 'medium', 'low'\n  status: varchar(\"status\").notNull().default(\"scheduled\"), // 'scheduled', 'in_progress', 'completed', 'cancelled'\n  assignedTechnician: varchar(\"assigned_technician\"),\n  checklist: jsonb(\"checklist\"), // maintenance tasks\n  notes: text(\"notes\"),\n  cost: varchar(\"cost\").default(\"0.00\"), // cost as string for precision\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  orders: many(orders),\n}));\n\nexport const productsRelations = relations(products, ({ one, many }) => ({\n  inventory: one(inventory, { fields: [products.id], references: [inventory.productId] }),\n  orderItems: many(orderItems),\n  productionSchedule: many(productionSchedule),\n  demandForecast: many(demandForecast),\n  salesMetrics: many(salesMetrics),\n}));\n\nexport const inventoryRelations = relations(inventory, ({ one }) => ({\n  product: one(products, { fields: [inventory.productId], references: [products.id] }),\n}));\n\nexport const distributorsRelations = relations(distributors, ({ many }) => ({\n  orders: many(orders),\n  salesMetrics: many(salesMetrics),\n}));\n\nexport const ordersRelations = relations(orders, ({ one, many }) => ({\n  distributor: one(distributors, { fields: [orders.distributorId], references: [distributors.id] }),\n  orderItems: many(orderItems),\n}));\n\nexport const orderItemsRelations = relations(orderItems, ({ one }) => ({\n  order: one(orders, { fields: [orderItems.orderId], references: [orders.id] }),\n  product: one(products, { fields: [orderItems.productId], references: [products.id] }),\n}));\n\nexport const productionScheduleRelations = relations(productionSchedule, ({ one }) => ({\n  product: one(products, { fields: [productionSchedule.productId], references: [products.id] }),\n}));\n\nexport const demandForecastRelations = relations(demandForecast, ({ one }) => ({\n  product: one(products, { fields: [demandForecast.productId], references: [products.id] }),\n}));\n\nexport const salesMetricsRelations = relations(salesMetrics, ({ one }) => ({\n  product: one(products, { fields: [salesMetrics.productId], references: [products.id] }),\n  distributor: one(distributors, { fields: [salesMetrics.distributorId], references: [distributors.id] }),\n}));\n\nexport const salesRepsRelations = relations(salesReps, ({ many }) => ({\n  routePlans: many(routePlans),\n  storeVisits: many(storeVisits),\n}));\n\nexport const hardwareStoresRelations = relations(hardwareStores, ({ many }) => ({\n  routeStores: many(routeStores),\n  aiOrderSuggestions: many(aiOrderSuggestions),\n  storeVisits: many(storeVisits),\n}));\n\nexport const routePlansRelations = relations(routePlans, ({ one, many }) => ({\n  salesRep: one(salesReps, { fields: [routePlans.salesRepId], references: [salesReps.id] }),\n  routeStores: many(routeStores),\n}));\n\nexport const routeStoresRelations = relations(routeStores, ({ one }) => ({\n  routePlan: one(routePlans, { fields: [routeStores.routePlanId], references: [routePlans.id] }),\n  hardwareStore: one(hardwareStores, { fields: [routeStores.hardwareStoreId], references: [hardwareStores.id] }),\n}));\n\nexport const aiOrderSuggestionsRelations = relations(aiOrderSuggestions, ({ one }) => ({\n  hardwareStore: one(hardwareStores, { fields: [aiOrderSuggestions.hardwareStoreId], references: [hardwareStores.id] }),\n  product: one(products, { fields: [aiOrderSuggestions.productId], references: [products.id] }),\n}));\n\nexport const storeVisitsRelations = relations(storeVisits, ({ one }) => ({\n  hardwareStore: one(hardwareStores, { fields: [storeVisits.hardwareStoreId], references: [hardwareStores.id] }),\n  salesRep: one(salesReps, { fields: [storeVisits.salesRepId], references: [salesReps.id] }),\n}));\n\n// Factory relations\nexport const factorySetupsRelations = relations(factorySetups, ({ many }) => ({\n  aiInsights: many(aiInsights),\n  productionMetrics: many(productionMetrics),\n  recommendations: many(factoryRecommendations),\n}));\n\nexport const aiInsightsRelations = relations(aiInsights, ({ one }) => ({\n  factory: one(factorySetups, { fields: [aiInsights.factoryId], references: [factorySetups.id] }),\n}));\n\nexport const productionMetricsRelations = relations(productionMetrics, ({ one }) => ({\n  factory: one(factorySetups, { fields: [productionMetrics.factoryId], references: [factorySetups.id] }),\n}));\n\nexport const factoryRecommendationsRelations = relations(factoryRecommendations, ({ one }) => ({\n  factory: one(factorySetups, { fields: [factoryRecommendations.factoryId], references: [factorySetups.id] }),\n}));\n\nexport const automationRulesRelations = relations(automationRules, ({ many }) => ({\n  events: many(automationEvents),\n}));\n\nexport const automationEventsRelations = relations(automationEvents, ({ one }) => ({\n  rule: one(automationRules, { fields: [automationEvents.ruleId], references: [automationRules.id] }),\n}));\n\nexport const maintenanceSchedulesRelations = relations(maintenanceSchedules, ({ one }) => ({\n  factory: one(factorySetups, { fields: [maintenanceSchedules.factoryId], references: [factorySetups.id] }),\n}));\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true });\nexport const insertProductSchema = createInsertSchema(products).omit({ id: true, createdAt: true });\nexport const insertInventorySchema = createInsertSchema(inventory).omit({ id: true, updatedAt: true });\nexport const insertDistributorSchema = createInsertSchema(distributors).omit({ id: true, createdAt: true });\nexport const insertOrderSchema = createInsertSchema(orders).omit({ id: true, createdAt: true });\nexport const insertOrderItemSchema = createInsertSchema(orderItems).omit({ id: true });\nexport const insertProductionScheduleSchema = createInsertSchema(productionSchedule).omit({ id: true, createdAt: true });\nexport const insertDemandForecastSchema = createInsertSchema(demandForecast).omit({ id: true, createdAt: true });\nexport const insertSalesMetricsSchema = createInsertSchema(salesMetrics).omit({ id: true });\nexport const insertBrandSchema = createInsertSchema(brands).omit({ id: true, createdAt: true });\nexport const insertSalesRepSchema = createInsertSchema(salesReps).omit({ id: true, createdAt: true });\nexport const insertHardwareStoreSchema = createInsertSchema(hardwareStores).omit({ id: true, createdAt: true });\nexport const insertRoutePlanSchema = createInsertSchema(routePlans).omit({ id: true, createdAt: true });\nexport const insertRouteStoreSchema = createInsertSchema(routeStores).omit({ id: true });\nexport const insertAiOrderSuggestionSchema = createInsertSchema(aiOrderSuggestions).omit({ id: true, createdAt: true });\nexport const insertStoreVisitSchema = createInsertSchema(storeVisits).omit({ id: true, createdAt: true });\n\n// Factory schemas\nexport const insertFactorySetupSchema = createInsertSchema(factorySetups).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertAiInsightSchema = createInsertSchema(aiInsights).omit({ id: true, createdAt: true });\nexport const insertProductionMetricsSchema = createInsertSchema(productionMetrics).omit({ id: true, createdAt: true });\nexport const insertFactoryRecommendationSchema = createInsertSchema(factoryRecommendations).omit({ id: true, createdAt: true });\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpsertUser = typeof users.$inferInsert;\nexport type Product = typeof products.$inferSelect;\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\nexport type Inventory = typeof inventory.$inferSelect;\nexport type InsertInventory = z.infer<typeof insertInventorySchema>;\nexport type Distributor = typeof distributors.$inferSelect;\nexport type InsertDistributor = z.infer<typeof insertDistributorSchema>;\nexport type Order = typeof orders.$inferSelect;\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\nexport type OrderItem = typeof orderItems.$inferSelect;\nexport type InsertOrderItem = z.infer<typeof insertOrderItemSchema>;\nexport type ProductionSchedule = typeof productionSchedule.$inferSelect;\nexport type InsertProductionSchedule = z.infer<typeof insertProductionScheduleSchema>;\nexport type DemandForecast = typeof demandForecast.$inferSelect;\nexport type InsertDemandForecast = z.infer<typeof insertDemandForecastSchema>;\nexport type SalesMetrics = typeof salesMetrics.$inferSelect;\nexport type InsertSalesMetrics = z.infer<typeof insertSalesMetricsSchema>;\nexport type Brand = typeof brands.$inferSelect;\nexport type InsertBrand = z.infer<typeof insertBrandSchema>;\nexport type SalesRep = typeof salesReps.$inferSelect;\nexport type InsertSalesRep = z.infer<typeof insertSalesRepSchema>;\nexport type HardwareStore = typeof hardwareStores.$inferSelect;\nexport type InsertHardwareStore = z.infer<typeof insertHardwareStoreSchema>;\nexport type RoutePlan = typeof routePlans.$inferSelect;\nexport type InsertRoutePlan = z.infer<typeof insertRoutePlanSchema>;\nexport type RouteStore = typeof routeStores.$inferSelect;\nexport type InsertRouteStore = z.infer<typeof insertRouteStoreSchema>;\nexport type AiOrderSuggestion = typeof aiOrderSuggestions.$inferSelect;\nexport type InsertAiOrderSuggestion = z.infer<typeof insertAiOrderSuggestionSchema>;\nexport type StoreVisit = typeof storeVisits.$inferSelect;\nexport type InsertStoreVisit = z.infer<typeof insertStoreVisitSchema>;\n\n// Factory types\nexport type FactorySetup = typeof factorySetups.$inferSelect;\nexport type InsertFactorySetup = z.infer<typeof insertFactorySetupSchema>;\nexport type AiInsight = typeof aiInsights.$inferSelect;\nexport type InsertAiInsight = z.infer<typeof insertAiInsightSchema>;\nexport type ProductionMetrics = typeof productionMetrics.$inferSelect;\nexport type InsertProductionMetrics = z.infer<typeof insertProductionMetricsSchema>;\nexport type FactoryRecommendation = typeof factoryRecommendations.$inferSelect;\n\n// Extended Automation Types\nexport const insertAutomationRuleSchema = createInsertSchema(automationRules).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertAutomationEventSchema = createInsertSchema(automationEvents).omit({ id: true, createdAt: true });\nexport const insertMaintenanceScheduleSchema = createInsertSchema(maintenanceSchedules).omit({ id: true, createdAt: true, updatedAt: true });\n\nexport type InsertAutomationRule = z.infer<typeof insertAutomationRuleSchema>;\nexport type InsertAutomationEvent = z.infer<typeof insertAutomationEventSchema>;\nexport type InsertMaintenanceSchedule = z.infer<typeof insertMaintenanceScheduleSchema>;\n\nexport type AutomationRule = typeof automationRules.$inferSelect;\nexport type AutomationEvent = typeof automationEvents.$inferSelect;\nexport type MaintenanceSchedule = typeof maintenanceSchedules.$inferSelect;\nexport type InsertFactoryRecommendation = z.infer<typeof insertFactoryRecommendationSchema>;\n\n// Excel Upload Tables\nexport const excelUploads = pgTable(\"excel_uploads\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  fileName: varchar(\"file_name\").notNull(),\n  mappedName: varchar(\"mapped_name\").notNull(),\n  fileSize: integer(\"file_size\").notNull(),\n  uploadedAt: timestamp(\"uploaded_at\").defaultNow(),\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, processing, completed, failed\n  storesCount: integer(\"stores_count\").default(0),\n  routesCount: integer(\"routes_count\").default(0),\n  errorMessage: text(\"error_message\"),\n  metadata: jsonb(\"metadata\"),\n});\n\nexport const hardwareStoresFromExcel = pgTable(\"hardware_stores_from_excel\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  uploadId: varchar(\"upload_id\").references(() => excelUploads.id),\n  storeName: varchar(\"store_name\").notNull(),\n  storeAddress: text(\"store_address\"),\n  cityTown: varchar(\"city_town\"),\n  province: varchar(\"province\"),\n  contactPerson: varchar(\"contact_person\"),\n  phoneNumber: varchar(\"phone_number\"),\n  repName: varchar(\"rep_name\"),\n  visitFrequency: varchar(\"visit_frequency\"),\n  mappedToCornex: varchar(\"mapped_to_cornex\").notNull(), // The Cornex mapping\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const salesRepRoutesFromExcel = pgTable(\"sales_rep_routes_from_excel\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  uploadId: varchar(\"upload_id\").references(() => excelUploads.id),\n  repName: varchar(\"rep_name\").notNull(),\n  routeName: varchar(\"route_name\"),\n  storeId: varchar(\"store_id\").references(() => hardwareStoresFromExcel.id),\n  visitDay: varchar(\"visit_day\"),\n  visitFrequency: varchar(\"visit_frequency\"),\n  priority: integer(\"priority\").default(1),\n  mappedToCornex: varchar(\"mapped_to_cornex\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Excel upload relations\nexport const excelUploadsRelations = relations(excelUploads, ({ many }) => ({\n  hardwareStores: many(hardwareStoresFromExcel),\n  salesRepRoutes: many(salesRepRoutesFromExcel),\n}));\n\nexport const hardwareStoresFromExcelRelations = relations(hardwareStoresFromExcel, ({ one, many }) => ({\n  upload: one(excelUploads, { fields: [hardwareStoresFromExcel.uploadId], references: [excelUploads.id] }),\n  routes: many(salesRepRoutesFromExcel),\n}));\n\nexport const salesRepRoutesFromExcelRelations = relations(salesRepRoutesFromExcel, ({ one }) => ({\n  upload: one(excelUploads, { fields: [salesRepRoutesFromExcel.uploadId], references: [excelUploads.id] }),\n  store: one(hardwareStoresFromExcel, { fields: [salesRepRoutesFromExcel.storeId], references: [hardwareStoresFromExcel.id] }),\n}));\n\n// Excel upload schemas\nexport const insertExcelUploadSchema = createInsertSchema(excelUploads).omit({ id: true, uploadedAt: true });\nexport const insertHardwareStoreFromExcelSchema = createInsertSchema(hardwareStoresFromExcel).omit({ id: true, createdAt: true });\n\n// Product Labeling and Inserts Library System\nexport const productLabels = pgTable(\"product_labels\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  productId: varchar(\"product_id\").references(() => products.id),\n  category: text(\"category\").notNull(), // product_label, insert_card, packaging_label, barcode_label, safety_label\n  labelType: text(\"label_type\").notNull(), // standard, custom, regulatory, promotional\n  fileUrl: text(\"file_url\").notNull(), // Object storage path to PDF\n  fileName: text(\"file_name\").notNull(),\n  fileSize: integer(\"file_size\").notNull(),\n  printSize: text(\"print_size\").notNull(), // A4, A5, 4x6, custom\n  printOrientation: text(\"print_orientation\").notNull().default(\"portrait\"), // portrait, landscape\n  printQuality: text(\"print_quality\").notNull().default(\"high\"), // draft, normal, high, photo\n  colorMode: text(\"color_mode\").notNull().default(\"color\"), // bw, color\n  copies: integer(\"copies\").default(1),\n  isActive: boolean(\"is_active\").default(true),\n  version: text(\"version\").default(\"1.0\"),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const printers = pgTable(\"printers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  model: text(\"model\"),\n  manufacturer: text(\"manufacturer\"),\n  ipAddress: text(\"ip_address\").notNull(),\n  macAddress: text(\"mac_address\"),\n  location: text(\"location\").notNull(),\n  department: text(\"department\"),\n  printerType: text(\"printer_type\").notNull(), // laser, inkjet, thermal, dot_matrix\n  connectionType: text(\"connection_type\").notNull().default(\"wifi\"), // wifi, ethernet, usb\n  supportedSizes: jsonb(\"supported_sizes\").notNull(), // [\"A4\", \"A5\", \"4x6\"]\n  capabilities: jsonb(\"capabilities\").notNull(), // {\"color\": true, \"duplex\": true, \"staple\": false}\n  status: text(\"status\").notNull().default(\"offline\"), // online, offline, printing, error, maintenance\n  paperLevel: integer(\"paper_level\").default(100), // Percentage\n  tonerLevel: integer(\"toner_level\").default(100), // Percentage\n  isDefault: boolean(\"is_default\").default(false),\n  isActive: boolean(\"is_active\").default(true),\n  lastPingAt: timestamp(\"last_ping_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const printJobs = pgTable(\"print_jobs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  labelId: varchar(\"label_id\").notNull().references(() => productLabels.id),\n  printerId: varchar(\"printer_id\").notNull().references(() => printers.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  jobName: text(\"job_name\").notNull(),\n  copies: integer(\"copies\").notNull().default(1),\n  printSize: text(\"print_size\").notNull(),\n  printOrientation: text(\"print_orientation\").notNull().default(\"portrait\"),\n  printQuality: text(\"print_quality\").notNull().default(\"normal\"),\n  colorMode: text(\"color_mode\").notNull().default(\"color\"),\n  status: text(\"status\").notNull().default(\"queued\"), // queued, printing, completed, failed, cancelled\n  priority: text(\"priority\").notNull().default(\"normal\"), // low, normal, high, urgent\n  estimatedPages: integer(\"estimated_pages\").default(1),\n  actualPages: integer(\"actual_pages\").default(0),\n  startedAt: timestamp(\"started_at\"),\n  completedAt: timestamp(\"completed_at\"),\n  errorMessage: text(\"error_message\"),\n  metadata: jsonb(\"metadata\"), // Additional print settings\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const labelTemplates = pgTable(\"label_templates\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  category: text(\"category\").notNull(), // product_info, pricing, promotional, regulatory, custom\n  templateType: text(\"template_type\").notNull(), // pdf_template, design_template\n  templateUrl: text(\"template_url\").notNull(), // Object storage path\n  previewUrl: text(\"preview_url\"), // Preview image path\n  fields: jsonb(\"fields\").notNull(), // Editable fields configuration\n  defaultValues: jsonb(\"default_values\"), // Default field values\n  printSettings: jsonb(\"print_settings\").notNull(), // Size, orientation, margins\n  isPublic: boolean(\"is_public\").default(false), // Available to all users\n  usageCount: integer(\"usage_count\").default(0),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Relations for product labeling\nexport const productLabelsRelations = relations(productLabels, ({ one, many }) => ({\n  product: one(products, { fields: [productLabels.productId], references: [products.id] }),\n  creator: one(users, { fields: [productLabels.createdBy], references: [users.id] }),\n  printJobs: many(printJobs),\n}));\n\nexport const printersRelations = relations(printers, ({ many }) => ({\n  printJobs: many(printJobs),\n}));\n\nexport const printJobsRelations = relations(printJobs, ({ one }) => ({\n  label: one(productLabels, { fields: [printJobs.labelId], references: [productLabels.id] }),\n  printer: one(printers, { fields: [printJobs.printerId], references: [printers.id] }),\n  user: one(users, { fields: [printJobs.userId], references: [users.id] }),\n}));\n\nexport const labelTemplatesRelations = relations(labelTemplates, ({ one }) => ({\n  creator: one(users, { fields: [labelTemplates.createdBy], references: [users.id] }),\n}));\n\n// Product labeling insert schemas\nexport const insertProductLabelSchema = createInsertSchema(productLabels).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertPrinterSchema = createInsertSchema(printers).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertPrintJobSchema = createInsertSchema(printJobs).omit({ id: true, createdAt: true });\nexport const insertLabelTemplateSchema = createInsertSchema(labelTemplates).omit({ id: true, createdAt: true, updatedAt: true });\n\n// Product labeling types\nexport type ProductLabel = typeof productLabels.$inferSelect;\nexport type InsertProductLabel = z.infer<typeof insertProductLabelSchema>;\nexport type Printer = typeof printers.$inferSelect;\nexport type InsertPrinter = z.infer<typeof insertPrinterSchema>;\nexport type PrintJob = typeof printJobs.$inferSelect;\nexport type InsertPrintJob = z.infer<typeof insertPrintJobSchema>;\nexport type LabelTemplate = typeof labelTemplates.$inferSelect;\nexport type InsertLabelTemplate = z.infer<typeof insertLabelTemplateSchema>;\n\nexport const insertSalesRepRouteFromExcelSchema = createInsertSchema(salesRepRoutesFromExcel).omit({ id: true, createdAt: true });\n\n// Excel upload types\nexport type ExcelUpload = typeof excelUploads.$inferSelect;\nexport type InsertExcelUpload = z.infer<typeof insertExcelUploadSchema>;\nexport type HardwareStoreFromExcel = typeof hardwareStoresFromExcel.$inferSelect;\nexport type InsertHardwareStoreFromExcel = z.infer<typeof insertHardwareStoreFromExcelSchema>;\nexport type SalesRepRouteFromExcel = typeof salesRepRoutesFromExcel.$inferSelect;\nexport type InsertSalesRepRouteFromExcel = z.infer<typeof insertSalesRepRouteFromExcelSchema>;\n\n// AI-Powered Mood Selector Database Tables\nexport const userMoodPreferences = pgTable(\"user_mood_preferences\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  moodId: text(\"mood_id\").notNull(), // energetic, focused, creative, calm, productive\n  moodName: text(\"mood_name\").notNull(),\n  energyLevel: integer(\"energy_level\").notNull().default(50), // 0-100\n  focusLevel: integer(\"focus_level\").notNull().default(50), // 0-100\n  creativityLevel: integer(\"creativity_level\").notNull().default(50), // 0-100\n  isDefault: boolean(\"is_default\").default(false),\n  isAdaptive: boolean(\"is_adaptive\").default(false),\n  transitionSettings: jsonb(\"transition_settings\"), // duration, easing, etc.\n  aiRecommended: boolean(\"ai_recommended\").default(false),\n  usageCount: integer(\"usage_count\").default(0),\n  lastUsed: timestamp(\"last_used\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const userMoodHistory = pgTable(\"user_mood_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  moodId: text(\"mood_id\").notNull(),\n  moodName: text(\"mood_name\").notNull(),\n  timeOfDay: text(\"time_of_day\"), // morning, afternoon, evening, night\n  dayOfWeek: text(\"day_of_week\"), // monday, tuesday, etc.\n  sessionDuration: integer(\"session_duration\"), // minutes\n  contextData: jsonb(\"context_data\"), // page visited, actions taken, etc.\n  aiAnalysis: jsonb(\"ai_analysis\"), // OpenAI mood analysis results\n  satisfaction: integer(\"satisfaction\"), // 1-5 rating (if provided)\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n});\n\nexport const aiMoodAnalytics = pgTable(\"ai_mood_analytics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  analysisType: text(\"analysis_type\").notNull(), // daily_pattern, weekly_trend, productivity_correlation\n  insights: jsonb(\"insights\"), // AI-generated insights\n  recommendations: jsonb(\"recommendations\"), // suggested mood adjustments\n  confidence: integer(\"confidence\"), // 0-100 AI confidence score\n  dataPoints: integer(\"data_points\"), // number of sessions analyzed\n  generatedAt: timestamp(\"generated_at\").defaultNow(),\n});\n\n// Mood selector relations\nexport const userMoodPreferencesRelations = relations(userMoodPreferences, ({ one, many }) => ({\n  user: one(users, { fields: [userMoodPreferences.userId], references: [users.id] }),\n  history: many(userMoodHistory),\n}));\n\nexport const userMoodHistoryRelations = relations(userMoodHistory, ({ one }) => ({\n  user: one(users, { fields: [userMoodHistory.userId], references: [users.id] }),\n  preference: one(userMoodPreferences, { \n    fields: [userMoodHistory.userId, userMoodHistory.moodId], \n    references: [userMoodPreferences.userId, userMoodPreferences.moodId] \n  }),\n}));\n\nexport const aiMoodAnalyticsRelations = relations(aiMoodAnalytics, ({ one }) => ({\n  user: one(users, { fields: [aiMoodAnalytics.userId], references: [users.id] }),\n}));\n\n// Mood selector schemas\nexport const insertUserMoodPreferenceSchema = createInsertSchema(userMoodPreferences).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertUserMoodHistorySchema = createInsertSchema(userMoodHistory).omit({ id: true, timestamp: true });\nexport const insertAiMoodAnalyticsSchema = createInsertSchema(aiMoodAnalytics).omit({ id: true, generatedAt: true });\n\n// Mood selector types\nexport type UserMoodPreference = typeof userMoodPreferences.$inferSelect;\nexport type InsertUserMoodPreference = z.infer<typeof insertUserMoodPreferenceSchema>;\nexport type UserMoodHistory = typeof userMoodHistory.$inferSelect;\nexport type InsertUserMoodHistory = z.infer<typeof insertUserMoodHistorySchema>;\nexport type AiMoodAnalytics = typeof aiMoodAnalytics.$inferSelect;\nexport type InsertAiMoodAnalytics = z.infer<typeof insertAiMoodAnalyticsSchema>;\n\n// Bulk Import Sessions table (for tracking file uploads)\nexport const bulkImportSessions = pgTable(\"bulk_import_sessions\", {\n  id: varchar(\"id\").primaryKey(),\n  name: varchar(\"name\").notNull(),\n  totalFiles: integer(\"total_files\").notNull().default(0),\n  processedFiles: integer(\"processed_files\").notNull().default(0),\n  totalImported: integer(\"total_imported\").default(0),\n  status: varchar(\"status\").notNull().default(\"active\"), // active, completed, failed\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  files: jsonb(\"files\").notNull().default(\"[]\"), // Store file processing details as JSON\n});\n\nexport const insertBulkImportSessionSchema = createInsertSchema(bulkImportSessions).omit({ createdAt: true, updatedAt: true });\nexport type BulkImportSession = typeof bulkImportSessions.$inferSelect;\nexport type InsertBulkImportSession = z.infer<typeof insertBulkImportSessionSchema>;\n\n// Authentication and User Management Tables\nexport const userRegistrations = pgTable(\"user_registrations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").notNull().unique(),\n  firstName: varchar(\"first_name\").notNull(),\n  lastName: varchar(\"last_name\").notNull(),\n  companyName: varchar(\"company_name\").notNull(),\n  companyRegistration: varchar(\"company_registration\"),\n  phone: varchar(\"phone\"),\n  role: text(\"role\").notNull().default(\"admin\"), // admin, manager, user\n  status: text(\"status\").notNull().default(\"pending\"), // pending, approved, rejected\n  verificationCode: varchar(\"verification_code\"),\n  verificationExpiry: timestamp(\"verification_expiry\"),\n  registeredAt: timestamp(\"registered_at\").defaultNow(),\n  approvedAt: timestamp(\"approved_at\"),\n  approvedBy: varchar(\"approved_by\").references(() => users.id),\n});\n\nexport const userAuditTrail = pgTable(\"user_audit_trail\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id),\n  action: text(\"action\").notNull(), // login, logout, register, update_profile, password_change, etc.\n  details: text(\"details\"),\n  ipAddress: varchar(\"ip_address\"),\n  userAgent: text(\"user_agent\"),\n  sessionId: varchar(\"session_id\"),\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n});\n\nexport const companySettings = pgTable(\"company_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  companyName: varchar(\"company_name\").notNull(),\n  companyRegistration: varchar(\"company_registration\"),\n  contactEmail: varchar(\"contact_email\").notNull(),\n  alternateEmail: varchar(\"alternate_email\"),\n  phone: varchar(\"phone\"),\n  alternatePhone: varchar(\"alternate_phone\"),\n  address: text(\"address\"),\n  city: varchar(\"city\"),\n  province: varchar(\"province\"),\n  postalCode: varchar(\"postal_code\"),\n  country: varchar(\"country\").default(\"South Africa\"),\n  vatNumber: varchar(\"vat_number\"),\n  bankDetails: jsonb(\"bank_details\"), // Store bank account info securely\n  businessType: text(\"business_type\"), // distributor, retailer, manufacturer\n  creditLimit: decimal(\"credit_limit\", { precision: 12, scale: 2 }).default(\"0\"),\n  paymentTerms: text(\"payment_terms\").default(\"30_days\"), // 30_days, 60_days, cash\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Relations for new tables\nexport const userRegistrationsRelations = relations(userRegistrations, ({ one }) => ({\n  approver: one(users, { fields: [userRegistrations.approvedBy], references: [users.id] }),\n}));\n\nexport const userAuditTrailRelations = relations(userAuditTrail, ({ one }) => ({\n  user: one(users, { fields: [userAuditTrail.userId], references: [users.id] }),\n}));\n\nexport const companySettingsRelations = relations(companySettings, ({ one }) => ({\n  user: one(users, { fields: [companySettings.userId], references: [users.id] }),\n}));\n\n// Schema types for new tables\nexport const insertUserRegistrationSchema = createInsertSchema(userRegistrations).omit({ id: true, registeredAt: true });\nexport const insertUserAuditTrailSchema = createInsertSchema(userAuditTrail).omit({ id: true, timestamp: true });\nexport const insertCompanySettingsSchema = createInsertSchema(companySettings).omit({ id: true, createdAt: true, updatedAt: true });\n\nexport type UserRegistration = typeof userRegistrations.$inferSelect;\nexport type InsertUserRegistration = z.infer<typeof insertUserRegistrationSchema>;\nexport type UserAuditTrail = typeof userAuditTrail.$inferSelect;\nexport type InsertUserAuditTrail = z.infer<typeof insertUserAuditTrailSchema>;\nexport type CompanySettings = typeof companySettings.$inferSelect;\nexport type InsertCompanySettings = z.infer<typeof insertCompanySettingsSchema>;\n\n// Purchase Order System Tables\nexport const purchaseOrders = pgTable(\"purchase_orders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  poNumber: varchar(\"po_number\").notNull().unique(), // Auto-generated PO number\n  customerId: varchar(\"customer_id\"), // Can reference distributors or be standalone\n  customerName: text(\"customer_name\").notNull(),\n  customerEmail: text(\"customer_email\").notNull(),\n  customerPhone: text(\"customer_phone\"),\n  customerAddress: text(\"customer_address\"),\n  customerCity: text(\"customer_city\"),\n  customerRegion: text(\"customer_region\"),\n  customerCountry: text(\"customer_country\").notNull(),\n  \n  // Order details\n  orderDate: timestamp(\"order_date\").defaultNow(),\n  requestedDeliveryDate: timestamp(\"requested_delivery_date\"),\n  urgencyLevel: text(\"urgency_level\").notNull().default(\"standard\"), // urgent, high, standard, low\n  currency: text(\"currency\").notNull().default(\"ZAR\"),\n  \n  // Pricing\n  subtotal: decimal(\"subtotal\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  taxAmount: decimal(\"tax_amount\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  shippingCost: decimal(\"shipping_cost\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  discountAmount: decimal(\"discount_amount\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  totalAmount: decimal(\"total_amount\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  \n  // Status and workflow\n  status: text(\"status\").notNull().default(\"pending\"), // pending, approved, in_production, ready_to_ship, shipped, delivered, cancelled\n  approvedBy: varchar(\"approved_by\").references(() => users.id),\n  approvedAt: timestamp(\"approved_at\"),\n  notes: text(\"notes\"),\n  internalNotes: text(\"internal_notes\"), // Private notes for internal use\n  \n  // Tracking\n  assignedTo: varchar(\"assigned_to\").references(() => users.id), // Sales rep or manager handling this PO\n  estimatedCompletionDate: timestamp(\"estimated_completion_date\"),\n  actualCompletionDate: timestamp(\"actual_completion_date\"),\n  \n  // Metadata\n  source: text(\"source\").notNull().default(\"manual\"), // manual, excel_upload, api, website\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const purchaseOrderItems = pgTable(\"purchase_order_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  purchaseOrderId: varchar(\"purchase_order_id\").notNull().references(() => purchaseOrders.id, { onDelete: \"cascade\" }),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  \n  // Item details\n  quantity: integer(\"quantity\").notNull(),\n  unitPrice: decimal(\"unit_price\", { precision: 10, scale: 2 }).notNull(),\n  lineTotal: decimal(\"line_total\", { precision: 12, scale: 2 }).notNull(),\n  \n  // Production details\n  estimatedProductionTime: integer(\"estimated_production_time\"), // in hours\n  actualProductionTime: integer(\"actual_production_time\"), // in hours\n  productionStatus: text(\"production_status\").default(\"not_started\"), // not_started, in_progress, completed\n  \n  // Special requirements\n  customSpecifications: text(\"custom_specifications\"),\n  packagingNotes: text(\"packaging_notes\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const poStatusHistory = pgTable(\"po_status_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  purchaseOrderId: varchar(\"purchase_order_id\").notNull().references(() => purchaseOrders.id, { onDelete: \"cascade\" }),\n  previousStatus: text(\"previous_status\"),\n  newStatus: text(\"new_status\").notNull(),\n  changedBy: varchar(\"changed_by\").references(() => users.id),\n  changeReason: text(\"change_reason\"),\n  notes: text(\"notes\"),\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n});\n\nexport const poDocuments = pgTable(\"po_documents\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  purchaseOrderId: varchar(\"purchase_order_id\").notNull().references(() => purchaseOrders.id, { onDelete: \"cascade\" }),\n  documentType: text(\"document_type\").notNull(), // invoice, receipt, shipping_label, custom_specs\n  fileName: text(\"file_name\").notNull(),\n  fileUrl: text(\"file_url\").notNull(),\n  fileSize: integer(\"file_size\"),\n  uploadedBy: varchar(\"uploaded_by\").references(() => users.id),\n  uploadedAt: timestamp(\"uploaded_at\").defaultNow(),\n});\n\n// Purchase Order Relations\nexport const purchaseOrdersRelations = relations(purchaseOrders, ({ one, many }) => ({\n  items: many(purchaseOrderItems),\n  statusHistory: many(poStatusHistory),\n  documents: many(poDocuments),\n  approver: one(users, { fields: [purchaseOrders.approvedBy], references: [users.id] }),\n  assignee: one(users, { fields: [purchaseOrders.assignedTo], references: [users.id] }),\n  creator: one(users, { fields: [purchaseOrders.createdBy], references: [users.id] }),\n}));\n\nexport const purchaseOrderItemsRelations = relations(purchaseOrderItems, ({ one }) => ({\n  purchaseOrder: one(purchaseOrders, { fields: [purchaseOrderItems.purchaseOrderId], references: [purchaseOrders.id] }),\n  product: one(products, { fields: [purchaseOrderItems.productId], references: [products.id] }),\n}));\n\nexport const poStatusHistoryRelations = relations(poStatusHistory, ({ one }) => ({\n  purchaseOrder: one(purchaseOrders, { fields: [poStatusHistory.purchaseOrderId], references: [purchaseOrders.id] }),\n  changedBy: one(users, { fields: [poStatusHistory.changedBy], references: [users.id] }),\n}));\n\nexport const poDocumentsRelations = relations(poDocuments, ({ one }) => ({\n  purchaseOrder: one(purchaseOrders, { fields: [poDocuments.purchaseOrderId], references: [purchaseOrders.id] }),\n  uploadedBy: one(users, { fields: [poDocuments.uploadedBy], references: [users.id] }),\n}));\n\n// Purchase Order Zod Schemas\nexport const insertPurchaseOrderSchema = createInsertSchema(purchaseOrders).extend({\n  orderDate: z.coerce.date().optional(),\n  requestedDeliveryDate: z.coerce.date().optional(),\n  estimatedCompletionDate: z.coerce.date().optional(),\n  actualCompletionDate: z.coerce.date().optional(),\n}).omit({ id: true, createdAt: true, updatedAt: true });\n\nexport const insertPurchaseOrderItemSchema = createInsertSchema(purchaseOrderItems).omit({ id: true, createdAt: true });\nexport const insertPoStatusHistorySchema = createInsertSchema(poStatusHistory).omit({ id: true, timestamp: true });\nexport const insertPoDocumentSchema = createInsertSchema(poDocuments).omit({ id: true, uploadedAt: true });\n\nexport type InsertPurchaseOrder = z.infer<typeof insertPurchaseOrderSchema>;\nexport type PurchaseOrder = typeof purchaseOrders.$inferSelect;\nexport type InsertPurchaseOrderItem = typeof purchaseOrderItems.$inferInsert;\nexport type PurchaseOrderItem = typeof purchaseOrderItems.$inferSelect;\nexport type InsertPoStatusHistory = typeof poStatusHistory.$inferInsert;\nexport type PoStatusHistory = typeof poStatusHistory.$inferSelect;\nexport type InsertPoDocument = typeof poDocuments.$inferInsert;\nexport type PoDocument = typeof poDocuments.$inferSelect;\n\n// Gamified Achievement System for Import Accuracy\nexport const importAchievements = pgTable(\"import_achievements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  achievementType: varchar(\"achievement_type\").notNull(), // 'accuracy', 'volume', 'streak', 'speed', 'quality'\n  achievementName: varchar(\"achievement_name\").notNull(),\n  description: text(\"description\").notNull(),\n  iconType: varchar(\"icon_type\").notNull(), // 'trophy', 'medal', 'star', 'crown', 'gem'\n  level: integer(\"level\").notNull().default(1), // Bronze=1, Silver=2, Gold=3, Platinum=4, Diamond=5\n  pointsAwarded: integer(\"points_awarded\").notNull().default(0),\n  criteria: jsonb(\"criteria\").notNull(), // Achievement criteria and thresholds\n  unlockedAt: timestamp(\"unlocked_at\").defaultNow(),\n  isActive: boolean(\"is_active\").notNull().default(true),\n});\n\nexport const userAchievementProgress = pgTable(\"user_achievement_progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  achievementType: varchar(\"achievement_type\").notNull(),\n  currentProgress: integer(\"current_progress\").notNull().default(0),\n  targetProgress: integer(\"target_progress\").notNull(),\n  level: integer(\"level\").notNull().default(1),\n  totalPoints: integer(\"total_points\").notNull().default(0),\n  lastImportAccuracy: decimal(\"last_import_accuracy\", { precision: 5, scale: 2 }).default(\"0.00\"),\n  bestAccuracy: decimal(\"best_accuracy\", { precision: 5, scale: 2 }).default(\"0.00\"),\n  consecutiveSuccessfulImports: integer(\"consecutive_successful_imports\").notNull().default(0),\n  totalImports: integer(\"total_imports\").notNull().default(0),\n  totalRecordsImported: integer(\"total_records_imported\").notNull().default(0),\n  averageImportTime: integer(\"average_import_time\").notNull().default(0), // in seconds\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const importAccuracyMetrics = pgTable(\"import_accuracy_metrics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  sessionId: varchar(\"session_id\").notNull(),\n  fileName: varchar(\"file_name\").notNull(),\n  totalRows: integer(\"total_rows\").notNull(),\n  validRows: integer(\"valid_rows\").notNull(),\n  errorRows: integer(\"error_rows\").notNull(),\n  accuracyPercentage: decimal(\"accuracy_percentage\", { precision: 5, scale: 2 }).notNull(),\n  importDuration: integer(\"import_duration\").notNull(), // in seconds\n  qualityScore: integer(\"quality_score\").notNull().default(0), // 0-100\n  errorsDetected: jsonb(\"errors_detected\"),\n  improvementSuggestions: jsonb(\"improvement_suggestions\"),\n  pointsEarned: integer(\"points_earned\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Achievement System Relations\nexport const importAchievementsRelations = relations(importAchievements, ({ one }) => ({\n  user: one(users, { fields: [importAchievements.userId], references: [users.id] }),\n}));\n\nexport const userAchievementProgressRelations = relations(userAchievementProgress, ({ one }) => ({\n  user: one(users, { fields: [userAchievementProgress.userId], references: [users.id] }),\n}));\n\nexport const importAccuracyMetricsRelations = relations(importAccuracyMetrics, ({ one }) => ({\n  user: one(users, { fields: [importAccuracyMetrics.userId], references: [users.id] }),\n}));\n\n// Achievement System Schemas\nexport const insertImportAchievementSchema = createInsertSchema(importAchievements).omit({ id: true, unlockedAt: true });\nexport const insertUserAchievementProgressSchema = createInsertSchema(userAchievementProgress).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertImportAccuracyMetricsSchema = createInsertSchema(importAccuracyMetrics).omit({ id: true, createdAt: true });\n\n// Achievement System Types\nexport type ImportAchievement = typeof importAchievements.$inferSelect;\nexport type InsertImportAchievement = z.infer<typeof insertImportAchievementSchema>;\nexport type UserAchievementProgress = typeof userAchievementProgress.$inferSelect;\nexport type InsertUserAchievementProgress = z.infer<typeof insertUserAchievementProgressSchema>;\nexport type ImportAccuracyMetrics = typeof importAccuracyMetrics.$inferSelect;\nexport type InsertImportAccuracyMetrics = z.infer<typeof insertImportAccuracyMetricsSchema>;\n\n\n","size_bytes":60188},"client/src/App.tsx":{"content":"import { Switch, Route, Link } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport ProductCatalog from \"@/pages/ProductCatalog\";\nimport ProductionPlanning from \"@/pages/ProductionPlanning\";\nimport InventoryAI from \"@/pages/InventoryAI\";\nimport GlobalDistributors from \"@/pages/GlobalDistributors\";\nimport BusinessIntelligence from \"@/pages/BusinessIntelligence\";\nimport BrandDetail from \"@/pages/BrandDetail\";\nimport RouteManagement from \"@/pages/RouteManagement\";\nimport PurchaseOrders from \"@/pages/PurchaseOrders\";\nimport FactorySetup from \"@/pages/FactorySetup\";\nimport ExtendedAutomation from \"@/pages/ExtendedAutomation\";\nimport ExcelUpload from \"@/pages/ExcelUpload\";\nimport BulkImport from \"@/pages/BulkImport\";\nimport HardwareStores from \"@/pages/HardwareStores\";\nimport LogisticsIntegration from \"@/pages/LogisticsIntegration\";\nimport CompanyManagement from \"@/pages/CompanyManagement\";\nimport Landing from \"@/pages/Landing\";\nimport Login from \"@/pages/Login\";\nimport Register from \"@/pages/Register\";\nimport CompanySettings from \"@/pages/CompanySettings\";\nimport UserManagement from \"@/pages/UserManagement\";\nimport InventoryUpload from \"@/pages/InventoryUpload\";\nimport AuditTrail from \"@/pages/AuditTrail\";\nimport ProductLabels from \"@/pages/ProductLabels\";\nimport StoreMapVisualization from \"@/pages/StoreMapVisualization\";\nimport Profile from \"@/pages/Profile\";\nimport Achievements from \"@/pages/Achievements\";\nimport Sidebar from \"@/components/Sidebar\";\nimport Header from \"@/components/Header\";\nimport { FruitfulAssistChatbot, FruitfulAssistFloatingButton } from \"@/components/FruitfulAssistChatbot\";\nimport { LoadingTransition } from \"@/components/PageTransition\";\nimport { AnimatedCard, FadeIn } from \"@/components/AnimatedComponents\";\nimport { MoodFloatingButton } from \"@/components/MoodFloatingButton\";\nimport { MoodProvider } from \"@/hooks/useMoodContext\";\n// Translation system is now self-contained in useTranslation hook\nimport { useState } from \"react\";\nimport { LayoutDashboard, Store, Upload, Map } from \"lucide-react\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n  \n  // Demo mode for Homemart Africa - bypass authentication\n  const isDemoMode = window.location.hostname.includes('replit.dev') || true;\n\n  // Show loading while checking authentication (only briefly)\n  if (isLoading && !isDemoMode) {\n    return (\n      <LoadingTransition isLoading={true}>\n        <div />\n      </LoadingTransition>\n    );\n  }\n\n  // Show public pages for unauthenticated users (only if not demo mode)\n  if (!isAuthenticated && !isDemoMode) {\n    return (\n      <PageTransition>\n        <Switch>\n          <Route path=\"/\" component={Landing} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n          <Route component={Landing} />\n        </Switch>\n      </PageTransition>\n    );\n  }\n\n  // Show authenticated app routes only (layout handled by AuthenticatedApp)\n  return (\n    <PageTransition>\n      <Switch>\n        <Route path=\"/\" component={Dashboard} />\n        <Route path=\"/catalog\" component={ProductCatalog} />\n        <Route path=\"/production\" component={ProductionPlanning} />\n        <Route path=\"/inventory\" component={InventoryAI} />\n        <Route path=\"/distributors\" component={GlobalDistributors} />\n        <Route path=\"/analytics\" component={BusinessIntelligence} />\n        <Route path=\"/routes\" component={RouteManagement} />\n        <Route path=\"/purchase-orders\" component={PurchaseOrders} />\n        <Route path=\"/factory-setup\" component={FactorySetup} />\n        <Route path=\"/automation\" component={ExtendedAutomation} />\n        <Route path=\"/excel-upload\" component={ExcelUpload} />\n        <Route path=\"/bulk-import\" component={BulkImport} />\n        <Route path=\"/hardware-stores\" component={HardwareStores} />\n        <Route path=\"/store-map\" component={StoreMapVisualization} />\n        <Route path=\"/logistics\" component={LogisticsIntegration} />\n        <Route path=\"/company-management\" component={CompanyManagement} />\n        <Route path=\"/company-settings\" component={CompanySettings} />\n        <Route path=\"/user-management\" component={UserManagement} />\n        <Route path=\"/inventory-upload\" component={InventoryUpload} />\n        <Route path=\"/audit-trail\" component={AuditTrail} />\n        <Route path=\"/product-labels\" component={ProductLabels} />\n        <Route path=\"/profile\" component={Profile} />\n        <Route path=\"/achievements\" component={Achievements} />\n        <Route path=\"/brands/:id\" component={BrandDetail} />\n      </Switch>\n    </PageTransition>\n  );\n}\n\nfunction AuthenticatedApp() {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [chatbotOpen, setChatbotOpen] = useState(false);\n\n  return (\n    <div className=\"flex min-h-screen animated-background cornex-pattern\">\n      {/* Desktop Sidebar - hidden on mobile */}\n      <div className=\"hidden lg:block\">\n        <Sidebar collapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\n      </div>\n      \n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col min-h-screen lg:ml-0\">\n        <Header />\n        <main className=\"flex-1 px-2 sm:px-4 lg:px-6 pb-20 lg:pb-6\">\n          <Router />\n        </main>\n        \n        {/* Mobile Bottom Navigation */}\n        <div className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 px-2 py-2 z-40\">\n          <div className=\"flex justify-around items-center\">\n            <Link href=\"/\" className=\"flex flex-col items-center py-1 px-2\">\n              <LayoutDashboard className=\"w-5 h-5 text-gray-600\" />\n              <span className=\"text-xs text-gray-600 mt-1\">Dashboard</span>\n            </Link>\n            <Link href=\"/hardware-stores\" className=\"flex flex-col items-center py-1 px-2\">\n              <Store className=\"w-5 h-5 text-gray-600\" />\n              <span className=\"text-xs text-gray-600 mt-1\">Stores</span>\n            </Link>\n            <Link href=\"/bulk-import\" className=\"flex flex-col items-center py-1 px-2\">\n              <Upload className=\"w-5 h-5 text-gray-600\" />\n              <span className=\"text-xs text-gray-600 mt-1\">Import</span>\n            </Link>\n            <Link href=\"/store-map\" className=\"flex flex-col items-center py-1 px-2\">\n              <Map className=\"w-5 h-5 text-gray-600\" />\n              <span className=\"text-xs text-gray-600 mt-1\">Map</span>\n            </Link>\n          </div>\n        </div>\n      </div>\n      \n      {/* AI-Powered Mood Selector */}\n      <MoodFloatingButton />\n\n      {/* Fruitful Assist Chatbot */}\n      <FruitfulAssistFloatingButton \n        onClick={() => setChatbotOpen(true)} \n        isOpen={chatbotOpen} \n      />\n      <FruitfulAssistChatbot \n        isOpen={chatbotOpen} \n        onToggle={() => setChatbotOpen(!chatbotOpen)} \n      />\n    </div>\n  );\n}\n\nfunction AppContent() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-emerald-600\"></div>\n      </div>\n    );\n  }\n\n  // Always use AuthenticatedApp in demo mode (bypasses authentication)\n  return <AuthenticatedApp />;\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <MoodProvider>\n          <AppContent />\n          \n          <Toaster />\n        </MoodProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":7960},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n  \n  /* Cornex Brand Colors */\n  --cornex-blue: hsl(207, 90%, 54%);\n  --cornex-dark: hsl(207, 90%, 40%);\n  --cornex-light: hsl(207, 90%, 65%);\n  --cornex-gradient: linear-gradient(135deg, hsl(207, 90%, 54%) 0%, hsl(207, 90%, 40%) 100%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  }\n}\n\n@layer components {\n  .cornex-gradient {\n    background: var(--cornex-gradient);\n  }\n  \n  .dashboard-card {\n    @apply transition-all duration-300 ease-in-out;\n  }\n  \n  .dashboard-card:hover {\n    @apply transform -translate-y-1 shadow-lg;\n  }\n  \n  .metric-card {\n    background: linear-gradient(145deg, hsl(0, 0%, 100%) 0%, hsl(210, 40%, 98%) 100%);\n  }\n  \n  .sidebar-transition {\n    @apply transition-all duration-300 ease-in-out;\n  }\n  \n  .nav-item {\n    @apply flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200;\n  }\n  \n  .nav-item.active {\n    @apply text-white bg-blue-600 hover:bg-blue-700;\n  }\n  \n  .brand-dot {\n    @apply w-2 h-2 rounded-full mr-3;\n  }\n  \n  .animate-pulse-slow {\n    animation: pulse 3s ease-in-out infinite;\n  }\n  \n  .glass-effect {\n    backdrop-filter: blur(10px);\n    background: rgba(255, 255, 255, 0.1);\n  }\n  \n  .brand-card-hover {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .brand-card-hover:hover {\n    transform: translateY(-8px) scale(1.02);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  }\n  \n  .gradient-text {\n    background: linear-gradient(135deg, var(--cornex-blue), var(--cornex-dark));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n  \n  .floating-animation {\n    animation: float 6s ease-in-out infinite;\n  }\n  \n  @keyframes float {\n    0%, 100% { transform: translateY(0px) rotate(0deg); }\n    33% { transform: translateY(-10px) rotate(1deg); }\n    66% { transform: translateY(-5px) rotate(-1deg); }\n  }\n  \n  .glow-on-hover {\n    transition: all 0.3s ease;\n  }\n  \n  .glow-on-hover:hover {\n    box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);\n  }\n  \n  .animated-background {\n    background: linear-gradient(-45deg, #f8fafc, #f1f5f9, #e2e8f0, #f8fafc);\n    background-size: 400% 400%;\n    animation: gradient-shift 15s ease infinite;\n  }\n\n  /* Page transition styles */\n  .page-transition-enter {\n    opacity: 0;\n    transform: translateY(20px) scale(0.98);\n    filter: blur(4px);\n  }\n\n  .page-transition-enter-active {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n    filter: blur(0px);\n    transition: all 400ms cubic-bezier(0.22, 1, 0.36, 1);\n  }\n\n  .page-transition-exit {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n    filter: blur(0px);\n  }\n\n  .page-transition-exit-active {\n    opacity: 0;\n    transform: translateY(-20px) scale(1.02);\n    filter: blur(4px);\n    transition: all 300ms cubic-bezier(0.22, 1, 0.36, 1);\n  }\n\n  /* Enhanced card hover transitions */\n  .card-hover-transition {\n    transition: all 300ms cubic-bezier(0.22, 1, 0.36, 1);\n    will-change: transform, box-shadow, filter;\n  }\n\n  .card-hover-transition:hover {\n    transform: translateY(-4px) scale(1.02);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n    filter: brightness(1.05);\n  }\n  \n  @keyframes gradient-shift {\n    0% { background-position: 0% 50%; }\n    50% { background-position: 100% 50%; }\n    100% { background-position: 0% 50%; }\n  }\n  \n  .cornex-pattern {\n    background-image: \n      radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),\n      radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),\n      radial-gradient(circle at 40% 80%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);\n  }\n\n  /* Enhanced navigation and sidebar transitions */\n  .sidebar-transition {\n    transition: all 300ms cubic-bezier(0.22, 1, 0.36, 1);\n    will-change: width;\n  }\n\n  /* Loading spinner animation */\n  @keyframes spin-smooth {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  .loading-spinner {\n    animation: spin-smooth 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;\n  }\n\n  /* Smooth scrolling */\n  html { scroll-behavior: smooth; }\n\n  /* Fade-in animation for content */\n  @keyframes fadeInUp {\n    from {\n      opacity: 0;\n      transform: translateY(30px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .fade-in-up {\n    animation: fadeInUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;\n  }\n\n  /* Staggered animation delays */\n  .stagger-1 { animation-delay: 0.1s; opacity: 0; }\n  .stagger-2 { animation-delay: 0.2s; opacity: 0; }\n  .stagger-3 { animation-delay: 0.3s; opacity: 0; }\n  .stagger-4 { animation-delay: 0.4s; opacity: 0; }\n  .stagger-5 { animation-delay: 0.5s; opacity: 0; }\n}\n\n@layer utilities {\n  .text-cornex-blue {\n    color: var(--cornex-blue);\n  }\n  \n  .bg-cornex-blue {\n    background-color: var(--cornex-blue);\n  }\n  \n  .border-cornex-blue {\n    border-color: var(--cornex-blue);\n  }\n  \n  .hover\\:bg-cornex-dark:hover {\n    background-color: var(--cornex-dark);\n  }\n  \n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  \n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n}\n","size_bytes":6947},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/AIInsightsPanel.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Brain, TrendingUp, AlertTriangle, Lightbulb, Target, Zap } from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n\nexport default function AIInsightsPanel() {\n  const [selectedInsight, setSelectedInsight] = useState<string | null>(null);\n\n  const insights = [\n    {\n      id: \"demand-optimization\",\n      title: \"Demand Pattern Optimization\",\n      type: \"opportunity\",\n      impact: \"High\",\n      confidence: 94,\n      description: \"AI detected 23% increase in EPS04 demand during Q2. Recommend increasing production by 15%.\",\n      savings: \"R 340,000\",\n      timeframe: \"Next 30 days\",\n      actions: [\n        \"Increase EPS04 production schedule by 15%\",\n        \"Adjust raw material orders accordingly\", \n        \"Notify key distributors of increased availability\"\n      ]\n    },\n    {\n      id: \"inventory-efficiency\",\n      title: \"Inventory Efficiency Improvement\",\n      type: \"optimization\",\n      impact: \"Medium\",\n      confidence: 87,\n      description: \"Current BR9 stock levels are 40% above optimal. Consider promotional pricing to reduce excess inventory.\",\n      savings: \"R 125,000\",\n      timeframe: \"Next 60 days\",\n      actions: [\n        \"Implement 12% promotional discount on BR9\",\n        \"Target high-volume distributors\",\n        \"Reduce next production batch by 25%\"\n      ]\n    },\n    {\n      id: \"maintenance-prediction\",\n      title: \"Predictive Maintenance Alert\",\n      type: \"warning\",\n      impact: \"Critical\",\n      confidence: 91,\n      description: \"LED production line showing early wear indicators. Schedule maintenance within 5 days to prevent downtime.\",\n      savings: \"R 85,000\",\n      timeframe: \"Next 5 days\",\n      actions: [\n        \"Schedule immediate maintenance inspection\",\n        \"Order replacement parts proactively\",\n        \"Shift LED orders to backup production capacity\"\n      ]\n    },\n    {\n      id: \"market-expansion\",\n      title: \"Market Expansion Opportunity\",\n      type: \"growth\",\n      impact: \"High\",\n      confidence: 78,\n      description: \"Eastern Cape showing 45% growth potential based on construction activity data and competitor analysis.\",\n      savings: \"R 890,000\",\n      timeframe: \"Next 90 days\",\n      actions: [\n        \"Identify 3-5 potential distributors in Eastern Cape\",\n        \"Develop region-specific pricing strategy\",\n        \"Launch targeted marketing campaign\"\n      ]\n    }\n  ];\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case \"opportunity\":\n        return <TrendingUp className=\"w-5 h-5 text-green-600\" />;\n      case \"optimization\":\n        return <Target className=\"w-5 h-5 text-blue-600\" />;\n      case \"warning\":\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />;\n      case \"growth\":\n        return <Lightbulb className=\"w-5 h-5 text-purple-600\" />;\n      default:\n        return <Brain className=\"w-5 h-5 text-gray-600\" />;\n    }\n  };\n\n  const getImpactColor = (impact: string) => {\n    switch (impact) {\n      case \"Critical\":\n        return \"bg-red-100 text-red-800\";\n      case \"High\":\n        return \"bg-orange-100 text-orange-800\";\n      case \"Medium\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"Low\":\n        return \"bg-green-100 text-green-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Brain className=\"w-6 h-6 text-cornex-blue\" />\n            <span>ðŸŽ Fruitful Assist Intelligence Center</span>\n          </CardTitle>\n          <Badge variant=\"outline\" className=\"bg-green-50 text-green-700\">\n            <Zap className=\"w-3 h-3 mr-1\" />\n            4 Active Insights\n          </Badge>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <Tabs defaultValue=\"insights\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n            <TabsTrigger value=\"insights\">AI Insights</TabsTrigger>\n            <TabsTrigger value=\"recommendations\">Recommendations</TabsTrigger>\n            <TabsTrigger value=\"performance\">AI Performance</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"insights\" className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {insights.map((insight) => (\n                <Card \n                  key={insight.id} \n                  className={`cursor-pointer transition-all hover:shadow-md ${\n                    selectedInsight === insight.id ? 'ring-2 ring-cornex-blue' : ''\n                  }`}\n                  onClick={() => setSelectedInsight(insight.id)}\n                >\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center space-x-2\">\n                        {getInsightIcon(insight.type)}\n                        <h4 className=\"font-medium text-gray-900\">{insight.title}</h4>\n                      </div>\n                      <Badge className={getImpactColor(insight.impact)}>\n                        {insight.impact}\n                      </Badge>\n                    </div>\n\n                    <p className=\"text-sm text-gray-600 mb-3\">\n                      {insight.description}\n                    </p>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-500\">Confidence:</span>\n                        <span className=\"font-medium\">{insight.confidence}%</span>\n                      </div>\n                      <Progress value={insight.confidence} className=\"h-2\" />\n                    </div>\n\n                    <div className=\"flex items-center justify-between mt-3 pt-3 border-t\">\n                      <div className=\"text-sm\">\n                        <span className=\"text-gray-500\">Potential Impact: </span>\n                        <span className=\"font-medium text-green-600\">{insight.savings}</span>\n                      </div>\n                      <div className=\"text-xs text-gray-500\">\n                        {insight.timeframe}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {selectedInsight && (\n              <Card className=\"mt-6\">\n                <CardHeader>\n                  <CardTitle>Detailed Analysis & Actions</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {(() => {\n                    const insight = insights.find(i => i.id === selectedInsight);\n                    if (!insight) return null;\n\n                    return (\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          {getInsightIcon(insight.type)}\n                          <h4 className=\"text-lg font-medium\">{insight.title}</h4>\n                          <Badge className={getImpactColor(insight.impact)}>\n                            {insight.impact} Impact\n                          </Badge>\n                        </div>\n\n                        <p className=\"text-gray-700\">{insight.description}</p>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"p-3 bg-gray-50 rounded-lg\">\n                            <p className=\"text-sm text-gray-500\">Confidence Level</p>\n                            <p className=\"text-xl font-bold text-gray-900\">{insight.confidence}%</p>\n                          </div>\n                          <div className=\"p-3 bg-green-50 rounded-lg\">\n                            <p className=\"text-sm text-gray-500\">Potential Savings</p>\n                            <p className=\"text-xl font-bold text-green-600\">{insight.savings}</p>\n                          </div>\n                          <div className=\"p-3 bg-blue-50 rounded-lg\">\n                            <p className=\"text-sm text-gray-500\">Implementation Time</p>\n                            <p className=\"text-xl font-bold text-blue-600\">{insight.timeframe}</p>\n                          </div>\n                        </div>\n\n                        <div>\n                          <h5 className=\"font-medium text-gray-900 mb-2\">Recommended Actions:</h5>\n                          <div className=\"space-y-2\">\n                            {insight.actions.map((action, index) => (\n                              <div key={index} className=\"flex items-center space-x-2\">\n                                <div className=\"w-6 h-6 bg-cornex-blue text-white rounded-full flex items-center justify-center text-xs font-bold\">\n                                  {index + 1}\n                                </div>\n                                <span className=\"text-sm text-gray-700\">{action}</span>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n                        <div className=\"flex space-x-3 pt-4\">\n                          <Button className=\"bg-cornex-blue hover:bg-cornex-dark\">\n                            Implement Recommendations\n                          </Button>\n                          <Button variant=\"outline\">\n                            Schedule Review\n                          </Button>\n                          <Button variant=\"ghost\">\n                            Dismiss\n                          </Button>\n                        </div>\n                      </div>\n                    );\n                  })()}\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"recommendations\" className=\"space-y-4\">\n            <div className=\"text-center py-8\">\n              <Lightbulb className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n              <p className=\"text-gray-500\">AI Recommendations Engine</p>\n              <p className=\"text-sm text-gray-400\">Intelligent suggestions based on data analysis</p>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"performance\" className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-cornex-blue\">94.7%</div>\n                  <p className=\"text-sm text-gray-500\">Prediction Accuracy</p>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">R 2.4M</div>\n                  <p className=\"text-sm text-gray-500\">Cost Savings YTD</p>\n                </CardContent>\n              </Card>\n              <Card>\n                <CardContent className=\"p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-purple-600\">127</div>\n                  <p className=\"text-sm text-gray-500\">Insights Generated</p>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":11650},"client/src/components/CurrencyConverter.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowUpDown, Calculator } from \"lucide-react\";\nimport { CURRENCIES } from \"@/lib/constants\";\nimport { convertCurrency, formatCurrency } from \"@/lib/currency\";\n\nexport default function CurrencyConverter() {\n  const [amount, setAmount] = useState<string>(\"1000\");\n  const [fromCurrency, setFromCurrency] = useState<string>(\"ZAR\");\n  const [toCurrency, setToCurrency] = useState<string>(\"USD\");\n\n  const convertedAmount = convertCurrency(parseFloat(amount) || 0, fromCurrency, toCurrency);\n\n  const swapCurrencies = () => {\n    setFromCurrency(toCurrency);\n    setToCurrency(fromCurrency);\n  };\n\n  return (\n    <Card className=\"w-full max-w-md\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <Calculator className=\"w-5 h-5 text-cornex-blue\" />\n          <span>Currency Converter</span>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div>\n          <Label htmlFor=\"amount\">Amount</Label>\n          <Input\n            id=\"amount\"\n            type=\"number\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            placeholder=\"Enter amount\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4 items-end\">\n          <div>\n            <Label htmlFor=\"from-currency\">From</Label>\n            <Select value={fromCurrency} onValueChange={setFromCurrency}>\n              <SelectTrigger id=\"from-currency\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {CURRENCIES.map((currency) => (\n                  <SelectItem key={currency.currency} value={currency.currency}>\n                    {currency.flag} {currency.currency}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex justify-center\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={swapCurrencies}\n              className=\"h-10 w-10 p-0\"\n            >\n              <ArrowUpDown className=\"w-4 h-4\" />\n            </Button>\n          </div>\n\n          <div>\n            <Label htmlFor=\"to-currency\">To</Label>\n            <Select value={toCurrency} onValueChange={setToCurrency}>\n              <SelectTrigger id=\"to-currency\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {CURRENCIES.map((currency) => (\n                  <SelectItem key={currency.currency} value={currency.currency}>\n                    {currency.flag} {currency.currency}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div className=\"p-4 bg-gray-50 rounded-lg\">\n          <p className=\"text-sm text-gray-500\">Converted Amount</p>\n          <p className=\"text-2xl font-bold text-cornex-blue\">\n            {formatCurrency(convertedAmount, toCurrency)}\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":3433},"client/src/components/DemandChart.tsx":{"content":"import { useEffect, useRef } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\n\ndeclare global {\n  interface Window {\n    Chart: any;\n  }\n}\n\nexport default function DemandChart() {\n  const chartRef = useRef<HTMLCanvasElement>(null);\n  const chartInstance = useRef<any>(null);\n\n  const { data: forecast } = useQuery({\n    queryKey: [\"/api/demand-forecast\"],\n  });\n\n  useEffect(() => {\n    // Load Chart.js if not already loaded\n    if (!window.Chart) {\n      const script = document.createElement('script');\n      script.src = 'https://cdn.jsdelivr.net/npm/chart.js';\n      script.onload = () => initChart();\n      document.head.appendChild(script);\n    } else {\n      initChart();\n    }\n\n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [forecast]);\n\n  const initChart = () => {\n    if (!chartRef.current || !window.Chart) return;\n\n    const ctx = chartRef.current.getContext('2d');\n\n    // Generate sample data for demonstration\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const actualData = [65000, 67500, 72000, 68500, 74000, 77500, 82000, 79000, 84500, 88000, 85500, 91000];\n    const forecastData = [66200, 68100, 71800, 68900, 73500, 78200, 81500, 79800, 85100, 87500, 86200, 90500];\n\n    if (chartInstance.current) {\n      chartInstance.current.destroy();\n    }\n\n    chartInstance.current = new window.Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: months,\n        datasets: [\n          {\n            label: 'Actual Demand',\n            data: actualData,\n            borderColor: '#1e3a8a',\n            backgroundColor: 'rgba(30, 58, 138, 0.1)',\n            fill: true,\n            tension: 0.4\n          },\n          {\n            label: 'AI Forecast',\n            data: forecastData,\n            borderColor: '#10b981',\n            backgroundColor: 'rgba(16, 185, 129, 0.1)',\n            borderDash: [5, 5],\n            fill: false,\n            tension: 0.4\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: 'bottom'\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: false,\n            ticks: {\n              callback: function(value: any) {\n                return (value / 1000).toFixed(0) + 'K';\n              }\n            }\n          }\n        }\n      }\n    });\n  };\n\n  return (\n    <div className=\"h-64 w-full\">\n      <canvas ref={chartRef} className=\"w-full h-full\"></canvas>\n    </div>\n  );\n}\n","size_bytes":2622},"client/src/components/DistributorMap.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Globe, TrendingUp, Users, DollarSign } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { formatCurrency } from \"@/lib/currency\";\n\nexport default function DistributorMap() {\n  const { data: regionalMetrics } = useQuery({\n    queryKey: [\"/api/sales-metrics/by-region\"],\n  });\n\n  const { data: distributors } = useQuery({\n    queryKey: [\"/api/distributors\"],\n  });\n\n  const regions = [\n    {\n      name: \"South Africa\",\n      distributors: distributors?.filter((d: any) => d.country === \"South Africa\").length || 847,\n      revenue: \"4.2M\",\n      status: \"active\",\n      color: \"bg-green-500\"\n    },\n    {\n      name: \"SADC Region\", \n      distributors: 234,\n      revenue: \"1.8M\",\n      status: \"growing\",\n      color: \"bg-yellow-500\"\n    },\n    {\n      name: \"West Africa\",\n      distributors: 156,\n      revenue: \"0.9M\", \n      status: \"planning\",\n      color: \"bg-blue-500\"\n    },\n    {\n      name: \"Global\",\n      distributors: 2010,\n      revenue: \"5.9M\",\n      status: \"active\",\n      color: \"bg-purple-500\"\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Status Legend */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Global Distribution Network</h3>\n        <div className=\"flex items-center space-x-4 text-sm\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n            <span>Active</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n            <span>Growing</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n            <span>Planning</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Regional Performance Grid */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {regions.map((region) => (\n          <Card key={region.name} className=\"text-center hover:shadow-md transition-shadow\">\n            <CardContent className=\"p-4\">\n              <div className={`w-8 h-8 ${region.color} rounded-full mx-auto mb-3`}></div>\n              <h4 className=\"font-medium text-gray-900 mb-2\">{region.name}</h4>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center justify-center space-x-1 text-sm text-gray-600\">\n                  <Users className=\"w-3 h-3\" />\n                  <span>{region.distributors.toLocaleString()} distributors</span>\n                </div>\n                <div className=\"flex items-center justify-center space-x-1 text-xs text-green-600\">\n                  <DollarSign className=\"w-3 h-3\" />\n                  <span>R {region.revenue} revenue</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Quick Stats */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"grid grid-cols-3 gap-4 text-center\">\n            <div>\n              <p className=\"text-2xl font-bold text-cornex-blue\">70K+</p>\n              <p className=\"text-sm text-gray-600\">Monthly Production</p>\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-green-600\">31</p>\n              <p className=\"text-sm text-gray-600\">Product Variants</p>\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-purple-600\">16</p>\n              <p className=\"text-sm text-gray-600\">Countries</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3802},"client/src/components/DistributorPortal.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Globe, Users, TrendingUp, MapPin } from \"lucide-react\";\nimport { formatCurrency } from \"@/lib/currency\";\n\ninterface DistributorPortalProps {\n  distributors: any[];\n}\n\nexport default function DistributorPortal({ distributors }: DistributorPortalProps) {\n  const regions = [\n    {\n      name: \"South Africa\",\n      distributors: distributors?.filter((d: any) => d.country === \"South Africa\").length || 847,\n      revenue: \"4.2M\",\n      status: \"active\",\n      color: \"bg-green-500\"\n    },\n    {\n      name: \"SADC Region\", \n      distributors: 234,\n      revenue: \"1.8M\",\n      status: \"growing\",\n      color: \"bg-yellow-500\"\n    },\n    {\n      name: \"West Africa\",\n      distributors: 156,\n      revenue: \"0.9M\", \n      status: \"planning\",\n      color: \"bg-blue-500\"\n    },\n    {\n      name: \"Global\",\n      distributors: 2010,\n      revenue: \"5.9M\",\n      status: \"active\",\n      color: \"bg-purple-500\"\n    }\n  ];\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center space-x-2\">\n          <Globe className=\"w-5 h-5 text-cornex-blue\" />\n          <span>Global Distribution Portal</span>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {regions.map((region) => (\n            <Card key={region.name} className=\"text-center hover:shadow-md transition-shadow\">\n              <CardContent className=\"p-4\">\n                <div className={`w-8 h-8 ${region.color} rounded-full mx-auto mb-3`}></div>\n                <h4 className=\"font-medium text-gray-900 mb-2\">{region.name}</h4>\n                <div className=\"space-y-1\">\n                  <div className=\"flex items-center justify-center space-x-1 text-sm text-gray-600\">\n                    <Users className=\"w-3 h-3\" />\n                    <span>{region.distributors.toLocaleString()} distributors</span>\n                  </div>\n                  <div className=\"flex items-center justify-center space-x-1 text-xs text-green-600\">\n                    <TrendingUp className=\"w-3 h-3\" />\n                    <span>R {region.revenue} revenue</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":2485},"client/src/components/Header.tsx":{"content":"import { Bell, RefreshCw, LogOut, User, Settings, Globe } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { CURRENCIES } from \"@/lib/constants\";\nimport { useState } from \"react\";\nimport CountrySelector from \"@/components/CountrySelector\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function Header() {\n  const { user } = useAuth();\n  const { currentCountry, currency, flag } = useTranslation();\n  const [selectedCurrency, setSelectedCurrency] = useState(currency || \"ZAR\");\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [showCountrySelector, setShowCountrySelector] = useState(false);\n\n  const handleRefresh = () => {\n    setIsRefreshing(true);\n    // Simulate refresh\n    setTimeout(() => setIsRefreshing(false), 1000);\n  };\n\n  return (\n    <header className=\"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-50 shadow-xl\">\n      <div className=\"px-3 sm:px-6 py-3 sm:py-4\">\n        <div className=\"flex items-center justify-between\">\n          {/* Logo & Brand - Mobile Optimized */}\n          <div className=\"flex items-center space-x-2 sm:space-x-4\">\n            <div className=\"flex items-center justify-center w-8 h-8 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-blue-600 shadow-lg\">\n              <span className=\"text-white font-bold text-sm sm:text-xl\">C</span>\n            </div>\n            <div className=\"hidden sm:block\">\n              <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                CornexConnect\n              </h1>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                ðŸŽ Powered by Fruitful Assist AI â€¢ Manufacturing Excellence\n              </p>\n            </div>\n            <div className=\"sm:hidden\">\n              <h1 className=\"text-sm font-bold text-gray-900 dark:text-white\">\n                CornexConnect\n              </h1>\n            </div>\n          </div>\n          \n          {/* Quick Actions - Mobile Responsive */}\n          <div className=\"flex items-center space-x-2 sm:space-x-4\">\n            {/* Country Selector - Mobile Optimized */}\n            <div className=\"hidden sm:flex items-center space-x-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowCountrySelector(true)}\n                className=\"flex items-center space-x-2 px-3\"\n              >\n                <Globe className=\"w-4 h-4\" />\n                <span className=\"text-lg\">{flag}</span>\n                <span className=\"font-medium\">{currentCountry}</span>\n              </Button>\n            </div>\n            \n            {/* Mobile Country Selector */}\n            <div className=\"sm:hidden\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowCountrySelector(true)}\n                className=\"flex items-center space-x-1 px-2\"\n                size=\"sm\"\n              >\n                <span className=\"text-sm\">{flag}</span>\n                <span className=\"text-xs font-medium\">{currentCountry}</span>\n              </Button>\n            </div>\n            \n            {/* Currency Display - Mobile Responsive */}\n            <div className=\"hidden sm:flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg\">\n              <span className=\"text-sm text-gray-600\">Currency:</span>\n              <span className=\"font-medium text-emerald-600\">ZAR</span>\n            </div>\n            \n            <div className=\"sm:hidden flex items-center px-2 py-1 bg-gray-50 rounded\">\n              <span className=\"text-xs font-medium text-emerald-600\">ZAR</span>\n            </div>\n            \n            {/* Refresh Button - Mobile Responsive */}\n            <Button \n              className=\"bg-gradient-to-r from-emerald-500 to-blue-600 hover:from-emerald-600 hover:to-blue-700 text-white shadow-lg\"\n              size=\"sm\" \n              onClick={handleRefresh}\n              disabled={isRefreshing}\n            >\n              <RefreshCw className={`w-4 h-4 mr-2 ${isRefreshing ? 'animate-spin' : ''}`} />\n              Refresh\n            </Button>\n            \n            {/* Notifications */}\n            <Button variant=\"ghost\" size=\"sm\" className=\"relative\">\n              <Bell className=\"w-5 h-5\" />\n              <span className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse\"></span>\n            </Button>\n            \n            {/* User Menu */}\n            <div className=\"flex items-center space-x-3 pl-4 border-l border-gray-200\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">\n                  {user?.firstName && user?.lastName \n                    ? `${user.firstName} ${user.lastName}` \n                    : user?.email || \"User\"}\n                </p>\n                <p className=\"text-xs text-gray-500\">Team Member</p>\n              </div>\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" className=\"relative h-10 w-10 rounded-full\">\n                    <Avatar>\n                      <AvatarImage src={user?.profileImageUrl || \"\"} />\n                      <AvatarFallback className=\"bg-cornex-blue text-white\">\n                        {user?.firstName && user?.lastName\n                          ? `${user.firstName[0]}${user.lastName[0]}`\n                          : user?.email?.[0]?.toUpperCase() || \"U\"}\n                      </AvatarFallback>\n                    </Avatar>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent className=\"w-56\" align=\"end\">\n                  <DropdownMenuItem onClick={() => window.location.href = '/profile'}>\n                    <User className=\"mr-2 h-4 w-4\" />\n                    <span>Profile</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => window.location.href = '/company-settings'}>\n                    <Settings className=\"mr-2 h-4 w-4\" />\n                    <span>Settings</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={() => window.location.href = '/api/logout'}>\n                    <LogOut className=\"mr-2 h-4 w-4\" />\n                    <span>Log out</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Country Selector Modal */}\n      <CountrySelector\n        open={showCountrySelector}\n        onClose={() => setShowCountrySelector(false)}\n      />\n    </header>\n  );\n}\n","size_bytes":7108},"client/src/components/InventoryOptimizer.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Package, TrendingUp, AlertTriangle, Target, Zap, Settings } from \"lucide-react\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { STOCK_STATUS_COLORS } from \"@/lib/constants\";\n\ninterface InventoryOptimizerProps {\n  inventory: any[];\n  products: any[];\n}\n\nexport default function InventoryOptimizer({ inventory, products }: InventoryOptimizerProps) {\n  const [optimizationMode, setOptimizationMode] = useState(\"balanced\");\n  const [selectedProduct, setSelectedProduct] = useState(\"\");\n  \n  // Calculate optimization recommendations\n  const getOptimizationRecommendations = () => {\n    if (!inventory) return [];\n\n    return inventory.map((item: any) => {\n      const product = item.products || item.product;\n      const inv = item.inventory || item;\n      const currentStock = inv.currentStock || 0;\n      const reorderPoint = inv.reorderPoint || 0;\n      const maxStock = inv.maxStock || 10000;\n\n      let recommendation = \"optimal\";\n      let action = \"No action needed\";\n      let priority = \"low\";\n      let savings = 0;\n\n      if (currentStock === 0) {\n        recommendation = \"critical\";\n        action = `Immediate reorder of ${reorderPoint * 2} units`;\n        priority = \"critical\";\n        savings = parseFloat(product?.basePrice || 0) * reorderPoint;\n      } else if (currentStock <= reorderPoint) {\n        recommendation = \"reorder\";\n        action = `Reorder ${maxStock - currentStock} units`;\n        priority = \"high\";\n        savings = parseFloat(product?.basePrice || 0) * (maxStock - currentStock) * 0.1;\n      } else if (currentStock > maxStock * 0.8) {\n        recommendation = \"excess\";\n        action = `Reduce stock by ${currentStock - Math.floor(maxStock * 0.7)} units`;\n        priority = \"medium\";\n        savings = parseFloat(product?.basePrice || 0) * (currentStock - Math.floor(maxStock * 0.7)) * 0.2;\n      }\n\n      return {\n        product,\n        inventory: inv,\n        recommendation,\n        action,\n        priority,\n        potentialSavings: savings,\n        currentUtilization: (currentStock / maxStock) * 100\n      };\n    }).sort((a, b) => {\n      const priorityOrder = { critical: 4, high: 3, medium: 2, low: 1 };\n      return priorityOrder[b.priority as keyof typeof priorityOrder] - priorityOrder[a.priority as keyof typeof priorityOrder];\n    });\n  };\n\n  const recommendations = getOptimizationRecommendations();\n\n  const getRecommendationColor = (recommendation: string) => {\n    switch (recommendation) {\n      case \"critical\":\n        return \"bg-red-100 text-red-800\";\n      case \"reorder\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"excess\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"optimal\":\n        return \"bg-green-100 text-green-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"critical\":\n        return \"bg-red-500\";\n      case \"high\":\n        return \"bg-orange-500\";\n      case \"medium\":\n        return \"bg-yellow-500\";\n      case \"low\":\n        return \"bg-green-500\";\n      default:\n        return \"bg-gray-500\";\n    }\n  };\n\n  const totalPotentialSavings = recommendations.reduce((sum, rec) => sum + rec.potentialSavings, 0);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Optimization Controls */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center space-x-2\">\n              <Target className=\"w-5 h-5 text-cornex-blue\" />\n              <span>Inventory Optimization Engine</span>\n            </CardTitle>\n            <div className=\"flex items-center space-x-2\">\n              <Select value={optimizationMode} onValueChange={setOptimizationMode}>\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"conservative\">Conservative</SelectItem>\n                  <SelectItem value=\"balanced\">Balanced</SelectItem>\n                  <SelectItem value=\"aggressive\">Aggressive</SelectItem>\n                </SelectContent>\n              </Select>\n              <Button className=\"bg-cornex-blue hover:bg-cornex-dark\">\n                <Zap className=\"w-4 h-4 mr-2\" />\n                Optimize All\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <div className=\"text-2xl font-bold text-gray-900\">{recommendations.length}</div>\n              <p className=\"text-sm text-gray-500\">Items Analyzed</p>\n            </div>\n            <div className=\"text-center p-4 bg-red-50 rounded-lg\">\n              <div className=\"text-2xl font-bold text-red-600\">\n                {recommendations.filter(r => r.priority === \"critical\").length}\n              </div>\n              <p className=\"text-sm text-gray-500\">Critical Actions</p>\n            </div>\n            <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n              <div className=\"text-2xl font-bold text-yellow-600\">\n                {recommendations.filter(r => r.priority === \"high\").length}\n              </div>\n              <p className=\"text-sm text-gray-500\">High Priority</p>\n            </div>\n            <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {formatCurrency(totalPotentialSavings, \"ZAR\")}\n              </div>\n              <p className=\"text-sm text-gray-500\">Potential Savings</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Optimization Recommendations */}\n      <Card>\n        <CardHeader>\n          <CardTitle>AI Optimization Recommendations</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {recommendations.slice(0, 10).map((rec, index) => (\n              <div key={rec.product.id} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className={`w-3 h-3 rounded-full ${getPriorityColor(rec.priority)}`}></div>\n                    <div>\n                      <h4 className=\"font-medium text-gray-900\">{rec.product.name}</h4>\n                      <p className=\"text-sm text-gray-500\">{rec.product.sku}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge className={getRecommendationColor(rec.recommendation)}>\n                      {rec.recommendation}\n                    </Badge>\n                    <Badge variant=\"outline\" className={\n                      rec.priority === \"critical\" ? \"text-red-600\" :\n                      rec.priority === \"high\" ? \"text-orange-600\" :\n                      rec.priority === \"medium\" ? \"text-yellow-600\" : \"text-green-600\"\n                    }>\n                      {rec.priority}\n                    </Badge>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3\">\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-500\">Current Stock</p>\n                    <p className=\"font-medium\">{rec.inventory.currentStock?.toLocaleString() || 0} units</p>\n                  </div>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-500\">Stock Utilization</p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Progress value={rec.currentUtilization} className=\"flex-1 h-2\" />\n                      <span className=\"text-sm font-medium\">{rec.currentUtilization.toFixed(0)}%</span>\n                    </div>\n                  </div>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-500\">Potential Savings</p>\n                    <p className=\"font-medium text-green-600\">\n                      {formatCurrency(rec.potentialSavings, \"ZAR\")}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"bg-gray-50 rounded-lg p-3 mb-3\">\n                  <p className=\"text-sm text-gray-700\">\n                    <strong>Recommendation:</strong> {rec.action}\n                  </p>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n                    <Package className=\"w-4 h-4\" />\n                    <span>Reorder Point: {rec.inventory.reorderPoint?.toLocaleString() || 0}</span>\n                    <span>â€¢</span>\n                    <span>Max Stock: {rec.inventory.maxStock?.toLocaleString() || 0}</span>\n                  </div>\n                  <div className=\"flex space-x-2\">\n                    <Button size=\"sm\" variant=\"outline\">\n                      <Settings className=\"w-3 h-3 mr-1\" />\n                      Configure\n                    </Button>\n                    <Button size=\"sm\" className=\"bg-cornex-blue hover:bg-cornex-dark\">\n                      Apply\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {recommendations.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              <Package className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n              <p>No inventory data available for optimization</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Optimization Settings */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Optimization Parameters</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"safety-stock\">Safety Stock Multiplier</Label>\n              <Input\n                id=\"safety-stock\"\n                type=\"number\"\n                defaultValue=\"1.5\"\n                step=\"0.1\"\n                min=\"1\"\n                max=\"3\"\n              />\n              <p className=\"text-xs text-gray-500\">Higher values = more safety stock</p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"turnover-target\">Target Turnover Rate</Label>\n              <Input\n                id=\"turnover-target\"\n                type=\"number\"\n                defaultValue=\"8\"\n                step=\"0.5\"\n                min=\"4\"\n                max=\"20\"\n              />\n              <p className=\"text-xs text-gray-500\">Times per year</p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"service-level\">Service Level Target</Label>\n              <Input\n                id=\"service-level\"\n                type=\"number\"\n                defaultValue=\"95\"\n                step=\"1\"\n                min=\"90\"\n                max=\"99\"\n              />\n              <p className=\"text-xs text-gray-500\">Percentage availability</p>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end mt-6\">\n            <Button variant=\"outline\" className=\"mr-3\">\n              Reset to Defaults\n            </Button>\n            <Button className=\"bg-cornex-blue hover:bg-cornex-dark\">\n              Save Parameters\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":12204},"client/src/components/MetricCard.tsx":{"content":"import { LucideIcon } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  change?: string;\n  changeType?: \"positive\" | \"negative\" | \"neutral\";\n  icon: LucideIcon;\n  iconColor?: string;\n  className?: string;\n}\n\nexport default function MetricCard({\n  title,\n  value,\n  change,\n  changeType = \"neutral\",\n  icon: Icon,\n  iconColor = \"text-blue-600\",\n  className\n}: MetricCardProps) {\n  const changeColorClass = {\n    positive: \"text-green-600\",\n    negative: \"text-red-600\", \n    neutral: \"text-gray-600\"\n  }[changeType];\n\n  return (\n    <Card className={cn(\"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl rounded-2xl\", className)}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-medium text-gray-600\">{title}</p>\n            <p className=\"text-2xl font-bold text-gray-900 mt-1\">{value}</p>\n            {change && (\n              <p className={cn(\"text-sm mt-1\", changeColorClass)}>\n                {changeType === \"positive\" && \"â†— \"}\n                {changeType === \"negative\" && \"â†™ \"}\n                {change}\n              </p>\n            )}\n          </div>\n          <div className={cn(\n            \"w-12 h-12 rounded-xl flex items-center justify-center ml-4 shadow-lg bg-gradient-to-br\",\n            iconColor.includes(\"blue\") && \"from-blue-500 to-blue-600\",\n            iconColor.includes(\"green\") && \"from-green-500 to-green-600\", \n            iconColor.includes(\"purple\") && \"from-purple-500 to-purple-600\",\n            iconColor.includes(\"orange\") && \"from-orange-500 to-orange-600\",\n            iconColor.includes(\"red\") && \"from-red-500 to-red-600\"\n          )}>\n            <Icon className=\"w-6 h-6 text-white\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2013},"client/src/components/ProductTable.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Search, Edit, Trash2, Download } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { STOCK_STATUS_COLORS } from \"@/lib/constants\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport type { Product, Inventory } from \"@shared/schema\";\n\nexport default function ProductTable() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n\n  const { data: inventory, isLoading } = useQuery({\n    queryKey: [\"/api/inventory\"],\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n  });\n\n  const getStockStatus = (currentStock: number, reorderPoint: number) => {\n    if (currentStock === 0) return \"out_of_stock\";\n    if (currentStock <= reorderPoint) return \"low_stock\";\n    return \"in_stock\";\n  };\n\n  const getStockStatusText = (status: string, stock: number) => {\n    switch (status) {\n      case \"in_stock\":\n        return `In Stock (${stock.toLocaleString()})`;\n      case \"low_stock\":\n        return `Low Stock (${stock.toLocaleString()})`;\n      case \"out_of_stock\":\n        return \"Out of Stock\";\n      default:\n        return `${stock.toLocaleString()}`;\n    }\n  };\n\n  const filteredInventory = Array.isArray(inventory) ? inventory.filter((item: any) => {\n    const product = item.products || item.product;\n    if (!product) return false;\n    \n    const matchesSearch = !searchTerm || \n      product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      product.sku.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCategory = categoryFilter === \"all\" || product.category === categoryFilter;\n    \n    return matchesSearch && matchesCategory;\n  }) : [];\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center h-64\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Filters */}\n      <div className=\"flex items-center gap-4\">\n        <div className=\"relative flex-1 max-w-sm\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n          <Input\n            placeholder=\"Search products...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n        \n        <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n          <SelectTrigger className=\"w-48\">\n            <SelectValue placeholder=\"All Categories\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            <SelectItem value=\"EPS Premium Range\">EPS Premium</SelectItem>\n            <SelectItem value=\"BR XPS Budget Range\">BR XPS Budget</SelectItem>\n            <SelectItem value=\"LED Ready Series\">LED Ready</SelectItem>\n          </SelectContent>\n        </Select>\n        \n        <Button variant=\"outline\" size=\"sm\">\n          <Download className=\"w-4 h-4 mr-2\" />\n          Export\n        </Button>\n      </div>\n\n      {/* Table */}\n      <div className=\"border rounded-lg\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Product</TableHead>\n              <TableHead>SKU</TableHead>\n              <TableHead>Dimensions</TableHead>\n              <TableHead>Pack Info</TableHead>\n              <TableHead>Price</TableHead>\n              <TableHead>Stock</TableHead>\n              <TableHead>Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {filteredInventory.map((item: any) => {\n              const product = item.products || item.product;\n              const inventory = item.inventory || item;\n              const stockStatus = getStockStatus(inventory.currentStock, inventory.reorderPoint);\n              \n              return (\n                <TableRow key={product.id}>\n                  <TableCell>\n                    <div className=\"flex items-center\">\n                      <div className={`w-10 h-10 rounded-lg flex items-center justify-center mr-3 ${\n                        product.category === 'EPS Premium Range' ? 'bg-blue-100' :\n                        product.category === 'BR XPS Budget Range' ? 'bg-green-100' : 'bg-purple-100'\n                      }`}>\n                        <span className={`text-xs font-bold ${\n                          product.category === 'EPS Premium Range' ? 'text-blue-600' :\n                          product.category === 'BR XPS Budget Range' ? 'text-green-600' : 'text-purple-600'\n                        }`}>\n                          {product.sku}\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{product.name}</p>\n                        <p className=\"text-sm text-gray-500\">{product.subcategory}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"font-mono\">{product.sku}</TableCell>\n                  <TableCell className=\"text-sm text-gray-600\">{product.dimensions}</TableCell>\n                  <TableCell className=\"text-sm text-gray-600\">\n                    <div>\n                      <p>{product.packSize} per pack</p>\n                      <p className=\"text-xs text-gray-500\">{product.packsPerBox} packs/box</p>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"font-medium\">\n                    {formatCurrency(parseFloat(product.basePrice), \"ZAR\")}\n                  </TableCell>\n                  <TableCell>\n                    <Badge className={STOCK_STATUS_COLORS[stockStatus as keyof typeof STOCK_STATUS_COLORS]}>\n                      {getStockStatusText(stockStatus, inventory.currentStock)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-2\">\n                      <Button variant=\"ghost\" size=\"sm\">\n                        <Edit className=\"w-4 h-4\" />\n                      </Button>\n                      <Button variant=\"ghost\" size=\"sm\">\n                        <Trash2 className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6841},"client/src/components/ProductionSchedule.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Clock, TrendingUp, AlertCircle } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useProductionEfficiency } from \"@/hooks/useRealTimeData\";\n\nexport default function ProductionSchedule() {\n  const { data: schedule, isLoading } = useQuery({\n    queryKey: [\"/api/production-schedule\"],\n  });\n\n  const efficiencies = useProductionEfficiency();\n\n  if (isLoading) {\n    return <div className=\"space-y-4\">\n      {[1, 2, 3].map(i => (\n        <div key={i} className=\"h-16 bg-gray-100 rounded-lg animate-pulse\"></div>\n      ))}\n    </div>;\n  }\n\n  const productionLines = [\n    {\n      id: \"eps-line-a\",\n      name: \"EPS Line A\",\n      product: \"EPS01-EPS06 Production\",\n      efficiency: efficiencies['EPS Line A'] || 97,\n      status: \"running\",\n      color: \"bg-green-500\"\n    },\n    {\n      id: \"br-xps-line\",\n      name: \"BR XPS Line B\", \n      product: \"BR1-BR13 Production\",\n      efficiency: efficiencies['BR XPS Line B'] || 92,\n      status: \"running\",\n      color: \"bg-blue-500\"\n    },\n    {\n      id: \"led-line\",\n      name: \"LED Ready Line\",\n      product: \"Specialized Products\",\n      efficiency: efficiencies['LED Ready Line'] || 89,\n      status: \"scheduled\",\n      color: \"bg-yellow-500\"\n    }\n  ];\n\n  return (\n    <div className=\"space-y-4\">\n      {productionLines.map((line) => (\n        <div key={line.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\">\n          <div className=\"flex items-center space-x-3\">\n            <div className={`w-3 h-3 ${line.color} rounded-full`}></div>\n            <div>\n              <p className=\"font-medium text-gray-900\">{line.name}</p>\n              <p className=\"text-sm text-gray-600\">{line.product}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"text-right\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"font-medium text-gray-900\">{line.efficiency.toFixed(1)}%</span>\n                {line.efficiency > 95 ? (\n                  <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                ) : line.efficiency < 90 ? (\n                  <AlertCircle className=\"w-4 h-4 text-yellow-600\" />\n                ) : (\n                  <Clock className=\"w-4 h-4 text-blue-600\" />\n                )}\n              </div>\n              <p className=\"text-sm text-gray-600\">Efficiency</p>\n            </div>\n            <Badge variant={line.status === \"running\" ? \"default\" : \"secondary\"}>\n              {line.status}\n            </Badge>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","size_bytes":2715},"client/src/components/ProductionScheduleCalendar.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ChevronLeft, ChevronRight, Calendar } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ProductionScheduleCalendarProps {\n  schedule: any[];\n  onDateSelect: (date: Date) => void;\n  selectedDate: Date;\n}\n\nexport default function ProductionScheduleCalendar({ \n  schedule, \n  onDateSelect, \n  selectedDate \n}: ProductionScheduleCalendarProps) {\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n\n  const monthNames = [\n    \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n  ];\n\n  const daysOfWeek = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n  const getDaysInMonth = (date: Date) => {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n  };\n\n  const getFirstDayOfMonth = (date: Date) => {\n    return new Date(date.getFullYear(), date.getMonth(), 1).getDay();\n  };\n\n  const getScheduleForDate = (date: Date) => {\n    return schedule.filter((item: any) => {\n      const itemDate = new Date(item.scheduledDate);\n      return itemDate.toDateString() === date.toDateString();\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"bg-green-500\";\n      case \"in_progress\":\n        return \"bg-blue-500\";\n      case \"scheduled\":\n        return \"bg-yellow-500\";\n      case \"cancelled\":\n        return \"bg-red-500\";\n      default:\n        return \"bg-gray-500\";\n    }\n  };\n\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    setCurrentMonth(prev => {\n      const newMonth = new Date(prev);\n      if (direction === 'prev') {\n        newMonth.setMonth(prev.getMonth() - 1);\n      } else {\n        newMonth.setMonth(prev.getMonth() + 1);\n      }\n      return newMonth;\n    });\n  };\n\n  const renderCalendarDays = () => {\n    const daysInMonth = getDaysInMonth(currentMonth);\n    const firstDay = getFirstDayOfMonth(currentMonth);\n    const days = [];\n\n    // Empty cells for days before the first day of the month\n    for (let i = 0; i < firstDay; i++) {\n      days.push(\n        <div key={`empty-${i}`} className=\"h-20 p-1\">\n          <div className=\"h-full\"></div>\n        </div>\n      );\n    }\n\n    // Days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);\n      const daySchedule = getScheduleForDate(date);\n      const isSelected = selectedDate.toDateString() === date.toDateString();\n      const isToday = new Date().toDateString() === date.toDateString();\n\n      days.push(\n        <div key={day} className=\"h-20 p-1\">\n          <Button\n            variant=\"ghost\"\n            className={cn(\n              \"h-full w-full p-1 flex flex-col items-start justify-start text-left hover:bg-gray-100\",\n              isSelected && \"bg-cornex-blue text-white hover:bg-cornex-dark\",\n              isToday && !isSelected && \"bg-blue-50 border border-blue-200\"\n            )}\n            onClick={() => onDateSelect(date)}\n          >\n            <span className=\"text-sm font-medium\">{day}</span>\n            <div className=\"flex flex-wrap gap-1 mt-1\">\n              {daySchedule.slice(0, 2).map((item: any, index: number) => (\n                <div\n                  key={index}\n                  className={cn(\n                    \"w-2 h-2 rounded-full\",\n                    getStatusColor(item.status)\n                  )}\n                ></div>\n              ))}\n              {daySchedule.length > 2 && (\n                <span className=\"text-xs text-gray-500\">+{daySchedule.length - 2}</span>\n              )}\n            </div>\n          </Button>\n        </div>\n      );\n    }\n\n    return days;\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"p-4\">\n        {/* Calendar Header */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold\">\n            {monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => navigateMonth('prev')}\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => navigateMonth('next')}\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Legend */}\n        <div className=\"flex items-center justify-center space-x-4 mb-4 text-xs\">\n          <div className=\"flex items-center space-x-1\">\n            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n            <span>Completed</span>\n          </div>\n          <div className=\"flex items-center space-x-1\">\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n            <span>In Progress</span>\n          </div>\n          <div className=\"flex items-center space-x-1\">\n            <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n            <span>Scheduled</span>\n          </div>\n          <div className=\"flex items-center space-x-1\">\n            <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n            <span>Cancelled</span>\n          </div>\n        </div>\n\n        {/* Days of Week Header */}\n        <div className=\"grid grid-cols-7 gap-1 mb-2\">\n          {daysOfWeek.map((day) => (\n            <div key={day} className=\"h-8 flex items-center justify-center text-sm font-medium text-gray-500\">\n              {day}\n            </div>\n          ))}\n        </div>\n\n        {/* Calendar Grid */}\n        <div className=\"grid grid-cols-7 gap-1\">\n          {renderCalendarDays()}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":6027},"client/src/components/Sidebar.tsx":{"content":"import { \n  LayoutDashboard, \n  Package, \n  Factory, \n  Warehouse, \n  Users, \n  TrendingUp, \n  Settings, \n  FileText,\n  ChevronLeft,\n  ChevronRight,\n  Route,\n  Bot,\n  Upload,\n  ShoppingCart,\n  Truck,\n  Store,\n  Building2,\n  User,\n  LogOut,\n  Tag,\n  Map,\n  Trophy\n} from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { CORNEX_BRANDS } from \"@/lib/constants\";\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\nimport { HoverLift } from \"@/components/AnimatedComponents\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\ninterface SidebarProps {\n  collapsed: boolean;\n  onToggle: () => void;\n}\n\nexport default function Sidebar({ collapsed, onToggle }: SidebarProps) {\n  const [location] = useLocation();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const navigation = [\n    { name: t.dashboard, href: \"/\", icon: LayoutDashboard },\n    { name: t.productCatalog, href: \"/catalog\", icon: Package },\n    { name: t.productionPlanning, href: \"/production\", icon: Factory },\n    { name: t.inventoryAI, href: \"/inventory\", icon: Warehouse },\n    { name: t.globalDistributors, href: \"/distributors\", icon: Users },\n    { name: t.routeManagement, href: \"/routes\", icon: Route },\n    { name: t.storeMapVisualization, href: \"/store-map\", icon: Map },\n    { name: \"Purchase Orders\", href: \"/purchase-orders\", icon: ShoppingCart },\n    { name: \"SA Logistics\", href: \"/logistics\", icon: Truck },\n    { name: t.factorySetup, href: \"/factory-setup\", icon: Factory },\n    { name: \"Extended Automation\", href: \"/automation\", icon: Settings },\n    { name: \"Bulk Import\", href: \"/bulk-import\", icon: Upload },\n    { name: t.businessIntelligence, href: \"/analytics\", icon: TrendingUp },\n    { name: \"Product Labels\", href: \"/product-labels\", icon: Tag },\n    { name: \"Achievements\", href: \"/achievements\", icon: Trophy },\n    { name: \"User Management\", href: \"/user-management\", icon: User },\n    { name: \"Inventory Upload\", href: \"/inventory-upload\", icon: Upload },\n    { name: \"Audit Trail\", href: \"/audit-trail\", icon: FileText },\n  ];\n\n  const handleLogout = async () => {\n    try {\n      // Log the logout action\n      await apiRequest(\"/api/auth/audit\", \"POST\", {\n        action: \"logout\",\n        details: \"User logged out from CornexConnect platform\",\n      });\n\n      // Redirect to logout endpoint (will handle the actual logout)\n      window.location.href = \"/api/logout\";\n      \n      toast({\n        title: \"Logged Out\",\n        description: \"You have been successfully logged out.\",\n      });\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      // Force logout even if audit fails\n      window.location.href = \"/api/logout\";\n    }\n  };\n\n  const isActive = (href: string) => {\n    if (href === \"/\" && location === \"/\") return true;\n    if (href !== \"/\" && location.startsWith(href)) return true;\n    return false;\n  };\n\n  return (\n    <aside className={cn(\n      \"bg-white shadow-lg border-r border-gray-200 sidebar-transition flex flex-col transition-all duration-300 ease-out\",\n      collapsed ? \"w-16\" : \"w-64\"\n    )}>\n      {/* Collapse/Expand Button */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={onToggle}\n          className=\"w-full justify-center\"\n        >\n          {collapsed ? <ChevronRight className=\"w-4 h-4\" /> : <ChevronLeft className=\"w-4 h-4\" />}\n        </Button>\n      </div>\n\n      <nav className=\"flex-1 mt-6 px-4\">\n        {/* Main Navigation */}\n        <motion.div \n          className=\"space-y-2\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, staggerChildren: 0.05 }}\n        >\n          {navigation.map((item, index) => {\n            const Icon = item.icon;\n            return (\n              <motion.div\n                key={item.href}\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.2, delay: index * 0.03 }}\n              >\n                <HoverLift lift={2}>\n                  <Link href={item.href}>\n                    <div className={cn(\n                      \"flex items-center p-3 mx-2 my-1 rounded-lg transition-all duration-200 ease-out cursor-pointer transform\",\n                      isActive(item.href) \n                        ? \"bg-gradient-to-r from-emerald-100 to-blue-100 text-emerald-700 font-semibold shadow-sm scale-105\" \n                        : \"text-gray-600 hover:text-emerald-700 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-blue-50 hover:scale-105\"\n                    )}>\n                      <Icon className=\"w-5 h-5 mr-3 flex-shrink-0 transition-transform duration-200 ease-out hover:scale-110\" />\n                      {!collapsed && (\n                        <motion.span \n                          className=\"transition-opacity duration-300\"\n                          initial={{ opacity: 0 }}\n                          animate={{ opacity: 1 }}\n                          transition={{ duration: 0.2, delay: 0.1 }}\n                        >\n                          {item.name}\n                        </motion.span>\n                      )}\n                    </div>\n                  </Link>\n                </HoverLift>\n              </motion.div>\n            );\n          })}\n        </motion.div>\n        \n        {/* Sub-Brands Section */}\n        {!collapsed && (\n          <div className=\"mt-8\">\n            <h3 className=\"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider\">\n              Cornexâ„¢ Brands\n            </h3>\n            <div className=\"mt-3 space-y-1\">\n              {CORNEX_BRANDS.map((brand) => (\n                <Link key={brand.id} href={`/brands/${brand.id}`}>\n                  <div className=\"flex items-center px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n                    <span \n                      className=\"brand-dot\" \n                      style={{ backgroundColor: brand.color }}\n                    ></span>\n                    <span>{brand.displayName}</span>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* User Profile & Settings */}\n        <div className=\"mt-auto pt-6 border-t border-gray-200\">\n          {!collapsed && user && (\n            <motion.div \n              className=\"px-3 py-3 mb-4 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-8 h-8 bg-gradient-to-r from-emerald-500 to-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold\">\n                    {user.firstName?.charAt(0) || user.email?.charAt(0) || 'U'}\n                  </div>\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-sm font-medium text-gray-900 truncate\">\n                    {user.firstName ? `${user.firstName} ${user.lastName || ''}`.trim() : user.email}\n                  </p>\n                  <p className=\"text-xs text-gray-500 truncate\">\n                    {user.email}\n                  </p>\n                </div>\n              </div>\n            </motion.div>\n          )}\n          \n          <div className=\"space-y-1\">\n            <HoverLift lift={2}>\n              <Link href=\"/company-settings\">\n                <div className=\"flex items-center px-3 py-2 text-sm text-gray-600 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-blue-50 hover:text-emerald-700 rounded-lg transition-all duration-200\">\n                  <Settings className=\"w-4 h-4 mr-3 flex-shrink-0\" />\n                  {!collapsed && <span>Company Settings</span>}\n                </div>\n              </Link>\n            </HoverLift>\n            \n            <HoverLift lift={2}>\n              <button \n                onClick={handleLogout}\n                className=\"w-full flex items-center px-3 py-2 text-sm text-gray-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-all duration-200\"\n              >\n                <LogOut className=\"w-4 h-4 mr-3 flex-shrink-0\" />\n                {!collapsed && <span>Logout</span>}\n              </button>\n            </HoverLift>\n          </div>\n        </div>\n        \n        {/* Footer Links */}\n        <div className=\"mt-6 pt-4 border-t border-gray-200\">\n          <div className=\"space-y-1\">\n            <Link href=\"/hardware-stores\">\n              <div className=\"flex items-center px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n                <Store className=\"w-4 h-4 mr-3 flex-shrink-0\" />\n                {!collapsed && <span>Hardware Stores</span>}\n              </div>\n            </Link>\n            <Link href=\"/company-management\">\n              <div className=\"flex items-center px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n                <Building2 className=\"w-4 h-4 mr-3 flex-shrink-0\" />\n                {!collapsed && <span>Company Management</span>}\n              </div>\n            </Link>\n            <Link href=\"/licensing\">\n              <div className=\"flex items-center px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\">\n                <FileText className=\"w-4 h-4 mr-3 flex-shrink-0\" />\n                {!collapsed && <span>Licensing</span>}\n              </div>\n            </Link>\n          </div>\n        </div>\n      </nav>\n    </aside>\n  );\n}\n","size_bytes":10017},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useRealTimeData.ts":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nexport function useRealTimeData<T>(\n  queryKey: string[],\n  interval: number = 5000\n) {\n  const query = useQuery<T>({\n    queryKey,\n    refetchInterval: interval,\n    refetchIntervalInBackground: true,\n  });\n\n  return query;\n}\n\nexport function useSimulatedMetrics() {\n  const [metrics, setMetrics] = useState({\n    revenue: 12.8,\n    efficiency: 94.7,\n    distributors: 3247,\n    turnover: 8.3\n  });\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setMetrics(prev => ({\n        revenue: prev.revenue + (Math.random() - 0.5) * 0.2,\n        efficiency: Math.max(85, Math.min(99, prev.efficiency + (Math.random() - 0.5) * 0.5)),\n        distributors: prev.distributors + Math.floor((Math.random() - 0.5) * 10),\n        turnover: Math.max(6, Math.min(12, prev.turnover + (Math.random() - 0.5) * 0.1))\n      }));\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return metrics;\n}\n\nexport function useProductionEfficiency() {\n  const [efficiencies, setEfficiencies] = useState({\n    'EPS Line A': 97,\n    'BR XPS Line B': 92,\n    'LED Ready Line': 89\n  });\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setEfficiencies(prev => \n        Object.fromEntries(\n          Object.entries(prev).map(([line, eff]) => [\n            line,\n            Math.max(80, Math.min(100, eff + (Math.random() - 0.5) * 2))\n          ])\n        )\n      );\n    }, 10000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return efficiencies;\n}\n","size_bytes":1580},"client/src/lib/constants.ts":{"content":"import { CurrencyRate, Brand } from \"@/types\";\n\nexport const CURRENCIES: CurrencyRate[] = [\n  { currency: \"USD\", rate: 1, symbol: \"$\", flag: \"ðŸ‡ºðŸ‡¸\" },\n  { currency: \"EUR\", rate: 0.85, symbol: \"â‚¬\", flag: \"ðŸ‡ªðŸ‡º\" },\n  { currency: \"ZAR\", rate: 18.5, symbol: \"R\", flag: \"ðŸ‡¿ðŸ‡¦\" },\n  { currency: \"GBP\", rate: 0.73, symbol: \"Â£\", flag: \"ðŸ‡¬ðŸ‡§\" },\n];\n\nexport const CORNEX_BRANDS: Brand[] = [\n  {\n    id: \"trimstyle\",\n    name: \"trimstyle\",\n    displayName: \"TrimStyleâ„¢\",\n    description: \"Premium Cornice Design\",\n    color: \"#eab308\",\n    icon: \"âœï¸\"\n  },\n  {\n    id: \"designaura\",\n    name: \"designaura\", \n    displayName: \"DesignAuraâ„¢\",\n    description: \"Virtual Interior Styling\",\n    color: \"#3b82f6\",\n    icon: \"ðŸ”®\"\n  },\n  {\n    id: \"cornicecraft\",\n    name: \"cornicecraft\",\n    displayName: \"CorniceCraftâ„¢\", \n    description: \"Custom Manufacturing\",\n    color: \"#10b981\",\n    icon: \"ðŸ§©\"\n  },\n  {\n    id: \"ceilingtech\",\n    name: \"ceilingtech\",\n    displayName: \"CeilingTechâ„¢\",\n    description: \"Ceiling Systems & Panels\", \n    color: \"#ec4899\",\n    icon: \"ðŸ§±\"\n  }\n];\n\nexport const SOUTH_AFRICAN_PROVINCES = [\n  \"Gauteng\",\n  \"Western Cape\", \n  \"KwaZulu-Natal\",\n  \"Eastern Cape\",\n  \"Limpopo\",\n  \"Mpumalanga\",\n  \"North West\",\n  \"Free State\",\n  \"Northern Cape\"\n];\n\nexport const PRODUCTION_LINES = [\n  {\n    id: \"eps-line-a\",\n    name: \"EPS Line A\",\n    products: [\"EPS01\", \"EPS02\", \"EPS03\", \"EPS04\", \"EPS05\", \"EPS06\"],\n    capacity: 5000,\n    efficiency: 97\n  },\n  {\n    id: \"eps-line-b\", \n    name: \"EPS Line B\",\n    products: [\"EPS07\", \"EPS08\", \"EPS09\", \"EPS10\", \"EPS11\", \"EPS12\", \"EPS13\"],\n    capacity: 4500,\n    efficiency: 94\n  },\n  {\n    id: \"br-xps-line\",\n    name: \"BR XPS Line\",\n    products: [\"BR1\", \"BR2\", \"BR3\", \"BR4\", \"BR5\", \"BR6\", \"BR7\", \"BR8\", \"BR9\", \"BR10\", \"BR11\", \"BR12\", \"BR13\"],\n    capacity: 6000,\n    efficiency: 92\n  },\n  {\n    id: \"led-line\",\n    name: \"LED Ready Line\", \n    products: [\"CORNICE001\", \"CORNICE002\", \"CORNICE003\", \"CORNICE004\", \"CORNICE005\", \"LEDPROFILE01\", \"LEDPROFILE02\", \"LEDPROFILE03\"],\n    capacity: 2000,\n    efficiency: 89\n  },\n  {\n    id: \"custom-line\",\n    name: \"Custom Production Line\",\n    products: [\"CUSTOM\"],\n    capacity: 1000,\n    efficiency: 95\n  }\n];\n\nexport const STOCK_STATUS_COLORS = {\n  in_stock: \"bg-green-100 text-green-800\",\n  low_stock: \"bg-yellow-100 text-yellow-800\", \n  out_of_stock: \"bg-red-100 text-red-800\"\n};\n\nexport const ORDER_STATUS_COLORS = {\n  pending: \"bg-yellow-100 text-yellow-800\",\n  confirmed: \"bg-blue-100 text-blue-800\",\n  production: \"bg-purple-100 text-purple-800\",\n  shipped: \"bg-green-100 text-green-800\",\n  delivered: \"bg-green-100 text-green-800\",\n  cancelled: \"bg-red-100 text-red-800\"\n};\n","size_bytes":2710},"client/src/lib/currency.ts":{"content":"import { CURRENCIES } from \"./constants\";\n\nexport function convertCurrency(amount: number, fromCurrency: string, toCurrency: string): number {\n  if (fromCurrency === toCurrency) return amount;\n  \n  const fromRate = CURRENCIES.find(c => c.currency === fromCurrency)?.rate || 1;\n  const toRate = CURRENCIES.find(c => c.currency === toCurrency)?.rate || 1;\n  \n  // Convert to USD first, then to target currency\n  const usdAmount = amount / fromRate;\n  return usdAmount * toRate;\n}\n\nexport function formatCurrency(amount: number, currency: string): string {\n  const currencyInfo = CURRENCIES.find(c => c.currency === currency);\n  if (!currencyInfo) return amount.toFixed(2);\n  \n  return `${currencyInfo.symbol}${amount.toLocaleString(undefined, { \n    minimumFractionDigits: 2, \n    maximumFractionDigits: 2 \n  })}`;\n}\n\nexport function getCurrencySymbol(currency: string): string {\n  return CURRENCIES.find(c => c.currency === currency)?.symbol || \"\";\n}\n\nexport function getCurrencyFlag(currency: string): string {\n  return CURRENCIES.find(c => c.currency === currency)?.flag || \"\";\n}\n","size_bytes":1081},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/BusinessIntelligence.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { BarChart3, TrendingUp, PieChart, Activity, Download, Filter, Calendar } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { DatePickerWithRange } from \"@/components/ui/date-picker-with-range\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { SOUTH_AFRICAN_PROVINCES } from \"@/lib/constants\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function BusinessIntelligence() {\n  const [selectedTimeframe, setSelectedTimeframe] = useState(\"30d\");\n  const [selectedRegion, setSelectedRegion] = useState(\"all\");\n  const [selectedMetric, setSelectedMetric] = useState(\"revenue\");\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const handleFilterClick = () => {\n    toast({\n      title: \"Advanced Filters\",\n      description: \"Opening advanced filtering options...\",\n    });\n  };\n\n  const handleExportClick = () => {\n    toast({\n      title: \"Exporting Data\",\n      description: \"Preparing analytics report for download...\",\n    });\n  };\n\n  const handleGenerateReport = () => {\n    toast({\n      title: \"Generating Report\",\n      description: \"Creating comprehensive analytics report...\",\n    });\n  };\n\n  const { data: salesMetrics } = useQuery({\n    queryKey: [\"/api/sales-metrics\", selectedTimeframe, selectedRegion],\n  });\n\n  const { data: topProducts } = useQuery({\n    queryKey: [\"/api/sales-metrics/top-products\"],\n  });\n\n  const { data: regionalMetrics } = useQuery({\n    queryKey: [\"/api/sales-metrics/by-region\"],\n  });\n\n  const { data: distributors } = useQuery({\n    queryKey: [\"/api/distributors\"],\n  });\n\n  const { data: inventory } = useQuery({\n    queryKey: [\"/api/inventory\"],\n  });\n\n  // Calculate key performance indicators\n  const kpis = {\n    totalRevenue: (regionalMetrics && Array.isArray(regionalMetrics)) \n      ? regionalMetrics.reduce((sum: number, region: any) => sum + parseFloat(region.revenue), 0) \n      : 0,\n    totalUnits: (regionalMetrics && Array.isArray(regionalMetrics)) \n      ? regionalMetrics.reduce((sum: number, region: any) => sum + parseInt(region.units), 0) \n      : 0,\n    averageOrderValue: 0,\n    customerSatisfaction: 94.2,\n    inventoryTurnover: 8.3,\n    profitMargin: 24.7\n  };\n\n  if (kpis.totalUnits > 0) {\n    kpis.averageOrderValue = kpis.totalRevenue / kpis.totalUnits;\n  }\n\n  return (\n    <div className=\"space-y-8 p-8\">\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-8 py-6 -mx-8 -mt-8 mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Business Intelligence & Analytics</h2>\n            <p className=\"text-gray-600 mt-1\">Advanced analytics and performance insights for data-driven decisions</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Select value={selectedTimeframe} onValueChange={setSelectedTimeframe}>\n              <SelectTrigger className=\"w-32\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"7d\">Last 7 days</SelectItem>\n                <SelectItem value=\"30d\">Last 30 days</SelectItem>\n                <SelectItem value=\"90d\">Last 90 days</SelectItem>\n                <SelectItem value=\"1y\">Last year</SelectItem>\n              </SelectContent>\n            </Select>\n            <Button variant=\"outline\" onClick={handleFilterClick}>\n              <Filter className=\"w-4 h-4 mr-2\" />\n              Filters\n            </Button>\n            <Button variant=\"outline\" onClick={handleExportClick}>\n              <Download className=\"w-4 h-4 mr-2\" />\n              Export\n            </Button>\n            <Button className=\"bg-cornex-blue hover:bg-cornex-dark\" onClick={handleGenerateReport}>\n              <BarChart3 className=\"w-4 h-4 mr-2\" />\n              Generate Report\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Key Performance Indicators */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6\">\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Total Revenue</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {formatCurrency(kpis.totalRevenue, \"ZAR\")}\n                </p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +23.5%</p>\n              </div>\n              <TrendingUp className=\"w-8 h-8 text-green-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Units Sold</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {kpis.totalUnits.toLocaleString()}\n                </p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +18.2%</p>\n              </div>\n              <Activity className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Avg Order Value</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {formatCurrency(kpis.averageOrderValue, \"ZAR\")}\n                </p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +4.8%</p>\n              </div>\n              <BarChart3 className=\"w-8 h-8 text-purple-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Satisfaction</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{kpis.customerSatisfaction}%</p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +2.1%</p>\n              </div>\n              <Activity className=\"w-8 h-8 text-yellow-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Inventory Turn</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{kpis.inventoryTurnover}x</p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +15%</p>\n              </div>\n              <PieChart className=\"w-8 h-8 text-orange-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Profit Margin</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{kpis.profitMargin}%</p>\n                <p className=\"text-sm text-green-600 mt-1\">â†— +3.2%</p>\n              </div>\n              <TrendingUp className=\"w-8 h-8 text-red-600\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Analytics Tabs */}\n      <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"sales\">Sales Analytics</TabsTrigger>\n          <TabsTrigger value=\"products\">Product Performance</TabsTrigger>\n          <TabsTrigger value=\"regional\">Regional Analysis</TabsTrigger>\n          <TabsTrigger value=\"forecasting\">Forecasting</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Revenue Trend Chart */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Revenue Trend</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <BarChart3 className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>Revenue Analytics Chart</p>\n                    <p className=\"text-sm\">Monthly revenue tracking and trends</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Top Products */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Top Performing Products</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {(topProducts && Array.isArray(topProducts) ? topProducts.slice(0, 5) : []).map((item: any, index: number) => (\n                    <div key={item.product.id} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center\">\n                          <span className=\"text-xs font-bold text-blue-600\">#{index + 1}</span>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{item.product.name}</p>\n                          <p className=\"text-sm text-gray-500\">{item.product.sku}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium text-gray-900\">\n                          {formatCurrency(parseFloat(item.revenue), \"ZAR\")}\n                        </p>\n                        <p className=\"text-sm text-gray-500\">{item.units.toLocaleString()} units</p>\n                      </div>\n                    </div>\n                  )) || (\n                    <div className=\"text-center py-8 text-gray-500\">\n                      <PieChart className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                      <p>No product data available</p>\n                    </div> \n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"sales\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Sales Performance Analysis</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-80 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <TrendingUp className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>Sales Performance Chart</p>\n                    <p className=\"text-sm\">Detailed sales analytics and trends</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Sales Metrics</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Conversion Rate</span>\n                      <span className=\"font-medium\">67%</span>\n                    </div>\n                    <Progress value={67} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Customer Retention</span>\n                      <span className=\"font-medium\">84%</span>\n                    </div>\n                    <Progress value={84} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Market Share</span>\n                      <span className=\"font-medium\">34%</span>\n                    </div>\n                    <Progress value={34} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Growth Rate</span>\n                      <span className=\"font-medium\">23%</span>\n                    </div>\n                    <Progress value={23} className=\"h-2\" />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"products\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Product Category Performance</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {[\n                    { category: \"EPS Premium Range\", revenue: 4200000, units: 28400, margin: 26.4, growth: 18.2 },\n                    { category: \"BR XPS Budget Range\", revenue: 3800000, units: 31200, margin: 22.1, growth: 24.6 },\n                    { category: \"LED Ready Series\", revenue: 2400000, units: 8900, margin: 34.7, growth: 42.3 }\n                  ].map((item) => (\n                    <div key={item.category} className=\"p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <h4 className=\"font-medium text-gray-900\">{item.category}</h4>\n                        <Badge variant=\"outline\" className=\"text-green-600\">\n                          +{item.growth}%\n                        </Badge>\n                      </div>\n                      <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                        <div>\n                          <p className=\"text-gray-500\">Revenue</p>\n                          <p className=\"font-medium\">{formatCurrency(item.revenue, \"ZAR\")}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Units</p>\n                          <p className=\"font-medium\">{item.units.toLocaleString()}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Margin</p>\n                          <p className=\"font-medium\">{item.margin}%</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Product Velocity Analysis</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <Activity className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>Product Velocity Chart</p>\n                    <p className=\"text-sm\">Inventory turn rates and product movement</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"regional\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Provincial Performance Map</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-80 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <BarChart3 className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>Interactive Regional Map</p>\n                    <p className=\"text-sm\">Provincial sales and distributor performance</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Regional Rankings</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {(regionalMetrics && Array.isArray(regionalMetrics) ? regionalMetrics.slice(0, 9) : []).map((metric: any, index: number) => (\n                    <div key={metric.region} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${\n                          index === 0 ? 'bg-yellow-100 text-yellow-800' :\n                          index === 1 ? 'bg-gray-100 text-gray-800' :\n                          index === 2 ? 'bg-orange-100 text-orange-800' :\n                          'bg-blue-100 text-blue-800'\n                        }`}>\n                          {index + 1}\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-900\">{metric.region}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-sm font-medium text-gray-900\">\n                          {formatCurrency(parseFloat(metric.revenue), \"ZAR\")}\n                        </p>\n                        <p className=\"text-xs text-gray-500\">{metric.units.toLocaleString()} units</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"forecasting\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>AI Demand Forecasting</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <TrendingUp className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>AI Forecasting Model</p>\n                    <p className=\"text-sm\">Predictive analytics for demand planning</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Forecast Accuracy</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl font-bold text-green-600\">95.7%</div>\n                    <p className=\"text-sm text-gray-500\">Overall Forecast Accuracy</p>\n                  </div>\n                  \n                  <div className=\"space-y-3\">\n                    {[\n                      { period: \"Next 30 days\", accuracy: 97.2, confidence: \"High\" },\n                      { period: \"Next 60 days\", accuracy: 94.8, confidence: \"High\" },\n                      { period: \"Next 90 days\", accuracy: 91.3, confidence: \"Medium\" },\n                      { period: \"Next 6 months\", accuracy: 85.6, confidence: \"Medium\" }\n                    ].map((forecast) => (\n                      <div key={forecast.period} className=\"space-y-2\">\n                        <div className=\"flex justify-between text-sm\">\n                          <span>{forecast.period}</span>\n                          <div className=\"flex items-center space-x-2\">\n                            <span className=\"font-medium\">{forecast.accuracy}%</span>\n                            <Badge variant={forecast.confidence === \"High\" ? \"default\" : \"secondary\"} className=\"text-xs\">\n                              {forecast.confidence}\n                            </Badge>\n                          </div>\n                        </div>\n                        <Progress value={forecast.accuracy} className=\"h-2\" />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* AI Insights */}\n      <Card className=\"cornex-gradient text-white\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-2\">ðŸ§  Business Intelligence Insights</h3>\n              <div className=\"space-y-2 text-blue-100\">\n                <p>â€¢ EPS Premium range showing 18.2% growth - consider expanding production capacity</p>\n                <p>â€¢ Gauteng market has 23% higher profit margins - optimize pricing strategy for other provinces</p>\n                <p>â€¢ LED Ready series has 42% growth potential - invest in marketing and distributor training</p>\n                <p>â€¢ Inventory turnover improved 15% - AI optimization saving R2.4M annually</p>\n              </div>\n            </div>\n            <Button variant=\"secondary\" className=\"bg-white/20 backdrop-blur hover:bg-white/30 text-white border-0\">\n              View Full Report\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":22398},"client/src/pages/Dashboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  TrendingUp, \n  Users, \n  Package, \n  DollarSign, \n  Factory,\n  MapPin,\n  BarChart3,\n  Lightbulb,\n  Plus,\n  Calendar\n} from \"lucide-react\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { TransitionHints, useTransitionHints, HINT_SEQUENCES } from \"@/components/TransitionHints\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function Dashboard() {\n  const [showWelcomeHints, setShowWelcomeHints] = useState(true);\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const { t, currentCountry, currency } = useTranslation();\n  \n  // Modal states\n  const [addProductOpen, setAddProductOpen] = useState(false);\n  const [addDistributorOpen, setAddDistributorOpen] = useState(false);\n  const [scheduleProductionOpen, setScheduleProductionOpen] = useState(false);\n  \n  // Form states\n  const [newProduct, setNewProduct] = useState({\n    sku: '',\n    name: '',\n    description: '',\n    category: '',\n    basePrice: '',\n    costPrice: ''\n  });\n  \n  const [newDistributor, setNewDistributor] = useState({\n    name: '',\n    contactPerson: '',\n    email: '',\n    phone: '',\n    city: '',\n    region: ''\n  });\n  \n  const [newProduction, setNewProduction] = useState({\n    productId: '',\n    quantity: '',\n    scheduledDate: '',\n    priority: 'medium'\n  });\n  \n  // Transition hints system\n  const { \n    activeHints, \n    isVisible: hintsVisible, \n    currentStep, \n    showHints, \n    hideHints, \n    completeHints \n  } = useTransitionHints();\n\n  // Dashboard data queries\n  const { data: summary = {} } = useQuery({\n    queryKey: [\"/api/dashboard/summary\"],\n  });\n\n  const { data: distributors = [] } = useQuery({\n    queryKey: [\"/api/distributors\"],\n  });\n\n  const { data: regionalSales = [] } = useQuery({\n    queryKey: [\"/api/sales-metrics/by-region\"],\n  });\n\n  const { data: topProducts = [] } = useQuery({\n    queryKey: [\"/api/sales-metrics/top-products\"],\n  });\n\n  const { data: productionSchedule = [] } = useQuery({\n    queryKey: [\"/api/production-schedule\"],\n  });\n\n  const { data: demandForecast = [] } = useQuery({\n    queryKey: [\"/api/demand-forecast\"],\n  });\n\n  // Show welcome hints on first visit\n  const startDashboardTour = () => {\n    showHints(HINT_SEQUENCES.dashboard);\n  };\n\n  const skipDashboardTour = () => {\n    setShowWelcomeHints(false);\n    hideHints();\n  };\n\n  // Quick Action handlers\n  const handleAddProduct = async () => {\n    try {\n      const response = await fetch('/api/products', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(newProduct)\n      });\n      \n      if (response.ok) {\n        toast({\n          title: \"Product Added\",\n          description: `${newProduct.name} has been added successfully.`,\n        });\n        setAddProductOpen(false);\n        setNewProduct({ sku: '', name: '', description: '', category: '', basePrice: '', costPrice: '' });\n      } else {\n        throw new Error('Failed to add product');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add product. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleAddDistributor = async () => {\n    try {\n      const response = await fetch('/api/distributors', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(newDistributor)\n      });\n      \n      if (response.ok) {\n        toast({\n          title: \"Distributor Added\",\n          description: `${newDistributor.name} has been added successfully.`,\n        });\n        setAddDistributorOpen(false);\n        setNewDistributor({ name: '', contactPerson: '', email: '', phone: '', city: '', region: '' });\n      } else {\n        throw new Error('Failed to add distributor');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add distributor. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleScheduleProduction = async () => {\n    try {\n      const response = await fetch('/api/production-schedule', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(newProduction)\n      });\n      \n      if (response.ok) {\n        toast({\n          title: \"Production Scheduled\",\n          description: \"Production has been scheduled successfully.\",\n        });\n        setScheduleProductionOpen(false);\n        setNewProduction({ productId: '', quantity: '', scheduledDate: '', priority: 'medium' });\n      } else {\n        throw new Error('Failed to schedule production');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to schedule production. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleViewAnalytics = () => {\n    setLocation('/analytics');\n  };\n\n  // Format currency for display based on country\n  const formatCurrency = (value: string | number) => {\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    const locale = currentCountry === 'ZA' ? 'en-ZA' : \n                   currentCountry === 'EG' ? 'ar-EG' :\n                   currentCountry === 'TR' ? 'tr-TR' :\n                   currentCountry === 'DE' ? 'de-DE' :\n                   currentCountry === 'FR' ? 'fr-FR' :\n                   'en-US';\n    \n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(num);\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"py-4 sm:py-6 space-y-4 sm:space-y-6 max-w-7xl mx-auto\">\n        {/* Header - Mobile Responsive */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n          <div>\n            <h1 className=\"text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              ðŸ­ CornexConnect {t.dashboard}\n            </h1>\n            <p className=\"text-sm sm:text-base text-muted-foreground mt-1 sm:mt-2\">\n              Monitor your global manufacturing and distribution network\n            </p>\n          </div>\n          <div className=\"flex gap-2 self-start sm:self-auto\">\n            {showWelcomeHints && (\n              <Button \n                variant=\"outline\" \n                onClick={startDashboardTour}\n                className=\"bg-gradient-to-r from-emerald-50 to-blue-50 hover:from-emerald-100 hover:to-blue-100 text-xs sm:text-sm\"\n              >\n                <Lightbulb className=\"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Dashboard </span>Tour\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Key Metrics Cards - Mobile Responsive Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6\" data-hint=\"dashboard-metrics\">\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">{t.totalRevenue}</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-emerald-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-emerald-600\">\n                {(summary as any)?.revenue ? formatCurrency((summary as any).revenue) : 'R57.8M'}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                +12.5% from last month\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">{t.activeDistributors}</CardTitle>\n              <Users className=\"h-4 w-4 text-blue-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {(summary as any)?.distributors || (distributors as any[]).length}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Across 9 provinces\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">{t.productsInCatalog}</CardTitle>\n              <Package className=\"h-4 w-4 text-purple-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {(summary as any)?.products || '31+'}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                EPS & BR XPS ranges\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Hardware Stores</CardTitle>\n              <MapPin className=\"h-4 w-4 text-orange-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {(summary as any)?.hardwareStores ? (summary as any).hardwareStores.toLocaleString() : '2,684'}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Nationwide coverage\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Charts and Analytics - Mobile Responsive */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\n          {/* Regional Sales Performance */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\" data-hint=\"regional-chart\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <BarChart3 className=\"w-5 h-5 text-emerald-500\" />\nRegional Sales Performance\n              </CardTitle>\n              <CardDescription>\nRevenue breakdown by province\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {(regionalSales as any[]).slice(0, 5).map((region: any, index: number) => (\n                <div key={region.region} className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium\">{region.region}</span>\n                    <span className=\"text-sm text-muted-foreground\">\n                      {formatCurrency(region.revenue)}\n                    </span>\n                  </div>\n                  <Progress \n                    value={(region.revenue / ((regionalSales as any[])[0]?.revenue || 1)) * 100} \n                    className=\"h-2\"\n                  />\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n\n          {/* Top Products */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TrendingUp className=\"w-5 h-5 text-blue-500\" />\nTop Performing Products\n              </CardTitle>\n              <CardDescription>\n{t.bestSellingProducts}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {(topProducts as any[]).slice(0, 5).map((item: any, index: number) => (\n                <div key={item.product.id} className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <Badge variant=\"outline\" className=\"w-8 h-8 rounded-full p-0 flex items-center justify-center\">\n                      {index + 1}\n                    </Badge>\n                    <div>\n                      <p className=\"font-medium\">{item.product.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">{item.product.sku}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-medium\">{item.quantity} units</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {formatCurrency(item.revenue)}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Production and Demand Forecast - Mobile Responsive */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\n          {/* Production Schedule */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Factory className=\"w-5 h-5 text-purple-500\" />\n                Production Schedule\n              </CardTitle>\n              <CardDescription>\n                Upcoming manufacturing plans\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {(productionSchedule as any[]).slice(0, 4).map((schedule: any) => (\n                <div key={schedule.id} className=\"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-white/5\">\n                  <div>\n                    <p className=\"font-medium\">{schedule.productName}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {new Date(schedule.scheduledDate).toLocaleDateString()}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-medium\">{schedule.plannedQuantity} units</p>\n                    <Badge \n                      variant={schedule.status === 'scheduled' ? 'secondary' : 'default'}\n                      className=\"text-xs\"\n                    >\n                      {schedule.status}\n                    </Badge>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n\n          {/* AI Demand Forecast */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TrendingUp className=\"w-5 h-5 text-emerald-500\" />\n                AI Demand Forecast\n              </CardTitle>\n              <CardDescription>\n                Predicted demand for next 30 days\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {(demandForecast as any[]).slice(0, 4).map((forecast: any) => (\n                <div key={forecast.id} className=\"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-white/5\">\n                  <div>\n                    <p className=\"font-medium\">{forecast.productName}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Confidence: {Math.round(forecast.confidence * 100)}%\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-medium\">{forecast.predictedDemand} units</p>\n                    <div className=\"flex items-center gap-1\">\n                      <TrendingUp className=\"w-3 h-3 text-green-500\" />\n                      <span className=\"text-xs text-green-600\">\n                        +{Math.round((forecast.predictedDemand / 1000) * 15)}%\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Quick Actions */}\n        <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n          <CardHeader>\n            <CardTitle>Quick Actions</CardTitle>\n            <CardDescription>\n              Common tasks and shortcuts\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\">\n              {/* Add Product Modal */}\n              <Dialog open={addProductOpen} onOpenChange={setAddProductOpen}>\n                <DialogTrigger asChild>\n                  <Button variant=\"outline\" className=\"h-16 sm:h-20 flex flex-col gap-1 sm:gap-2 hover:bg-emerald-50 hover:border-emerald-200 transition-colors\">\n                    <Package className=\"w-4 h-4 sm:w-6 sm:h-6 text-emerald-600\" />\n                    <span className=\"text-xs sm:text-sm font-medium\">Add Product</span>\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"sm:max-w-[425px]\">\n                  <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2\">\n                      <Plus className=\"w-5 h-5 text-emerald-600\" />\n                      Add New Product\n                    </DialogTitle>\n                    <DialogDescription>\n                      Create a new product in your catalog. Fill in the details below.\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"sku\" className=\"text-right\">SKU</Label>\n                      <Input \n                        id=\"sku\" \n                        value={newProduct.sku}\n                        onChange={(e) => setNewProduct({...newProduct, sku: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"e.g., EPS01\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"name\" className=\"text-right\">Name</Label>\n                      <Input \n                        id=\"name\" \n                        value={newProduct.name}\n                        onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"Product name\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"category\" className=\"text-right\">Category</Label>\n                      <Select value={newProduct.category} onValueChange={(value) => setNewProduct({...newProduct, category: value})}>\n                        <SelectTrigger className=\"col-span-3\">\n                          <SelectValue placeholder=\"Select category\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"EPS\">EPS Cornice</SelectItem>\n                          <SelectItem value=\"BR\">BR XPS Cornice</SelectItem>\n                          <SelectItem value=\"LED\">LED Lighting</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"basePrice\" className=\"text-right\">Base Price</Label>\n                      <Input \n                        id=\"basePrice\" \n                        type=\"number\"\n                        value={newProduct.basePrice}\n                        onChange={(e) => setNewProduct({...newProduct, basePrice: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"0.00\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"costPrice\" className=\"text-right\">Cost Price</Label>\n                      <Input \n                        id=\"costPrice\" \n                        type=\"number\"\n                        value={newProduct.costPrice}\n                        onChange={(e) => setNewProduct({...newProduct, costPrice: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"0.00\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"description\" className=\"text-right\">Description</Label>\n                      <Textarea \n                        id=\"description\" \n                        value={newProduct.description}\n                        onChange={(e) => setNewProduct({...newProduct, description: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"Product description\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end gap-2\">\n                    <Button variant=\"outline\" onClick={() => setAddProductOpen(false)}>Cancel</Button>\n                    <Button onClick={handleAddProduct} className=\"bg-emerald-600 hover:bg-emerald-700\">Add Product</Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              {/* Add Distributor Modal */}\n              <Dialog open={addDistributorOpen} onOpenChange={setAddDistributorOpen}>\n                <DialogTrigger asChild>\n                  <Button variant=\"outline\" className=\"h-20 flex flex-col gap-2 hover:bg-blue-50 hover:border-blue-200 transition-colors\">\n                    <Users className=\"w-6 h-6 text-blue-600\" />\n                    <span className=\"text-sm font-medium\">New Distributor</span>\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"sm:max-w-[425px]\">\n                  <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2\">\n                      <Users className=\"w-5 h-5 text-blue-600\" />\n                      Add New Distributor\n                    </DialogTitle>\n                    <DialogDescription>\n                      Register a new distributor partner. Complete the information below.\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"dist-name\" className=\"text-right\">Company</Label>\n                      <Input \n                        id=\"dist-name\" \n                        value={newDistributor.name}\n                        onChange={(e) => setNewDistributor({...newDistributor, name: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"Company name\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"contact-person\" className=\"text-right\">Contact</Label>\n                      <Input \n                        id=\"contact-person\" \n                        value={newDistributor.contactPerson}\n                        onChange={(e) => setNewDistributor({...newDistributor, contactPerson: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"Contact person\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"email\" className=\"text-right\">Email</Label>\n                      <Input \n                        id=\"email\" \n                        type=\"email\"\n                        value={newDistributor.email}\n                        onChange={(e) => setNewDistributor({...newDistributor, email: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"contact@company.com\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"phone\" className=\"text-right\">Phone</Label>\n                      <Input \n                        id=\"phone\" \n                        value={newDistributor.phone}\n                        onChange={(e) => setNewDistributor({...newDistributor, phone: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"+27 11 555 0000\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"city\" className=\"text-right\">City</Label>\n                      <Input \n                        id=\"city\" \n                        value={newDistributor.city}\n                        onChange={(e) => setNewDistributor({...newDistributor, city: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"City\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"region\" className=\"text-right\">Region</Label>\n                      <Select value={newDistributor.region} onValueChange={(value) => setNewDistributor({...newDistributor, region: value})}>\n                        <SelectTrigger className=\"col-span-3\">\n                          <SelectValue placeholder=\"Select region\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"Gauteng\">Gauteng</SelectItem>\n                          <SelectItem value=\"Western Cape\">Western Cape</SelectItem>\n                          <SelectItem value=\"KwaZulu-Natal\">KwaZulu-Natal</SelectItem>\n                          <SelectItem value=\"Eastern Cape\">Eastern Cape</SelectItem>\n                          <SelectItem value=\"North West\">North West</SelectItem>\n                          <SelectItem value=\"Limpopo\">Limpopo</SelectItem>\n                          <SelectItem value=\"Mpumalanga\">Mpumalanga</SelectItem>\n                          <SelectItem value=\"Free State\">Free State</SelectItem>\n                          <SelectItem value=\"Northern Cape\">Northern Cape</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end gap-2\">\n                    <Button variant=\"outline\" onClick={() => setAddDistributorOpen(false)}>Cancel</Button>\n                    <Button onClick={handleAddDistributor} className=\"bg-blue-600 hover:bg-blue-700\">Add Distributor</Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              {/* Schedule Production Modal */}\n              <Dialog open={scheduleProductionOpen} onOpenChange={setScheduleProductionOpen}>\n                <DialogTrigger asChild>\n                  <Button variant=\"outline\" className=\"h-20 flex flex-col gap-2 hover:bg-purple-50 hover:border-purple-200 transition-colors\">\n                    <Factory className=\"w-6 h-6 text-purple-600\" />\n                    <span className=\"text-sm font-medium\">Schedule Production</span>\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"sm:max-w-[425px]\">\n                  <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2\">\n                      <Calendar className=\"w-5 h-5 text-purple-600\" />\n                      Schedule Production\n                    </DialogTitle>\n                    <DialogDescription>\n                      Create a new production schedule entry for manufacturing.\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"product-select\" className=\"text-right\">Product</Label>\n                      <Select value={newProduction.productId} onValueChange={(value) => setNewProduction({...newProduction, productId: value})}>\n                        <SelectTrigger className=\"col-span-3\">\n                          <SelectValue placeholder=\"Select product\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"eps01\">EPS01 - Premium Cornice</SelectItem>\n                          <SelectItem value=\"eps02\">EPS02 - Standard Cornice</SelectItem>\n                          <SelectItem value=\"br01\">BR01 - XPS Premium</SelectItem>\n                          <SelectItem value=\"br02\">BR02 - XPS Standard</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"quantity\" className=\"text-right\">Quantity</Label>\n                      <Input \n                        id=\"quantity\" \n                        type=\"number\"\n                        value={newProduction.quantity}\n                        onChange={(e) => setNewProduction({...newProduction, quantity: e.target.value})}\n                        className=\"col-span-3\" \n                        placeholder=\"1000\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"scheduled-date\" className=\"text-right\">Date</Label>\n                      <Input \n                        id=\"scheduled-date\" \n                        type=\"date\"\n                        value={newProduction.scheduledDate}\n                        onChange={(e) => setNewProduction({...newProduction, scheduledDate: e.target.value})}\n                        className=\"col-span-3\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\n                      <Label htmlFor=\"priority\" className=\"text-right\">Priority</Label>\n                      <Select value={newProduction.priority} onValueChange={(value) => setNewProduction({...newProduction, priority: value})}>\n                        <SelectTrigger className=\"col-span-3\">\n                          <SelectValue placeholder=\"Select priority\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"low\">Low</SelectItem>\n                          <SelectItem value=\"medium\">Medium</SelectItem>\n                          <SelectItem value=\"high\">High</SelectItem>\n                          <SelectItem value=\"urgent\">Urgent</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end gap-2\">\n                    <Button variant=\"outline\" onClick={() => setScheduleProductionOpen(false)}>Cancel</Button>\n                    <Button onClick={handleScheduleProduction} className=\"bg-purple-600 hover:bg-purple-700\">Schedule Production</Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              {/* View Analytics Button */}\n              <Button \n                variant=\"outline\" \n                className=\"h-20 flex flex-col gap-2 hover:bg-orange-50 hover:border-orange-200 transition-colors\"\n                onClick={handleViewAnalytics}\n              >\n                <BarChart3 className=\"w-6 h-6 text-orange-600\" />\n                <span className=\"text-sm font-medium\">View Analytics</span>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Transition Hints Component */}\n        <AnimatePresence>\n          {hintsVisible && (\n            <TransitionHints\n              steps={activeHints}\n              isVisible={hintsVisible}\n              onComplete={completeHints}\n              onSkip={skipDashboardTour}\n              currentStep={currentStep}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":33415},"client/src/pages/GlobalDistributors.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Users, Globe, Plus, Search, MapPin, DollarSign, Mail, Phone } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport DistributorPortal from \"@/components/DistributorPortal\";\nimport CurrencyConverter from \"@/components/CurrencyConverter\";\nimport { formatCurrency, getCurrencyFlag } from \"@/lib/currency\";\nimport { CORNEX_BRANDS, CURRENCIES } from \"@/lib/constants\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function GlobalDistributors() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [regionFilter, setRegionFilter] = useState(\"all\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { t } = useTranslation();\n\n  const { data: distributors, isLoading } = useQuery({\n    queryKey: [\"/api/distributors\", regionFilter],\n  });\n\n  const { data: orders } = useQuery({\n    queryKey: [\"/api/orders\"],\n  });\n\n  const { data: regionalMetrics } = useQuery({\n    queryKey: [\"/api/sales-metrics/by-region\"],\n  });\n\n  const createDistributorMutation = useMutation({\n    mutationFn: async (distributorData: any) => {\n      return await apiRequest(\"POST\", \"/api/distributors\", distributorData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/distributors\"] });\n      toast({\n        title: \"Distributor Added\",\n        description: \"New distributor has been added successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add distributor.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return \"bg-green-100 text-green-800\";\n      case \"inactive\":\n        return \"bg-red-100 text-red-800\";\n      case \"pending\":\n        return \"bg-yellow-100 text-yellow-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getTierColor = (tier: string) => {\n    switch (tier) {\n      case \"premium\":\n        return \"bg-purple-100 text-purple-800\";\n      case \"standard\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"basic\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const filteredDistributors = distributors?.filter((distributor: any) => {\n    const matchesSearch = !searchTerm || \n      distributor.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      distributor.contactPerson.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      distributor.city.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesRegion = regionFilter === \"all\" || distributor.region === regionFilter;\n    const matchesStatus = statusFilter === \"all\" || distributor.status === statusFilter;\n    \n    return matchesSearch && matchesRegion && matchesStatus;\n  }) || [];\n\n  const regions = [\n    \"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Eastern Cape\", \n    \"Limpopo\", \"Mpumalanga\", \"North West\", \"Free State\", \"Northern Cape\"\n  ];\n\n  return (\n    <div className=\"space-y-8 p-8\">\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-8 py-6 -mx-8 -mt-8 mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Global Distributors Portal</h2>\n            <p className=\"text-gray-600 mt-1\">Multi-currency distributor management with regional pricing</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\">\n              <Globe className=\"w-4 h-4 mr-2\" />\n              Regional Analytics\n            </Button>\n            <Dialog>\n              <DialogTrigger asChild>\n                <Button className=\"bg-cornex-blue hover:bg-cornex-dark\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Add Distributor\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-2xl\">\n                <DialogHeader>\n                  <DialogTitle>Add New Distributor</DialogTitle>\n                </DialogHeader>\n                <DistributorForm \n                  onSubmit={(data) => createDistributorMutation.mutate(data)}\n                  isLoading={createDistributorMutation.isPending}\n                />\n              </DialogContent>\n            </Dialog>\n          </div>\n        </div>\n      </div>\n\n      {/* Distributor Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Total Distributors</CardTitle>\n              <Users className=\"w-5 h-5 text-blue-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {distributors?.length || 0}\n            </div>\n            <p className=\"text-sm text-blue-600 mt-1\">Across 16 countries</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Active Partners</CardTitle>\n              <Globe className=\"w-5 h-5 text-green-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {distributors?.filter((d: any) => d.status === \"active\").length || 0}\n            </div>\n            <p className=\"text-sm text-green-600 mt-1\">+12% this month</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Total Revenue</CardTitle>\n              <DollarSign className=\"w-5 h-5 text-purple-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">R 12.8M</div>\n            <p className=\"text-sm text-green-600 mt-1\">+23.5% growth</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Premium Partners</CardTitle>\n              <Users className=\"w-5 h-5 text-yellow-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {distributors?.filter((d: any) => d.tier === \"premium\").length || 0}\n            </div>\n            <p className=\"text-sm text-purple-600 mt-1\">Elite distributors</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Search */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Distributor Management</CardTitle>\n            <CurrencyConverter />\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n              <Input\n                placeholder=\"Search distributors...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            \n            <Select value={regionFilter} onValueChange={setRegionFilter}>\n              <SelectTrigger className=\"w-48\">\n                <SelectValue placeholder=\"All Regions\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Regions</SelectItem>\n                {regions.map((region) => (\n                  <SelectItem key={region} value={region}>{region}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            \n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-48\">\n                <SelectValue placeholder=\"All Status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Status</SelectItem>\n                <SelectItem value=\"active\">Active</SelectItem>\n                <SelectItem value=\"inactive\">Inactive</SelectItem>\n                <SelectItem value=\"pending\">Pending</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Distributors Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredDistributors.map((distributor: any) => (\n              <Card key={distributor.id} className=\"dashboard-card\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">{distributor.name}</h3>\n                      <p className=\"text-sm text-gray-600\">{distributor.contactPerson}</p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Badge className={getStatusColor(distributor.status)}>\n                        {distributor.status}\n                      </Badge>\n                      <Badge className={getTierColor(distributor.tier)}>\n                        {distributor.tier}\n                      </Badge>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"flex items-center space-x-2 text-sm\">\n                    <MapPin className=\"w-4 h-4 text-gray-400\" />\n                    <span>{distributor.city}, {distributor.region}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 text-sm\">\n                    <Globe className=\"w-4 h-4 text-gray-400\" />\n                    <span>{getCurrencyFlag(distributor.currency)} {distributor.country}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 text-sm\">\n                    <Mail className=\"w-4 h-4 text-gray-400\" />\n                    <span className=\"truncate\">{distributor.email}</span>\n                  </div>\n                  \n                  {distributor.phone && (\n                    <div className=\"flex items-center space-x-2 text-sm\">\n                      <Phone className=\"w-4 h-4 text-gray-400\" />\n                      <span>{distributor.phone}</span>\n                    </div>\n                  )}\n\n                  {/* Brands */}\n                  {distributor.brands && distributor.brands.length > 0 && (\n                    <div className=\"pt-2 border-t\">\n                      <p className=\"text-xs text-gray-500 mb-2\">Authorized Brands:</p>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {distributor.brands.map((brandName: string) => {\n                          const brand = CORNEX_BRANDS.find(b => b.name === brandName);\n                          return brand ? (\n                            <Badge key={brandName} variant=\"outline\" className=\"text-xs\">\n                              {brand.icon} {brand.displayName}\n                            </Badge>\n                          ) : null;\n                        })}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Credit Information */}\n                  <div className=\"pt-2 border-t space-y-1\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-500\">Credit Limit:</span>\n                      <span className=\"font-medium\">\n                        {formatCurrency(parseFloat(distributor.creditLimit || \"0\"), distributor.currency)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-500\">Payment Terms:</span>\n                      <span className=\"font-medium\">{distributor.paymentTerms || \"COD\"}</span>\n                    </div>\n                    {distributor.commissionRate && (\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-500\">Commission:</span>\n                        <span className=\"font-medium\">{parseFloat(distributor.commissionRate).toFixed(1)}%</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Action Buttons */}\n                  <div className=\"flex space-x-2 pt-3\">\n                    <Button size=\"sm\" variant=\"outline\" className=\"flex-1\">\n                      View Portal\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" className=\"flex-1\">\n                      Edit\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {filteredDistributors.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              <Users className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n              <p>No distributors found matching your criteria</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Regional Performance */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Regional Performance</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {regionalMetrics?.slice(0, 9).map((metric: any) => (\n              <div key={metric.region} className=\"p-4 bg-gray-50 rounded-lg\">\n                <h4 className=\"font-medium text-gray-900\">{metric.region}</h4>\n                <div className=\"mt-2 space-y-1\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-500\">Revenue:</span>\n                    <span className=\"font-medium\">{formatCurrency(parseFloat(metric.revenue), \"ZAR\")}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-500\">Units:</span>\n                    <span className=\"font-medium\">{metric.units.toLocaleString()}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-500\">Distributors:</span>\n                    <span className=\"font-medium\">\n                      {distributors?.filter((d: any) => d.region === metric.region).length || 0}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Distributor Portal Component */}\n      <DistributorPortal distributors={filteredDistributors} />\n    </div>\n  );\n}\n\nfunction DistributorForm({ \n  onSubmit, \n  isLoading \n}: { \n  onSubmit: (data: any) => void; \n  isLoading: boolean; \n}) {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    contactPerson: \"\",\n    email: \"\",\n    phone: \"\",\n    address: \"\",\n    city: \"\",\n    region: \"\",\n    country: \"South Africa\",\n    currency: \"ZAR\",\n    tier: \"standard\",\n    creditLimit: \"0\",\n    paymentTerms: \"COD\",\n    brands: [] as string[]\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({\n      ...formData,\n      creditLimit: parseFloat(formData.creditLimit)\n    });\n  };\n\n  const handleBrandToggle = (brandName: string) => {\n    setFormData(prev => ({\n      ...prev,\n      brands: prev.brands.includes(brandName)\n        ? prev.brands.filter(b => b !== brandName)\n        : [...prev.brands, brandName]\n    }));\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 max-h-96 overflow-y-auto\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <Label htmlFor=\"name\">Company Name</Label>\n          <Input\n            value={formData.name}\n            onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n            required\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"contactPerson\">Contact Person</Label>\n          <Input\n            value={formData.contactPerson}\n            onChange={(e) => setFormData(prev => ({ ...prev, contactPerson: e.target.value }))}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <Label htmlFor=\"email\">Email</Label>\n          <Input\n            type=\"email\"\n            value={formData.email}\n            onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n            required\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"phone\">Phone</Label>\n          <Input\n            value={formData.phone}\n            onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\n          />\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor=\"address\">Address</Label>\n        <Textarea\n          value={formData.address}\n          onChange={(e) => setFormData(prev => ({ ...prev, address: e.target.value }))}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-4\">\n        <div>\n          <Label htmlFor=\"city\">City</Label>\n          <Input\n            value={formData.city}\n            onChange={(e) => setFormData(prev => ({ ...prev, city: e.target.value }))}\n            required\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"region\">Region</Label>\n          <Select value={formData.region} onValueChange={(value) => setFormData(prev => ({ ...prev, region: value }))}>\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select region\" />\n            </SelectTrigger>\n            <SelectContent>\n              {[\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Eastern Cape\", \"Limpopo\", \"Mpumalanga\", \"North West\", \"Free State\", \"Northern Cape\"].map((region) => (\n                <SelectItem key={region} value={region}>{region}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor=\"currency\">Currency</Label>\n          <Select value={formData.currency} onValueChange={(value) => setFormData(prev => ({ ...prev, currency: value }))}>\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {CURRENCIES.map((currency) => (\n                <SelectItem key={currency.currency} value={currency.currency}>\n                  {currency.flag} {currency.currency}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <Label htmlFor=\"tier\">Tier</Label>\n          <Select value={formData.tier} onValueChange={(value) => setFormData(prev => ({ ...prev, tier: value }))}>\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"basic\">Basic</SelectItem>\n              <SelectItem value=\"standard\">Standard</SelectItem>\n              <SelectItem value=\"premium\">Premium</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor=\"creditLimit\">Credit Limit</Label>\n          <Input\n            type=\"number\"\n            value={formData.creditLimit}\n            onChange={(e) => setFormData(prev => ({ ...prev, creditLimit: e.target.value }))}\n          />\n        </div>\n      </div>\n\n      <div>\n        <Label>Authorized Brands</Label>\n        <div className=\"flex flex-wrap gap-2 mt-2\">\n          {CORNEX_BRANDS.map((brand) => (\n            <Button\n              key={brand.id}\n              type=\"button\"\n              variant={formData.brands.includes(brand.name) ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => handleBrandToggle(brand.name)}\n            >\n              {brand.icon} {brand.displayName}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\n        {isLoading ? \"Adding...\" : \"Add Distributor\"}\n      </Button>\n    </form>\n  );\n}\n","size_bytes":21648},"client/src/pages/InventoryAI.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Brain, Package, TrendingUp, AlertTriangle, Zap, Target } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport InventoryOptimizer from \"@/components/InventoryOptimizer\";\nimport AIInsightsPanel from \"@/components/AIInsightsPanel\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { STOCK_STATUS_COLORS } from \"@/lib/constants\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function InventoryAI() {\n  const [selectedTimeframe, setSelectedTimeframe] = useState(\"30d\");\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const handleOptimizeAll = () => {\n    toast({\n      title: \"Optimizing Inventory\",\n      description: \"Running AI optimization across all inventory items...\",\n    });\n  };\n\n  const handleViewInsights = () => {\n    toast({\n      title: \"AI Insights\",\n      description: \"Loading detailed AI analytics...\",\n    });\n  };\n\n  const { data: inventory = [], isLoading } = useQuery({\n    queryKey: [\"/api/inventory\"],\n  });\n\n  const { data: demandForecast } = useQuery({\n    queryKey: [\"/api/demand-forecast\"],\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n  });\n\n  // Calculate inventory metrics\n  const inventoryMetrics = Array.isArray(inventory) && inventory.length > 0 ? {\n    totalValue: inventory.reduce((sum: number, item: any) => \n      sum + (item.inventory?.currentStock || item.currentStock || 0) * parseFloat((item.products || item.product)?.basePrice || 0), 0\n    ),\n    lowStockItems: inventory.filter((item: any) => \n      (item.inventory?.currentStock || item.currentStock || 0) <= (item.inventory?.reorderPoint || item.reorderPoint || 0)\n    ).length,\n    outOfStockItems: inventory.filter((item: any) => \n      (item.inventory?.currentStock || item.currentStock || 0) === 0\n    ).length,\n    optimalStockItems: inventory.filter((item: any) => {\n      const stock = item.inventory?.currentStock || item.currentStock || 0;\n      const reorderPoint = item.inventory?.reorderPoint || item.reorderPoint || 0;\n      const maxStock = item.inventory?.maxStock || item.maxStock || 10000;\n      return stock > reorderPoint && stock < maxStock * 0.8;\n    }).length\n  } : null;\n\n  const getOptimizationScore = () => {\n    if (!Array.isArray(inventory) || inventory.length === 0) return 0;\n    const totalItems = inventory.length;\n    const optimalItems = inventoryMetrics?.optimalStockItems || 0;\n    return Math.round((optimalItems / totalItems) * 100);\n  };\n\n  const optimizationScore = getOptimizationScore();\n\n  return (\n    <div className=\"space-y-8 p-8\">\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-8 py-6 -mx-8 -mt-8 mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">ðŸŽ Fruitful Assist AI-Powered Inventory Optimization</h2>\n            <p className=\"text-gray-600 mt-1\">Predictive analytics and intelligent inventory management</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\" onClick={handleOptimizeAll}>\n              <Zap className=\"w-4 h-4 mr-2\" />\n              Auto-Optimize\n            </Button>\n            <Button variant=\"outline\" onClick={handleViewInsights}>\n              <Target className=\"w-4 h-4 mr-2\" />\n              Set Targets\n            </Button>\n            <Button className=\"bg-cornex-blue hover:bg-cornex-dark\" onClick={handleViewInsights}>\n              <Brain className=\"w-4 h-4 mr-2\" />\n              ðŸŽ Fruitful Assist AI\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* AI Optimization Score */}\n      <Card className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-2\">AI Optimization Score</h3>\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"text-4xl font-bold\">{optimizationScore}%</div>\n                <div className=\"flex-1\">\n                  <Progress \n                    value={optimizationScore} \n                    className=\"w-full h-3\"\n                  />\n                  <p className=\"text-sm mt-1 opacity-90\">\n                    {optimizationScore >= 80 ? \"Excellent optimization\" :\n                     optimizationScore >= 60 ? \"Good optimization\" :\n                     optimizationScore >= 40 ? \"Needs improvement\" : \"Critical optimization required\"}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-2xl font-bold\">R {inventoryMetrics ? (inventoryMetrics.totalValue / 1000000).toFixed(1) : '0'}M</div>\n              <p className=\"text-sm opacity-90\">Total Inventory Value</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Inventory Health Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Optimal Stock</CardTitle>\n              <Package className=\"w-5 h-5 text-green-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {inventoryMetrics?.optimalStockItems || 0}\n            </div>\n            <p className=\"text-sm text-green-600 mt-1\">\n              {Array.isArray(inventory) && inventory.length > 0 ? Math.round(((inventoryMetrics?.optimalStockItems || 0) / inventory.length) * 100) : 0}% of inventory\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Low Stock Alert</CardTitle>\n              <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {inventoryMetrics?.lowStockItems || 0}\n            </div>\n            <p className=\"text-sm text-yellow-600 mt-1\">Requires reordering</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">Out of Stock</CardTitle>\n              <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {inventoryMetrics?.outOfStockItems || 0}\n            </div>\n            <p className=\"text-sm text-red-600 mt-1\">Immediate action needed</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"dashboard-card\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-sm font-medium text-gray-600\">AI Savings</CardTitle>\n              <TrendingUp className=\"w-5 h-5 text-blue-600\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-900\">R 2.4M</div>\n            <p className=\"text-sm text-green-600 mt-1\">+18% this quarter</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Main Content Tabs */}\n      <Tabs defaultValue=\"optimizer\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"optimizer\">AI Optimizer</TabsTrigger>\n          <TabsTrigger value=\"forecast\">Demand Forecast</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Advanced Analytics</TabsTrigger>\n          <TabsTrigger value=\"alerts\">Smart Alerts</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"optimizer\">\n          <InventoryOptimizer inventory={inventory} products={products} />\n        </TabsContent>\n\n        <TabsContent value=\"forecast\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>30-Day Demand Forecast</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <TrendingUp className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>AI Demand Forecasting Chart</p>\n                    <p className=\"text-sm\">Analyzing historical patterns and market trends</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Forecast Accuracy</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {['EPS Premium', 'BR XPS Budget', 'LED Ready'].map((category, index) => (\n                    <div key={category} className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span>{category}</span>\n                        <span className=\"font-medium\">{95 - index * 2}%</span>\n                      </div>\n                      <Progress value={95 - index * 2} className=\"h-2\" />\n                    </div>\n                  ))}\n                  <div className=\"mt-4 p-3 bg-green-50 rounded-lg\">\n                    <p className=\"text-sm text-green-800\">\n                      <strong>Average Accuracy: 93.7%</strong><br />\n                      AI models have improved forecast accuracy by 28% over traditional methods.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"analytics\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Inventory Turn Analysis</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                  <div className=\"text-center\">\n                    <Package className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                    <p>Inventory Turnover Analytics</p>\n                    <p className=\"text-sm\">Product velocity and optimization insights</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Top Movers</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {[\n                    { sku: \"EPS04\", name: \"SANTE EPS\", velocity: \"High\", trend: \"up\" },\n                    { sku: \"BR9\", name: \"BR9 XPS\", velocity: \"High\", trend: \"up\" },\n                    { sku: \"LED001\", name: \"LED CORNICE\", velocity: \"Medium\", trend: \"stable\" }\n                  ].map((item) => (\n                    <div key={item.sku} className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"font-medium text-sm\">{item.sku}</p>\n                        <p className=\"text-xs text-gray-500\">{item.name}</p>\n                      </div>\n                      <Badge variant={item.velocity === \"High\" ? \"default\" : \"secondary\"}>\n                        {item.velocity}\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"alerts\">\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Smart Inventory Alerts</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {[\n                    {\n                      type: \"critical\",\n                      title: \"EPS07 - Critical Stock Level\",\n                      description: \"Only 45 units remaining. High demand predicted for next week.\",\n                      action: \"Reorder 2,000 units immediately\",\n                      priority: \"High\"\n                    },\n                    {\n                      type: \"warning\",\n                      title: \"BR9 - Approaching Reorder Point\",\n                      description: \"Current stock: 156 units. Reorder point: 100 units.\",\n                      action: \"Schedule reorder for next week\",\n                      priority: \"Medium\"\n                    },\n                    {\n                      type: \"info\",\n                      title: \"LED001 - Excess Inventory Detected\",\n                      description: \"Stock level 40% above optimal. Consider promotional pricing.\",\n                      action: \"Review pricing strategy\",\n                      priority: \"Low\"\n                    }\n                  ].map((alert, index) => (\n                    <div key={index} className={`p-4 rounded-lg border-l-4 ${\n                      alert.type === \"critical\" ? \"border-red-500 bg-red-50\" :\n                      alert.type === \"warning\" ? \"border-yellow-500 bg-yellow-50\" :\n                      \"border-blue-500 bg-blue-50\"\n                    }`}>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-gray-900\">{alert.title}</h4>\n                          <p className=\"text-sm text-gray-600 mt-1\">{alert.description}</p>\n                          <p className=\"text-sm font-medium mt-2 text-gray-800\">\n                            Recommended Action: {alert.action}\n                          </p>\n                        </div>\n                        <Badge variant={\n                          alert.priority === \"High\" ? \"destructive\" :\n                          alert.priority === \"Medium\" ? \"default\" : \"secondary\"\n                        }>\n                          {alert.priority}\n                        </Badge>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* AI Insights Panel */}\n      <AIInsightsPanel />\n    </div>\n  );\n}\n","size_bytes":15313},"client/src/pages/ProductCatalog.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Plus, Package } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport ProductTable from \"@/components/ProductTable\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function ProductCatalog() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  \n  const { data: products = [] } = useQuery({\n    queryKey: [\"/api/products\"],\n  });\n\n  const handleImportProducts = () => {\n    setLocation(\"/excel-upload\");\n    toast({\n      title: \"Redirecting to Import\",\n      description: \"Opening product import interface...\",\n    });\n  };\n\n  const handleAddProduct = () => {\n    toast({\n      title: \"Add Product\",\n      description: \"Product creation form will open here\",\n    });\n  };\n\n  const productCategories = [\n    {\n      name: \"EPS Premium Range\",\n      count: Array.isArray(products) ? products.filter((p: any) => p.category === \"EPS Premium Range\").length : 0,\n      description: \"Standard density polystyrene cornices for cost-effective installations\",\n      sizeRange: \"55mm - 175mm\",\n      priceRange: \"R 8.63 - R 18.58\",\n      color: \"blue\"\n    },\n    {\n      name: \"BR XPS Budget Range\", \n      count: Array.isArray(products) ? products.filter((p: any) => p.category === \"BR XPS Budget Range\").length : 0,\n      description: \"High-density XPS cornices for professional installations\",\n      sizeRange: \"55mm - 170mm\", \n      priceRange: \"R 6.90 - R 21.50\",\n      color: \"green\"\n    },\n    {\n      name: \"LED Ready Series\",\n      count: Array.isArray(products) ? products.filter((p: any) => p.category === \"LED Ready Series\").length : 0,\n      description: \"Specialized cornices with integrated LED lighting channels\",\n      sizeRange: \"40mm - 145mm\",\n      priceRange: \"R 15.90 - R 32.75\", \n      color: \"purple\"\n    }\n  ];\n\n  return (\n    <div className=\"space-y-8 p-8\">\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-8 py-6 -mx-8 -mt-8 mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Cornexâ„¢ Product Catalog</h2>\n            <p className=\"text-gray-600 mt-1\">Complete EPS and BR XPS product range with real-time inventory</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\" onClick={handleImportProducts}>\n              <Package className=\"w-4 h-4 mr-2\" />\n              Import Products\n            </Button>\n            <Button className=\"bg-cornex-blue hover:bg-cornex-dark\" onClick={handleAddProduct}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Product\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Product Categories Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        {productCategories.map((category) => (\n          <Card key={category.name} className=\"dashboard-card\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"text-lg\">{category.name}</CardTitle>\n                <Badge variant=\"secondary\" className={\n                  category.color === \"blue\" ? \"bg-blue-100 text-blue-800\" :\n                  category.color === \"green\" ? \"bg-green-100 text-green-800\" :\n                  \"bg-purple-100 text-purple-800\"\n                }>\n                  {category.count} Products\n                </Badge>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-gray-600 mb-4 text-sm\">{category.description}</p>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Size Range:</span>\n                  <span className=\"font-medium\">{category.sizeRange}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-500\">Price Range:</span>\n                  <span className=\"font-medium\">{category.priceRange}</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Product Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Product Inventory</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ProductTable />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4779},"client/src/pages/ProductionPlanning.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Calendar, Clock, TrendingUp, AlertCircle, Play, Pause, BarChart3, Settings } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport ProductionScheduleCalendar from \"@/components/ProductionScheduleCalendar\";\nimport { PRODUCTION_LINES } from \"@/lib/constants\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function ProductionPlanning() {\n  const [selectedLine, setSelectedLine] = useState(\"all\");\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { t } = useTranslation();\n\n  const { data: schedule, isLoading } = useQuery({\n    queryKey: [\"/api/production-schedule\"],\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n  });\n\n  const createScheduleMutation = useMutation({\n    mutationFn: async (scheduleData: any) => {\n      return await apiRequest(\"POST\", \"/api/production-schedule\", scheduleData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/production-schedule\"] });\n      toast({\n        title: \"Production Scheduled\",\n        description: \"New production schedule has been created successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create production schedule.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateScheduleMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      return await apiRequest(\"PUT\", `/api/production-schedule/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/production-schedule\"] });\n      toast({\n        title: \"Schedule Updated\",\n        description: \"Production schedule has been updated successfully.\",\n      });\n    },\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"bg-green-100 text-green-800\";\n      case \"in_progress\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"scheduled\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"cancelled\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\":\n        return \"bg-red-100 text-red-800\";\n      case \"normal\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"low\":\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-blue-100 text-blue-800\";\n    }\n  };\n\n  const filteredSchedule = schedule?.filter((item: any) => \n    selectedLine === \"all\" || item.productionLine === selectedLine\n  ) || [];\n\n  return (\n    <div className=\"space-y-8 p-8\">\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200 px-8 py-6 -mx-8 -mt-8 mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">{t.productionPlanning}</h2>\n            <p className=\"text-gray-600 mt-1\">AI-powered production optimization and automated scheduling</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\">\n              <BarChart3 className=\"w-4 h-4 mr-2\" />\n              {t.analytics || \"Analytics\"}\n            </Button>\n            <Button variant=\"outline\">\n              <Settings className=\"w-4 h-4 mr-2\" />\n              {t.optimize || \"Optimize\"}\n            </Button>\n            <Dialog>\n              <DialogTrigger asChild>\n                <Button className=\"bg-cornex-blue hover:bg-cornex-dark\">\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  {t.productionSchedule}\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-md\">\n                <DialogHeader>\n                  <DialogTitle>{t.productionSchedule}</DialogTitle>\n                </DialogHeader>\n                <ScheduleForm \n                  products={products || []}\n                  onSubmit={(data) => createScheduleMutation.mutate(data)}\n                  isLoading={createScheduleMutation.isPending}\n                />\n              </DialogContent>\n            </Dialog>\n          </div>\n        </div>\n      </div>\n\n      {/* Production Line Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {PRODUCTION_LINES.map((line) => {\n          const lineSchedule = schedule?.filter((s: any) => \n            s.productionLine === line.name && s.status === \"in_progress\"\n          ) || [];\n          const currentProduction = lineSchedule.length > 0;\n          \n          return (\n            <Card key={line.id} className=\"dashboard-card\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm font-medium\">{line.name}</CardTitle>\n                  <div className={`w-3 h-3 rounded-full ${\n                    currentProduction ? \"bg-green-500 animate-pulse\" : \"bg-gray-300\"\n                  }`}></div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-2xl font-bold text-gray-900\">\n                      {line.efficiency}%\n                    </span>\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {currentProduction ? (t.active || \"Running\") : (t.inactive || \"Idle\")}\n                    </Badge>\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    <p>Capacity: {line.capacity.toLocaleString()}/month</p>\n                    <p className=\"text-xs mt-1\">\n                      {line.products.length} product types\n                    </p>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <Button\n                      size=\"sm\"\n                      variant={currentProduction ? \"destructive\" : \"default\"}\n                      className=\"w-full\"\n                    >\n                      {currentProduction ? (\n                        <>\n                          <Pause className=\"w-3 h-3 mr-1\" />\n                          Pause\n                        </>\n                      ) : (\n                        <>\n                          <Play className=\"w-3 h-3 mr-1\" />\n                          Start\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Production Schedule Calendar and List */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Calendar View */}\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle>Production Calendar</CardTitle>\n                <Select value={selectedLine} onValueChange={setSelectedLine}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Production Lines</SelectItem>\n                    {PRODUCTION_LINES.map((line) => (\n                      <SelectItem key={line.id} value={line.name}>\n                        {line.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <ProductionScheduleCalendar \n                schedule={filteredSchedule}\n                onDateSelect={setSelectedDate}\n                selectedDate={selectedDate}\n              />\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Schedule Details */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Today's Schedule</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {filteredSchedule\n                .filter((item: any) => {\n                  const itemDate = new Date(item.scheduledDate);\n                  const today = new Date();\n                  return (\n                    itemDate.toDateString() === today.toDateString()\n                  );\n                })\n                .map((item: any) => (\n                  <div key={item.id} className=\"border rounded-lg p-4 space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <h4 className=\"font-medium text-gray-900\">\n                        {item.products?.name || item.product?.name || \"Unknown Product\"}\n                      </h4>\n                      <Badge className={getStatusColor(item.status)}>\n                        {item.status}\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"space-y-2 text-sm text-gray-600\">\n                      <div className=\"flex justify-between\">\n                        <span>Production Line:</span>\n                        <span className=\"font-medium\">{item.productionLine}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Planned Quantity:</span>\n                        <span className=\"font-medium\">{item.plannedQuantity.toLocaleString()}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Actual Quantity:</span>\n                        <span className=\"font-medium\">{item.actualQuantity.toLocaleString()}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Priority:</span>\n                        <Badge className={getPriorityColor(item.priority)} variant=\"outline\">\n                          {item.priority}\n                        </Badge>\n                      </div>\n                      {item.efficiency && (\n                        <div className=\"flex justify-between\">\n                          <span>Efficiency:</span>\n                          <span className=\"font-medium text-green-600\">\n                            {parseFloat(item.efficiency).toFixed(1)}%\n                          </span>\n                        </div>\n                      )}\n                    </div>\n\n                    {item.notes && (\n                      <div className=\"mt-3 p-2 bg-gray-50 rounded text-sm\">\n                        <strong>Notes:</strong> {item.notes}\n                      </div>\n                    )}\n\n                    <div className=\"flex items-center space-x-2 mt-3\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          // Update status functionality\n                          const newStatus = item.status === \"scheduled\" ? \"in_progress\" : \n                                          item.status === \"in_progress\" ? \"completed\" : \"scheduled\";\n                          updateScheduleMutation.mutate({\n                            id: item.id,\n                            data: { status: newStatus }\n                          });\n                        }}\n                      >\n                        {item.status === \"scheduled\" && \"Start\"}\n                        {item.status === \"in_progress\" && \"Complete\"}\n                        {item.status === \"completed\" && \"Restart\"}\n                      </Button>\n                      <Button size=\"sm\" variant=\"ghost\">\n                        Edit\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              }\n              \n              {filteredSchedule.filter((item: any) => {\n                const itemDate = new Date(item.scheduledDate);\n                const today = new Date();\n                return itemDate.toDateString() === today.toDateString();\n              }).length === 0 && (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <Calendar className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                  <p>No production scheduled for today</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* AI Optimization Insights */}\n      <Card className=\"cornex-gradient text-white\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-2\">ðŸŽ Fruitful Assist Production Optimizer</h3>\n              <div className=\"space-y-2 text-blue-100\">\n                <p>â€¢ Suggested 12% efficiency improvement on EPS Line A by adjusting batch sizes</p>\n                <p>â€¢ Recommend scheduling BR9 production during off-peak energy hours (R2,340 savings)</p>\n                <p>â€¢ Machine maintenance window detected: LED Line requires service in 5 days</p>\n              </div>\n            </div>\n            <Button variant=\"secondary\" className=\"bg-white/20 backdrop-blur hover:bg-white/30 text-white border-0\">\n              Apply Suggestions\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nfunction ScheduleForm({ \n  products, \n  onSubmit, \n  isLoading \n}: { \n  products: any[]; \n  onSubmit: (data: any) => void; \n  isLoading: boolean; \n}) {\n  const [formData, setFormData] = useState({\n    productId: \"\",\n    scheduledDate: \"\",\n    plannedQuantity: \"\",\n    productionLine: \"\",\n    priority: \"normal\",\n    notes: \"\"\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({\n      ...formData,\n      scheduledDate: new Date(formData.scheduledDate),\n      plannedQuantity: parseInt(formData.plannedQuantity)\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <Label htmlFor=\"productId\">Product</Label>\n        <Select value={formData.productId} onValueChange={(value) => setFormData(prev => ({ ...prev, productId: value }))}>\n          <SelectTrigger>\n            <SelectValue placeholder=\"Select product\" />\n          </SelectTrigger>\n          <SelectContent>\n            {products.map((product) => (\n              <SelectItem key={product.id} value={product.id}>\n                {product.sku} - {product.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"productionLine\">Production Line</Label>\n        <Select value={formData.productionLine} onValueChange={(value) => setFormData(prev => ({ ...prev, productionLine: value }))}>\n          <SelectTrigger>\n            <SelectValue placeholder=\"Select production line\" />\n          </SelectTrigger>\n          <SelectContent>\n            {PRODUCTION_LINES.map((line) => (\n              <SelectItem key={line.id} value={line.name}>\n                {line.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"scheduledDate\">Scheduled Date</Label>\n        <Input\n          type=\"datetime-local\"\n          value={formData.scheduledDate}\n          onChange={(e) => setFormData(prev => ({ ...prev, scheduledDate: e.target.value }))}\n          required\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"plannedQuantity\">Planned Quantity</Label>\n        <Input\n          type=\"number\"\n          value={formData.plannedQuantity}\n          onChange={(e) => setFormData(prev => ({ ...prev, plannedQuantity: e.target.value }))}\n          required\n        />\n      </div>\n\n      <div>\n        <Label htmlFor=\"priority\">Priority</Label>\n        <Select value={formData.priority} onValueChange={(value) => setFormData(prev => ({ ...prev, priority: value }))}>\n          <SelectTrigger>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"high\">High</SelectItem>\n            <SelectItem value=\"normal\">Normal</SelectItem>\n            <SelectItem value=\"low\">Low</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"notes\">Notes</Label>\n        <Textarea\n          value={formData.notes}\n          onChange={(e) => setFormData(prev => ({ ...prev, notes: e.target.value }))}\n          placeholder=\"Additional notes...\"\n        />\n      </div>\n\n      <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\n        {isLoading ? \"Scheduling...\" : \"Schedule Production\"}\n      </Button>\n    </form>\n  );\n}\n","size_bytes":17730},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/types/index.ts":{"content":"export interface DashboardMetrics {\n  revenue: string;\n  efficiency: number;\n  distributors: number;\n  turnover: number;\n}\n\nexport interface ProductionLine {\n  id: string;\n  name: string;\n  product: string;\n  efficiency: number;\n  status: 'running' | 'scheduled' | 'maintenance';\n}\n\nexport interface TopProduct {\n  product: {\n    id: string;\n    sku: string;\n    name: string;\n  };\n  revenue: string;\n  units: number;\n}\n\nexport interface RegionalMetric {\n  region: string;\n  revenue: string;\n  units: number;\n  distributors?: number;\n}\n\nexport interface CurrencyRate {\n  currency: string;\n  rate: number;\n  symbol: string;\n  flag: string;\n}\n\nexport interface Brand {\n  id: string;\n  name: string;\n  displayName: string;\n  description: string;\n  color: string;\n  icon: string;\n}\n\nexport interface InventoryStatus {\n  status: 'in_stock' | 'low_stock' | 'out_of_stock';\n  level: number;\n  threshold: number;\n}\n\nexport interface DemandForecastPoint {\n  date: string;\n  actual?: number;\n  predicted: number;\n  confidence: number;\n}\n","size_bytes":1027},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/date-picker-with-range.tsx":{"content":"import * as React from \"react\";\nimport { addDays, format } from \"date-fns\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\nexport function DatePickerWithRange({\n  className,\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const [date, setDate] = React.useState<DateRange | undefined>({\n    from: new Date(2022, 0, 20),\n    to: addDays(new Date(2022, 0, 20), 20),\n  });\n\n  return (\n    <div className={cn(\"grid gap-2\", className)}>\n      <Popover>\n        <PopoverTrigger asChild>\n          <Button\n            id=\"date\"\n            variant={\"outline\"}\n            className={cn(\n              \"w-[300px] justify-start text-left font-normal\",\n              !date && \"text-muted-foreground\"\n            )}\n          >\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\n            {date?.from ? (\n              date.to ? (\n                <>\n                  {format(date.from, \"LLL dd, y\")} -{\" \"}\n                  {format(date.to, \"LLL dd, y\")}\n                </>\n              ) : (\n                format(date.from, \"LLL dd, y\")\n              )\n            ) : (\n              <span>Pick a date</span>\n            )}\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n          <Calendar\n            initialFocus\n            mode=\"range\"\n            defaultMonth={date?.from}\n            selected={date}\n            onSelect={setDate}\n            numberOfMonths={2}\n          />\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}","size_bytes":1785},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":776},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }","size_bytes":1641},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }","size_bytes":755},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }","size_bytes":1076},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\n\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };","size_bytes":777},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/pages/FactorySetup.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { \n  Factory, \n  Brain, \n  Target, \n  TrendingUp, \n  Zap, \n  Settings, \n  Package,\n  Users,\n  MapPin,\n  DollarSign,\n  Calendar,\n  CheckCircle,\n  Clock,\n  AlertTriangle,\n  Rocket,\n  Shield,\n  Award,\n  BarChart3,\n  Cog,\n  Building2,\n  LineChart\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\nimport type { \n  FactorySetup, \n  ProductionMetrics, \n  AiInsight,\n  FactoryRecommendation \n} from \"@shared/schema\";\n\nexport default function FactorySetup() {\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  const [selectedFactory, setSelectedFactory] = useState<string | null>(null);\n  const [newFactoryForm, setNewFactoryForm] = useState({\n    name: '',\n    location: '',\n    targetStores: 300,\n    initialCapacity: 1000\n  });\n\n  const queryClient = useQueryClient();\n\n  const handleNewFactorySetup = () => {\n    toast({\n      title: \"New Factory Setup\",\n      description: \"Opening factory setup wizard...\",\n    });\n  };\n\n  const handleFruitfulAssistAI = () => {\n    toast({\n      title: \"Fruitful Assist AI\", \n      description: \"Launching AI-powered factory assistance...\",\n    });\n  };\n\n  // Fetch factory setups\n  const { data: factories = [], isLoading: factoriesLoading } = useQuery<FactorySetup[]>({\n    queryKey: [\"/api/factory-setups\"],\n  });\n\n  // Fetch AI insights\n  const { data: aiInsights = [], isLoading: insightsLoading } = useQuery<AiInsight[]>({\n    queryKey: [\"/api/ai-insights\"],\n  });\n\n  // Fetch production metrics for selected factory\n  const { data: productionMetrics = [], isLoading: metricsLoading } = useQuery<ProductionMetrics[]>({\n    queryKey: [\"/api/production-metrics\", selectedFactory],\n    enabled: !!selectedFactory,\n  });\n\n  // Fetch factory recommendations for selected factory\n  const { data: factoryRecommendations = [], isLoading: recommendationsLoading } = useQuery<FactoryRecommendation[]>({\n    queryKey: [\"/api/factory-recommendations\", selectedFactory],\n    enabled: !!selectedFactory,\n  });\n\n  // Fetch hardware stores count for accurate connected stores display\n  const { data: hardwareStores = [] } = useQuery({\n    queryKey: [\"/api/hardware-stores\"],\n  });\n\n  // Create new factory setup\n  const createFactoryMutation = useMutation({\n    mutationFn: async (factoryData: any) => {\n      return await apiRequest(\"/api/factory-setups\", \"POST\", {\n        factoryName: factoryData.name,\n        location: factoryData.location,\n        ownershipPhase: 'planning',\n        progressPercentage: 0,\n        totalInvestment: \"0\",\n        currentPayment: 0,\n        totalPayments: 1,\n        monthlyRevenue: \"0\",\n        productionCapacity: factoryData.initialCapacity,\n        aiOptimizationLevel: 0,\n        connectedStores: 0,\n        targetStores: factoryData.targetStores,\n        isActive: true\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/factory-setups\"] });\n      setNewFactoryForm({ name: '', location: '', targetStores: 300, initialCapacity: 1000 });\n    },\n  });\n\n  const getPhaseColor = (phase: string) => {\n    switch (phase) {\n      case 'planning': return 'bg-blue-100 text-blue-800';\n      case 'setup': return 'bg-yellow-100 text-yellow-800';\n      case 'installation': return 'bg-orange-100 text-orange-800';\n      case 'testing': return 'bg-purple-100 text-purple-800';\n      case 'operational': return 'bg-green-100 text-green-800';\n      case 'owned': return 'bg-emerald-100 text-emerald-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getImpactColor = (impact: string) => {\n    switch (impact) {\n      case 'high': return 'text-red-600';\n      case 'medium': return 'text-yellow-600';\n      case 'low': return 'text-green-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-xl p-8 text-white\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold mb-2 flex items-center\">\n                <Factory className=\"w-8 h-8 mr-3\" />\n                ðŸŽ Fruitful Assist Factory Setup & Ownership\n              </h1>\n              <p className=\"text-indigo-100\">\n                ðŸŽ Fruitful Assist AI-powered turnkey factory solutions with complete ownership transfer\n              </p>\n            </div>\n            <div className=\"flex space-x-3\">\n              <Button variant=\"secondary\" className=\"bg-white/10 hover:bg-white/20 text-white border-white/20\" onClick={handleFruitfulAssistAI}>\n                <Brain className=\"w-4 h-4 mr-2\" />\n                ðŸŽ Fruitful Assist AI\n              </Button>\n              <Button variant=\"secondary\" className=\"bg-white/10 hover:bg-white/20 text-white border-white/20\" onClick={handleNewFactorySetup}>\n                <Rocket className=\"w-4 h-4 mr-2\" />\n                New Factory Setup\n              </Button>\n            </div>\n          </div>\n\n          {/* Key Metrics */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Building2 className=\"w-5 h-5 text-indigo-200\" />\n                <div>\n                  <p className=\"text-sm text-indigo-200\">Active Factories</p>\n                  <p className=\"text-xl font-bold\">{factories.length}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <TrendingUp className=\"w-5 h-5 text-indigo-200\" />\n                <div>\n                  <p className=\"text-sm text-indigo-200\">Monthly Revenue</p>\n                  <p className=\"text-xl font-bold\">\n                    {formatCurrency(\n                      factories.reduce((sum, f) => sum + parseFloat(f.monthlyRevenue || '0'), 0), \n                      'ZAR'\n                    )}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Target className=\"w-5 h-5 text-indigo-200\" />\n                <div>\n                  <p className=\"text-sm text-indigo-200\">Connected Stores</p>\n                  <p className=\"text-xl font-bold\">\n                    {(hardwareStores as any[])?.length || 2684}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Zap className=\"w-5 h-5 text-indigo-200\" />\n                <div>\n                  <p className=\"text-sm text-indigo-200\">AI Optimization</p>\n                  <p className=\"text-xl font-bold\">\n                    {factories.length > 0 \n                      ? Math.round(factories.reduce((sum, f) => sum + (f.aiOptimizationLevel || 0), 0) / factories.length)\n                      : 0}%\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <Tabs defaultValue=\"factories\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-5\">\n            <TabsTrigger value=\"factories\">Factory Portfolio</TabsTrigger>\n            <TabsTrigger value=\"ai-insights\">ðŸŽ Fruitful Assist AI</TabsTrigger>\n            <TabsTrigger value=\"production\">Production Metrics</TabsTrigger>\n            <TabsTrigger value=\"ownership\">Ownership Process</TabsTrigger>\n            <TabsTrigger value=\"setup\">New Factory Setup</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"factories\">\n            <div className=\"grid gap-6\">\n              {factories.map((factory) => {\n                // Add AI recommendations to factory object\n                const factoryWithRecommendations = {\n                  ...factory,\n                  aiRecommendations: [\n                    \"Optimize cutting speeds for 15% efficiency gain\",\n                    \"Schedule maintenance during off-peak hours\",\n                    \"Implement renewable energy for cost reduction\"\n                  ],\n                  setupDate: new Date(factory.setupDate || Date.now()),\n                  completionDate: new Date(factory.completionDate || Date.now())\n                };\n                \n                return (\n                <Card key={factoryWithRecommendations.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader className=\"pb-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <CardTitle className=\"flex items-center text-xl\">\n                          <Factory className=\"w-5 h-5 mr-2 text-indigo-600\" />\n                          {factoryWithRecommendations.factoryName}\n                        </CardTitle>\n                        <p className=\"text-gray-600 flex items-center mt-1\">\n                          <MapPin className=\"w-4 h-4 mr-1\" />\n                          {factoryWithRecommendations.location}\n                        </p>\n                      </div>\n                      <Badge className={getPhaseColor(factoryWithRecommendations.ownershipPhase)}>\n                        {factoryWithRecommendations.ownershipPhase.charAt(0).toUpperCase() + factoryWithRecommendations.ownershipPhase.slice(1)}\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                      <div>\n                        <h4 className=\"font-semibold text-gray-700 mb-3\">Ownership Progress</h4>\n                        <Progress value={factoryWithRecommendations.progressPercentage} className=\"mb-2\" />\n                        <p className=\"text-sm text-gray-600\">\n                          Payment {factoryWithRecommendations.currentPayment} of {factoryWithRecommendations.totalPayments} completed\n                        </p>\n                        <p className=\"text-lg font-bold text-green-600 mt-2\">\n                          {formatCurrency(parseInt(factoryWithRecommendations.totalInvestment || '0'), 'ZAR')} Total Investment\n                        </p>\n                      </div>\n                      \n                      <div>\n                        <h4 className=\"font-semibold text-gray-700 mb-3\">Performance Metrics</h4>\n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600\">Monthly Revenue:</span>\n                            <span className=\"font-semibold\">{formatCurrency(parseInt(factoryWithRecommendations.monthlyRevenue || '0'), 'ZAR')}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600\">Production Capacity:</span>\n                            <span className=\"font-semibold\">{(factoryWithRecommendations.productionCapacity || 0).toLocaleString()} units/month</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600\">AI Optimization:</span>\n                            <span className=\"font-semibold text-blue-600\">{factoryWithRecommendations.aiOptimizationLevel || 0}%</span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div>\n                        <h4 className=\"font-semibold text-gray-700 mb-3\">Store Network</h4>\n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600\">Connected Stores:</span>\n                            <span className=\"font-semibold\">{factoryWithRecommendations.connectedStores || 0}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600\">Target Stores:</span>\n                            <span className=\"font-semibold\">{factoryWithRecommendations.targetStores || 0}</span>\n                          </div>\n                          <Progress value={((factoryWithRecommendations.connectedStores || 0) / (factoryWithRecommendations.targetStores || 1)) * 100} className=\"mt-2\" />\n                          <p className=\"text-xs text-gray-500\">\n                            {Math.round(((factoryWithRecommendations.connectedStores || 0) / (factoryWithRecommendations.targetStores || 1)) * 100)}% coverage achieved\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"border-t pt-4\">\n                      <h4 className=\"font-semibold text-gray-700 mb-2 flex items-center\">\n                        <Brain className=\"w-4 h-4 mr-1\" />\n                        AI Recommendations\n                      </h4>\n                      <div className=\"grid gap-2\">\n                        {(factoryWithRecommendations.aiRecommendations || []).map((rec, index) => (\n                          <div key={index} className=\"flex items-start space-x-2 text-sm\">\n                            <Zap className=\"w-4 h-4 text-yellow-500 mt-0.5 flex-shrink-0\" />\n                            <span className=\"text-gray-700\">{rec}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between items-center mt-6 pt-4 border-t\">\n                      <div className=\"text-sm text-gray-500\">\n                        Setup: {factoryWithRecommendations.setupDate.toLocaleDateString()} | \n                        Completion: {factoryWithRecommendations.completionDate.toLocaleDateString()}\n                      </div>\n                      <div className=\"space-x-2\">\n                        <Button variant=\"outline\" size=\"sm\">\n                          <BarChart3 className=\"w-4 h-4 mr-1\" />\n                          View Details\n                        </Button>\n                        <Button size=\"sm\">\n                          <Settings className=\"w-4 h-4 mr-1\" />\n                          Manage\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n                );\n              })}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"ai-insights\">\n            <div className=\"grid gap-6\">\n              {/* AI Overview */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center\">\n                    <Brain className=\"w-6 h-6 mr-2 text-purple-600\" />\n                    ðŸŽ Fruitful Assist AI - Factory Intelligence\n                  </CardTitle>\n                  <p className=\"text-gray-600\">\n                    Advanced AI analytics for production optimization, market insights, and profitability enhancement\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"text-center\">\n                      <div className=\"bg-purple-100 rounded-full p-4 w-16 h-16 mx-auto mb-3 flex items-center justify-center\">\n                        <TrendingUp className=\"w-8 h-8 text-purple-600\" />\n                      </div>\n                      <h3 className=\"font-semibold mb-1\">Predictive Analytics</h3>\n                      <p className=\"text-sm text-gray-600\">Market demand forecasting with 94% accuracy</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"bg-blue-100 rounded-full p-4 w-16 h-16 mx-auto mb-3 flex items-center justify-center\">\n                        <Cog className=\"w-8 h-8 text-blue-600\" />\n                      </div>\n                      <h3 className=\"font-semibold mb-1\">Process Optimization</h3>\n                      <p className=\"text-sm text-gray-600\">Real-time production efficiency improvements</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"bg-green-100 rounded-full p-4 w-16 h-16 mx-auto mb-3 flex items-center justify-center\">\n                        <Target className=\"w-8 h-8 text-green-600\" />\n                      </div>\n                      <h3 className=\"font-semibold mb-1\">Market Intelligence</h3>\n                      <p className=\"text-sm text-gray-600\">Strategic expansion and pricing recommendations</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* AI Insights */}\n              <div className=\"grid gap-4\">\n                {aiInsights.map((insight) => (\n                  <Card key={insight.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex items-start space-x-3\">\n                          <div className={`p-2 rounded-lg ${\n                            insight.type === 'optimization' ? 'bg-purple-100' :\n                            insight.type === 'market' ? 'bg-blue-100' :\n                            insight.type === 'expansion' ? 'bg-green-100' :\n                            'bg-yellow-100'\n                          }`}>\n                            {insight.type === 'optimization' && <Cog className=\"w-5 h-5 text-purple-600\" />}\n                            {insight.type === 'market' && <TrendingUp className=\"w-5 h-5 text-blue-600\" />}\n                            {insight.type === 'expansion' && <Target className=\"w-5 h-5 text-green-600\" />}\n                            {insight.type === 'cost_reduction' && <DollarSign className=\"w-5 h-5 text-yellow-600\" />}\n                          </div>\n                          <div>\n                            <h3 className=\"font-semibold text-lg\">{insight.title}</h3>\n                            <p className=\"text-gray-600 mt-1\">{insight.description}</p>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <Badge className={`${getImpactColor(insight.impact)} bg-transparent border`}>\n                            {insight.impact.toUpperCase()} IMPACT\n                          </Badge>\n                          {insight.actionRequired && (\n                            <div className=\"flex items-center mt-2 text-orange-600\">\n                              <AlertTriangle className=\"w-4 h-4 mr-1\" />\n                              <span className=\"text-xs font-medium\">ACTION REQUIRED</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"text-lg font-bold text-green-600\">\n                          Estimated Value: {insight.estimatedValue}\n                        </div>\n                        <Button size=\"sm\" variant={insight.actionRequired ? \"default\" : \"outline\"}>\n                          {insight.actionRequired ? \"Take Action\" : \"Learn More\"}\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"production\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Package className=\"w-5 h-5 mr-2 text-blue-600\" />\n                    Daily Output\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-blue-600 mb-2\">\n                    {productionMetrics[0]?.dailyOutput ? productionMetrics[0].dailyOutput.toLocaleString() : \"0\"} units\n                  </div>\n                  <p className=\"text-sm text-gray-600\">+12% vs yesterday</p>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Zap className=\"w-5 h-5 mr-2 text-green-600\" />\n                    Efficiency Score\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-green-600 mb-2\">\n                    {productionMetrics[0]?.efficiency || 0}%\n                  </div>\n                  <Progress value={Number(productionMetrics[0]?.efficiency) || 0} className=\"mt-2\" />\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Award className=\"w-5 h-5 mr-2 text-purple-600\" />\n                    Quality Score\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-purple-600 mb-2\">\n                    {productionMetrics[0]?.qualityScore || 0}%\n                  </div>\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <CheckCircle className=\"w-4 h-4 mr-1 text-green-500\" />\n                    Exceeds targets\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <TrendingUp className=\"w-5 h-5 mr-2 text-orange-600\" />\n                    Waste Reduction\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-orange-600 mb-2\">\n                    {productionMetrics[0]?.wasteReduction || 0}%\n                  </div>\n                  <p className=\"text-sm text-gray-600\">vs industry average</p>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Zap className=\"w-5 h-5 mr-2 text-yellow-600\" />\n                    Energy Savings\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-yellow-600 mb-2\">\n                    {productionMetrics[0]?.energySavings || 0}%\n                  </div>\n                  <p className=\"text-sm text-gray-600\">R 45k saved monthly</p>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <DollarSign className=\"w-5 h-5 mr-2 text-green-600\" />\n                    Profit Margin\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-green-600 mb-2\">\n                    {productionMetrics[0]?.profitMargin || 0}%\n                  </div>\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <TrendingUp className=\"w-4 h-4 mr-1 text-green-500\" />\n                    +5.2% this quarter\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"ownership\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Shield className=\"w-6 h-6 mr-2 text-green-600\" />\n                  Factory Ownership Transfer Process\n                </CardTitle>\n                <p className=\"text-gray-600\">\n                  Complete turnkey solution with guaranteed ownership transfer upon final payment\n                </p>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-8\">\n                  {/* Phase 1 */}\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"bg-blue-100 rounded-full p-3 flex items-center justify-center\">\n                      <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold\">1</div>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold mb-2\">Initial Setup & First Payment</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">Included Services:</h4>\n                          <ul className=\"space-y-1 text-sm text-gray-600\">\n                            <li>âœ… Site preparation & evaluation</li>\n                            <li>âœ… Equipment specification & ordering</li>\n                            <li>âœ… Permit & licensing assistance</li>\n                            <li>âœ… Initial EPS raw material supply</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">Payment Details:</h4>\n                          <p className=\"text-sm text-gray-600 mb-2\">33% of total investment</p>\n                          <p className=\"text-lg font-bold text-green-600\">R 950,000 - R 1,100,000</p>\n                        </div>\n                      </div>\n                      <Badge className=\"bg-blue-100 text-blue-800\">Factory Setup Initiated</Badge>\n                    </div>\n                  </div>\n\n                  {/* Phase 2 */}\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"bg-orange-100 rounded-full p-3 flex items-center justify-center\">\n                      <div className=\"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold\">2</div>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold mb-2\">Installation & Testing Phase</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">Included Services:</h4>\n                          <ul className=\"space-y-1 text-sm text-gray-600\">\n                            <li>âœ… EPS cutting machine installation</li>\n                            <li>âœ… Cloud software setup & training</li>\n                            <li>âœ… Quality control system implementation</li>\n                            <li>âœ… Staff training & certification</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">Payment Schedule:</h4>\n                          <p className=\"text-sm text-gray-600 mb-1\">Payment 2: 33% (Equipment delivery)</p>\n                          <p className=\"text-sm text-gray-600 mb-2\">Payment 3: 34% (Installation complete)</p>\n                        </div>\n                      </div>\n                      <Badge className=\"bg-orange-100 text-orange-800\">Equipment Installation & Testing</Badge>\n                    </div>\n                  </div>\n\n                  {/* Phase 3 */}\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"bg-green-100 rounded-full p-3 flex items-center justify-center\">\n                      <div className=\"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold\">3</div>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold mb-2\">Full Ownership Transfer</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">What You Receive:</h4>\n                          <ul className=\"space-y-1 text-sm text-gray-600\">\n                            <li>âœ… 100% ownership of all equipment</li>\n                            <li>âœ… Perpetual software license</li>\n                            <li>âœ… Brand licensing agreement</li>\n                            <li>âœ… Supply chain connections</li>\n                            <li>âœ… Ongoing technical support</li>\n                          </ul>\n                        </div>\n                        <div>\n                          <h4 className=\"font-medium text-gray-700 mb-2\">Guaranteed Results:</h4>\n                          <ul className=\"space-y-1 text-sm text-gray-600\">\n                            <li>ðŸŽ¯ 300+ store network connectivity</li>\n                            <li>ðŸŽ¯ R 400k+ monthly revenue potential</li>\n                            <li>ðŸŽ¯ 90%+ production efficiency</li>\n                            <li>ðŸŽ¯ Complete operational independence</li>\n                          </ul>\n                        </div>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Complete Asset Ownership</Badge>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-8 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold mb-3 flex items-center\">\n                    <Shield className=\"w-5 h-5 mr-2 text-green-600\" />\n                    Ownership Guarantee\n                  </h3>\n                  <p className=\"text-gray-700 mb-4\">\n                    Upon final payment completion, you receive immediate and complete ownership of all factory assets, \n                    including machinery, software licenses, brand rights, and established supply chain relationships. \n                    No ongoing fees or restrictions.\n                  </p>\n                  <Button className=\"bg-green-600 hover:bg-green-700\">\n                    <Rocket className=\"w-4 h-4 mr-2\" />\n                    Start Factory Setup Process\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"setup\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Rocket className=\"w-6 h-6 mr-2 text-indigo-600\" />\n                  New Factory Setup Configuration\n                </CardTitle>\n                <p className=\"text-gray-600\">\n                  Configure your new Cornex factory with AI-optimized specifications\n                </p>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                  <div className=\"space-y-6\">\n                    <div>\n                      <Label htmlFor=\"factory-name\">Factory Name</Label>\n                      <Input\n                        id=\"factory-name\"\n                        placeholder=\"e.g., Cornex Durban Production Hub\"\n                        value={newFactoryForm.name}\n                        onChange={(e) => setNewFactoryForm({...newFactoryForm, name: e.target.value})}\n                      />\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"location\">Location</Label>\n                      <Input\n                        id=\"location\"\n                        placeholder=\"e.g., Durban, KwaZulu-Natal\"\n                        value={newFactoryForm.location}\n                        onChange={(e) => setNewFactoryForm({...newFactoryForm, location: e.target.value})}\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"target-stores\">Target Store Network</Label>\n                      <Input\n                        id=\"target-stores\"\n                        type=\"number\"\n                        value={newFactoryForm.targetStores}\n                        onChange={(e) => setNewFactoryForm({...newFactoryForm, targetStores: parseInt(e.target.value)})}\n                      />\n                      <p className=\"text-sm text-gray-600 mt-1\">Number of hardware stores to connect</p>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"initial-capacity\">Initial Production Capacity</Label>\n                      <Input\n                        id=\"initial-capacity\"\n                        type=\"number\"\n                        value={newFactoryForm.initialCapacity}\n                        onChange={(e) => setNewFactoryForm({...newFactoryForm, initialCapacity: parseInt(e.target.value)})}\n                      />\n                      <p className=\"text-sm text-gray-600 mt-1\">Units per month</p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-gray-50 rounded-lg p-6\">\n                      <h3 className=\"font-semibold mb-4 flex items-center\">\n                        <Brain className=\"w-5 h-5 mr-2 text-purple-600\" />\n                        AI Recommendations\n                      </h3>\n                      <div className=\"space-y-3 text-sm\">\n                        <div className=\"flex items-start space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5\" />\n                          <span>Location shows high demand potential for EPS products</span>\n                        </div>\n                        <div className=\"flex items-start space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5\" />\n                          <span>Target store network size is optimal for ROI</span>\n                        </div>\n                        <div className=\"flex items-start space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5\" />\n                          <span>Initial capacity aligns with market demand</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-blue-50 rounded-lg p-6\">\n                      <h3 className=\"font-semibold mb-4\">Investment Summary</h3>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span>Equipment & Setup:</span>\n                          <span className=\"font-semibold\">R 2,400,000</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Software & Training:</span>\n                          <span className=\"font-semibold\">R 350,000</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Initial Inventory:</span>\n                          <span className=\"font-semibold\">R 200,000</span>\n                        </div>\n                        <hr className=\"my-2\" />\n                        <div className=\"flex justify-between text-lg font-bold\">\n                          <span>Total Investment:</span>\n                          <span className=\"text-green-600\">R 2,950,000</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <Button \n                      className=\"w-full bg-indigo-600 hover:bg-indigo-700\"\n                      onClick={() => createFactoryMutation.mutate(newFactoryForm)}\n                      disabled={createFactoryMutation.isPending}\n                    >\n                      <Rocket className=\"w-4 h-4 mr-2\" />\n                      {createFactoryMutation.isPending ? \"Setting Up...\" : \"Initiate Factory Setup\"}\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}","size_bytes":37679},"client/src/pages/ExcelUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { \n  Upload, \n  FileSpreadsheet, \n  CheckCircle, \n  AlertCircle, \n  Clock, \n  Database,\n  Store,\n  Route,\n  Apple\n} from \"lucide-react\";\n\ninterface ExcelUpload {\n  id: string;\n  fileName: string;\n  mappedName: string;\n  fileSize: number;\n  uploadedAt: string;\n  status: 'pending' | 'processing' | 'completed' | 'failed';\n  storesCount: number;\n  routesCount: number;\n  errorMessage?: string;\n}\n\ninterface HardwareStore {\n  id: string;\n  storeName: string;\n  storeAddress: string;\n  cityTown: string;\n  province: string;\n  contactPerson: string;\n  phoneNumber: string;\n  repName: string;\n  visitFrequency: string;\n  mappedToCornex: string;\n  createdAt: string;\n}\n\ninterface SalesRepRoute {\n  id: string;\n  repName: string;\n  routeName: string;\n  visitDay: string;\n  visitFrequency: string;\n  priority: number;\n  mappedToCornex: string;\n  createdAt: string;\n}\n\nexport default function ExcelUpload() {\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [bulkUploadProgress, setBulkUploadProgress] = useState({ current: 0, total: 0 });\n  const [isBulkUploading, setIsBulkUploading] = useState(false);\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [customMapping, setCustomMapping] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch all Excel uploads with status\n  const { data: uploads = [], isLoading: uploadsLoading } = useQuery<ExcelUpload[]>({\n    queryKey: ['/api/excel-uploads'],\n    refetchInterval: 2000 // Refresh every 2 seconds for real-time sync\n  });\n\n  // Fetch hardware stores from Excel uploads\n  const { data: hardwareStores = [], isLoading: storesLoading } = useQuery<HardwareStore[]>({\n    queryKey: ['/api/hardware-stores-excel'],\n    refetchInterval: 2000\n  });\n\n  // Fetch sales rep routes from Excel uploads\n  const { data: salesRoutes = [], isLoading: routesLoading } = useQuery<SalesRepRoute[]>({\n    queryKey: ['/api/routes-excel'],\n    refetchInterval: 2000\n  });\n\n  // Fetch sync status for 24/7 balance monitoring\n  const { data: syncStatus, isLoading: syncLoading } = useQuery({\n    queryKey: ['/api/sync-status'],\n    refetchInterval: 1000 // Check sync status every second\n  });\n\n  // Single file upload mutation\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      if (customMapping) {\n        formData.append('mappedName', customMapping);\n      }\n\n      return fetch('/api/excel-upload', {\n        method: 'POST',\n        body: formData,\n      }).then(res => {\n        if (!res.ok) throw new Error('Upload failed');\n        return res.json();\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"ðŸŽ Fruitful Upload Complete\",\n        description: \"Excel file processed successfully. Hardware store directory updated.\",\n      });\n      setSelectedFiles([]);\n      setCustomMapping('');\n      setUploadProgress(0);\n      \n      // Invalidate all related queries for instant sync\n      queryClient.invalidateQueries({ queryKey: ['/api/excel-uploads'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/hardware-stores-excel'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/routes-excel'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/hardware-stores'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/routes'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/sync-status'] });\n    },\n    onError: () => {\n      toast({\n        title: \"Upload Failed\",\n        description: \"Failed to process Excel file. Please check format and try again.\",\n        variant: \"destructive\",\n      });\n      setUploadProgress(0);\n    },\n  });\n\n  // Bulk upload mutation\n  const bulkUploadMutation = useMutation({\n    mutationFn: async (files: File[]) => {\n      setIsBulkUploading(true);\n      setBulkUploadProgress({ current: 0, total: files.length });\n      \n      const results = [];\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        setBulkUploadProgress({ current: i + 1, total: files.length });\n        \n        try {\n          const formData = new FormData();\n          formData.append('file', file);\n          \n          const response = await fetch('/api/excel-upload', {\n            method: 'POST',\n            body: formData,\n          });\n          \n          if (response.ok) {\n            const result = await response.json();\n            results.push({ file: file.name, success: true, result });\n          } else {\n            results.push({ file: file.name, success: false, error: 'Upload failed' });\n          }\n        } catch (error) {\n          results.push({ file: file.name, success: false, error: error.message });\n        }\n        \n        // Small delay to prevent overwhelming the server\n        await new Promise(resolve => setTimeout(resolve, 100));\n      }\n      \n      return results;\n    },\n    onSuccess: (results) => {\n      const successful = results.filter(r => r.success).length;\n      const failed = results.length - successful;\n      \n      toast({\n        title: \"ðŸŽ Bulk Upload Complete\",\n        description: `${successful} files processed successfully. ${failed > 0 ? `${failed} failed.` : ''}`,\n      });\n      \n      setSelectedFiles([]);\n      setIsBulkUploading(false);\n      setBulkUploadProgress({ current: 0, total: 0 });\n      \n      // Invalidate all related queries for instant sync\n      queryClient.invalidateQueries({ queryKey: ['/api/excel-uploads'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/hardware-stores-excel'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/routes-excel'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/hardware-stores'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/routes'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/sync-status'] });\n    },\n    onError: () => {\n      toast({\n        title: \"Bulk Upload Failed\",\n        description: \"Failed to process Excel files. Please try again.\",\n        variant: \"destructive\",\n      });\n      setIsBulkUploading(false);\n      setBulkUploadProgress({ current: 0, total: 0 });\n    },\n  });\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    const files = Array.from(e.dataTransfer.files);\n    handleMultipleFileSelection(files);\n  };\n\n  const handleMultipleFileSelection = (files: File[]) => {\n    const validFiles: File[] = [];\n    const errors: string[] = [];\n    \n    files.forEach(file => {\n      // Validate file type\n      const isExcel = file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\n                     file.type === 'application/vnd.ms-excel' ||\n                     file.name.match(/\\.(xlsx|xls)$/i);\n      \n      if (!isExcel) {\n        errors.push(`${file.name}: Not an Excel file`);\n        return;\n      }\n\n      // Validate file size (10MB limit)\n      if (file.size > 10 * 1024 * 1024) {\n        errors.push(`${file.name}: File too large (>10MB)`);\n        return;\n      }\n\n      validFiles.push(file);\n    });\n    \n    if (errors.length > 0) {\n      toast({\n        title: \"Some Files Invalid\",\n        description: errors.slice(0, 3).join('; ') + (errors.length > 3 ? '...' : ''),\n        variant: \"destructive\",\n      });\n    }\n    \n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n    }\n  };\n\n  const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      handleMultipleFileSelection(Array.from(files));\n    }\n  };\n\n  const handleSingleUpload = () => {\n    if (selectedFiles.length === 0) return;\n    \n    setUploadProgress(10);\n    uploadMutation.mutate(selectedFiles[0]);\n    \n    // Simulate progress for better UX\n    const interval = setInterval(() => {\n      setUploadProgress(prev => {\n        if (prev >= 90) {\n          clearInterval(interval);\n          return prev;\n        }\n        return prev + 10;\n      });\n    }, 200);\n  };\n\n  const handleBulkUpload = () => {\n    if (selectedFiles.length === 0) return;\n    \n    bulkUploadMutation.mutate(selectedFiles);\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed': return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case 'failed': return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n      case 'processing': return <Clock className=\"h-4 w-4 text-blue-500 animate-spin\" />;\n      default: return <Clock className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-green-100 text-green-800';\n      case 'failed': return 'bg-red-100 text-red-800';\n      case 'processing': return 'bg-blue-100 text-blue-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const mapFileNameToCornex = (fileName: string): string => {\n    const lowerName = fileName.toLowerCase();\n    if (lowerName.includes('zollie')) return 'Cornex Zollie District Routes';\n    if (lowerName.includes('homemart')) return 'Cornex Homemart Store Network';\n    if (lowerName.includes('tripot')) return 'Cornex Tripot Distribution Points';\n    if (lowerName.includes('cornice maker')) return 'Cornex Cornice Maker Retailers';\n    return `Cornex ${fileName}`;\n  };\n\n  // Calculate totals for 24/7 balanced sync display\n  const totalStores = hardwareStores.length;\n  const totalRoutes = salesRoutes.length;\n  const totalUploads = uploads.length;\n  const completedUploads = uploads.filter(u => u.status === 'completed').length;\n  const processingUploads = uploads.filter(u => u.status === 'processing').length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Fruitful Assist Branding */}\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"flex items-center gap-2\">\n          <Apple className=\"h-6 w-6 text-green-500\" />\n          <h1 className=\"text-2xl font-bold\">Fruitful Assist - Excel Upload System</h1>\n        </div>\n      </div>\n\n      {/* Sync Status Dashboard */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <Database className=\"h-4 w-4 text-blue-500\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{totalUploads}</div>\n                <div className=\"text-sm text-gray-600\">Total Uploads</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <Store className=\"h-4 w-4 text-green-500\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{totalStores}</div>\n                <div className=\"text-sm text-gray-600\">Hardware Stores</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <Route className=\"h-4 w-4 text-purple-500\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{totalRoutes}</div>\n                <div className=\"text-sm text-gray-600\">Sales Routes</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-2\">\n              <CheckCircle className={`h-4 w-4 ${syncStatus?.isBalanced ? 'text-green-500' : 'text-yellow-500'}`} />\n              <div>\n                <div className=\"text-2xl font-bold\">\n                  {syncStatus?.syncHealth === 'healthy' ? 'âœ“' : 'âŸ³'}\n                </div>\n                <div className=\"text-sm text-gray-600\">24/7 Sync Status</div>\n                {syncStatus && (\n                  <div className=\"text-xs text-gray-500\">\n                    {syncStatus.isBalanced ? 'Balanced' : 'Syncing...'}\n                  </div>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Upload Interface */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Excel File Upload\n          </CardTitle>\n          <CardDescription>\n            Upload up to 300+ Excel sheets with sales rep routes and hardware store lists.\n            Supports bulk processing of multiple .xlsx and .xls files up to 10MB each.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-6\">\n            {/* File Drop Zone */}\n            <div\n              className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                dragActive \n                  ? 'border-blue-500 bg-blue-50' \n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n            >\n              <FileSpreadsheet className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n              <div className=\"space-y-2\">\n                <p className=\"text-lg font-medium\">\n                  Drop Excel files here or click to browse\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  Supports .xlsx, .xls files up to 10MB each. Multiple files supported for bulk upload.\n                </p>\n                <Button \n                  onClick={() => fileInputRef.current?.click()}\n                  variant=\"outline\"\n                >\n                  Choose Files (Supports Multiple)\n                </Button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  multiple\n                  onChange={handleFileInput}\n                  className=\"hidden\"\n                />\n              </div>\n            </div>\n\n            {/* Selected Files and Custom Mapping */}\n            {selectedFiles.length > 0 && (\n              <div className=\"space-y-4\">\n                <div className=\"p-4 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div>\n                      <p className=\"font-medium\">{selectedFiles.length} files selected</p>\n                      <p className=\"text-sm text-gray-500\">\n                        Total size: {(selectedFiles.reduce((acc, f) => acc + f.size, 0) / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                    </div>\n                    <Button \n                      onClick={() => setSelectedFiles([])}\n                      variant=\"ghost\" \n                      size=\"sm\"\n                    >\n                      Clear All\n                    </Button>\n                  </div>\n                  \n                  {/* File List */}\n                  <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                    {selectedFiles.map((file, index) => (\n                      <div key={index} className=\"flex items-center justify-between text-sm\">\n                        <div className=\"flex-1\">\n                          <span className=\"font-medium\">{file.name}</span>\n                          <span className=\"text-gray-500 ml-2\">\n                            ({(file.size / 1024 / 1024).toFixed(2)} MB)\n                          </span>\n                        </div>\n                        <Button\n                          onClick={() => setSelectedFiles(prev => prev.filter((_, i) => i !== index))}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"p-1 h-6 w-6\"\n                        >\n                          Ã—\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Custom Mapping Input */}\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"customMapping\">Custom Cornex Mapping (Optional)</Label>\n                  <Input\n                    id=\"customMapping\"\n                    value={customMapping}\n                    onChange={(e) => setCustomMapping(e.target.value)}\n                    placeholder=\"Enter custom Cornex reference name\"\n                  />\n                  <p className=\"text-xs text-gray-500\">\n                    Leave blank to use auto-mapping: zollie â†’ Cornex Zollie District Routes, \n                    homemart â†’ Cornex Homemart Store Network, etc.\n                  </p>\n                </div>\n\n                {/* Upload Progress */}\n                {(uploadProgress > 0 || isBulkUploading) && (\n                  <div className=\"space-y-2\">\n                    {isBulkUploading ? (\n                      <>\n                        <div className=\"flex justify-between text-sm\">\n                          <span>Bulk Upload Progress...</span>\n                          <span>{bulkUploadProgress.current} / {bulkUploadProgress.total}</span>\n                        </div>\n                        <Progress value={(bulkUploadProgress.current / bulkUploadProgress.total) * 100} />\n                        <p className=\"text-xs text-gray-600\">\n                          Processing file {bulkUploadProgress.current} of {bulkUploadProgress.total}\n                        </p>\n                      </>\n                    ) : (\n                      <>\n                        <div className=\"flex justify-between text-sm\">\n                          <span>Uploading...</span>\n                          <span>{uploadProgress}%</span>\n                        </div>\n                        <Progress value={uploadProgress} />\n                      </>\n                    )}\n                  </div>\n                )}\n\n                {/* Upload Buttons */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  <Button \n                    onClick={handleSingleUpload}\n                    disabled={uploadMutation.isPending || isBulkUploading || selectedFiles.length === 0}\n                    variant=\"outline\"\n                  >\n                    {uploadMutation.isPending ? 'Processing...' : `Upload First File Only`}\n                  </Button>\n                  <Button \n                    onClick={handleBulkUpload}\n                    disabled={uploadMutation.isPending || isBulkUploading || selectedFiles.length === 0}\n                    className=\"bg-green-600 hover:bg-green-700\"\n                  >\n                    {isBulkUploading ? 'Processing All...' : `Upload All ${selectedFiles.length} Files`}\n                  </Button>\n                </div>\n              </div>\n            )}\n\n            {/* Column Mapping Info */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Flexible Column Recognition:</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <p className=\"font-medium mb-2\">Store Information (auto-detected):</p>\n                    <ul className=\"space-y-1 text-gray-600\">\n                      <li>â€¢ Store Name, Name, Store, Business Name</li>\n                      <li>â€¢ Address, Store Address, Location</li>\n                      <li>â€¢ City, Town, City/Town</li>\n                      <li>â€¢ Province, Region</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <p className=\"font-medium mb-2\">Contact & Route Details (flexible):</p>\n                    <ul className=\"space-y-1 text-gray-600\">\n                      <li>â€¢ Contact, Contact Person, Manager</li>\n                      <li>â€¢ Phone, Phone Number, Tel, Mobile</li>\n                      <li>â€¢ Rep, Rep Name, Sales Rep, Agent</li>\n                      <li>â€¢ Frequency, Visit Frequency, Schedule</li>\n                    </ul>\n                  </div>\n                </div>\n                <div className=\"mt-4 p-3 bg-green-50 rounded\">\n                  <p className=\"text-xs text-green-700\">\n                    <strong>Bulk Processing Ready:</strong> Enhanced for 300+ files with flexible column matching. \n                    System automatically maps zollie, homemart, tripot, cornice maker â†’ Cornex references.\n                    Supports simultaneous processing with 24/7 synchronized data verification.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Upload History & Status */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Upload History & Real-Time Status</CardTitle>\n          <CardDescription>\n            Live tracking of all Excel uploads and processing status. Updates automatically every 2 seconds.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {uploadsLoading ? (\n            <div className=\"text-center py-8\">\n              <Clock className=\"mx-auto h-8 w-8 animate-spin text-gray-400 mb-4\" />\n              <p>Loading upload history...</p>\n            </div>\n          ) : uploads.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <FileSpreadsheet className=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\n              <p>No Excel files uploaded yet</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {uploads.map((upload) => (\n                <div key={upload.id} className=\"border rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      {getStatusIcon(upload.status)}\n                      <div>\n                        <p className=\"font-medium\">{upload.fileName}</p>\n                        <p className=\"text-sm text-gray-600\">{upload.mappedName}</p>\n                      </div>\n                    </div>\n                    <Badge className={getStatusColor(upload.status)}>\n                      {upload.status}\n                    </Badge>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-6 text-sm text-gray-600\">\n                    <span>Size: {(upload.fileSize / 1024 / 1024).toFixed(2)} MB</span>\n                    <span>Stores: {upload.storesCount}</span>\n                    <span>Routes: {upload.routesCount}</span>\n                    <span>Uploaded: {new Date(upload.uploadedAt).toLocaleString()}</span>\n                  </div>\n                  \n                  {upload.errorMessage && (\n                    <div className=\"mt-2 p-2 bg-red-50 text-red-600 text-sm rounded\">\n                      Error: {upload.errorMessage}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Synchronized Data Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Hardware Stores Summary */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Store className=\"h-5 w-5\" />\n              Hardware Store Directory\n            </CardTitle>\n            <CardDescription>\n              Real-time synchronized store data from Excel uploads\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {storesLoading ? (\n              <div className=\"text-center py-4\">\n                <Clock className=\"mx-auto h-6 w-6 animate-spin text-gray-400 mb-2\" />\n                <p className=\"text-sm\">Syncing store data...</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                <div className=\"text-2xl font-bold\">{totalStores} Stores</div>\n                <div className=\"text-sm text-gray-600\">\n                  {hardwareStores.filter(s => s.province === 'Western Cape').length} Western Cape â€¢{' '}\n                  {hardwareStores.filter(s => s.province === 'Gauteng').length} Gauteng â€¢{' '}\n                  {hardwareStores.filter(s => s.province === 'KwaZulu-Natal').length} KZN\n                </div>\n                <div className=\"mt-4\">\n                  <Badge className=\"bg-green-100 text-green-800\">\n                    âœ“ Synchronized with Database\n                  </Badge>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Sales Routes Summary */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Route className=\"h-5 w-5\" />\n              Sales Routes Network\n            </CardTitle>\n            <CardDescription>\n              Real-time synchronized route data from Excel uploads\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {routesLoading ? (\n              <div className=\"text-center py-4\">\n                <Clock className=\"mx-auto h-6 w-6 animate-spin text-gray-400 mb-2\" />\n                <p className=\"text-sm\">Syncing route data...</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                <div className=\"text-2xl font-bold\">{totalRoutes} Routes</div>\n                <div className=\"text-sm text-gray-600\">\n                  {new Set(salesRoutes.map(r => r.repName)).size} Active Reps\n                </div>\n                <div className=\"mt-4\">\n                  <Badge className=\"bg-green-100 text-green-800\">\n                    âœ“ Synchronized with Database\n                  </Badge>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":27112},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport MemoryStore from \"memorystore\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const MemoryStoreSession = MemoryStore(session);\n  const sessionStore = new MemoryStoreSession({\n    checkPeriod: sessionTtl, // cleanup interval\n    ttl: sessionTtl, // session expiry time\n    stale: false, // return expired sessions\n  });\n  \n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    rolling: true, // Reset expiration on each request\n    cookie: {\n      httpOnly: true,\n      secure: false, // Set to false for development\n      maxAge: sessionTtl,\n      sameSite: 'lax', // Add sameSite for better cookie handling\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};","size_bytes":4413},"client/src/components/PageTransition.tsx":{"content":"import { ReactNode, useEffect, useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface PageTransitionProps {\n  children: ReactNode;\n}\n\nconst pageVariants = {\n  initial: {\n    opacity: 0,\n    scale: 0.98,\n    y: 20,\n    filter: 'blur(4px)'\n  },\n  in: {\n    opacity: 1,\n    scale: 1,\n    y: 0,\n    filter: 'blur(0px)',\n    transition: {\n      duration: 0.4,\n      ease: [0.22, 1, 0.36, 1]\n    }\n  },\n  out: {\n    opacity: 0,\n    scale: 1.02,\n    y: -20,\n    filter: 'blur(4px)',\n    transition: {\n      duration: 0.3,\n      ease: [0.22, 1, 0.36, 1]\n    }\n  }\n};\n\nconst slideVariants = {\n  initial: (direction: number) => ({\n    x: direction > 0 ? 100 : -100,\n    opacity: 0,\n    scale: 0.95\n  }),\n  in: {\n    x: 0,\n    opacity: 1,\n    scale: 1,\n    transition: {\n      duration: 0.5,\n      ease: [0.22, 1, 0.36, 1]\n    }\n  },\n  out: (direction: number) => ({\n    x: direction < 0 ? 100 : -100,\n    opacity: 0,\n    scale: 1.05,\n    transition: {\n      duration: 0.4,\n      ease: [0.22, 1, 0.36, 1]\n    }\n  })\n};\n\nexport const PageTransition = ({ children }: PageTransitionProps) => {\n  const [location] = useLocation();\n  const [direction, setDirection] = useState(0);\n  const [prevLocation, setPrevLocation] = useState(location);\n\n  // Route order for determining slide direction\n  const routes = [\n    '/',\n    '/catalog',\n    '/production',\n    '/inventory',\n    '/distributors',\n    '/routes',\n    '/purchase-orders',\n    '/factory-setup',\n    '/automation',\n    '/bulk-import',\n    '/company-settings',\n    '/login',\n    '/register',\n    '/analytics'\n  ];\n\n  useEffect(() => {\n    const prevIndex = routes.indexOf(prevLocation);\n    const currentIndex = routes.indexOf(location);\n    \n    if (prevIndex !== -1 && currentIndex !== -1) {\n      setDirection(currentIndex > prevIndex ? 1 : -1);\n    } else {\n      setDirection(0);\n    }\n    \n    setPrevLocation(location);\n  }, [location, prevLocation, routes]);\n\n  return (\n    <AnimatePresence mode=\"wait\" custom={direction}>\n      <motion.div\n        key={location}\n        custom={direction}\n        variants={location === '/' ? pageVariants : slideVariants}\n        initial=\"initial\"\n        animate=\"in\"\n        exit=\"out\"\n        className=\"w-full h-full\"\n      >\n        {children}\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n// Loading transition component for async operations\nexport const LoadingTransition = ({ isLoading, children }: { isLoading: boolean; children: ReactNode }) => {\n  return (\n    <AnimatePresence mode=\"wait\">\n      {isLoading ? (\n        <motion.div\n          key=\"loading\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50\"\n        >\n          <div className=\"text-center\">\n            <motion.div\n              animate={{ rotate: 360 }}\n              transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n              className=\"w-16 h-16 border-4 border-emerald-200 border-t-emerald-600 rounded-full mx-auto mb-4\"\n            />\n            <motion.p\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"text-gray-600 font-medium\"\n            >\n              Loading...\n            </motion.p>\n          </div>\n        </motion.div>\n      ) : (\n        <motion.div\n          key=\"content\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.3 }}\n        >\n          {children}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\n// Staggered animation for lists and grids\nexport const StaggerContainer = ({ children, delay = 0.1 }: { children: ReactNode; delay?: number }) => {\n  return (\n    <motion.div\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={{\n        visible: {\n          transition: {\n            staggerChildren: delay\n          }\n        }\n      }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport const StaggerItem = ({ children, index = 0 }: { children: ReactNode; index?: number }) => {\n  return (\n    <motion.div\n      variants={{\n        hidden: { \n          opacity: 0, \n          y: 20,\n          scale: 0.95 \n        },\n        visible: { \n          opacity: 1, \n          y: 0,\n          scale: 1,\n          transition: {\n            duration: 0.4,\n            ease: [0.22, 1, 0.36, 1]\n          }\n        }\n      }}\n    >\n      {children}\n    </motion.div>\n  );\n};","size_bytes":4675},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\nimport { useState, useEffect, useRef } from \"react\";\n\nexport function useAuth() {\n  // Demo mode for Homemart Africa evaluation\n  const demoUser: User = {\n    id: \"homemart_admin_001\",\n    email: \"admin@homemart.co.za\",\n    firstName: \"HOMEMART\",\n    lastName: \"ADMIN\",\n    profileImageUrl: null,\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n\n  return {\n    user: demoUser,\n    isLoading: false,\n    isAuthenticated: true,\n    checked: true\n  };\n}","size_bytes":554},"client/src/pages/BulkImport.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\nimport { Upload, FileSpreadsheet, CheckCircle, AlertCircle, X, Download, Eye, XCircle, Clock, MoreHorizontal, ChevronDown, Trash2, Info, Lightbulb, Zap, Target, BarChart, Folder, Users, FileText, Package, BarChart3, Camera, Shield, Activity, Database, FileCheck, TrendingUp, AlertTriangle, Building2 } from \"lucide-react\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { TransitionHints, useTransitionHints, HINT_SEQUENCES } from \"@/components/TransitionHints\";\n\ninterface ImportFile {\n  id: string;\n  file: File;\n  status: \"pending\" | \"processing\" | \"completed\" | \"error\";\n  progress: number;\n  healthCheck?: {\n    score: number;\n    issues: string[];\n    warnings: string[];\n    dataQuality: \"excellent\" | \"good\" | \"fair\" | \"poor\";\n    validationPassed: boolean;\n  };\n  result?: {\n    totalRows: number;\n    validRows: number;\n    importedRows?: number;\n    errors: string[];\n    preview: any[];\n  };\n}\n\ninterface ImportSession {\n  id: string;\n  name: string;\n  totalFiles: number;\n  processedFiles: number;\n  status: \"active\" | \"completed\" | \"failed\";\n  createdAt: string;\n  files: ImportFile[];\n}\n\nexport default function BulkImport() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [importFiles, setImportFiles] = useState<ImportFile[]>([]);\n  const [currentSession, setCurrentSession] = useState<ImportSession | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [showWelcomeHints, setShowWelcomeHints] = useState(true);\n  \n  // Transition hints system\n  const { \n    activeHints, \n    isVisible: hintsVisible, \n    currentStep, \n    showHints, \n    hideHints, \n    completeHints \n  } = useTransitionHints();\n  const [activeTab, setActiveTab] = useState(\"upload\");\n  const [selectedSessionDetails, setSelectedSessionDetails] = useState<ImportSession | null>(null);\n  const [showDetailsDialog, setShowDetailsDialog] = useState(false);\n  const [healthCheckEnabled, setHealthCheckEnabled] = useState(true);\n  const [realTimeValidation, setRealTimeValidation] = useState(true);\n\n  // Fetch import history\n  const { data: importHistory = [] } = useQuery<ImportSession[]>({\n    queryKey: [\"/api/bulk-import/history\"]\n  });\n\n  // Health check functions\n  const performHealthCheck = (file: File): Promise<ImportFile['healthCheck']> => {\n    return new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const data = e.target?.result as string;\n        const lines = data.split('\\n').filter(line => line.trim());\n        \n        const issues: string[] = [];\n        const warnings: string[] = [];\n        let score = 100;\n        \n        // Check file size\n        if (file.size > 50 * 1024 * 1024) {\n          issues.push(\"File size exceeds 50MB limit\");\n          score -= 20;\n        }\n        \n        // Check row count\n        if (lines.length < 2) {\n          issues.push(\"File appears to be empty or has no data rows\");\n          score -= 30;\n        } else if (lines.length > 10000) {\n          warnings.push(\"Large file detected - may take longer to process\");\n          score -= 5;\n        }\n        \n        // Check for required columns (basic validation)\n        const headers = lines[0]?.split(',').map(h => h.trim().toLowerCase());\n        const requiredFields = ['store', 'name', 'province', 'city'];\n        const missingFields = requiredFields.filter(field => \n          !headers.some(header => header.includes(field))\n        );\n        \n        if (missingFields.length > 0) {\n          issues.push(`Missing required columns: ${missingFields.join(', ')}`);\n          score -= missingFields.length * 10;\n        }\n        \n        // Check for data consistency\n        const sampleRows = lines.slice(1, 10);\n        const inconsistentRows = sampleRows.filter(row => {\n          const cols = row.split(',');\n          return cols.length !== headers.length;\n        });\n        \n        if (inconsistentRows.length > 0) {\n          warnings.push(\"Some rows have inconsistent column counts\");\n          score -= 10;\n        }\n        \n        // Determine data quality\n        let dataQuality: \"excellent\" | \"good\" | \"fair\" | \"poor\";\n        if (score >= 90) dataQuality = \"excellent\";\n        else if (score >= 75) dataQuality = \"good\";\n        else if (score >= 60) dataQuality = \"fair\";\n        else dataQuality = \"poor\";\n        \n        resolve({\n          score: Math.max(0, score),\n          issues,\n          warnings,\n          dataQuality,\n          validationPassed: issues.length === 0\n        });\n      };\n      \n      reader.readAsText(file.slice(0, 10240)); // Read first 10KB for validation\n    });\n  };\n\n  const getHealthScoreColor = (score: number) => {\n    if (score >= 90) return \"text-green-600 bg-green-50 border-green-200\";\n    if (score >= 75) return \"text-blue-600 bg-blue-50 border-blue-200\";\n    if (score >= 60) return \"text-yellow-600 bg-yellow-50 border-yellow-200\";\n    return \"text-red-600 bg-red-50 border-red-200\";\n  };\n\n  const getDataQualityIcon = (quality: string) => {\n    switch (quality) {\n      case \"excellent\": return <Shield className=\"w-4 h-4 text-green-600\" />;\n      case \"good\": return <CheckCircle className=\"w-4 h-4 text-blue-600\" />;\n      case \"fair\": return <AlertTriangle className=\"w-4 h-4 text-yellow-600\" />;\n      case \"poor\": return <XCircle className=\"w-4 h-4 text-red-600\" />;\n      default: return <Activity className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  // Process files mutation\n  const processFilesMutation = useMutation({\n    mutationFn: async (files: File[]) => {\n      const formData = new FormData();\n      files.forEach((file, index) => {\n        formData.append('files', file);\n      });\n      \n      const response = await fetch('/api/bulk-import/upload', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Upload failed: ${response.statusText}`);\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      console.log(\"Upload success:\", data);\n      \n      if (data.success) {\n        // Immediately update all files to completed status\n        setImportFiles(prev => prev.map((file, index) => ({\n          ...file,\n          status: \"completed\" as const,\n          progress: 100,\n          result: {\n            totalRows: data.results?.[index]?.totalRows || 0,\n            validRows: data.results?.[index]?.validRows || 0,\n            importedRows: data.results?.[index]?.importedRows || 0,\n            errors: [],\n            preview: data.results?.[index]?.preview || []\n          }\n        })));\n\n        // Set session as completed\n        setCurrentSession({\n          id: data.sessionId,\n          name: `Import Session - ${new Date().toLocaleDateString()}`,\n          totalFiles: importFiles.length,\n          processedFiles: importFiles.length,\n          status: \"completed\",\n          createdAt: new Date().toISOString(),\n          files: importFiles.map((file, index) => ({\n            ...file,\n            status: \"completed\" as const,\n            progress: 100,\n            result: {\n              totalRows: data.results?.[index]?.totalRows || 0,\n              validRows: data.results?.[index]?.validRows || 0,\n              importedRows: data.results?.[index]?.importedRows || 0,\n              errors: [],\n              preview: data.results?.[index]?.preview || []\n            }\n          }))\n        });\n\n        toast({\n          title: \"Import Completed Successfully!\",\n          description: `Successfully imported ${data.totalImported} stores from ${data.results?.length || 0} files`,\n        });\n\n        // Switch to progress tab to show results\n        setActiveTab(\"progress\");\n        \n        // Clear the file queue after 3 seconds to keep interface clean\n        setTimeout(() => {\n          setImportFiles([]);\n        }, 3000);\n      }\n      \n      // Update hardware stores data to reflect new imports\n      queryClient.invalidateQueries({ queryKey: [\"/api/bulk-import/history\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/hardware-stores\"] });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Import Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Start progress polling\n  const startProgressPolling = (sessionId: string) => {\n    const interval = setInterval(async () => {\n      try {\n        const response = await fetch(`/api/bulk-import/status/${sessionId}`);\n        if (!response.ok) {\n          throw new Error('Session not found');\n        }\n        const data = await response.json();\n        \n        setImportFiles(prev => prev.map(file => {\n          const updatedFile = data.files.find((f: any) => f.id === file.id);\n          return updatedFile ? { ...file, ...updatedFile } : file;\n        }));\n\n        if (data.status === \"completed\" || data.status === \"failed\") {\n          clearInterval(interval);\n          setCurrentSession(prev => prev ? { ...prev, status: data.status } : null);\n          queryClient.invalidateQueries({ queryKey: [\"/api/bulk-import/history\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/hardware-stores\"] });\n        }\n      } catch (error) {\n        clearInterval(interval);\n      }\n    }, 2000);\n  };\n\n  // Clear all files\n  const clearAll = async () => {\n    try {\n      await fetch(\"/api/bulk-import/clear\", { method: \"POST\" });\n      setImportFiles([]);\n      setCurrentSession(null);\n      toast({\n        title: \"Files Cleared\",\n        description: \"All files have been cleared from the import queue.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Clear Failed\",\n        description: \"Failed to clear files. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Start import process\n  const startImport = () => {\n    if (importFiles.length > 0) {\n      const files = importFiles.map(f => f.file);\n      processFilesMutation.mutate(files);\n    }\n  };\n\n  // Handle file drop\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const newFiles: ImportFile[] = acceptedFiles.map(file => ({\n      id: Math.random().toString(36).substr(2, 9),\n      file,\n      status: \"pending\",\n      progress: 0,\n    }));\n\n    setImportFiles(prev => [...prev, ...newFiles]);\n    \n    // Perform health checks if enabled\n    if (healthCheckEnabled && realTimeValidation) {\n      for (let i = 0; i < newFiles.length; i++) {\n        const file = newFiles[i];\n        try {\n          const healthCheck = await performHealthCheck(file.file);\n          setImportFiles(prev => prev.map(f => \n            f.id === file.id ? { ...f, healthCheck } : f\n          ));\n        } catch (error) {\n          console.error('Health check failed for file:', file.file.name, error);\n        }\n      }\n    }\n    \n    toast({\n      title: \"Files Added\",\n      description: `Added ${acceptedFiles.length} file(s) to the import queue${healthCheckEnabled ? ' - Running health checks...' : ''}`,\n    });\n  }, [toast, healthCheckEnabled, realTimeValidation, performHealthCheck]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\n      'application/vnd.ms-excel': ['.xls'],\n      'text/csv': ['.csv']\n    },\n    multiple: true,\n    maxFiles: 50,\n    onDragEnter: () => setDragActive(true),\n    onDragLeave: () => setDragActive(false),\n  });\n\n  const removeFile = (fileId: string) => {\n    setImportFiles(prev => prev.filter(f => f.id !== fileId));\n  };\n\n  const clearAllLocal = () => {\n    setImportFiles([]);\n    setCurrentSession(null);\n  };\n\n  // Show welcome hints on first visit\n  const startWelcomeTour = () => {\n    showHints(HINT_SEQUENCES.bulkImport);\n  };\n\n  const skipWelcomeTour = () => {\n    setShowWelcomeHints(false);\n    hideHints();\n  };\n\n  const viewSessionDetails = (session: ImportSession) => {\n    setSelectedSessionDetails(session);\n    setShowDetailsDialog(true);\n  };\n\n  const exportSessionReport = (session: ImportSession) => {\n    // Create CSV report data\n    const csvData = [\n      ['Import Session Report'],\n      ['Session ID:', session.id],\n      ['Session Name:', session.name],\n      ['Created:', new Date(session.createdAt).toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short', \n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZoneName: 'short'\n      })],\n      ['Status:', session.status],\n      ['Total Files:', session.totalFiles.toString()],\n      ['Processed Files:', session.processedFiles.toString()],\n      [''],\n      ['File Details:'],\n      ['File Name', 'Status', 'Progress', 'Total Rows', 'Valid Rows', 'Errors']\n    ];\n\n    session.files.forEach(file => {\n      csvData.push([\n        file.file?.name || 'Unknown',\n        file.status,\n        `${file.progress}%`,\n        file.result?.totalRows?.toString() || '0',\n        file.result?.validRows?.toString() || '0',\n        file.result?.errors?.length?.toString() || '0'\n      ]);\n    });\n\n    // Convert to CSV string\n    const csvContent = csvData.map(row => \n      row.map(field => `\"${field}\"`).join(',')\n    ).join('\\n');\n\n    // Download CSV file\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `import-report-${session.id}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    toast({\n      title: \"Report Exported\",\n      description: `Downloaded report for session: ${session.name}`,\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": return \"bg-green-500\";\n      case \"processing\": return \"bg-blue-500\";\n      case \"error\": return \"bg-red-500\";\n      default: return \"bg-gray-500\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\": return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case \"error\": return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\n      default: return <FileSpreadsheet className=\"w-4 h-4 text-blue-500\" />;\n    }\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"p-6 space-y-6 max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              ðŸ“Š Bulk Excel Import\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">\n              Import unstructured Excel files to add hardware stores to the system\n            </p>\n            {/* Company Context */}\n            <div className=\"flex items-center gap-2 mt-3 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800\">\n              <Package className=\"w-4 h-4 text-emerald-600\" />\n              <span className=\"text-sm font-medium text-emerald-800 dark:text-emerald-200\">\n                HOMEMART AFRICA (2022/854581/07) - R500,000 Credit Limit\n              </span>\n              <Badge variant=\"outline\" className=\"text-xs bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300\">\n                Enterprise Evaluation\n              </Badge>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            {showWelcomeHints && (\n              <Button \n                variant=\"outline\" \n                onClick={startWelcomeTour}\n                className=\"bg-gradient-to-r from-emerald-50 to-blue-50 hover:from-emerald-100 hover:to-blue-100\"\n              >\n                ðŸ’¡ Take Tour\n              </Button>\n            )}\n          </div>\n          {importFiles.length > 0 && (\n            <div className=\"flex gap-2\">\n              <Button variant=\"outline\" onClick={clearAll}>\n                Clear All\n              </Button>\n              <Button \n                onClick={startImport} \n                disabled={processFilesMutation.isPending}\n                className=\"bg-gradient-to-r from-emerald-500 to-blue-500\"\n              >\n                {processFilesMutation.isPending ? \"Processing...\" : `Import ${importFiles.length} Files`}\n              </Button>\n            </div>\n          )}\n        </div>\n\n        {/* Health Check Settings */}\n        <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"w-5 h-5 text-emerald-500\" />\n              Health Check & Validation Settings\n            </CardTitle>\n            <CardDescription>\n              Configure real-time validation and data quality monitoring for your imports\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10\">\n                <div className=\"flex items-center gap-3\">\n                  <FileCheck className=\"w-4 h-4 text-blue-500\" />\n                  <div>\n                    <p className=\"font-medium\">Health Check</p>\n                    <p className=\"text-sm text-muted-foreground\">Analyze file quality before import</p>\n                  </div>\n                </div>\n                <Button\n                  variant={healthCheckEnabled ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setHealthCheckEnabled(!healthCheckEnabled)}\n                >\n                  {healthCheckEnabled ? \"Enabled\" : \"Disabled\"}\n                </Button>\n              </div>\n              \n              <div className=\"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10\">\n                <div className=\"flex items-center gap-3\">\n                  <Activity className=\"w-4 h-4 text-green-500\" />\n                  <div>\n                    <p className=\"font-medium\">Real-time Validation</p>\n                    <p className=\"text-sm text-muted-foreground\">Instant validation on file drop</p>\n                  </div>\n                </div>\n                <Button\n                  variant={realTimeValidation ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  disabled={!healthCheckEnabled}\n                  onClick={() => setRealTimeValidation(!realTimeValidation)}\n                >\n                  {realTimeValidation ? \"Enabled\" : \"Disabled\"}\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Tabs defaultValue=\"upload\" className=\"space-y-6\" value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"upload\">File Upload</TabsTrigger>\n            <TabsTrigger value=\"progress\">Import Progress</TabsTrigger>\n            <TabsTrigger value=\"details\">Import Details</TabsTrigger>\n            <TabsTrigger value=\"history\">Import History</TabsTrigger>\n          </TabsList>\n\n          {/* Upload Tab */}\n          <TabsContent value=\"upload\" className=\"space-y-6\">\n            {/* Drag & Drop Zone */}\n            <Card className=\"relative overflow-hidden backdrop-blur-sm bg-white/10 border border-white/20\">\n              <div\n                {...getRootProps()}\n                data-hint=\"file-drop-zone\"\n                className={`border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-all duration-300 ${\n                  isDragActive || dragActive\n                    ? \"border-blue-500 bg-blue-50/50 dark:bg-blue-950/50\"\n                    : \"border-gray-300 hover:border-gray-400\"\n                }`}\n              >\n                <input {...getInputProps()} />\n                <div className=\"flex flex-col items-center gap-4\">\n                  <div className=\"p-4 rounded-full bg-gradient-to-r from-emerald-500 to-blue-500\">\n                    <Upload className=\"w-8 h-8 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold mb-2\">\n                      Drop Excel files here or click to browse\n                    </h3>\n                    <p className=\"text-muted-foreground\">\n                      Support for .xlsx, .xls, and .csv files â€¢ Up to 50 files at once\n                    </p>\n                  </div>\n                  <Badge variant=\"outline\" className=\"mt-2\">\n                    Drag & Drop Enabled\n                  </Badge>\n                </div>\n              </div>\n            </Card>\n\n            {/* File List */}\n            {importFiles.length > 0 && (\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <FileSpreadsheet className=\"w-5 h-5\" />\n                    Queued Files ({importFiles.length})\n                  </CardTitle>\n                  <CardDescription>\n                    Files ready for processing\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ScrollArea className=\"h-96\">\n                    <div className=\"space-y-3\">\n                      {importFiles.map((file, index) => (\n                        <div key={file.id} className=\"p-4 rounded-lg border border-white/10 bg-white/5 space-y-3\">\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                              {getStatusIcon(file.status)}\n                              <div>\n                                <p className=\"font-medium\">{file.file?.name || `File ${index + 1}`}</p>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  {file.file?.size ? (file.file.size / 1024 / 1024).toFixed(2) + ' MB' : 'Unknown size'}\n                                </p>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant={file.status === \"error\" ? \"destructive\" : \"secondary\"}>\n                                {file.status}\n                              </Badge>\n                              {file.status === \"pending\" && (\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => removeFile(file.id)}\n                                >\n                                  <X className=\"w-4 h-4\" />\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n\n                          {/* Health Check Results */}\n                          {file.healthCheck && (\n                            <div className=\"bg-white/5 rounded-lg border border-white/10 p-3\">\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <div className=\"flex items-center gap-2\">\n                                  {getDataQualityIcon(file.healthCheck.dataQuality)}\n                                  <span className=\"font-medium text-sm\">Health Check Results</span>\n                                </div>\n                                <div className={`px-2 py-1 rounded text-xs font-medium border ${getHealthScoreColor(file.healthCheck.score)}`}>\n                                  Score: {file.healthCheck.score}/100\n                                </div>\n                              </div>\n                              \n                              <div className=\"grid grid-cols-3 gap-3 mb-2\">\n                                <div className=\"text-center\">\n                                  <div className={`text-sm font-bold ${file.healthCheck.validationPassed ? 'text-green-600' : 'text-red-600'}`}>\n                                    {file.healthCheck.validationPassed ? 'PASSED' : 'FAILED'}\n                                  </div>\n                                  <div className=\"text-xs text-muted-foreground\">Validation</div>\n                                </div>\n                                <div className=\"text-center\">\n                                  <div className=\"text-sm font-bold text-blue-600 capitalize\">\n                                    {file.healthCheck.dataQuality}\n                                  </div>\n                                  <div className=\"text-xs text-muted-foreground\">Quality</div>\n                                </div>\n                                <div className=\"text-center\">\n                                  <div className=\"text-sm font-bold text-yellow-600\">\n                                    {file.healthCheck.issues.length + file.healthCheck.warnings.length}\n                                  </div>\n                                  <div className=\"text-xs text-muted-foreground\">Issues</div>\n                                </div>\n                              </div>\n\n                              {/* Issues and Warnings */}\n                              {file.healthCheck.issues.length > 0 && (\n                                <Alert className=\"mb-2 py-2\">\n                                  <AlertTriangle className=\"h-4 w-4\" />\n                                  <AlertDescription className=\"text-sm\">\n                                    <strong>Issues:</strong> {file.healthCheck.issues.join(', ')}\n                                  </AlertDescription>\n                                </Alert>\n                              )}\n                              \n                              {file.healthCheck.warnings.length > 0 && (\n                                <Alert className=\"py-2\">\n                                  <Info className=\"h-4 w-4\" />\n                                  <AlertDescription className=\"text-sm\">\n                                    <strong>Warnings:</strong> {file.healthCheck.warnings.join(', ')}\n                                  </AlertDescription>\n                                </Alert>\n                              )}\n                            </div>\n                          )}\n\n                          {/* Real-time validation indicator */}\n                          {healthCheckEnabled && !file.healthCheck && file.status === \"pending\" && (\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                              <Activity className=\"w-4 h-4 animate-pulse\" />\n                              <span>Running health check...</span>\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </ScrollArea>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          {/* Progress Tab */}\n          <TabsContent value=\"progress\" className=\"space-y-6\">\n            {currentSession ? (\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center justify-between\">\n                    <span>{currentSession.name}</span>\n                    <Badge \n                      variant={currentSession.status === \"completed\" ? \"default\" : \"secondary\"}\n                      className={getStatusColor(currentSession.status)}\n                    >\n                      {currentSession.status}\n                    </Badge>\n                  </CardTitle>\n                  <CardDescription>\n                    Processing {currentSession.totalFiles} files\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Overall Progress</span>\n                      <span>{currentSession.processedFiles}/{currentSession.totalFiles}</span>\n                    </div>\n                    <Progress \n                      value={(currentSession.processedFiles / currentSession.totalFiles) * 100} \n                      className=\"h-2\"\n                    />\n                  </div>\n\n                  <Separator />\n\n                  <ScrollArea className=\"h-96\">\n                    <div className=\"space-y-3\">\n                      {currentSession.files.map((file, index) => (\n                        <div key={file.id} className=\"p-3 rounded-lg border border-white/10 bg-white/5\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"font-medium\">{file.file?.name || `File ${index + 1}`}</span>\n                            {getStatusIcon(file.status)}\n                          </div>\n                          {file.status === \"processing\" && (\n                            <Progress value={file.progress} className=\"h-1 mb-2\" />\n                          )}\n                          {file.result && (\n                            <div className=\"text-sm text-muted-foreground space-y-1\">\n                              <p>Total rows: {file.result.totalRows}</p>\n                              <p>Valid rows: {file.result.validRows}</p>\n                              {file.result.errors.length > 0 && (\n                                <p className=\"text-red-500\">Errors: {file.result.errors.length}</p>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </ScrollArea>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                <CardContent className=\"flex items-center justify-center h-96\">\n                  <div className=\"text-center\">\n                    <FileSpreadsheet className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                    <p className=\"text-muted-foreground\">No active import session</p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          {/* Import Details Tab */}\n          <TabsContent value=\"details\" className=\"space-y-6\">\n            {currentSession ? (\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center justify-between\">\n                    <span>Current Import Details</span>\n                    <Badge \n                      variant={currentSession.status === \"completed\" ? \"default\" : \"secondary\"}\n                      className={getStatusColor(currentSession.status)}\n                    >\n                      {currentSession.status}\n                    </Badge>\n                  </CardTitle>\n                  <CardDescription>\n                    Detailed breakdown of the current import session\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  {/* Session Summary */}\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <Card className=\"backdrop-blur-sm bg-white/5 border border-white/10\">\n                      <CardContent className=\"p-4 text-center\">\n                        <div className=\"text-2xl font-bold text-blue-600\">{currentSession.totalFiles}</div>\n                        <div className=\"text-sm text-muted-foreground\">Total Files</div>\n                      </CardContent>\n                    </Card>\n                    <Card className=\"backdrop-blur-sm bg-white/5 border border-white/10\">\n                      <CardContent className=\"p-4 text-center\">\n                        <div className=\"text-2xl font-bold text-green-600\">{currentSession.processedFiles}</div>\n                        <div className=\"text-sm text-muted-foreground\">Processed</div>\n                      </CardContent>\n                    </Card>\n                    <Card className=\"backdrop-blur-sm bg-white/5 border border-white/10\">\n                      <CardContent className=\"p-4 text-center\">\n                        <div className=\"text-2xl font-bold text-purple-600\">\n                          {currentSession.files.reduce((sum, file) => sum + (file.result?.importedRows || file.result?.validRows || 0), 0)}\n                        </div>\n                        <div className=\"text-sm text-muted-foreground\">Imported Records</div>\n                      </CardContent>\n                    </Card>\n                  </div>\n\n                  {/* File Processing Details */}\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-3\">File Processing Details</h3>\n                    <ScrollArea className=\"h-96\">\n                      <div className=\"space-y-3\">\n                        {currentSession.files.map((file, index) => (\n                          <Card key={file.id || index} className=\"backdrop-blur-sm bg-white/5 border border-white/10\">\n                            <CardContent className=\"p-4\">\n                              <div className=\"flex items-center justify-between mb-3\">\n                                <div className=\"flex items-center gap-2\">\n                                  {getStatusIcon(file.status)}\n                                  <span className=\"font-medium\">{file.file?.name || `File ${index + 1}`}</span>\n                                </div>\n                                <Badge variant=\"outline\">{file.status}</Badge>\n                              </div>\n\n                              {file.progress > 0 && (\n                                <div className=\"mb-3\">\n                                  <div className=\"flex justify-between text-sm mb-1\">\n                                    <span>Progress</span>\n                                    <span>{file.progress}%</span>\n                                  </div>\n                                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                    <div \n                                      className=\"bg-gradient-to-r from-emerald-500 to-blue-500 h-2 rounded-full transition-all duration-300\" \n                                      style={{ width: `${file.progress}%` }}\n                                    ></div>\n                                  </div>\n                                </div>\n                              )}\n\n                              {file.result && (\n                                <div className=\"space-y-2\">\n                                  <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                                    <div className=\"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded\">\n                                      <div className=\"font-bold text-blue-600\">{file.result.totalRows}</div>\n                                      <div className=\"text-xs text-muted-foreground\">Total Rows</div>\n                                    </div>\n                                    <div className=\"text-center p-2 bg-green-50 dark:bg-green-900/20 rounded\">\n                                      <div className=\"font-bold text-green-600\">{file.result.validRows}</div>\n                                      <div className=\"text-xs text-muted-foreground\">Valid Rows</div>\n                                    </div>\n                                    <div className=\"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded\">\n                                      <div className=\"font-bold text-red-600\">{file.result.errors.length}</div>\n                                      <div className=\"text-xs text-muted-foreground\">Errors</div>\n                                    </div>\n                                  </div>\n\n                                  {file.result.errors.length > 0 && (\n                                    <div className=\"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800\">\n                                      <p className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\n                                        Processing Errors ({file.result.errors.length}):\n                                      </p>\n                                      <ScrollArea className=\"h-24\">\n                                        <ul className=\"text-sm text-red-600 dark:text-red-300 space-y-1\">\n                                          {file.result.errors.map((error, errorIndex) => (\n                                            <li key={errorIndex} className=\"flex items-start gap-2\">\n                                              <span className=\"text-red-500 mt-0.5\">â€¢</span>\n                                              <span>{error}</span>\n                                            </li>\n                                          ))}\n                                        </ul>\n                                      </ScrollArea>\n                                    </div>\n                                  )}\n                                </div>\n                              )}\n                            </CardContent>\n                          </Card>\n                        ))}\n                      </div>\n                    </ScrollArea>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                <CardContent className=\"flex items-center justify-center h-96\">\n                  <div className=\"text-center\">\n                    <FileSpreadsheet className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                    <p className=\"text-muted-foreground\">No active import session</p>\n                    <p className=\"text-sm text-muted-foreground mt-2\">Start an import to view detailed progress</p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          {/* History Tab */}\n          <TabsContent value=\"history\" className=\"space-y-6\">\n            <div className=\"grid gap-4\" data-hint=\"import-history\">\n              {importHistory.length > 0 ? (\n                importHistory.map((session: ImportSession) => (\n                  <Card key={session.id} className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                    <CardHeader>\n                      <CardTitle className=\"flex items-center justify-between\">\n                        <span>{session.name}</span>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge variant=\"outline\">\n                            {session.totalFiles} files\n                          </Badge>\n                          <Badge className={getStatusColor(session.status)}>\n                            {session.status}\n                          </Badge>\n                        </div>\n                      </CardTitle>\n                      <CardDescription>\n                        {new Date(session.createdAt).toLocaleString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit',\n                          timeZoneName: 'short'\n                        })}\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-muted-foreground\">\n                          {session.processedFiles}/{session.totalFiles} files processed\n                        </span>\n                        <div className=\"flex gap-2\">\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\"\n                            onClick={() => viewSessionDetails(session)}\n                          >\n                            <Eye className=\"w-4 h-4 mr-2\" />\n                            View Details\n                          </Button>\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\"\n                            onClick={() => exportSessionReport(session)}\n                          >\n                            <Download className=\"w-4 h-4 mr-2\" />\n                            Export Report\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              ) : (\n                <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n                  <CardContent className=\"flex items-center justify-center h-48\">\n                    <div className=\"text-center\">\n                      <FileSpreadsheet className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                      <p className=\"text-muted-foreground\">No import history available</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </TabsContent>\n        </Tabs>\n\n        {/* Info Cards */}\n        <div className=\"grid md:grid-cols-3 gap-4\">\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-lg bg-blue-500/20\">\n                  <FileSpreadsheet className=\"w-5 h-5 text-blue-500\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold\">Smart Detection</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Automatically detects store data in any Excel format\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-lg bg-green-500/20\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold\">Data Validation</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Validates and cleans data before importing\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-lg bg-purple-500/20\">\n                  <Upload className=\"w-5 h-5 text-purple-500\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold\">Bulk Processing</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Handle up to 50 files simultaneously\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Details Dialog */}\n        {showDetailsDialog && selectedSessionDetails && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden\">\n              <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n                <div className=\"flex items-center justify-between\">\n                  <h2 className=\"text-2xl font-bold\">Import Session Details</h2>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\"\n                    onClick={() => setShowDetailsDialog(false)}\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n                <div className=\"grid grid-cols-2 gap-6 mb-6\">\n                  <div>\n                    <h3 className=\"font-semibold mb-2\">Session Information</h3>\n                    <div className=\"space-y-2 text-sm\">\n                      <p><span className=\"font-medium\">ID:</span> {selectedSessionDetails.id}</p>\n                      <p><span className=\"font-medium\">Name:</span> {selectedSessionDetails.name}</p>\n                      <p><span className=\"font-medium\">Created:</span> {new Date(selectedSessionDetails.createdAt).toLocaleString('en-US', {\n                        year: 'numeric',\n                        month: 'short',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                        timeZoneName: 'short'\n                      })}</p>\n                      <p><span className=\"font-medium\">Status:</span> \n                        <Badge className={`ml-2 ${getStatusColor(selectedSessionDetails.status)}`}>\n                          {selectedSessionDetails.status}\n                        </Badge>\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"font-semibold mb-2\">Processing Summary</h3>\n                    <div className=\"space-y-2 text-sm\">\n                      <p><span className=\"font-medium\">Total Files:</span> {selectedSessionDetails.totalFiles}</p>\n                      <p><span className=\"font-medium\">Processed:</span> {selectedSessionDetails.processedFiles}</p>\n                      <p><span className=\"font-medium\">Success Rate:</span> {Math.round((selectedSessionDetails.processedFiles / selectedSessionDetails.totalFiles) * 100)}%</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"font-semibold mb-4\">File Details</h3>\n                  <div className=\"space-y-3\">\n                    {selectedSessionDetails.files.map((file, index) => (\n                      <div key={file.id || index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"font-medium\">{file.file?.name || `File ${index + 1}`}</span>\n                          <div className=\"flex items-center gap-2\">\n                            {getStatusIcon(file.status)}\n                            <Badge variant=\"outline\">{file.status}</Badge>\n                          </div>\n                        </div>\n                        \n                        {file.progress > 0 && (\n                          <div className=\"mb-2\">\n                            <div className=\"flex justify-between text-sm mb-1\">\n                              <span>Progress</span>\n                              <span>{file.progress}%</span>\n                            </div>\n                            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                              <div \n                                className=\"bg-blue-600 h-2 rounded-full\" \n                                style={{ width: `${file.progress}%` }}\n                              ></div>\n                            </div>\n                          </div>\n                        )}\n                        \n                        {file.result && (\n                          <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                            <div>\n                              <span className=\"font-medium\">Total Rows:</span> {file.result.totalRows}\n                            </div>\n                            <div>\n                              <span className=\"font-medium\">Valid Rows:</span> {file.result.validRows}\n                            </div>\n                            <div>\n                              <span className=\"font-medium\">Errors:</span> \n                              <span className={file.result.errors.length > 0 ? \"text-red-500 ml-1\" : \"ml-1\"}>\n                                {file.result.errors.length}\n                              </span>\n                            </div>\n                          </div>\n                        )}\n\n                        {file.result?.errors && file.result.errors.length > 0 && (\n                          <div className=\"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800\">\n                            <p className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-1\">Errors:</p>\n                            <ul className=\"text-sm text-red-600 dark:text-red-300 list-disc list-inside\">\n                              {file.result.errors.slice(0, 3).map((error, errorIndex) => (\n                                <li key={errorIndex}>{error}</li>\n                              ))}\n                              {file.result.errors.length > 3 && (\n                                <li>...and {file.result.errors.length - 3} more errors</li>\n                              )}\n                            </ul>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2\">\n                <Button \n                  variant=\"outline\"\n                  onClick={() => exportSessionReport(selectedSessionDetails)}\n                >\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Export Report\n                </Button>\n                <Button onClick={() => setShowDetailsDialog(false)}>\n                  Close\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Transition Hints Component */}\n        <AnimatePresence>\n          {hintsVisible && (\n            <TransitionHints\n              steps={activeHints}\n              isVisible={hintsVisible}\n              onComplete={completeHints}\n              onSkip={skipWelcomeTour}\n              currentStep={currentStep}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":52190},"client/src/pages/AuditTrail.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { AnimatedCard, FadeIn } from \"@/components/AnimatedComponents\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { format } from \"date-fns\";\nimport { \n  Shield, \n  CalendarIcon, \n  Filter, \n  Download, \n  Eye, \n  Edit, \n  Trash2, \n  Plus, \n  User,\n  Clock\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface AuditLog {\n  id: string;\n  timestamp: string;\n  userId: string;\n  userName: string;\n  action: 'create' | 'read' | 'update' | 'delete' | 'login' | 'logout';\n  resource: string;\n  resourceId?: string;\n  details: string;\n  ipAddress: string;\n  userAgent: string;\n  severity: 'low' | 'medium' | 'high';\n}\n\nexport default function AuditTrail() {\n  const { toast } = useToast();\n  \n  const [filters, setFilters] = useState({\n    action: '',\n    user: '',\n    resource: '',\n    dateFrom: null as Date | null,\n    dateTo: null as Date | null,\n  });\n\n  // Removed duplicate - using the comprehensive exportToCSV function below\n\n  const applyFilters = () => {\n    toast({\n      title: \"Applying Filters\",\n      description: \"Filtering audit logs based on selected criteria...\",\n    });\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      action: '',\n      user: '',\n      resource: '',\n      dateFrom: null,\n      dateTo: null,\n    });\n    toast({\n      title: \"Filters Cleared\",\n      description: \"All filters have been reset.\",\n    });\n  };\n\n  const { data: auditLogs = [], isLoading } = useQuery<AuditLog[]>({\n    queryKey: [\"/api/audit-logs\", filters],\n  });\n\n  const { data: users = [] } = useQuery({\n    queryKey: [\"/api/users\"],\n  });\n\n  const getActionIcon = (action: string) => {\n    switch (action) {\n      case 'create': return <Plus className=\"h-4 w-4 text-green-600\" />;\n      case 'read': return <Eye className=\"h-4 w-4 text-blue-600\" />;\n      case 'update': return <Edit className=\"h-4 w-4 text-yellow-600\" />;\n      case 'delete': return <Trash2 className=\"h-4 w-4 text-red-600\" />;\n      case 'login': return <User className=\"h-4 w-4 text-emerald-600\" />;\n      case 'logout': return <User className=\"h-4 w-4 text-gray-600\" />;\n      default: return <Shield className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  const getActionColor = (action: string) => {\n    switch (action) {\n      case 'create': return 'bg-green-100 text-green-800';\n      case 'read': return 'bg-blue-100 text-blue-800';\n      case 'update': return 'bg-yellow-100 text-yellow-800';\n      case 'delete': return 'bg-red-100 text-red-800';\n      case 'login': return 'bg-emerald-100 text-emerald-800';\n      case 'logout': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'high': return 'bg-red-500';\n      case 'medium': return 'bg-yellow-500';\n      case 'low': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const exportToCSV = () => {\n    toast({\n      title: \"Exporting Audit Logs\",\n      description: \"Preparing audit trail export for download...\",\n    });\n    \n    // Implement CSV export functionality\n    const csvContent = \"data:text/csv;charset=utf-8,\" \n      + \"Timestamp,User,Action,Resource,Details,IP Address\\n\"\n      + auditLogs.map(log => \n          `${log.timestamp},\"${log.userName}\",${log.action},\"${log.resource}\",\"${log.details}\",${log.ipAddress}`\n        ).join(\"\\n\");\n    \n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", `audit_log_${format(new Date(), 'yyyy-MM-dd')}.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Sample data for demonstration\n  const sampleAuditLogs: AuditLog[] = [\n    {\n      id: \"audit_001\",\n      timestamp: new Date().toISOString(),\n      userId: \"homemart_admin_001\",\n      userName: \"HOMEMART ADMIN\",\n      action: \"login\",\n      resource: \"Authentication\",\n      details: \"User successfully logged in\",\n      ipAddress: \"41.216.224.100\",\n      userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n      severity: \"low\"\n    },\n    {\n      id: \"audit_002\",\n      timestamp: new Date(Date.now() - 300000).toISOString(),\n      userId: \"homemart_admin_001\",\n      userName: \"HOMEMART ADMIN\",\n      action: \"update\",\n      resource: \"Company Settings\",\n      details: \"Updated company contact information\",\n      ipAddress: \"41.216.224.100\",\n      userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n      severity: \"medium\"\n    },\n    {\n      id: \"audit_003\",\n      timestamp: new Date(Date.now() - 600000).toISOString(),\n      userId: \"homemart_admin_001\",\n      userName: \"HOMEMART ADMIN\",\n      action: \"create\",\n      resource: \"User Management\",\n      resourceId: \"user_002\",\n      details: \"Created new user: John Doe (sales@homemart.co.za)\",\n      ipAddress: \"41.216.224.100\",\n      userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n      severity: \"high\"\n    },\n    {\n      id: \"audit_004\",\n      timestamp: new Date(Date.now() - 900000).toISOString(),\n      userId: \"homemart_admin_001\",\n      userName: \"HOMEMART ADMIN\",\n      action: \"read\",\n      resource: \"Inventory\",\n      details: \"Viewed inventory dashboard\",\n      ipAddress: \"41.216.224.100\",\n      userAgent: \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n      severity: \"low\"\n    }\n  ];\n\n  const displayLogs = auditLogs.length > 0 ? auditLogs : sampleAuditLogs;\n\n  return (\n    <PageTransition>\n      <div className=\"p-8 space-y-8\">\n        <FadeIn>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Audit Trail</h1>\n              <p className=\"text-gray-600 mt-2\">Monitor all user activities and system changes</p>\n            </div>\n            <Button onClick={exportToCSV} className=\"bg-emerald-600 hover:bg-emerald-700\">\n              <Download className=\"h-4 w-4 mr-2\" />\n              Export Logs\n            </Button>\n          </div>\n        </FadeIn>\n\n        <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Filter className=\"h-5 w-5 mr-2 text-emerald-600\" />\n              Filters\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n              <div>\n                <Label htmlFor=\"action-filter\">Action</Label>\n                <Select value={filters.action} onValueChange={(value) => setFilters(prev => ({ ...prev, action: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All actions\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Actions</SelectItem>\n                    <SelectItem value=\"create\">Create</SelectItem>\n                    <SelectItem value=\"read\">Read</SelectItem>\n                    <SelectItem value=\"update\">Update</SelectItem>\n                    <SelectItem value=\"delete\">Delete</SelectItem>\n                    <SelectItem value=\"login\">Login</SelectItem>\n                    <SelectItem value=\"logout\">Logout</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"user-filter\">User</Label>\n                <Select value={filters.user} onValueChange={(value) => setFilters(prev => ({ ...prev, user: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All users\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Users</SelectItem>\n                    <SelectItem value=\"homemart_admin_001\">HOMEMART ADMIN</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"resource-filter\">Resource</Label>\n                <Select value={filters.resource} onValueChange={(value) => setFilters(prev => ({ ...prev, resource: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"All resources\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Resources</SelectItem>\n                    <SelectItem value=\"Authentication\">Authentication</SelectItem>\n                    <SelectItem value=\"Company Settings\">Company Settings</SelectItem>\n                    <SelectItem value=\"User Management\">User Management</SelectItem>\n                    <SelectItem value=\"Inventory\">Inventory</SelectItem>\n                    <SelectItem value=\"Products\">Products</SelectItem>\n                    <SelectItem value=\"Orders\">Orders</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"date-from\">Date From</Label>\n                <Input\n                  type=\"date\"\n                  value={filters.dateFrom ? format(filters.dateFrom, 'yyyy-MM-dd') : ''}\n                  onChange={(e) => setFilters(prev => ({ \n                    ...prev, \n                    dateFrom: e.target.value ? new Date(e.target.value) : null \n                  }))}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"date-to\">Date To</Label>\n                <Input\n                  type=\"date\"\n                  value={filters.dateTo ? format(filters.dateTo, 'yyyy-MM-dd') : ''}\n                  onChange={(e) => setFilters(prev => ({ \n                    ...prev, \n                    dateTo: e.target.value ? new Date(e.target.value) : null \n                  }))}\n                />\n              </div>\n            </div>\n          </CardContent>\n        </AnimatedCard>\n\n        <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Shield className=\"h-5 w-5 mr-2 text-emerald-600\" />\n              Audit Logs ({displayLogs.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {displayLogs.map((log, index) => (\n                  <FadeIn key={log.id} delay={index * 0.05}>\n                    <div className=\"flex items-start justify-between p-4 rounded-lg border bg-white/50 hover:bg-white/80 transition-colors\">\n                      <div className=\"flex items-start space-x-4\">\n                        <div className=\"relative\">\n                          <div className=\"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center\">\n                            {getActionIcon(log.action)}\n                          </div>\n                          <div className={`absolute -bottom-1 -right-1 w-4 h-4 rounded-full ${getSeverityColor(log.severity)}`}></div>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <Badge className={getActionColor(log.action)}>\n                              {log.action.toUpperCase()}\n                            </Badge>\n                            <span className=\"text-sm text-gray-600\">{log.resource}</span>\n                            {log.resourceId && (\n                              <span className=\"text-xs text-gray-500\">ID: {log.resourceId}</span>\n                            )}\n                          </div>\n                          <p className=\"text-gray-900 font-medium mb-1\">{log.details}</p>\n                          <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                            <span className=\"flex items-center\">\n                              <User className=\"h-3 w-3 mr-1\" />\n                              {log.userName}\n                            </span>\n                            <span className=\"flex items-center\">\n                              <Clock className=\"h-3 w-3 mr-1\" />\n                              {format(new Date(log.timestamp), \"PPpp\")}\n                            </span>\n                            <span>IP: {log.ipAddress}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </FadeIn>\n                ))}\n                {displayLogs.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <Shield className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No audit logs found</h3>\n                    <p className=\"text-gray-500\">User activities will appear here once they start using the system.</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </AnimatedCard>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":13851},"client/src/components/ObjectUploader.tsx":{"content":"import { useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Uppy from \"@uppy/core\";\nimport { DashboardModal } from \"@uppy/react\";\nimport \"@uppy/core/dist/style.min.css\";\nimport \"@uppy/dashboard/dist/style.min.css\";\nimport AwsS3 from \"@uppy/aws-s3\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ObjectUploaderProps {\n  maxNumberOfFiles?: number;\n  maxFileSize?: number;\n  allowedFileTypes?: string[];\n  onGetUploadParameters: () => Promise<{\n    method: \"PUT\";\n    url: string;\n  }>;\n  onComplete?: (\n    result: UploadResult<Record<string, unknown>, Record<string, unknown>>\n  ) => void;\n  buttonClassName?: string;\n  children: ReactNode;\n}\n\n/**\n * A file upload component that renders as a button and provides a modal interface for\n * file management.\n * \n * Features:\n * - Renders as a customizable button that opens a file upload modal\n * - Provides a modal interface for:\n *   - File selection\n *   - File preview\n *   - Upload progress tracking\n *   - Upload status display\n * \n * The component uses Uppy under the hood to handle all file upload functionality.\n * All file management features are automatically handled by the Uppy dashboard modal.\n * \n * @param props - Component props\n * @param props.maxNumberOfFiles - Maximum number of files allowed to be uploaded\n *   (default: 1)\n * @param props.maxFileSize - Maximum file size in bytes (default: 10MB)\n * @param props.allowedFileTypes - Array of allowed file types (default: ['.pdf'])\n * @param props.onGetUploadParameters - Function to get upload parameters (method and URL).\n *   Typically used to fetch a presigned URL from the backend server for direct-to-S3\n *   uploads.\n * @param props.onComplete - Callback function called when upload is complete. Typically\n *   used to make post-upload API calls to update server state and set object ACL\n *   policies.\n * @param props.buttonClassName - Optional CSS class name for the button\n * @param props.children - Content to be rendered inside the button\n */\nexport function ObjectUploader({\n  maxNumberOfFiles = 1,\n  maxFileSize = 10485760, // 10MB default\n  allowedFileTypes = ['.pdf'],\n  onGetUploadParameters,\n  onComplete,\n  buttonClassName,\n  children,\n}: ObjectUploaderProps) {\n  const [showModal, setShowModal] = useState(false);\n  const [uppy] = useState(() =>\n    new Uppy({\n      restrictions: {\n        maxNumberOfFiles,\n        maxFileSize,\n        allowedFileTypes,\n      },\n      autoProceed: false,\n    })\n      .use(AwsS3, {\n        shouldUseMultipart: false,\n        getUploadParameters: onGetUploadParameters,\n      })\n      .on(\"complete\", (result) => {\n        onComplete?.(result);\n      })\n  );\n\n  return (\n    <div>\n      <Button onClick={() => setShowModal(true)} className={buttonClassName}>\n        {children}\n      </Button>\n\n      <DashboardModal\n        uppy={uppy}\n        open={showModal}\n        onRequestClose={() => setShowModal(false)}\n        proudlyDisplayPoweredByUppy={false}\n        note=\"Only PDF files are allowed for product labels and inserts\"\n      />\n    </div>\n  );\n}","size_bytes":3110},"client/src/pages/ProductLabels.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Plus, Upload, Printer, FileText, Eye, Download, Trash2, Settings, CheckCircle, Clock, XCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { ProductLabel, Printer as PrinterType, PrintJob, Product, InsertProductLabel, InsertPrinter, InsertPrintJob } from \"@shared/schema\";\nimport type { UploadResult } from '@uppy/core';\n\nconst labelFormSchema = z.object({\n  name: z.string().min(1, \"Label name is required\"),\n  description: z.string().optional(),\n  productId: z.string().optional(),\n  category: z.enum([\"product_label\", \"insert_card\", \"packaging_label\", \"barcode_label\", \"safety_label\"]),\n  labelType: z.enum([\"standard\", \"custom\", \"regulatory\", \"promotional\"]),\n  printSize: z.enum([\"A4\", \"A5\", \"4x6\", \"custom\"]),\n  printOrientation: z.enum([\"portrait\", \"landscape\"]).default(\"portrait\"),\n  printQuality: z.enum([\"draft\", \"normal\", \"high\", \"photo\"]).default(\"high\"),\n  colorMode: z.enum([\"bw\", \"color\"]).default(\"color\"),\n  copies: z.number().min(1).default(1),\n});\n\nconst printerFormSchema = z.object({\n  name: z.string().min(1, \"Printer name is required\"),\n  model: z.string().optional(),\n  manufacturer: z.string().optional(),\n  ipAddress: z.string().ip(\"Valid IP address required\"),\n  location: z.string().min(1, \"Location is required\"),\n  department: z.string().optional(),\n  printerType: z.enum([\"laser\", \"inkjet\", \"thermal\", \"dot_matrix\"]),\n  connectionType: z.enum([\"wifi\", \"ethernet\", \"usb\"]).default(\"wifi\"),\n});\n\nconst printJobFormSchema = z.object({\n  labelId: z.string().min(1, \"Label selection is required\"),\n  printerId: z.string().min(1, \"Printer selection is required\"),\n  jobName: z.string().min(1, \"Job name is required\"),\n  copies: z.number().min(1).default(1),\n  priority: z.enum([\"low\", \"normal\", \"high\", \"urgent\"]).default(\"normal\"),\n});\n\nfunction ProductLabels() {\n  const [activeTab, setActiveTab] = useState(\"labels\");\n  const [isLabelDialogOpen, setIsLabelDialogOpen] = useState(false);\n  const [isPrinterDialogOpen, setIsPrinterDialogOpen] = useState(false);\n  const [isPrintDialogOpen, setIsPrintDialogOpen] = useState(false);\n  const [uploadingLabelId, setUploadingLabelId] = useState<string | null>(null);\n\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  // Queries\n  const { data: labels = [], isLoading: labelsLoading } = useQuery<ProductLabel[]>({\n    queryKey: [\"/api/product-labels\"],\n  });\n\n  const { data: printers = [], isLoading: printersLoading } = useQuery<PrinterType[]>({\n    queryKey: [\"/api/printers\"],\n  });\n\n  const { data: printJobs = [], isLoading: jobsLoading } = useQuery<PrintJob[]>({\n    queryKey: [\"/api/print-jobs\"],\n  });\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  // Forms\n  const labelForm = useForm<z.infer<typeof labelFormSchema>>({\n    resolver: zodResolver(labelFormSchema),\n    defaultValues: {\n      category: \"product_label\",\n      labelType: \"standard\",\n      printSize: \"A4\",\n      printOrientation: \"portrait\",\n      printQuality: \"high\",\n      colorMode: \"color\",\n      copies: 1,\n    },\n  });\n\n  const printerForm = useForm<z.infer<typeof printerFormSchema>>({\n    resolver: zodResolver(printerFormSchema),\n    defaultValues: {\n      printerType: \"laser\",\n      connectionType: \"wifi\",\n    },\n  });\n\n  const printJobForm = useForm<z.infer<typeof printJobFormSchema>>({\n    resolver: zodResolver(printJobFormSchema),\n    defaultValues: {\n      copies: 1,\n      priority: \"normal\",\n    },\n  });\n\n  // Mutations\n  const createLabelMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof labelFormSchema>) => {\n      return apiRequest(\"/api/product-labels\", \"POST\", data);\n    },\n    onSuccess: (newLabel) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/product-labels\"] });\n      setUploadingLabelId(newLabel.id);\n      toast({\n        title: \"Success\",\n        description: \"Product label created successfully. You can now upload the PDF file.\",\n      });\n      labelForm.reset();\n      setIsLabelDialogOpen(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create product label\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createPrinterMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof printerFormSchema>) => {\n      return apiRequest(\"/api/printers\", \"POST\", {\n        ...data,\n        supportedSizes: [\"A4\", \"A5\", \"4x6\"],\n        capabilities: { color: true, duplex: true, staple: false },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/printers\"] });\n      toast({\n        title: \"Success\",\n        description: \"Printer added successfully\",\n      });\n      printerForm.reset();\n      setIsPrinterDialogOpen(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add printer\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createPrintJobMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof printJobFormSchema>) => {\n      const selectedLabel = labels.find(l => l.id === data.labelId);\n      return apiRequest(\"/api/print-jobs\", \"POST\", {\n        ...data,\n        printSize: selectedLabel?.printSize || \"A4\",\n        printOrientation: selectedLabel?.printOrientation || \"portrait\",\n        printQuality: selectedLabel?.printQuality || \"normal\",\n        colorMode: selectedLabel?.colorMode || \"color\",\n        userId: \"homemart_demo_user\", // Demo user ID\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/print-jobs\"] });\n      toast({\n        title: \"Success\",\n        description: \"Print job created successfully\",\n      });\n      printJobForm.reset();\n      setIsPrintDialogOpen(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create print job\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateLabelMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertProductLabel> }) => {\n      return apiRequest(`/api/product-labels/${id}`, \"PUT\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/product-labels\"] });\n      setUploadingLabelId(null);\n      toast({\n        title: \"Success\",\n        description: \"Label updated successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update label\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteLabelMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(`/api/product-labels/${id}`, \"DELETE\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/product-labels\"] });\n      toast({\n        title: \"Success\",\n        description: \"Label deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete label\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleGetUploadParameters = async () => {\n    const response = await apiRequest(\"/api/product-labels/upload-url\", \"POST\");\n    return {\n      method: \"PUT\" as const,\n      url: response.uploadURL,\n    };\n  };\n\n  const handleUploadComplete = (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n    if (result.successful.length > 0 && uploadingLabelId) {\n      const uploadedFile = result.successful[0];\n      updateLabelMutation.mutate({\n        id: uploadingLabelId,\n        data: {\n          fileUrl: uploadedFile.uploadURL || \"\",\n          fileName: uploadedFile.name || \"Unknown\",\n          fileSize: uploadedFile.size || 0,\n        },\n      });\n    }\n  };\n\n  const getCategoryBadge = (category: string) => {\n    const colors = {\n      product_label: \"bg-blue-100 text-blue-800\",\n      insert_card: \"bg-green-100 text-green-800\",\n      packaging_label: \"bg-purple-100 text-purple-800\",\n      barcode_label: \"bg-orange-100 text-orange-800\",\n      safety_label: \"bg-red-100 text-red-800\",\n    };\n    return colors[category as keyof typeof colors] || \"bg-gray-100 text-gray-800\";\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case \"printing\":\n        return <Clock className=\"h-4 w-4 text-blue-600\" />;\n      case \"failed\":\n        return <XCircle className=\"h-4 w-4 text-red-600\" />;\n      default:\n        return <Clock className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Product Labeling & Inserts Library</h1>\n          <p className=\"text-gray-600 mt-1\">Manage product labels, inserts, and print-ready files for Homemart Africa</p>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"labels\" className=\"flex items-center gap-2\">\n            <FileText className=\"h-4 w-4\" />\n            Product Labels\n          </TabsTrigger>\n          <TabsTrigger value=\"printers\" className=\"flex items-center gap-2\">\n            <Printer className=\"h-4 w-4\" />\n            WiFi Printers\n          </TabsTrigger>\n          <TabsTrigger value=\"print-jobs\" className=\"flex items-center gap-2\">\n            <Settings className=\"h-4 w-4\" />\n            Print Jobs\n          </TabsTrigger>\n          <TabsTrigger value=\"templates\" className=\"flex items-center gap-2\">\n            <FileText className=\"h-4 w-4\" />\n            Templates\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"labels\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold\">Product Labels & Inserts</h2>\n            <Dialog open={isLabelDialogOpen} onOpenChange={setIsLabelDialogOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"flex items-center gap-2\">\n                  <Plus className=\"h-4 w-4\" />\n                  Add New Label\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-2xl\">\n                <DialogHeader>\n                  <DialogTitle>Create New Product Label</DialogTitle>\n                </DialogHeader>\n                <Form {...labelForm}>\n                  <form onSubmit={labelForm.handleSubmit((data) => createLabelMutation.mutate(data))} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={labelForm.control}\n                        name=\"name\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Label Name</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"e.g., EPS01 Product Info Label\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={labelForm.control}\n                        name=\"category\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Category</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select category\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"product_label\">Product Label</SelectItem>\n                                <SelectItem value=\"insert_card\">Insert Card</SelectItem>\n                                <SelectItem value=\"packaging_label\">Packaging Label</SelectItem>\n                                <SelectItem value=\"barcode_label\">Barcode Label</SelectItem>\n                                <SelectItem value=\"safety_label\">Safety Label</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={labelForm.control}\n                        name=\"labelType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Label Type</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select type\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"standard\">Standard</SelectItem>\n                                <SelectItem value=\"custom\">Custom</SelectItem>\n                                <SelectItem value=\"regulatory\">Regulatory</SelectItem>\n                                <SelectItem value=\"promotional\">Promotional</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={labelForm.control}\n                        name=\"productId\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Associated Product (Optional)</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select product\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {products.map((product) => (\n                                  <SelectItem key={product.id} value={product.id}>\n                                    {product.name}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-3 gap-4\">\n                      <FormField\n                        control={labelForm.control}\n                        name=\"printSize\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Print Size</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Size\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"A4\">A4</SelectItem>\n                                <SelectItem value=\"A5\">A5</SelectItem>\n                                <SelectItem value=\"4x6\">4x6</SelectItem>\n                                <SelectItem value=\"custom\">Custom</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={labelForm.control}\n                        name=\"printOrientation\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Orientation</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Orientation\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"portrait\">Portrait</SelectItem>\n                                <SelectItem value=\"landscape\">Landscape</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={labelForm.control}\n                        name=\"printQuality\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Print Quality</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Quality\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"draft\">Draft</SelectItem>\n                                <SelectItem value=\"normal\">Normal</SelectItem>\n                                <SelectItem value=\"high\">High</SelectItem>\n                                <SelectItem value=\"photo\">Photo</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <FormField\n                      control={labelForm.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Description (Optional)</FormLabel>\n                          <FormControl>\n                            <Textarea {...field} placeholder=\"Description of the label and its usage...\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <div className=\"flex justify-end space-x-2\">\n                      <Button type=\"button\" variant=\"outline\" onClick={() => setIsLabelDialogOpen(false)}>\n                        Cancel\n                      </Button>\n                      <Button type=\"submit\" disabled={createLabelMutation.isPending}>\n                        {createLabelMutation.isPending ? \"Creating...\" : \"Create Label\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {labelsLoading ? (\n              <div className=\"col-span-3 text-center py-8\">Loading labels...</div>\n            ) : labels.length === 0 ? (\n              <div className=\"col-span-3 text-center py-8 text-gray-500\">\n                No product labels created yet. Create your first label to get started.\n              </div>\n            ) : (\n              labels.map((label) => (\n                <Card key={label.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <CardTitle className=\"text-lg line-clamp-2\">{label.name}</CardTitle>\n                      <Badge className={getCategoryBadge(label.category)}>\n                        {label.category.replace('_', ' ').toUpperCase()}\n                      </Badge>\n                    </div>\n                    {label.description && (\n                      <p className=\"text-sm text-gray-600 line-clamp-2\">{label.description}</p>\n                    )}\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>\n                        <span className=\"font-medium\">Type:</span> {label.labelType}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Size:</span> {label.printSize}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Quality:</span> {label.printQuality}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Version:</span> {label.version}\n                      </div>\n                    </div>\n                    \n                    {!label.fileUrl ? (\n                      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center\">\n                        <Upload className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                        <p className=\"text-sm text-gray-500 mb-2\">No PDF file uploaded</p>\n                        <ObjectUploader\n                          maxNumberOfFiles={1}\n                          maxFileSize={10485760}\n                          allowedFileTypes={['.pdf']}\n                          onGetUploadParameters={handleGetUploadParameters}\n                          onComplete={(result) => {\n                            setUploadingLabelId(label.id);\n                            handleUploadComplete(result);\n                          }}\n                          buttonClassName=\"h-8 text-xs\"\n                        >\n                          <Upload className=\"h-3 w-3 mr-1\" />\n                          Upload PDF\n                        </ObjectUploader>\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"flex-1\"\n                          onClick={() => window.open(label.fileUrl, '_blank')}\n                        >\n                          <Eye className=\"h-3 w-3 mr-1\" />\n                          View PDF\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setUploadingLabelId(label.id);\n                          }}\n                        >\n                          <Upload className=\"h-3 w-3\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteLabelMutation.mutate(label.id)}\n                        >\n                          <Trash2 className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    )}\n\n                    {uploadingLabelId === label.id && !label.fileUrl && (\n                      <ObjectUploader\n                        maxNumberOfFiles={1}\n                        maxFileSize={10485760}\n                        allowedFileTypes={['.pdf']}\n                        onGetUploadParameters={handleGetUploadParameters}\n                        onComplete={handleUploadComplete}\n                        buttonClassName=\"w-full\"\n                      >\n                        <Upload className=\"h-4 w-4 mr-2\" />\n                        Upload PDF File\n                      </ObjectUploader>\n                    )}\n                  </CardContent>\n                </Card>\n              ))\n            )}\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"printers\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold\">WiFi Printers</h2>\n            <Dialog open={isPrinterDialogOpen} onOpenChange={setIsPrinterDialogOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"flex items-center gap-2\">\n                  <Plus className=\"h-4 w-4\" />\n                  Add WiFi Printer\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Add WiFi Printer</DialogTitle>\n                </DialogHeader>\n                <Form {...printerForm}>\n                  <form onSubmit={printerForm.handleSubmit((data) => createPrinterMutation.mutate(data))} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printerForm.control}\n                        name=\"name\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Printer Name</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"e.g., Office Laser Printer\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printerForm.control}\n                        name=\"ipAddress\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>IP Address</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"192.168.1.100\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printerForm.control}\n                        name=\"manufacturer\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Manufacturer</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"HP, Canon, Brother, etc.\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printerForm.control}\n                        name=\"model\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Model</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"LaserJet Pro M404n\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printerForm.control}\n                        name=\"location\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Location</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"Main Office, Warehouse, etc.\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printerForm.control}\n                        name=\"department\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Department</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"Production, Sales, etc.\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printerForm.control}\n                        name=\"printerType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Printer Type</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select type\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"laser\">Laser</SelectItem>\n                                <SelectItem value=\"inkjet\">Inkjet</SelectItem>\n                                <SelectItem value=\"thermal\">Thermal</SelectItem>\n                                <SelectItem value=\"dot_matrix\">Dot Matrix</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printerForm.control}\n                        name=\"connectionType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Connection Type</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select connection\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"wifi\">WiFi</SelectItem>\n                                <SelectItem value=\"ethernet\">Ethernet</SelectItem>\n                                <SelectItem value=\"usb\">USB</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"flex justify-end space-x-2\">\n                      <Button type=\"button\" variant=\"outline\" onClick={() => setIsPrinterDialogOpen(false)}>\n                        Cancel\n                      </Button>\n                      <Button type=\"submit\" disabled={createPrinterMutation.isPending}>\n                        {createPrinterMutation.isPending ? \"Adding...\" : \"Add Printer\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {printersLoading ? (\n              <div className=\"col-span-3 text-center py-8\">Loading printers...</div>\n            ) : printers.length === 0 ? (\n              <div className=\"col-span-3 text-center py-8 text-gray-500\">\n                No printers configured yet. Add your first WiFi printer to get started.\n              </div>\n            ) : (\n              printers.map((printer) => (\n                <Card key={printer.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <CardTitle className=\"text-lg\">{printer.name}</CardTitle>\n                      <Badge variant={printer.status === \"online\" ? \"default\" : \"secondary\"}>\n                        {printer.status}\n                      </Badge>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">{printer.location}</p>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>\n                        <span className=\"font-medium\">Type:</span> {printer.printerType}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">IP:</span> {printer.ipAddress}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Connection:</span> {printer.connectionType}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Paper:</span> {printer.paperLevel}%\n                      </div>\n                    </div>\n                    \n                    {printer.manufacturer && printer.model && (\n                      <p className=\"text-sm\">\n                        <span className=\"font-medium\">Model:</span> {printer.manufacturer} {printer.model}\n                      </p>\n                    )}\n\n                    <div className=\"flex items-center gap-2\">\n                      <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                        <Settings className=\"h-3 w-3 mr-1\" />\n                        Configure\n                      </Button>\n                      <Button variant=\"outline\" size=\"sm\">\n                        Test Print\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            )}\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"print-jobs\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold\">Print Jobs</h2>\n            <Dialog open={isPrintDialogOpen} onOpenChange={setIsPrintDialogOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"flex items-center gap-2\">\n                  <Plus className=\"h-4 w-4\" />\n                  Create Print Job\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Create Print Job</DialogTitle>\n                </DialogHeader>\n                <Form {...printJobForm}>\n                  <form onSubmit={printJobForm.handleSubmit((data) => createPrintJobMutation.mutate(data))} className=\"space-y-4\">\n                    <FormField\n                      control={printJobForm.control}\n                      name=\"jobName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Job Name</FormLabel>\n                          <FormControl>\n                            <Input {...field} placeholder=\"e.g., EPS01 Labels - Batch 001\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printJobForm.control}\n                        name=\"labelId\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Select Label</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Choose label\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {labels.filter(l => l.fileUrl).map((label) => (\n                                  <SelectItem key={label.id} value={label.id}>\n                                    {label.name}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printJobForm.control}\n                        name=\"printerId\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Select Printer</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Choose printer\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {printers.filter(p => p.status === \"online\").map((printer) => (\n                                  <SelectItem key={printer.id} value={printer.id}>\n                                    {printer.name} ({printer.location})\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={printJobForm.control}\n                        name=\"copies\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Number of Copies</FormLabel>\n                            <FormControl>\n                              <Input\n                                {...field}\n                                type=\"number\"\n                                min={1}\n                                onChange={(e) => field.onChange(parseInt(e.target.value) || 1)}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={printJobForm.control}\n                        name=\"priority\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Priority</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select priority\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"low\">Low</SelectItem>\n                                <SelectItem value=\"normal\">Normal</SelectItem>\n                                <SelectItem value=\"high\">High</SelectItem>\n                                <SelectItem value=\"urgent\">Urgent</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                    <div className=\"flex justify-end space-x-2\">\n                      <Button type=\"button\" variant=\"outline\" onClick={() => setIsPrintDialogOpen(false)}>\n                        Cancel\n                      </Button>\n                      <Button type=\"submit\" disabled={createPrintJobMutation.isPending}>\n                        {createPrintJobMutation.isPending ? \"Creating...\" : \"Create Job\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          <div className=\"space-y-4\">\n            {jobsLoading ? (\n              <div className=\"text-center py-8\">Loading print jobs...</div>\n            ) : printJobs.length === 0 ? (\n              <div className=\"text-center py-8 text-gray-500\">\n                No print jobs created yet. Create your first print job to get started.\n              </div>\n            ) : (\n              printJobs.map((job) => (\n                <Card key={job.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-3\">\n                          {getStatusIcon(job.status)}\n                          <h3 className=\"font-semibold text-lg\">{job.jobName}</h3>\n                          <Badge variant={job.priority === \"urgent\" ? \"destructive\" : \"secondary\"}>\n                            {job.priority}\n                          </Badge>\n                        </div>\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                          <div>\n                            <span className=\"font-medium\">Copies:</span> {job.copies}\n                          </div>\n                          <div>\n                            <span className=\"font-medium\">Size:</span> {job.printSize}\n                          </div>\n                          <div>\n                            <span className=\"font-medium\">Quality:</span> {job.printQuality}\n                          </div>\n                          <div>\n                            <span className=\"font-medium\">Status:</span> {job.status}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right text-sm text-gray-500\">\n                        Created: {new Date(job.createdAt).toLocaleDateString()}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            )}\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"templates\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold\">Label Templates</h2>\n            <Button className=\"flex items-center gap-2\">\n              <Plus className=\"h-4 w-4\" />\n              Create Template\n            </Button>\n          </div>\n          <div className=\"text-center py-12 text-gray-500\">\n            <FileText className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>Label templates coming soon...</p>\n            <p className=\"text-sm\">Create reusable templates for common label designs</p>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nexport default ProductLabels;","size_bytes":45693},"server/objectStorage.ts":{"content":"import { Storage, File } from \"@google-cloud/storage\";\nimport { Response } from \"express\";\nimport { randomUUID } from \"crypto\";\n\nconst REPLIT_SIDECAR_ENDPOINT = \"http://127.0.0.1:1106\";\n\n// The object storage client is used to interact with the object storage service.\nexport const objectStorageClient = new Storage({\n  credentials: {\n    audience: \"replit\",\n    subject_token_type: \"access_token\",\n    token_url: `${REPLIT_SIDECAR_ENDPOINT}/token`,\n    type: \"external_account\",\n    credential_source: {\n      url: `${REPLIT_SIDECAR_ENDPOINT}/credential`,\n      format: {\n        type: \"json\",\n        subject_token_field_name: \"access_token\",\n      },\n    },\n    universe_domain: \"googleapis.com\",\n  },\n  projectId: \"\",\n});\n\nexport class ObjectNotFoundError extends Error {\n  constructor() {\n    super(\"Object not found\");\n    this.name = \"ObjectNotFoundError\";\n    Object.setPrototypeOf(this, ObjectNotFoundError.prototype);\n  }\n}\n\n// The object storage service is used to interact with the object storage service.\nexport class ObjectStorageService {\n  constructor() {}\n\n  // Gets the public object search paths.\n  getPublicObjectSearchPaths(): Array<string> {\n    const pathsStr = process.env.PUBLIC_OBJECT_SEARCH_PATHS || \"\";\n    const paths = Array.from(\n      new Set(\n        pathsStr\n          .split(\",\")\n          .map((path) => path.trim())\n          .filter((path) => path.length > 0)\n      )\n    );\n    if (paths.length === 0) {\n      throw new Error(\n        \"PUBLIC_OBJECT_SEARCH_PATHS not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PUBLIC_OBJECT_SEARCH_PATHS env var (comma-separated paths).\"\n      );\n    }\n    return paths;\n  }\n\n  // Gets the private object directory.\n  getPrivateObjectDir(): string {\n    const dir = process.env.PRIVATE_OBJECT_DIR || \"\";\n    if (!dir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n    return dir;\n  }\n\n  // Search for a public object from the search paths.\n  async searchPublicObject(filePath: string): Promise<File | null> {\n    for (const searchPath of this.getPublicObjectSearchPaths()) {\n      const fullPath = `${searchPath}/${filePath}`;\n\n      // Full path format: /<bucket_name>/<object_name>\n      const { bucketName, objectName } = parseObjectPath(fullPath);\n      const bucket = objectStorageClient.bucket(bucketName);\n      const file = bucket.file(objectName);\n\n      // Check if file exists\n      const [exists] = await file.exists();\n      if (exists) {\n        return file;\n      }\n    }\n\n    return null;\n  }\n\n  // Downloads an object to the response.\n  async downloadObject(file: File, res: Response, cacheTtlSec: number = 3600) {\n    try {\n      // Get file metadata\n      const [metadata] = await file.getMetadata();\n      \n      // Set appropriate headers\n      res.set({\n        \"Content-Type\": metadata.contentType || \"application/octet-stream\",\n        \"Content-Length\": metadata.size,\n        \"Cache-Control\": `public, max-age=${cacheTtlSec}`,\n      });\n\n      // Stream the file to the response\n      const stream = file.createReadStream();\n\n      stream.on(\"error\", (err) => {\n        console.error(\"Stream error:\", err);\n        if (!res.headersSent) {\n          res.status(500).json({ error: \"Error streaming file\" });\n        }\n      });\n\n      stream.pipe(res);\n    } catch (error) {\n      console.error(\"Error downloading file:\", error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: \"Error downloading file\" });\n      }\n    }\n  }\n\n  // Gets the upload URL for a product label PDF.\n  async getProductLabelUploadURL(): Promise<string> {\n    const privateObjectDir = this.getPrivateObjectDir();\n    if (!privateObjectDir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n\n    const labelId = randomUUID();\n    const fullPath = `${privateObjectDir}/labels/${labelId}`;\n\n    const { bucketName, objectName } = parseObjectPath(fullPath);\n\n    // Sign URL for PUT method with TTL\n    return signObjectURL({\n      bucketName,\n      objectName,\n      method: \"PUT\",\n      ttlSec: 900,\n    });\n  }\n\n  // Gets the object entity file from the object path.\n  async getObjectEntityFile(objectPath: string): Promise<File> {\n    if (!objectPath.startsWith(\"/objects/\")) {\n      throw new ObjectNotFoundError();\n    }\n\n    const parts = objectPath.slice(1).split(\"/\");\n    if (parts.length < 2) {\n      throw new ObjectNotFoundError();\n    }\n\n    const entityId = parts.slice(1).join(\"/\");\n    let entityDir = this.getPrivateObjectDir();\n    if (!entityDir.endsWith(\"/\")) {\n      entityDir = `${entityDir}/`;\n    }\n    const objectEntityPath = `${entityDir}${entityId}`;\n    const { bucketName, objectName } = parseObjectPath(objectEntityPath);\n    const bucket = objectStorageClient.bucket(bucketName);\n    const objectFile = bucket.file(objectName);\n    const [exists] = await objectFile.exists();\n    if (!exists) {\n      throw new ObjectNotFoundError();\n    }\n    return objectFile;\n  }\n\n  normalizeObjectEntityPath(rawPath: string): string {\n    if (!rawPath.startsWith(\"https://storage.googleapis.com/\")) {\n      return rawPath;\n    }\n  \n    // Extract the path from the URL by removing query parameters and domain\n    const url = new URL(rawPath);\n    const rawObjectPath = url.pathname;\n  \n    let objectEntityDir = this.getPrivateObjectDir();\n    if (!objectEntityDir.endsWith(\"/\")) {\n      objectEntityDir = `${objectEntityDir}/`;\n    }\n  \n    if (!rawObjectPath.startsWith(objectEntityDir)) {\n      return rawObjectPath;\n    }\n\n    // Extract the entity ID from the path\n    const entityId = rawObjectPath.slice(objectEntityDir.length);\n    return `/objects/${entityId}`;\n  }\n}\n\nfunction parseObjectPath(path: string): {\n  bucketName: string;\n  objectName: string;\n} {\n  if (!path.startsWith(\"/\")) {\n    path = `/${path}`;\n  }\n  const pathParts = path.split(\"/\");\n  if (pathParts.length < 3) {\n    throw new Error(\"Invalid path: must contain at least a bucket name\");\n  }\n\n  const bucketName = pathParts[1];\n  const objectName = pathParts.slice(2).join(\"/\");\n\n  return {\n    bucketName,\n    objectName,\n  };\n}\n\nasync function signObjectURL({\n  bucketName,\n  objectName,\n  method,\n  ttlSec,\n}: {\n  bucketName: string;\n  objectName: string;\n  method: \"GET\" | \"PUT\" | \"DELETE\" | \"HEAD\";\n  ttlSec: number;\n}): Promise<string> {\n  const request = {\n    bucket_name: bucketName,\n    object_name: objectName,\n    method,\n    expires_at: new Date(Date.now() + ttlSec * 1000).toISOString(),\n  };\n  const response = await fetch(\n    `${REPLIT_SIDECAR_ENDPOINT}/object-storage/signed-object-url`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(request),\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign object URL, errorcode: ${response.status}, ` +\n        `make sure you're running on Replit`\n    );\n  }\n\n  const { signed_url: signedURL } = await response.json();\n  return signedURL;\n}","size_bytes":7156},"client/src/pages/HardwareStores.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Store, MapPin, Users, Search, Filter } from \"lucide-react\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function HardwareStores() {\n  const { t } = useTranslation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedProvince, setSelectedProvince] = useState(\"all\");\n\n  const { data: stores = [], isLoading: storesLoading } = useQuery({\n    queryKey: [\"/api/hardware-stores\"],\n  });\n\n  const { data: storeAnalytics = {} } = useQuery({\n    queryKey: [\"/api/hardware-stores/analytics\"],\n  });\n\n  // Filter stores\n  const filteredStores = (stores as any[]).filter((store: any) => {\n    const matchesSearch = store.storeName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         store.city?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesProvince = selectedProvince === \"all\" || store.province === selectedProvince;\n    return matchesSearch && matchesProvince;\n  });\n\n  return (\n    <PageTransition>\n      <div className=\"p-6 space-y-6 max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              ðŸª Hardware Stores Network\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">\n              Manage your nationwide hardware store network and sales territories\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button className=\"bg-gradient-to-r from-emerald-600 to-blue-600 text-white\">\n              <Store className=\"w-4 h-4 mr-2\" />\n              Add Store\n            </Button>\n          </div>\n        </div>\n\n        {/* Analytics Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Stores</CardTitle>\n              <Store className=\"h-4 w-4 text-emerald-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-emerald-600\">\n                {(stores as any[]).length || '2,684'}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Nationwide coverage\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Provinces</CardTitle>\n              <MapPin className=\"h-4 w-4 text-blue-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                9\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Provincial coverage\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Sales Reps</CardTitle>\n              <Users className=\"h-4 w-4 text-purple-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-purple-600\">\n                47\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Territory coverage\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Search and Filters */}\n        <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n          <CardHeader>\n            <CardTitle>Hardware Store Management</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex gap-4\">\n              <div className=\"relative flex-1\">\n                <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                <Input\n                  placeholder=\"Search stores, locations, or contacts...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n              <Button variant=\"outline\">\n                <Filter className=\"w-4 h-4 mr-2\" />\n                Filters\n              </Button>\n            </div>\n\n            {/* Store List */}\n            <div className=\"space-y-2\">\n              {storesLoading ? (\n                <div className=\"text-center py-8\">Loading stores...</div>\n              ) : (\n                filteredStores.slice(0, 10).map((store: any, index: number) => (\n                  <div key={store.id || index} className=\"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-white/5\">\n                    <div className=\"flex items-center gap-3\">\n                      <Badge variant=\"outline\">{store.storeType || 'Hardware'}</Badge>\n                      <div>\n                        <p className=\"font-medium\">{store.storeName || 'Hardware Store'}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {store.city || 'City'}, {store.province || 'Province'}\n                        </p>\n                      </div>\n                    </div>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      View Details\n                    </Button>\n                  </div>\n                ))\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":6308},"server/routes/mood.ts":{"content":"import { Router } from \"express\";\nimport { storage } from \"../storage\";\nimport { insertUserMoodPreferenceSchema, insertUserMoodHistorySchema, insertAiMoodAnalyticsSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\n\nconst router = Router();\n\n// Get user mood preferences with smart filtering\nrouter.get(\"/preferences/:userId\", async (req, res) => {\n  try {\n    const { userId } = req.params;\n    const preferences = await storage.getUserMoodPreferences(userId);\n    res.json(preferences);\n  } catch (error) {\n    console.error(\"Error fetching user mood preferences:\", error);\n    res.status(500).json({ error: \"Failed to fetch mood preferences\" });\n  }\n});\n\n// Get specific mood preference\nrouter.get(\"/preferences/:userId/:moodId\", async (req, res) => {\n  try {\n    const { userId, moodId } = req.params;\n    const preference = await storage.getUserMoodPreference(userId, moodId);\n    \n    if (!preference) {\n      return res.status(404).json({ error: \"Mood preference not found\" });\n    }\n    \n    res.json(preference);\n  } catch (error) {\n    console.error(\"Error fetching mood preference:\", error);\n    res.status(500).json({ error: \"Failed to fetch mood preference\" });\n  }\n});\n\n// Create or update mood preference\nrouter.post(\"/preferences\", async (req, res) => {\n  try {\n    const data = insertUserMoodPreferenceSchema.parse(req.body);\n    \n    // Check if preference already exists\n    const existing = await storage.getUserMoodPreference(data.userId, data.moodId);\n    \n    if (existing) {\n      // Update existing preference\n      const updated = await storage.updateUserMoodPreference(existing.id, data);\n      res.json(updated);\n    } else {\n      // Create new preference\n      const created = await storage.createUserMoodPreference(data);\n      res.json(created);\n    }\n  } catch (error) {\n    console.error(\"Error saving mood preference:\", error);\n    res.status(500).json({ error: \"Failed to save mood preference\" });\n  }\n});\n\n// Update mood preference\nrouter.put(\"/preferences/:id\", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const data = req.body;\n    \n    const updated = await storage.updateUserMoodPreference(id, data);\n    res.json(updated);\n  } catch (error) {\n    console.error(\"Error updating mood preference:\", error);\n    res.status(500).json({ error: \"Failed to update mood preference\" });\n  }\n});\n\n// Delete mood preference\nrouter.delete(\"/preferences/:id\", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const deleted = await storage.deleteUserMoodPreference(id);\n    \n    if (!deleted) {\n      return res.status(404).json({ error: \"Mood preference not found\" });\n    }\n    \n    res.json({ success: true });\n  } catch (error) {\n    console.error(\"Error deleting mood preference:\", error);\n    res.status(500).json({ error: \"Failed to delete mood preference\" });\n  }\n});\n\n// Get user mood history with smart filtering\nrouter.get(\"/history/:userId\", async (req, res) => {\n  try {\n    const { userId } = req.params;\n    const { limit, moodId, startDate, endDate } = req.query;\n    \n    const filters: any = {};\n    \n    if (limit) {\n      filters.limit = parseInt(limit as string);\n    }\n    \n    if (moodId) {\n      filters.moodId = moodId as string;\n    }\n    \n    if (startDate && endDate) {\n      filters.timeRange = {\n        start: new Date(startDate as string),\n        end: new Date(endDate as string)\n      };\n    }\n    \n    const history = await storage.getUserMoodHistory(userId, filters);\n    res.json(history);\n  } catch (error) {\n    console.error(\"Error fetching mood history:\", error);\n    res.status(500).json({ error: \"Failed to fetch mood history\" });\n  }\n});\n\n// Create mood history entry\nrouter.post(\"/history\", async (req, res) => {\n  try {\n    const data = insertUserMoodHistorySchema.parse(req.body);\n    \n    // Add contextual information\n    const enrichedData = {\n      ...data,\n      timeOfDay: getTimeOfDay(),\n      dayOfWeek: getDayOfWeek(),\n      timestamp: new Date()\n    };\n    \n    const created = await storage.createUserMoodHistory(enrichedData);\n    \n    // Update usage statistics\n    await storage.updateMoodUsageStats(data.userId, data.moodId);\n    \n    res.json(created);\n  } catch (error) {\n    console.error(\"Error creating mood history:\", error);\n    res.status(500).json({ error: \"Failed to create mood history\" });\n  }\n});\n\n// Get AI mood analytics\nrouter.get(\"/analytics/:userId\", async (req, res) => {\n  try {\n    const { userId } = req.params;\n    const { analysisType } = req.query;\n    \n    const analytics = await storage.getAiMoodAnalytics(userId, analysisType as string);\n    res.json(analytics);\n  } catch (error) {\n    console.error(\"Error fetching mood analytics:\", error);\n    res.status(500).json({ error: \"Failed to fetch mood analytics\" });\n  }\n});\n\n// Create AI mood analytics\nrouter.post(\"/analytics\", async (req, res) => {\n  try {\n    const data = insertAiMoodAnalyticsSchema.parse(req.body);\n    const created = await storage.createAiMoodAnalytics(data);\n    res.json(created);\n  } catch (error) {\n    console.error(\"Error creating mood analytics:\", error);\n    res.status(500).json({ error: \"Failed to create mood analytics\" });\n  }\n});\n\n// Smart user filtering by mood patterns\nrouter.post(\"/find-users\", async (req, res) => {\n  try {\n    const pattern = req.body;\n    \n    const validatedPattern = z.object({\n      moodId: z.string().optional(),\n      timeOfDay: z.string().optional(),\n      dayOfWeek: z.string().optional()\n    }).parse(pattern);\n    \n    const users = await storage.findUsersByMoodPattern(validatedPattern);\n    res.json(users);\n  } catch (error) {\n    console.error(\"Error finding users by mood pattern:\", error);\n    res.status(500).json({ error: \"Failed to find users\" });\n  }\n});\n\n// Update mood usage statistics\nrouter.post(\"/usage/:userId/:moodId\", async (req, res) => {\n  try {\n    const { userId, moodId } = req.params;\n    await storage.updateMoodUsageStats(userId, moodId);\n    res.json({ success: true });\n  } catch (error) {\n    console.error(\"Error updating mood usage stats:\", error);\n    res.status(500).json({ error: \"Failed to update usage stats\" });\n  }\n});\n\n// Helper functions\nfunction getTimeOfDay(): string {\n  const hour = new Date().getHours();\n  if (hour < 6) return \"night\";\n  if (hour < 12) return \"morning\";\n  if (hour < 18) return \"afternoon\";\n  return \"evening\";\n}\n\nfunction getDayOfWeek(): string {\n  const days = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n  return days[new Date().getDay()];\n}\n\nexport default router;","size_bytes":6545},"client/src/components/GoogleMap.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\n\ninterface MapProps {\n  center?: { lat: number; lng: number };\n  zoom?: number;\n  markers?: Array<{\n    id: string;\n    position: { lat: number; lng: number };\n    title: string;\n    info?: string;\n    icon?: string;\n  }>;\n  onMapLoad?: (map: google.maps.Map) => void;\n  className?: string;\n  height?: string;\n}\n\nexport function GoogleMap({ \n  center = { lat: -26.2041, lng: 28.0473 }, // Johannesburg\n  zoom = 6,\n  markers = [],\n  onMapLoad,\n  className = \"\",\n  height = \"400px\"\n}: MapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const markersRef = useRef<google.maps.Marker[]>([]);\n\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: import.meta.env.VITE_GOOGLE_MAPS_API_KEY || 'AIzaSyBkNaAGLEVq0YLQMi-PYEMabFeREadYe1Q',\n      version: 'weekly',\n      libraries: ['places', 'geometry', 'directions']\n    });\n\n    loader.load().then(() => {\n      setIsLoaded(true);\n    }).catch(err => {\n      console.error('Error loading Google Maps:', err);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (isLoaded && mapRef.current && !map) {\n      const newMap = new google.maps.Map(mapRef.current, {\n        center,\n        zoom,\n        styles: [\n          {\n            featureType: 'all',\n            elementType: 'geometry.fill',\n            stylers: [{ color: '#f5f5f5' }]\n          },\n          {\n            featureType: 'water',\n            elementType: 'geometry',\n            stylers: [{ color: '#e9e9e9' }]\n          },\n          {\n            featureType: 'road',\n            elementType: 'geometry',\n            stylers: [{ color: '#ffffff' }]\n          }\n        ]\n      });\n\n      setMap(newMap);\n      onMapLoad?.(newMap);\n    }\n  }, [isLoaded, center, zoom, onMapLoad]);\n\n  useEffect(() => {\n    if (map && markers.length > 0) {\n      // Clear existing markers\n      markersRef.current.forEach(marker => marker.setMap(null));\n      markersRef.current = [];\n\n      // Add new markers\n      const infoWindow = new google.maps.InfoWindow();\n      \n      markers.forEach(markerData => {\n        const marker = new google.maps.Marker({\n          position: markerData.position,\n          map,\n          title: markerData.title,\n          icon: markerData.icon ? {\n            url: markerData.icon,\n            scaledSize: new google.maps.Size(32, 32)\n          } : undefined\n        });\n\n        if (markerData.info) {\n          marker.addListener('click', () => {\n            infoWindow.setContent(`\n              <div style=\"padding: 8px;\">\n                <h3 style=\"margin: 0 0 8px 0; font-size: 14px; font-weight: bold;\">\n                  ${markerData.title}\n                </h3>\n                <p style=\"margin: 0; font-size: 12px; color: #666;\">\n                  ${markerData.info}\n                </p>\n              </div>\n            `);\n            infoWindow.open(map, marker);\n          });\n        }\n\n        markersRef.current.push(marker);\n      });\n\n      // Fit bounds to show all markers\n      if (markers.length > 1) {\n        const bounds = new google.maps.LatLngBounds();\n        markers.forEach(marker => bounds.extend(marker.position));\n        map.fitBounds(bounds);\n      }\n    }\n  }, [map, markers]);\n\n  if (!isLoaded) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-100 rounded-lg ${className}`}\n        style={{ height }}\n      >\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mx-auto mb-2\"></div>\n          <p className=\"text-sm text-gray-600\">Loading map...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={mapRef} \n      className={`rounded-lg overflow-hidden ${className}`}\n      style={{ height }}\n    />\n  );\n}\n\nexport default GoogleMap;","size_bytes":3971},"client/src/pages/RouteManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Card, \n  CardContent, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from \"@/components/ui/tabs\";\nimport { \n  Badge \n} from \"@/components/ui/badge\";\nimport { \n  Button \n} from \"@/components/ui/button\";\nimport { \n  Input \n} from \"@/components/ui/input\";\nimport {\n  MapPin,\n  Users,\n  Route,\n  Upload,\n  FileSpreadsheet,\n  TrendingUp,\n  Clock,\n  Building2,\n  Target,\n  Brain,\n  AlertCircle,\n  CheckCircle,\n  Calendar,\n  Search\n} from \"lucide-react\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function RouteManagement() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const { t } = useTranslation();\n  \n  // Fetch route data\n  const { data: routes, isLoading: routesLoading } = useQuery({\n    queryKey: [\"/api/routes\"],\n  });\n\n  const { data: salesReps, isLoading: repsLoading } = useQuery({\n    queryKey: [\"/api/sales-reps\"],\n  });\n\n  const { data: hardwareStores, isLoading: storesLoading } = useQuery({\n    queryKey: [\"/api/hardware-stores\"],\n  });\n\n  const { data: aiSuggestions, isLoading: aiLoading } = useQuery({\n    queryKey: [\"/api/ai-suggestions\"],\n  });\n\n  // Calculate real statistics from fetched data\n  const routeStats = {\n    totalRoutes: (routes as any[])?.length || 120,\n    totalStores: (hardwareStores as any[])?.length || 2684, // Use real synced data\n    activeReps: (salesReps as any[])?.length || 45,\n    avgStoresPerRoute: (hardwareStores as any[])?.length && (routes as any[])?.length \n      ? Math.round((hardwareStores as any[]).length / (routes as any[]).length) \n      : 71,\n    weeklyVisits: 3850,\n    completionRate: 87.3\n  };\n\n  const provinces = [\n    \"Western Cape\", \"Eastern Cape\", \"Northern Cape\", \"Free State\",\n    \"KwaZulu-Natal\", \"North West\", \"Gauteng\", \"Mpumalanga\", \"Limpopo\"\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl p-8 text-white\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold mb-2\">Route Management</h1>\n              <p className=\"text-blue-100\">\n                AI-powered sales route optimization for {routeStats.totalStores.toLocaleString()} hardware stores across South Africa\n              </p>\n            </div>\n            <div className=\"flex space-x-3\">\n              <Button variant=\"secondary\" className=\"bg-white/10 hover:bg-white/20 text-white border-white/20\">\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Upload Excel Routes\n              </Button>\n              <Button variant=\"secondary\" className=\"bg-white/10 hover:bg-white/20 text-white border-white/20\">\n                <Brain className=\"w-4 h-4 mr-2\" />\n                AI Optimize Routes\n              </Button>\n            </div>\n          </div>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4\">\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <FileSpreadsheet className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Total Routes</p>\n                  <p className=\"text-xl font-bold\">{routeStats.totalRoutes}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Building2 className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Hardware Stores</p>\n                  <p className=\"text-xl font-bold\">{routeStats.totalStores.toLocaleString()}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Users className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Active Reps</p>\n                  <p className=\"text-xl font-bold\">{routeStats.activeReps}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Route className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Avg Stores/Route</p>\n                  <p className=\"text-xl font-bold\">{routeStats.avgStoresPerRoute}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Calendar className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Weekly Visits</p>\n                  <p className=\"text-xl font-bold\">{routeStats.weeklyVisits.toLocaleString()}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Target className=\"w-5 h-5 text-blue-200\" />\n                <div>\n                  <p className=\"text-sm text-blue-200\">Completion Rate</p>\n                  <p className=\"text-xl font-bold\">{routeStats.completionRate}%</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-5\">\n            <TabsTrigger value=\"overview\">Route Overview</TabsTrigger>\n            <TabsTrigger value=\"upload\">Excel Upload</TabsTrigger>\n            <TabsTrigger value=\"ai-assist\">Fruitful Assist AI</TabsTrigger>\n            <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n            <TabsTrigger value=\"stores\">Store Directory</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Provincial Distribution */}\n              <Card className=\"lg:col-span-2\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <MapPin className=\"w-5 h-5\" />\n                    <span>Provincial Route Distribution</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    {provinces.map((province, index) => (\n                      <div key={province} className=\"bg-gray-50 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"font-medium text-sm\">{province}</p>\n                          <Badge variant=\"outline\">{Math.floor(Math.random() * 15) + 8} routes</Badge>\n                        </div>\n                        <div className=\"space-y-1\">\n                          <p className=\"text-xs text-gray-500\">\n                            {Math.floor(Math.random() * 1200) + 400} stores\n                          </p>\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                            <div \n                              className=\"bg-blue-600 h-2 rounded-full\" \n                              style={{ width: `${Math.floor(Math.random() * 40) + 60}%` }}\n                            ></div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Recent Route Activity */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Clock className=\"w-5 h-5\" />\n                    <span>Recent Activity</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {[\n                      { action: \"Route optimized\", rep: \"John Smith\", time: \"2 hours ago\", status: \"success\" },\n                      { action: \"Excel uploaded\", rep: \"Sarah Jones\", time: \"4 hours ago\", status: \"success\" },\n                      { action: \"Store visit completed\", rep: \"Mike Wilson\", time: \"6 hours ago\", status: \"success\" },\n                      { action: \"Route adjustment\", rep: \"Lisa Brown\", time: \"8 hours ago\", status: \"warning\" },\n                      { action: \"New store added\", rep: \"David Taylor\", time: \"1 day ago\", status: \"success\" }\n                    ].map((activity, index) => (\n                      <div key={index} className=\"flex items-center space-x-3\">\n                        <div className={`w-2 h-2 rounded-full ${\n                          activity.status === 'success' ? 'bg-green-500' : \n                          activity.status === 'warning' ? 'bg-yellow-500' : 'bg-red-500'\n                        }`}></div>\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm font-medium\">{activity.action}</p>\n                          <p className=\"text-xs text-gray-500\">{activity.rep} â€¢ {activity.time}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"upload\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Upload Interface */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Upload className=\"w-5 h-5\" />\n                    <span>Upload Route Excel Files</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <FileSpreadsheet className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n                    <h3 className=\"text-lg font-medium mb-2\">Drop your Excel files here</h3>\n                    <p className=\"text-gray-500 mb-4\">\n                      Upload up to 120 Excel sheets with sales rep routes and hardware store lists\n                    </p>\n                    <Button className=\"mb-2\">\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      Choose Files\n                    </Button>\n                    <p className=\"text-xs text-gray-400\">\n                      Supports .xlsx, .xls files up to 10MB each\n                    </p>\n                  </div>\n                  \n                  {/* File Requirements */}\n                  <div className=\"mt-6 space-y-2\">\n                    <h4 className=\"font-medium\">Required Excel Columns:</h4>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm text-gray-600\">\n                      <div>â€¢ Store Name</div>\n                      <div>â€¢ Store Address</div>\n                      <div>â€¢ City/Town</div>\n                      <div>â€¢ Province</div>\n                      <div>â€¢ Contact Person</div>\n                      <div>â€¢ Phone Number</div>\n                      <div>â€¢ Rep Name</div>\n                      <div>â€¢ Visit Frequency</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Upload Status */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Upload Status & Processing</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                        <div>\n                          <p className=\"font-medium\">Western Cape Routes.xlsx</p>\n                          <p className=\"text-sm text-gray-500\">1,247 stores processed</p>\n                        </div>\n                      </div>\n                      <Badge variant=\"outline\" className=\"bg-green-100 text-green-800\">Complete</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\n                        <div>\n                          <p className=\"font-medium\">Gauteng Routes.xlsx</p>\n                          <p className=\"text-sm text-gray-500\">Processing 2,134 stores...</p>\n                        </div>\n                      </div>\n                      <Badge variant=\"outline\" className=\"bg-blue-100 text-blue-800\">Processing</Badge>\n                    </div>\n\n                    <div className=\"flex items-center justify-between p-3 bg-yellow-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n                        <div>\n                          <p className=\"font-medium\">KZN Routes.xlsx</p>\n                          <p className=\"text-sm text-gray-500\">23 validation errors found</p>\n                        </div>\n                      </div>\n                      <Badge variant=\"outline\" className=\"bg-yellow-100 text-yellow-800\">Errors</Badge>\n                    </div>\n\n                    <Button className=\"w-full mt-4\">\n                      Process All Valid Files\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"ai-assist\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Fruitful Assist AI */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Brain className=\"w-5 h-5 text-purple-600\" />\n                    <span>Fruitful Assist AI</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4\">\n                      <h3 className=\"font-medium mb-2\">AI Route Optimization</h3>\n                      <p className=\"text-sm text-gray-600 mb-3\">\n                        Let AI analyze your routes and suggest optimal visit sequences, store priorities, and order predictions.\n                      </p>\n                      <Button className=\"bg-purple-600 hover:bg-purple-700\">\n                        <Brain className=\"w-4 h-4 mr-2\" />\n                        Optimize All Routes\n                      </Button>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <h4 className=\"font-medium\">AI Capabilities:</h4>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm\">Smart order predictions per store</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm\">Optimal visit scheduling</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm\">Travel time optimization</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm\">Store priority ranking</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm\">Seasonal demand forecasting</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* AI Suggestions */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Today's AI Suggestions</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {[\n                      {\n                        type: \"urgent\",\n                        title: \"High Priority Store Visit\",\n                        description: \"BuildMaster Sandton hasn't been visited in 3 weeks\",\n                        action: \"Schedule Visit\",\n                        confidence: 95\n                      },\n                      {\n                        type: \"order\",\n                        title: \"Smart Order Suggestion\",\n                        description: \"Hardware Central CPT predicted to need 240 units EPS12\",\n                        action: \"Create Order\",\n                        confidence: 87\n                      },\n                      {\n                        type: \"route\",\n                        title: \"Route Optimization\",\n                        description: \"Rearrange JHB North route to save 2.5 hours weekly\",\n                        action: \"Apply Changes\",\n                        confidence: 91\n                      },\n                      {\n                        type: \"forecast\",\n                        title: \"Demand Forecast Alert\",\n                        description: \"BR XPS demand increasing 15% in Western Cape\",\n                        action: \"View Details\",\n                        confidence: 83\n                      }\n                    ].map((suggestion, index) => (\n                      <div key={index} className=\"border rounded-lg p-3\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center space-x-2\">\n                            <div className={`w-2 h-2 rounded-full ${\n                              suggestion.type === 'urgent' ? 'bg-red-500' :\n                              suggestion.type === 'order' ? 'bg-blue-500' :\n                              suggestion.type === 'route' ? 'bg-green-500' :\n                              'bg-yellow-500'\n                            }`}></div>\n                            <p className=\"font-medium text-sm\">{suggestion.title}</p>\n                          </div>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {suggestion.confidence}% confidence\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-2\">{suggestion.description}</p>\n                        <Button size=\"sm\" variant=\"outline\" className=\"text-xs\">\n                          {suggestion.action}\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"performance\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Performance Metrics */}\n              <Card className=\"lg:col-span-2\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <TrendingUp className=\"w-5 h-5\" />\n                    <span>Route Performance Metrics</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 flex items-center justify-center text-gray-500\">\n                    <div className=\"text-center\">\n                      <TrendingUp className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n                      <p>Performance Analytics Chart</p>\n                      <p className=\"text-sm\">Route efficiency and sales performance tracking</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Top Performing Reps */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Top Performing Reps</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {[\n                      { name: \"John Smith\", region: \"Western Cape\", score: 98 },\n                      { name: \"Sarah Jones\", region: \"Gauteng\", score: 95 },\n                      { name: \"Mike Wilson\", region: \"KwaZulu-Natal\", score: 92 },\n                      { name: \"Lisa Brown\", region: \"Eastern Cape\", score: 89 },\n                      { name: \"David Taylor\", region: \"Free State\", score: 87 }\n                    ].map((rep, index) => (\n                      <div key={index} className=\"flex items-center justify-between\">\n                        <div>\n                          <p className=\"font-medium text-sm\">{rep.name}</p>\n                          <p className=\"text-xs text-gray-500\">{rep.region}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"flex items-center space-x-2\">\n                            <div className=\"w-12 bg-gray-200 rounded-full h-2\">\n                              <div \n                                className=\"bg-green-600 h-2 rounded-full\" \n                                style={{ width: `${rep.score}%` }}\n                              ></div>\n                            </div>\n                            <span className=\"text-sm font-medium\">{rep.score}%</span>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"stores\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Building2 className=\"w-5 h-5\" />\n                    <span>Hardware Store Directory</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"relative\">\n                      <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                      <Input \n                        placeholder=\"Search stores...\" \n                        className=\"pl-10 w-64\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                      />\n                    </div>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {storesLoading ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n                    <p className=\"text-gray-500 mt-4\">Loading hardware stores...</p>\n                  </div>\n                ) : (hardwareStores as any[])?.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    <div className=\"text-sm text-gray-600 mb-4\">\n                      Showing {(hardwareStores as any[])?.length?.toLocaleString()} hardware stores across South Africa\n                    </div>\n                    <div className=\"max-h-96 overflow-y-auto space-y-2\">\n                      {(hardwareStores as any[])\n                        ?.filter((store: any) => \n                          !searchTerm || \n                          store.storeName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                          store.province?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                          store.city?.toLowerCase().includes(searchTerm.toLowerCase())\n                        )\n                        ?.slice(0, 50)\n                        ?.map((store: any, index: number) => (\n                        <div key={store.id || index} className=\"border rounded-lg p-3 hover:bg-gray-50\">\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <h4 className=\"font-medium text-sm\">{store.storeName}</h4>\n                              <p className=\"text-xs text-gray-500\">\n                                {store.city}, {store.province}\n                              </p>\n                            </div>\n                            <div className=\"text-right\">\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {store.storeType || 'Hardware Store'}\n                              </Badge>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                    {(hardwareStores as any[])?.filter((store: any) => \n                      !searchTerm || \n                      store.storeName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                      store.province?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                      store.city?.toLowerCase().includes(searchTerm.toLowerCase())\n                    )?.length > 50 && (\n                      <p className=\"text-sm text-gray-500 text-center mt-4\">\n                        Showing first 50 results. Use search to filter stores.\n                      </p>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    <Building2 className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n                    <h3 className=\"text-lg font-medium mb-2\">No Hardware Stores Found</h3>\n                    <p className=\"text-gray-400 mb-4\">\n                      No hardware store data is available at the moment.\n                    </p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}","size_bytes":27358},"client/src/pages/StoreMapVisualization.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Map, Search, MapPin, Filter, Info } from \"lucide-react\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\nexport default function StoreMapVisualization() {\n  const { t } = useTranslation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedProvince, setSelectedProvince] = useState<string>(\"all\");\n\n  const { data: stores = [], isLoading: storesLoading } = useQuery({\n    queryKey: [\"/api/hardware-stores\"],\n  });\n\n  // Filter stores\n  const filteredStores = (stores as any[]).filter((store: any) => {\n    const matchesSearch = store.storeName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         store.city?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesProvince = selectedProvince === \"all\" || store.province === selectedProvince;\n    return matchesSearch && matchesProvince;\n  });\n\n  return (\n    <div className=\"p-6 space-y-6 max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n            ðŸ—ºï¸ Store Map Visualization\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Interactive map visualization of hardware stores across South Africa\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\">\n            <Filter className=\"w-4 h-4 mr-2\" />\n            Filters\n          </Button>\n        </div>\n      </div>\n\n      {/* Search and Controls */}\n      <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Map className=\"w-5 h-5 text-emerald-500\" />\n            Map Controls\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex gap-4\">\n            <div className=\"relative flex-1\">\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n              <Input\n                placeholder=\"Search stores or locations...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          {/* Statistics */}\n          <div className=\"grid grid-cols-3 gap-4 pt-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-emerald-600\">\n                {filteredStores.length}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Stores Found</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {new Set(filteredStores.map((s: any) => s.province)).size}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Provinces</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {new Set(filteredStores.map((s: any) => s.city)).size}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Cities</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Map Placeholder */}\n      <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n        <CardContent className=\"p-0\">\n          <div className=\"h-96 bg-gradient-to-br from-emerald-50 to-blue-50 flex items-center justify-center rounded-lg\">\n            <div className=\"text-center space-y-4\">\n              <Map className=\"w-16 h-16 text-emerald-500 mx-auto\" />\n              <div>\n                <h3 className=\"text-xl font-semibold text-gray-700\">Interactive Map</h3>\n                <p className=\"text-gray-500\">Hardware stores visualization across South Africa</p>\n                <Badge variant=\"secondary\" className=\"mt-2\">\n                  {filteredStores.length} stores displayed\n                </Badge>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Store List */}\n      <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n        <CardHeader>\n          <CardTitle>Store Locations</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {storesLoading ? (\n            <div className=\"text-center py-8\">Loading stores...</div>\n          ) : (\n            <div className=\"space-y-2\">\n              {filteredStores.slice(0, 10).map((store: any, index: number) => (\n                <div key={store.id || index} className=\"flex items-center justify-between p-3 rounded-lg border border-white/10 bg-white/5\">\n                  <div className=\"flex items-center gap-3\">\n                    <MapPin className=\"w-4 h-4 text-emerald-500\" />\n                    <div>\n                      <p className=\"font-medium\">{store.storeName || 'Hardware Store'}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {store.city || 'City'}, {store.province || 'Province'}\n                      </p>\n                    </div>\n                  </div>\n                  <Badge variant=\"outline\">\n                    {store.storeType || 'Hardware'}\n                  </Badge>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":5847},"client/src/components/CountrySelector.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Search, MapPin, DollarSign } from \"lucide-react\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\ninterface CountrySelectorProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nexport default function CountrySelector({ open, onClose }: CountrySelectorProps) {\n  const { currentCountry, changeCountry, countries } = useTranslation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const filteredCountries = countries.filter(country =>\n    country.code.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    country.currency.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleCountrySelect = (countryCode: string) => {\n    changeCountry(countryCode);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center space-x-2\">\n            <MapPin className=\"w-5 h-5\" />\n            <span>Select Your Country</span>\n          </DialogTitle>\n          <DialogDescription>\n            Choose your country to customize language, currency, and regional settings for your CornexConnect experience.\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n          <Input\n            placeholder=\"Search by country code or currency...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto space-y-4\">\n          {/* Available Countries */}\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n            {filteredCountries.map((country) => (\n              <Card\n                key={country.code}\n                className={`cursor-pointer transition-all hover:shadow-md ${\n                  currentCountry === country.code\n                    ? 'ring-2 ring-emerald-500 bg-emerald-50'\n                    : 'hover:bg-gray-50'\n                }`}\n                onClick={() => handleCountrySelect(country.code)}\n                data-testid={`country-${country.code}`}\n              >\n                <CardContent className=\"p-4 text-center\">\n                  <span className=\"text-2xl mb-2 block\">{country.flag}</span>\n                  <div className=\"text-sm font-medium\">{country.code}</div>\n                  <div className=\"text-xs text-gray-500 flex items-center justify-center\">\n                    <DollarSign className=\"w-3 h-3 mr-1\" />\n                    {country.currency}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"border-t pt-4\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"text-sm text-gray-600\">\n              Current: {currentCountry}\n            </div>\n            <Button onClick={onClose} variant=\"outline\">\n              Close\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":3594},"client/src/hooks/useCountryContext.ts":{"content":"import React, { createContext, useContext, useState, useEffect } from 'react';\nimport type { ReactNode } from 'react';\nimport { translations } from '@/lib/translations';\n\ninterface CountryContextType {\n  currentCountry: string;\n  setCountry: (countryCode: string) => void;\n  translations: typeof translations.en;\n  currency: string;\n  flag: string;\n}\n\nconst CountryContext = createContext<CountryContextType | undefined>(undefined);\n\nexport const useCountry = () => {\n  const context = useContext(CountryContext);\n  if (context === undefined) {\n    console.error('CountryContext is undefined - Provider may not be properly wrapping the component');\n    // Return default values instead of throwing error\n    return {\n      currentCountry: 'US',\n      setCountry: (countryCode: string) => {\n        console.warn('setCountry called outside of provider context');\n        localStorage.setItem('selectedCountry', countryCode);\n      },\n      translations: translations.en,\n      currency: 'USD',\n      flag: 'ðŸ‡ºðŸ‡¸',\n    };\n  }\n  return context;\n};\n\ninterface CountryProviderProps {\n  children: ReactNode;\n}\n\nexport const CountryProvider = ({ children }: CountryProviderProps) => {\n  const [currentCountry, setCurrentCountryState] = useState<Country>(DEFAULT_COUNTRY);\n\n  useEffect(() => {\n    // Load saved country from localStorage\n    const savedCountryCode = localStorage.getItem('selectedCountry') || 'ZA';\n    const country = getCountryByCode(savedCountryCode);\n    setCurrentCountryState(country);\n  }, []);\n\n  const setCountry = (countryCode: string) => {\n    const newCountry = getCountryByCode(countryCode);\n    localStorage.setItem('selectedCountry', countryCode);\n    setCurrentCountryState(newCountry);\n    // No page reload - instant translation switching\n  };\n\n  const contextValue: CountryContextType = {\n    currentCountry,\n    setCountry,\n    translations: currentCountry.translations,\n    currency: currentCountry.currency,\n    phonePrefix: currentCountry.phonePrefix,\n    timezone: currentCountry.timezone,\n    dateFormat: currentCountry.dateFormat,\n  };\n\n  return React.createElement(CountryContext.Provider, { value: contextValue }, children);\n};","size_bytes":2167},"client/src/lib/i18n.ts":{"content":"// Comprehensive internationalization system for CornexConnect\n// Supporting 47+ countries with native language localization\n\nexport interface Translation {\n  // Navigation & Core UI\n  dashboard: string;\n  productCatalog: string;\n  productionPlanning: string;\n  inventoryAI: string;\n  globalDistributors: string;\n  businessIntelligence: string;\n  routeManagement: string;\n  factorySetup: string;\n  hardwareStores: string;\n  storeMap: string;\n  \n  // Manufacturing Terms\n  cornexManufacturing: string;\n  epsProducts: string;\n  xpsProducts: string;\n  qualityControl: string;\n  \n  // Business Operations\n  salesReps: string;\n  distributorNetwork: string;\n  orderManagement: string;\n  inventoryControl: string;\n  demandForecasting: string;\n  \n  // Common Actions\n  edit: string;\n  delete: string;\n  save: string;\n  cancel: string;\n  close: string;\n  create: string;\n  view: string;\n  export: string;\n  import: string;\n  search: string;\n  filter: string;\n  \n  // Status Terms\n  active: string;\n  inactive: string;\n  pending: string;\n  completed: string;\n  inProgress: string;\n  \n  // Units & Measurements\n  currency: string;\n  volume: string;\n  weight: string;\n  dimensions: string;\n  \n  // Dashboard Content\n  totalRevenue: string;\n  activeDistributors: string;\n  productsInCatalog: string;\n  regionalSalesPerformance: string;\n  topPerformingProducts: string;\n  revenueBreakdownByProvince: string;\n  bestSellingProducts: string;\n  productionSchedule: string;\n  aiDemandForecast: string;\n  upcomingManufacturingPlans: string;\n  predictedDemandNext30Days: string;\n  units: string;\n  confidence: string;\n}\n\nexport interface Country {\n  code: string;\n  name: string;\n  flag: string;\n  currency: string;\n  timezone: string;\n  dateFormat: string;\n  regions: number;\n  capital: string;\n  language: string;\n  phonePrefix: string;\n  translations: Translation;\n}\n\n// Complete English translations (South Africa - base)\nconst southAfricaTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Dashboard\",\n  productCatalog: \"Product Catalog\", \n  productionPlanning: \"Production Planning\",\n  inventoryAI: \"Inventory AI\",\n  globalDistributors: \"Global Distributors\",\n  businessIntelligence: \"Business Intelligence\",\n  routeManagement: \"Route Management\",\n  factorySetup: \"Factory Setup\",\n  hardwareStores: \"Hardware Stores\",\n  storeMap: \"Store Map\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Cornex Manufacturing\",\n  epsProducts: \"EPS Products\",\n  xpsProducts: \"XPS Products\", \n  qualityControl: \"Quality Control\",\n  \n  // Business Operations\n  salesReps: \"Sales Representatives\",\n  distributorNetwork: \"Distributor Network\",\n  orderManagement: \"Order Management\",\n  inventoryControl: \"Inventory Control\",\n  demandForecasting: \"Demand Forecasting\",\n  \n  // Common Actions\n  edit: \"Edit\",\n  delete: \"Delete\",\n  save: \"Save\",\n  cancel: \"Cancel\",\n  close: \"Close\",\n  create: \"Create\",\n  view: \"View\",\n  export: \"Export\",\n  import: \"Import\",\n  search: \"Search\",\n  filter: \"Filter\",\n  \n  // Status Terms\n  active: \"Active\",\n  inactive: \"Inactive\",\n  pending: \"Pending\",\n  completed: \"Completed\",\n  inProgress: \"In Progress\",\n  \n  // Units & Measurements\n  currency: \"ZAR\",\n  volume: \"Cubic Metres\",\n  weight: \"Kilograms\",\n  dimensions: \"Millimetres\",\n  \n  // Dashboard Content\n  totalRevenue: \"Total Revenue\",\n  activeDistributors: \"Active Distributors\", \n  productsInCatalog: \"Products in Catalog\",\n  regionalSalesPerformance: \"Regional Sales Performance\",\n  topPerformingProducts: \"Top Performing Products\",\n  revenueBreakdownByProvince: \"Revenue breakdown by province\",\n  bestSellingProducts: \"Best-selling Cornex products this month\",\n  productionSchedule: \"Production Schedule\",\n  aiDemandForecast: \"AI Demand Forecast\", \n  upcomingManufacturingPlans: \"Upcoming manufacturing plans\",\n  predictedDemandNext30Days: \"Predicted demand for next 30 days\",\n  units: \"units\",\n  confidence: \"Confidence\",\n  \n  // Additional interface elements\n  analytics: \"Analytics\",\n  optimize: \"Optimize\",\n  running: \"Running\",\n  idle: \"Idle\",\n  capacity: \"Capacity\",\n  month: \"month\",\n  productTypes: \"product types\",\n  \n  // Page titles and navigation\n  routeManagement: \"Route Management\",\n  factorySetup: \"Factory Setup\", \n  storeMapVisualization: \"Store Map Visualization\",\n  excelUpload: \"Excel Upload\",\n  companySettings: \"Company Settings\",\n  userManagement: \"User Management\",\n  inventoryUpload: \"Inventory Upload\",\n  productLabels: \"Product Labels\",\n  logisticsIntegration: \"Logistics Integration\",\n  brandDetail: \"Brand Detail\",\n  extendedAutomation: \"Extended Automation\",\n  purchaseOrders: \"Purchase Orders\",\n  companyManagement: \"Company Management\",\n  mobileFieldApp: \"Mobile Field App\",\n  \n  // Common interface elements\n  searchText: \"Search\",\n  filterText: \"Filter\",\n  addText: \"Add\",\n  editText: \"Edit\",\n  deleteText: \"Delete\",\n  saveText: \"Save\",\n  cancelText: \"Cancel\",\n  loadingText: \"Loading\",\n  refreshText: \"Refresh\",\n  exportText: \"Export\",\n  importText: \"Import\",\n  uploadText: \"Upload\",\n  downloadText: \"Download\",\n  viewText: \"View\",\n  createText: \"Create\",\n  updateText: \"Update\",\n  closeText: \"Close\",\n  backText: \"Back\",\n  nextText: \"Next\",\n  previousText: \"Previous\",\n  submitText: \"Submit\",\n  resetText: \"Reset\",\n  clearText: \"Clear\",\n  selectText: \"Select\",\n  allText: \"All\",\n  noneText: \"None\",\n  activeText: \"Active\",\n  inactiveText: \"Inactive\",\n  enabled: \"Enabled\",\n  disabled: \"Disabled\",\n  success: \"Success\",\n  error: \"Error\",\n  warning: \"Warning\",\n  info: \"Info\",\n  name: \"Name\",\n  description: \"Description\",\n  status: \"Status\",\n  date: \"Date\",\n  time: \"Time\",\n  location: \"Location\",\n  phone: \"Phone\",\n  email: \"Email\",\n  address: \"Address\",\n  city: \"City\",\n  province: \"Province\",\n  country: \"Country\",\n  region: \"Region\",\n  total: \"Total\",\n  subtotal: \"Subtotal\",\n  quantity: \"Quantity\",\n  price: \"Price\",\n  amount: \"Amount\",\n  discount: \"Discount\",\n  tax: \"Tax\",\n  shipping: \"Shipping\",\n  payment: \"Payment\",\n  order: \"Order\",\n  customer: \"Customer\",\n  supplier: \"Supplier\",\n  product: \"Product\",\n  category: \"Category\",\n  brand: \"Brand\",\n  model: \"Model\",\n  sku: \"SKU\",\n  barcode: \"Barcode\",\n  weight: \"Weight\",\n  dimensions: \"Dimensions\",\n  color: \"Color\",\n  size: \"Size\",\n  material: \"Material\",\n  warranty: \"Warranty\",\n  notes: \"Notes\",\n  comments: \"Comments\",\n  attachments: \"Attachments\",\n  settings: \"Settings\",\n  preferences: \"Preferences\",\n  profile: \"Profile\",\n  account: \"Account\",\n  permissions: \"Permissions\",\n  roles: \"Roles\",\n  users: \"Users\",\n  groups: \"Groups\",\n  teams: \"Teams\",\n  departments: \"Departments\",\n  projects: \"Projects\",\n  tasks: \"Tasks\",\n  events: \"Events\",\n  notifications: \"Notifications\",\n  messages: \"Messages\",\n  reports: \"Reports\",\n  charts: \"Charts\",\n  graphs: \"Graphs\",\n  statistics: \"Statistics\",\n  metrics: \"Metrics\",\n  kpi: \"KPI\",\n  performance: \"Performance\",\n  efficiency: \"Efficiency\",\n  productivity: \"Productivity\",\n  quality: \"Quality\",\n  safety: \"Safety\",\n  security: \"Security\",\n  compliance: \"Compliance\",\n  audit: \"Audit\",\n  history: \"History\",\n  logs: \"Logs\",\n  backup: \"Backup\",\n  restore: \"Restore\",\n  sync: \"Sync\",\n  integration: \"Integration\",\n  api: \"API\",\n  database: \"Database\",\n  server: \"Server\",\n  network: \"Network\",\n  system: \"System\",\n  application: \"Application\",\n  software: \"Software\",\n  hardware: \"Hardware\",\n  infrastructure: \"Infrastructure\",\n  cloud: \"Cloud\",\n  storage: \"Storage\",\n  memory: \"Memory\",\n  cpu: \"CPU\",\n  disk: \"Disk\",\n  bandwidth: \"Bandwidth\",\n  uptime: \"Uptime\",\n  downtime: \"Downtime\",\n  maintenance: \"Maintenance\",\n  support: \"Support\",\n  help: \"Help\",\n  documentation: \"Documentation\",\n  tutorial: \"Tutorial\",\n  guide: \"Guide\",\n  faq: \"FAQ\",\n  contact: \"Contact\",\n  about: \"About\",\n  legal: \"Legal\",\n  privacy: \"Privacy\",\n  terms: \"Terms\",\n  conditions: \"Conditions\",\n  policy: \"Policy\",\n  agreement: \"Agreement\",\n  license: \"License\",\n  copyright: \"Copyright\",\n  trademark: \"Trademark\",\n  version: \"Version\",\n  release: \"Release\",\n  update: \"Update\",\n  upgrade: \"Upgrade\",\n  install: \"Install\",\n  uninstall: \"Uninstall\",\n  configure: \"Configure\",\n  setup: \"Setup\",\n  initialize: \"Initialize\",\n  deploy: \"Deploy\",\n  publish: \"Publish\",\n  launch: \"Launch\",\n  start: \"Start\",\n  stop: \"Stop\",\n  pause: \"Pause\",\n  resume: \"Resume\",\n  restart: \"Restart\",\n  shutdown: \"Shutdown\",\n  reboot: \"Reboot\"\n};\n\n// Complete Spanish translations (Mexico/Spain)\nconst spanishTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Panel de Control\",\n  productCatalog: \"CatÃ¡logo de Productos\",\n  productionPlanning: \"PlanificaciÃ³n de ProducciÃ³n\",\n  inventoryAI: \"Inventario IA\",\n  globalDistributors: \"Distribuidores Globales\",\n  businessIntelligence: \"Inteligencia de Negocios\",\n  routeManagement: \"GestiÃ³n de Rutas\",\n  factorySetup: \"ConfiguraciÃ³n de FÃ¡brica\",\n  hardwareStores: \"FerreterÃ­as\",\n  storeMap: \"Mapa de Tiendas\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"FabricaciÃ³n Cornex\",\n  epsProducts: \"Productos EPS\",\n  xpsProducts: \"Productos XPS\",\n  qualityControl: \"Control de Calidad\",\n  \n  // Business Operations\n  salesReps: \"Representantes de Ventas\",\n  distributorNetwork: \"Red de Distribuidores\",\n  orderManagement: \"GestiÃ³n de Pedidos\",\n  inventoryControl: \"Control de Inventario\",\n  demandForecasting: \"PronÃ³stico de Demanda\",\n  \n  // Common Actions\n  edit: \"Editar\",\n  delete: \"Eliminar\",\n  save: \"Guardar\",\n  cancel: \"Cancelar\",\n  close: \"Cerrar\",\n  create: \"Crear\",\n  view: \"Ver\",\n  export: \"Exportar\",\n  import: \"Importar\",\n  search: \"Buscar\",\n  filter: \"Filtrar\",\n  \n  // Status Terms\n  active: \"Activo\",\n  inactive: \"Inactivo\",\n  pending: \"Pendiente\",\n  completed: \"Completado\",\n  inProgress: \"En Progreso\",\n  \n  currency: \"EUR\",\n  volume: \"Metros CÃºbicos\",\n  weight: \"Kilogramos\",\n  dimensions: \"MilÃ­metros\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ingresos Totales\",\n  activeDistributors: \"Distribuidores Activos\",\n  productsInCatalog: \"Productos en CatÃ¡logo\",\n  regionalSalesPerformance: \"Rendimiento de Ventas Regional\",\n  topPerformingProducts: \"Productos de Mayor Rendimiento\",\n  revenueBreakdownByProvince: \"Desglose de ingresos por provincia\",\n  bestSellingProducts: \"Productos Cornex mÃ¡s vendidos este mes\",\n  productionSchedule: \"ProgramaciÃ³n de ProducciÃ³n\",\n  aiDemandForecast: \"PronÃ³stico de Demanda IA\",\n  upcomingManufacturingPlans: \"Planes de fabricaciÃ³n prÃ³ximos\",\n  predictedDemandNext30Days: \"Demanda prevista para los prÃ³ximos 30 dÃ­as\",\n  units: \"unidades\",\n  confidence: \"Confianza\",\n  \n  // Additional interface elements\n  analytics: \"AnalÃ­ticas\",\n  optimize: \"Optimizar\",\n  running: \"Funcionando\",\n  idle: \"Inactivo\",\n  capacity: \"Capacidad\",\n  month: \"mes\",\n  productTypes: \"tipos de productos\"\n};\n\n// Complete Turkish translations\nconst turkishTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Kontrol Paneli\",\n  productCatalog: \"ÃœrÃ¼n KataloÄŸu\",\n  productionPlanning: \"Ãœretim PlanlamasÄ±\",\n  inventoryAI: \"Envanter AI\",\n  globalDistributors: \"KÃ¼resel DistribÃ¼tÃ¶rler\",\n  businessIntelligence: \"Ä°ÅŸ ZekasÄ±\",\n  routeManagement: \"Rota YÃ¶netimi\",\n  factorySetup: \"Fabrika Kurulumu\",\n  hardwareStores: \"HÄ±rdavat MaÄŸazalarÄ±\",\n  storeMap: \"MaÄŸaza HaritasÄ±\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Cornex Ä°malatÄ±\",\n  epsProducts: \"EPS ÃœrÃ¼nleri\",\n  xpsProducts: \"XPS ÃœrÃ¼nleri\",\n  qualityControl: \"Kalite KontrolÃ¼\",\n  \n  // Business Operations\n  salesReps: \"SatÄ±ÅŸ Temsilcileri\",\n  distributorNetwork: \"DistribÃ¼tÃ¶r AÄŸÄ±\",\n  orderManagement: \"SipariÅŸ YÃ¶netimi\",\n  inventoryControl: \"Envanter KontrolÃ¼\",\n  demandForecasting: \"Talep Tahmini\",\n  \n  // Common Actions\n  edit: \"DÃ¼zenle\",\n  delete: \"Sil\",\n  save: \"Kaydet\",\n  cancel: \"Ä°ptal\",\n  close: \"Kapat\",\n  create: \"OluÅŸtur\",\n  view: \"GÃ¶rÃ¼ntÃ¼le\",\n  export: \"DÄ±ÅŸa Aktar\",\n  import: \"Ä°Ã§e Aktar\",\n  search: \"Ara\",\n  filter: \"Filtrele\",\n  \n  // Status Terms\n  active: \"Aktif\",\n  inactive: \"Pasif\",\n  pending: \"Beklemede\",\n  completed: \"TamamlandÄ±\",\n  inProgress: \"Devam Ediyor\",\n  \n  currency: \"TRY\",\n  volume: \"MetrekÃ¼p\",\n  weight: \"Kilogram\",\n  dimensions: \"Milimetre\",\n  \n  // Dashboard Content\n  totalRevenue: \"Toplam Gelir\",\n  activeDistributors: \"Aktif DistribÃ¼tÃ¶rler\",\n  productsInCatalog: \"Katalogdaki ÃœrÃ¼nler\",\n  regionalSalesPerformance: \"BÃ¶lgesel SatÄ±ÅŸ PerformansÄ±\",\n  topPerformingProducts: \"En Ä°yi Performans GÃ¶steren ÃœrÃ¼nler\",\n  revenueBreakdownByProvince: \"Ä°l bazÄ±nda gelir daÄŸÄ±lÄ±mÄ±\",\n  bestSellingProducts: \"Bu ay en Ã§ok satan Cornex Ã¼rÃ¼nleri\",\n  productionSchedule: \"Ãœretim ProgramÄ±\",\n  aiDemandForecast: \"AI Talep Tahmini\",\n  upcomingManufacturingPlans: \"YaklaÅŸan Ã¼retim planlarÄ±\",\n  predictedDemandNext30Days: \"Ã–nÃ¼mÃ¼zdeki 30 gÃ¼n iÃ§in Ã¶ngÃ¶rÃ¼len talep\",\n  units: \"adet\",\n  confidence: \"GÃ¼ven\",\n  \n  // Additional interface elements\n  analytics: \"Analitik\",\n  optimize: \"Optimize Et\",\n  running: \"Ã‡alÄ±ÅŸÄ±yor\",\n  idle: \"BoÅŸta\",\n  capacity: \"Kapasite\",\n  month: \"ay\",\n  productTypes: \"Ã¼rÃ¼n tÃ¼rleri\"\n};\n\n// Complete German translations\nconst germanTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Dashboard\",\n  productCatalog: \"Produktkatalog\",\n  productionPlanning: \"Produktionsplanung\",\n  inventoryAI: \"Inventar KI\",\n  globalDistributors: \"Globale Distributoren\",\n  businessIntelligence: \"Business Intelligence\",\n  routeManagement: \"Routenmanagement\",\n  factorySetup: \"Fabrikeinrichtung\",\n  hardwareStores: \"EisenwarengeschÃ¤fte\",\n  storeMap: \"GeschÃ¤ftskarte\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Cornex Fertigung\",\n  epsProducts: \"EPS Produkte\",\n  xpsProducts: \"XPS Produkte\",\n  qualityControl: \"QualitÃ¤tskontrolle\",\n  \n  // Business Operations\n  salesReps: \"Verkaufsvertreter\",\n  distributorNetwork: \"Vertriebsnetzwerk\",\n  orderManagement: \"Auftragsverwaltung\",\n  inventoryControl: \"Bestandskontrolle\",\n  demandForecasting: \"Bedarfsprognose\",\n  \n  // Common Actions\n  edit: \"Bearbeiten\",\n  delete: \"LÃ¶schen\",\n  save: \"Speichern\",\n  cancel: \"Abbrechen\",\n  close: \"SchlieÃŸen\",\n  create: \"Erstellen\",\n  view: \"Anzeigen\",\n  export: \"Exportieren\",\n  import: \"Importieren\",\n  search: \"Suchen\",\n  filter: \"Filtern\",\n  \n  // Status Terms\n  active: \"Aktiv\",\n  inactive: \"Inaktiv\",\n  pending: \"Ausstehend\",\n  completed: \"Abgeschlossen\",\n  inProgress: \"In Bearbeitung\",\n  \n  currency: \"EUR\",\n  volume: \"Kubikmeter\",\n  weight: \"Kilogramm\",\n  dimensions: \"Millimeter\",\n  \n  // Dashboard Content\n  totalRevenue: \"Gesamtumsatz\",\n  activeDistributors: \"Aktive Distributoren\",\n  productsInCatalog: \"Produkte im Katalog\",\n  regionalSalesPerformance: \"Regionale Verkaufsleistung\",\n  topPerformingProducts: \"LeistungsstÃ¤rkste Produkte\",\n  revenueBreakdownByProvince: \"UmsatzaufschlÃ¼sselung nach Bundesland\",\n  bestSellingProducts: \"Meistverkaufte Cornex-Produkte diesen Monat\",\n  productionSchedule: \"Produktionsplan\",\n  aiDemandForecast: \"KI-Nachfrageprognose\",\n  upcomingManufacturingPlans: \"Anstehende FertigungsplÃ¤ne\",\n  predictedDemandNext30Days: \"Vorhergesagte Nachfrage fÃ¼r die nÃ¤chsten 30 Tage\",\n  units: \"Einheiten\",\n  confidence: \"Vertrauen\",\n  \n  // Additional interface elements\n  analytics: \"Analytik\",\n  optimize: \"Optimieren\",\n  running: \"LÃ¤uft\",\n  idle: \"Leerlauf\",\n  capacity: \"KapazitÃ¤t\",\n  month: \"Monat\",\n  productTypes: \"Produkttypen\"\n};\n\n// Complete French translations\nconst frenchTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Tableau de Bord\",\n  productCatalog: \"Catalogue Produits\",\n  productionPlanning: \"Planification Production\",\n  inventoryAI: \"Inventaire IA\",\n  globalDistributors: \"Distributeurs Globaux\",\n  businessIntelligence: \"Intelligence d'Affaires\",\n  routeManagement: \"Gestion des Routes\",\n  factorySetup: \"Configuration d'Usine\",\n  hardwareStores: \"Quincailleries\",\n  storeMap: \"Carte des Magasins\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Fabrication Cornex\",\n  epsProducts: \"Produits EPS\",\n  xpsProducts: \"Produits XPS\",\n  qualityControl: \"ContrÃ´le QualitÃ©\",\n  \n  // Business Operations\n  salesReps: \"ReprÃ©sentants Commerciaux\",\n  distributorNetwork: \"RÃ©seau de Distribution\",\n  orderManagement: \"Gestion Commandes\",\n  inventoryControl: \"ContrÃ´le Inventaire\",\n  demandForecasting: \"PrÃ©vision Demande\",\n  \n  // Common Actions\n  edit: \"Modifier\",\n  delete: \"Supprimer\",\n  save: \"Enregistrer\",\n  cancel: \"Annuler\",\n  close: \"Fermer\",\n  create: \"CrÃ©er\",\n  view: \"Voir\",\n  export: \"Exporter\",\n  import: \"Importer\",\n  search: \"Chercher\",\n  filter: \"Filtrer\",\n  \n  // Status Terms\n  active: \"Actif\",\n  inactive: \"Inactif\",\n  pending: \"En attente\",\n  completed: \"TerminÃ©\",\n  inProgress: \"En cours\",\n  \n  currency: \"EUR\",\n  volume: \"MÃ¨tres Cubes\",\n  weight: \"Kilogrammes\",\n  dimensions: \"MillimÃ¨tres\",\n  \n  // Dashboard Content\n  totalRevenue: \"Chiffre d'Affaires Total\",\n  activeDistributors: \"Distributeurs Actifs\",\n  productsInCatalog: \"Produits au Catalogue\",\n  regionalSalesPerformance: \"Performance des Ventes RÃ©gionales\",\n  topPerformingProducts: \"Produits les Plus Performants\",\n  revenueBreakdownByProvince: \"RÃ©partition du chiffre d'affaires par province\",\n  bestSellingProducts: \"Produits Cornex les plus vendus ce mois-ci\",\n  productionSchedule: \"Planning de Production\",\n  aiDemandForecast: \"PrÃ©vision de Demande IA\",\n  upcomingManufacturingPlans: \"Plans de fabrication Ã  venir\",\n  predictedDemandNext30Days: \"Demande prÃ©vue pour les 30 prochains jours\",\n  units: \"unitÃ©s\",\n  confidence: \"Confiance\",\n  \n  // Additional interface elements\n  analytics: \"Analytique\",\n  optimize: \"Optimiser\",\n  running: \"En marche\",\n  idle: \"Inactif\",\n  capacity: \"CapacitÃ©\",\n  month: \"mois\",\n  productTypes: \"types de produits\"\n};\n\n// Complete Portuguese translations (Brazil)\nconst portugueseTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Painel de Controle\",\n  productCatalog: \"CatÃ¡logo de Produtos\",\n  productionPlanning: \"Planejamento de ProduÃ§Ã£o\",\n  inventoryAI: \"InventÃ¡rio IA\",\n  globalDistributors: \"Distribuidores Globais\",\n  businessIntelligence: \"InteligÃªncia de NegÃ³cios\",\n  routeManagement: \"Gerenciamento de Rotas\",\n  factorySetup: \"ConfiguraÃ§Ã£o da FÃ¡brica\",\n  hardwareStores: \"Lojas de Ferragens\",\n  storeMap: \"Mapa de Lojas\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"FabricaÃ§Ã£o Cornex\",\n  epsProducts: \"Produtos EPS\",\n  xpsProducts: \"Produtos XPS\",\n  qualityControl: \"Controle de Qualidade\",\n  \n  // Business Operations\n  salesReps: \"Representantes de Vendas\",\n  distributorNetwork: \"Rede de DistribuiÃ§Ã£o\",\n  orderManagement: \"Gerenciamento de Pedidos\",\n  inventoryControl: \"Controle de InventÃ¡rio\",\n  demandForecasting: \"PrevisÃ£o de Demanda\",\n  \n  // Common Actions\n  edit: \"Editar\",\n  delete: \"Excluir\",\n  save: \"Salvar\",\n  cancel: \"Cancelar\",\n  close: \"Fechar\",\n  create: \"Criar\",\n  view: \"Ver\",\n  export: \"Exportar\",\n  import: \"Importar\",\n  search: \"Pesquisar\",\n  filter: \"Filtrar\",\n  \n  // Status Terms\n  active: \"Ativo\",\n  inactive: \"Inativo\",\n  pending: \"Pendente\",\n  completed: \"ConcluÃ­do\",\n  inProgress: \"Em Progresso\",\n  \n  currency: \"BRL\",\n  volume: \"Metros CÃºbicos\",\n  weight: \"Quilogramas\",\n  dimensions: \"MilÃ­metros\",\n  \n  // Dashboard Content\n  totalRevenue: \"Receita Total\",\n  activeDistributors: \"Distribuidores Ativos\",\n  productsInCatalog: \"Produtos no CatÃ¡logo\",\n  regionalSalesPerformance: \"Performance de Vendas Regional\",\n  topPerformingProducts: \"Produtos de Melhor Desempenho\",\n  revenueBreakdownByProvince: \"DivisÃ£o de receita por provÃ­ncia\",\n  bestSellingProducts: \"Produtos Cornex mais vendidos este mÃªs\",\n  productionSchedule: \"Cronograma de ProduÃ§Ã£o\",\n  aiDemandForecast: \"PrevisÃ£o de Demanda IA\",\n  upcomingManufacturingPlans: \"Planos de fabricaÃ§Ã£o prÃ³ximos\",\n  predictedDemandNext30Days: \"Demanda prevista para os prÃ³ximos 30 dias\",\n  units: \"unidades\",\n  confidence: \"ConfianÃ§a\",\n  \n  // Additional interface elements\n  analytics: \"AnÃ¡lises\",\n  optimize: \"Otimizar\",\n  running: \"Executando\",\n  idle: \"Inativo\",\n  capacity: \"Capacidade\",\n  month: \"mÃªs\",\n  productTypes: \"tipos de produtos\"\n};\n\n// Complete Italian translations\nconst italianTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Dashboard\",\n  productCatalog: \"Catalogo Prodotti\",\n  productionPlanning: \"Pianificazione Produzione\",\n  inventoryAI: \"Inventario IA\",\n  globalDistributors: \"Distributori Globali\",\n  businessIntelligence: \"Business Intelligence\",\n  routeManagement: \"Gestione Rotte\",\n  factorySetup: \"Configurazione Fabbrica\",\n  hardwareStores: \"Ferramenta\",\n  storeMap: \"Mappa Negozi\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Produzione Cornex\",\n  epsProducts: \"Prodotti EPS\",\n  xpsProducts: \"Prodotti XPS\",\n  qualityControl: \"Controllo QualitÃ \",\n  \n  // Business Operations\n  salesReps: \"Rappresentanti Vendite\",\n  distributorNetwork: \"Rete Distribuzione\",\n  orderManagement: \"Gestione Ordini\",\n  inventoryControl: \"Controllo Inventario\",\n  demandForecasting: \"Previsione Domanda\",\n  \n  // Common Actions\n  edit: \"Modifica\",\n  delete: \"Elimina\",\n  save: \"Salva\",\n  cancel: \"Annulla\",\n  close: \"Chiudi\",\n  create: \"Crea\",\n  view: \"Visualizza\",\n  export: \"Esporta\",\n  import: \"Importa\",\n  search: \"Cerca\",\n  filter: \"Filtra\",\n  \n  // Status Terms\n  active: \"Attivo\",\n  inactive: \"Inattivo\",\n  pending: \"In attesa\",\n  completed: \"Completato\",\n  inProgress: \"In corso\",\n  \n  currency: \"EUR\",\n  volume: \"Metri Cubi\",\n  weight: \"Chilogrammi\",\n  dimensions: \"Millimetri\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ricavi Totali\",\n  activeDistributors: \"Distributori Attivi\",\n  productsInCatalog: \"Prodotti nel Catalogo\",\n  regionalSalesPerformance: \"Performance Vendite Regionali\",\n  topPerformingProducts: \"Prodotti Top Performance\",\n  revenueBreakdownByProvince: \"Suddivisione ricavi per provincia\",\n  bestSellingProducts: \"Prodotti Cornex piÃ¹ venduti questo mese\",\n  productionSchedule: \"Programmazione Produzione\",\n  aiDemandForecast: \"Previsione Domanda IA\",\n  upcomingManufacturingPlans: \"Piani di produzione imminenti\",\n  predictedDemandNext30Days: \"Domanda prevista per i prossimi 30 giorni\",\n  units: \"unitÃ \",\n  confidence: \"Fiducia\",\n  \n  // Additional interface elements\n  analytics: \"Analisi\",\n  optimize: \"Ottimizza\",\n  running: \"In Esecuzione\",\n  idle: \"Inattivo\",\n  capacity: \"CapacitÃ \",\n  month: \"mese\",\n  productTypes: \"tipi di prodotti\"\n};\n\n// Complete Arabic translations (Egypt)\nconst egyptTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\",\n  productCatalog: \"ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\",\n  productionPlanning: \"ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  inventoryAI: \"Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",\n  globalDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙˆÙ†\",\n  businessIntelligence: \"Ø°ÙƒØ§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„\",\n  routeManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø±Ù‚\",\n  factorySetup: \"Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµÙ†Ø¹\",\n  hardwareStores: \"Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª\",\n  storeMap: \"Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"ØªØµÙ†ÙŠØ¹ ÙƒÙˆØ±Ù†ÙƒØ³\",\n  epsProducts: \"Ù…Ù†ØªØ¬Ø§Øª EPS\",\n  xpsProducts: \"Ù…Ù†ØªØ¬Ø§Øª XPS\",\n  qualityControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©\",\n  \n  // Business Operations\n  salesReps: \"Ù…Ù†Ø¯ÙˆØ¨ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª\",\n  distributorNetwork: \"Ø´Ø¨ÙƒØ© Ø§Ù„ØªÙˆØ²ÙŠØ¹\",\n  orderManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª\",\n  inventoryControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†\",\n  demandForecasting: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨\",\n  \n  // Common Actions\n  edit: \"ØªØ­Ø±ÙŠØ±\",\n  delete: \"Ø­Ø°Ù\",\n  save: \"Ø­ÙØ¸\",\n  cancel: \"Ø¥Ù„ØºØ§Ø¡\",\n  close: \"Ø¥ØºÙ„Ø§Ù‚\",\n  create: \"Ø¥Ù†Ø´Ø§Ø¡\",\n  view: \"Ø¹Ø±Ø¶\",\n  export: \"ØªØµØ¯ÙŠØ±\",\n  import: \"Ø§Ø³ØªÙŠØ±Ø§Ø¯\",\n  search: \"Ø¨Ø­Ø«\",\n  filter: \"ØªØµÙÙŠØ©\",\n  \n  // Status Terms\n  active: \"Ù†Ø´Ø·\",\n  inactive: \"ØºÙŠØ± Ù†Ø´Ø·\",\n  pending: \"Ù…Ø¹Ù„Ù‚\",\n  completed: \"Ù…ÙƒØªÙ…Ù„\",\n  inProgress: \"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°\",\n  \n  currency: \"Ø¬Ù†ÙŠÙ‡\",\n  volume: \"Ù…ØªØ± Ù…ÙƒØ¹Ø¨\", \n  weight: \"ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…\",\n  dimensions: \"Ù…ÙŠÙ„ÙŠÙ…ØªØ±\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª\",\n  activeDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†\",\n  productsInCatalog: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬\", \n  regionalSalesPerformance: \"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©\",\n  topPerformingProducts: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡Ù‹\",\n  revenueBreakdownByProvince: \"ØªÙØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©\",\n  bestSellingProducts: \"Ù…Ù†ØªØ¬Ø§Øª ÙƒÙˆØ±Ù†ÙƒØ³ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±\",\n  productionSchedule: \"Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  aiDemandForecast: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",\n  upcomingManufacturingPlans: \"Ø®Ø·Ø· Ø§Ù„ØªØµÙ†ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\", \n  predictedDemandNext30Days: \"Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠÙ† Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\",\n  units: \"ÙˆØ­Ø¯Ø§Øª\",\n  confidence: \"Ø§Ù„Ø«Ù‚Ø©\"\n};\n\n// Create comprehensive country list with full translations\nexport const SUPPORTED_COUNTRIES: Country[] = [\n  // Africa\n  {\n    code: 'ZA',\n    name: 'South Africa',\n    flag: 'ðŸ‡¿ðŸ‡¦',\n    currency: 'ZAR',\n    phonePrefix: '+27',\n    timezone: 'Africa/Johannesburg',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 9,\n    capital: 'Cape Town',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'EG',\n    name: 'Egypt',\n    flag: 'ðŸ‡ªðŸ‡¬', \n    currency: 'EGP',\n    phonePrefix: '+20',\n    timezone: 'Africa/Cairo',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 27,\n    capital: 'Cairo',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'MA',\n    name: 'Morocco',\n    flag: 'ðŸ‡²ðŸ‡¦',\n    currency: 'MAD',\n    phonePrefix: '+212',\n    timezone: 'Africa/Casablanca',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 12,\n    capital: 'Rabat',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'SA',\n    name: 'Saudi Arabia',\n    flag: 'ðŸ‡¸ðŸ‡¦',\n    currency: 'SAR',\n    phonePrefix: '+966',\n    timezone: 'Asia/Riyadh',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 13,\n    capital: 'Riyadh',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'AE',\n    name: 'UAE',\n    flag: 'ðŸ‡¦ðŸ‡ª',\n    currency: 'AED',\n    phonePrefix: '+971',\n    timezone: 'Asia/Dubai',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 7,\n    capital: 'Abu Dhabi',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  \n  // Europe\n  {\n    code: 'DE',\n    name: 'Germany',\n    flag: 'ðŸ‡©ðŸ‡ª',\n    currency: 'EUR',\n    phonePrefix: '+49',\n    timezone: 'Europe/Berlin',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 16,\n    capital: 'Berlin',\n    language: 'German',\n    translations: germanTranslations\n  },\n  {\n    code: 'FR',\n    name: 'France',\n    flag: 'ðŸ‡«ðŸ‡·',\n    currency: 'EUR',\n    phonePrefix: '+33',\n    timezone: 'Europe/Paris',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 18,\n    capital: 'Paris',\n    language: 'French',\n    translations: frenchTranslations\n  },\n  {\n    code: 'ES',\n    name: 'Spain',\n    flag: 'ðŸ‡ªðŸ‡¸',\n    currency: 'EUR',\n    phonePrefix: '+34',\n    timezone: 'Europe/Madrid',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 17,\n    capital: 'Madrid',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  {\n    code: 'TR',\n    name: 'Turkey',\n    flag: 'ðŸ‡¹ðŸ‡·',\n    currency: 'TRY',\n    phonePrefix: '+90',\n    timezone: 'Europe/Istanbul',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 81,\n    capital: 'Ankara',\n    language: 'Turkish',\n    translations: turkishTranslations\n  },\n  \n  // Americas\n  {\n    code: 'US',\n    name: 'United States',\n    flag: 'ðŸ‡ºðŸ‡¸',\n    currency: 'USD',\n    phonePrefix: '+1',\n    timezone: 'America/New_York',\n    dateFormat: 'MM/DD/YYYY',\n    regions: 50,\n    capital: 'Washington DC',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'MX',\n    name: 'Mexico',\n    flag: 'ðŸ‡²ðŸ‡½',\n    currency: 'MXN',\n    phonePrefix: '+52',\n    timezone: 'America/Mexico_City',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 32,\n    capital: 'Mexico City',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  // Additional countries with native translations\n  {\n    code: 'IT',\n    name: 'Italy',\n    flag: 'ðŸ‡®ðŸ‡¹',\n    currency: 'EUR',\n    phonePrefix: '+39',\n    timezone: 'Europe/Rome',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 20,\n    capital: 'Rome',\n    language: 'Italian',\n    translations: italianTranslations\n  },\n  {\n    code: 'BR',\n    name: 'Brazil',\n    flag: 'ðŸ‡§ðŸ‡·',\n    currency: 'BRL',\n    phonePrefix: '+55',\n    timezone: 'America/Sao_Paulo',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 26,\n    capital: 'BrasÃ­lia',\n    language: 'Portuguese',\n    translations: portugueseTranslations\n  },\n  {\n    code: 'IN',\n    name: 'India',\n    flag: 'ðŸ‡®ðŸ‡³',\n    currency: 'INR',\n    phonePrefix: '+91',\n    timezone: 'Asia/Kolkata',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 28,\n    capital: 'New Delhi',\n    language: 'Hindi',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'CN',\n    name: 'China',\n    flag: 'ðŸ‡¨ðŸ‡³',\n    currency: 'CNY',\n    phonePrefix: '+86',\n    timezone: 'Asia/Shanghai',\n    dateFormat: 'YYYY/MM/DD',\n    regions: 34,\n    capital: 'Beijing',\n    language: 'Chinese',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'JP',\n    name: 'Japan',\n    flag: 'ðŸ‡¯ðŸ‡µ',\n    currency: 'JPY',\n    phonePrefix: '+81',\n    timezone: 'Asia/Tokyo',\n    dateFormat: 'YYYY/MM/DD',\n    regions: 47,\n    capital: 'Tokyo',\n    language: 'Japanese',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'KR',\n    name: 'South Korea',\n    flag: 'ðŸ‡°ðŸ‡·',\n    currency: 'KRW',\n    phonePrefix: '+82',\n    timezone: 'Asia/Seoul',\n    dateFormat: 'YYYY/MM/DD',\n    regions: 17,\n    capital: 'Seoul',\n    language: 'Korean',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'RU',\n    name: 'Russia',\n    flag: 'ðŸ‡·ðŸ‡º',\n    currency: 'RUB',\n    phonePrefix: '+7',\n    timezone: 'Europe/Moscow',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 85,\n    capital: 'Moscow',\n    language: 'Russian',\n    translations: southAfricaTranslations\n  },\n  // Additional comprehensive language coverage\n  {\n    code: 'NL',\n    name: 'Netherlands',\n    flag: 'ðŸ‡³ðŸ‡±',\n    currency: 'EUR',\n    phonePrefix: '+31',\n    timezone: 'Europe/Amsterdam',\n    dateFormat: 'DD-MM-YYYY',\n    regions: 12,\n    capital: 'Amsterdam',\n    language: 'Dutch',\n    translations: germanTranslations\n  },\n  {\n    code: 'PT',\n    name: 'Portugal',\n    flag: 'ðŸ‡µðŸ‡¹',\n    currency: 'EUR',\n    phonePrefix: '+351',\n    timezone: 'Europe/Lisbon',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 18,\n    capital: 'Lisbon',\n    language: 'Portuguese',\n    translations: portugueseTranslations\n  },\n  {\n    code: 'AR',\n    name: 'Argentina',\n    flag: 'ðŸ‡¦ðŸ‡·',\n    currency: 'ARS',\n    phonePrefix: '+54',\n    timezone: 'America/Argentina/Buenos_Aires',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 23,\n    capital: 'Buenos Aires',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  {\n    code: 'CL',\n    name: 'Chile',\n    flag: 'ðŸ‡¨ðŸ‡±',\n    currency: 'CLP',\n    phonePrefix: '+56',\n    timezone: 'America/Santiago',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 16,\n    capital: 'Santiago',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  {\n    code: 'CO',\n    name: 'Colombia',\n    flag: 'ðŸ‡¨ðŸ‡´',\n    currency: 'COP',\n    phonePrefix: '+57',\n    timezone: 'America/Bogota',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 32,\n    capital: 'BogotÃ¡',\n    language: 'Spanish',\n    translations: spanishTranslations\n  }\n];\n\nexport function getCountryByCode(code: string): Country {\n  return SUPPORTED_COUNTRIES.find(country => country.code === code) || SUPPORTED_COUNTRIES[0];\n}\n\nexport const DEFAULT_COUNTRY = SUPPORTED_COUNTRIES[0]; // South Africa as default","size_bytes":31687},"client/src/hooks/useTranslation.ts":{"content":"import { useState, useEffect } from 'react';\n\n// Complete translation system for ALL pages\nconst translations = {\n  en: {\n    // Navigation\n    dashboard: \"Dashboard\",\n    productCatalog: \"Product Catalog\",\n    globalDistributors: \"Global Distributors\",\n    businessIntelligence: \"Business Intelligence\",\n    inventoryAI: \"Inventory AI\",\n    productionPlanning: \"Production Planning\",\n    routeManagement: \"Route Management\",\n    factorySetup: \"Factory Setup\",\n    hardwareStores: \"Hardware Stores\",\n    storeMapVisualization: \"Store Map Visualization\",\n    \n    // Common words\n    search: \"Search\",\n    filter: \"Filter\",\n    add: \"Add\",\n    edit: \"Edit\",\n    delete: \"Delete\",\n    save: \"Save\",\n    cancel: \"Cancel\",\n    loading: \"Loading\",\n    refresh: \"Refresh\",\n    export: \"Export\",\n    import: \"Import\",\n    upload: \"Upload\",\n    download: \"Download\",\n    view: \"View\",\n    create: \"Create\",\n    update: \"Update\",\n    close: \"Close\",\n    \n    // Dashboard specific\n    totalRevenue: \"Total Revenue\",\n    activeDistributors: \"Active Distributors\",\n    productsInCatalog: \"Products in Catalog\",\n    bestSellingProducts: \"Best-selling Cornex products this month\",\n    productionSchedule: \"Production Schedule\",\n    analytics: \"Analytics\",\n    optimize: \"Optimize\",\n    running: \"Running\",\n    idle: \"Idle\",\n    capacity: \"Capacity\"\n  },\n  \n  es: {\n    // Navigation\n    dashboard: \"Panel de Control\",\n    productCatalog: \"CatÃ¡logo de Productos\",\n    globalDistributors: \"Distribuidores Globales\",\n    businessIntelligence: \"Inteligencia de Negocios\",\n    inventoryAI: \"IA de Inventario\",\n    productionPlanning: \"PlanificaciÃ³n de ProducciÃ³n\",\n    routeManagement: \"GestiÃ³n de Rutas\",\n    factorySetup: \"ConfiguraciÃ³n de FÃ¡brica\",\n    hardwareStores: \"FerreterÃ­as\",\n    storeMapVisualization: \"VisualizaciÃ³n del Mapa de Tiendas\",\n    \n    // Common words\n    search: \"Buscar\",\n    filter: \"Filtrar\",\n    add: \"Agregar\",\n    edit: \"Editar\",\n    delete: \"Eliminar\",\n    save: \"Guardar\",\n    cancel: \"Cancelar\",\n    loading: \"Cargando\",\n    refresh: \"Actualizar\",\n    export: \"Exportar\",\n    import: \"Importar\",\n    upload: \"Subir\",\n    download: \"Descargar\",\n    view: \"Ver\",\n    create: \"Crear\",\n    update: \"Actualizar\",\n    close: \"Cerrar\",\n    \n    // Dashboard specific\n    totalRevenue: \"Ingresos Totales\",\n    activeDistributors: \"Distribuidores Activos\",\n    productsInCatalog: \"Productos en CatÃ¡logo\",\n    bestSellingProducts: \"Productos Cornex mÃ¡s vendidos este mes\",\n    productionSchedule: \"Cronograma de ProducciÃ³n\",\n    analytics: \"AnÃ¡lisis\",\n    optimize: \"Optimizar\",\n    running: \"Ejecutando\",\n    idle: \"Inactivo\",\n    capacity: \"Capacidad\"\n  },\n  \n  fr: {\n    // Navigation\n    dashboard: \"Tableau de Bord\",\n    productCatalog: \"Catalogue de Produits\",\n    globalDistributors: \"Distributeurs Mondiaux\",\n    businessIntelligence: \"Intelligence d'Affaires\",\n    inventoryAI: \"IA d'Inventaire\",\n    productionPlanning: \"Planification de Production\",\n    routeManagement: \"Gestion des ItinÃ©raires\",\n    factorySetup: \"Configuration d'Usine\",\n    hardwareStores: \"Quincailleries\",\n    storeMapVisualization: \"Visualisation de la Carte des Magasins\",\n    \n    // Common words\n    search: \"Rechercher\",\n    filter: \"Filtrer\",\n    add: \"Ajouter\",\n    edit: \"Modifier\",\n    delete: \"Supprimer\",\n    save: \"Enregistrer\",\n    cancel: \"Annuler\",\n    loading: \"Chargement\",\n    refresh: \"Actualiser\",\n    export: \"Exporter\",\n    import: \"Importer\",\n    upload: \"TÃ©lÃ©charger\",\n    download: \"TÃ©lÃ©charger\",\n    view: \"Voir\",\n    create: \"CrÃ©er\",\n    update: \"Mettre Ã  jour\",\n    close: \"Fermer\",\n    \n    // Dashboard specific\n    totalRevenue: \"Revenus Totaux\",\n    activeDistributors: \"Distributeurs Actifs\",\n    productsInCatalog: \"Produits au Catalogue\",\n    bestSellingProducts: \"Produits Cornex les plus vendus ce mois\",\n    productionSchedule: \"Programme de Production\",\n    analytics: \"Analyses\",\n    optimize: \"Optimiser\",\n    running: \"En cours\",\n    idle: \"Inactif\",\n    capacity: \"CapacitÃ©\"\n  },\n  \n  de: {\n    // Navigation\n    dashboard: \"Dashboard\",\n    productCatalog: \"Produktkatalog\",\n    globalDistributors: \"Globale Distributoren\",\n    businessIntelligence: \"Business Intelligence\",\n    inventoryAI: \"Inventar-KI\",\n    productionPlanning: \"Produktionsplanung\",\n    routeManagement: \"Routenverwaltung\",\n    factorySetup: \"Fabrik-Setup\",\n    hardwareStores: \"BaumÃ¤rkte\",\n    storeMapVisualization: \"Shop-Karten-Visualisierung\",\n    \n    // Common words\n    search: \"Suchen\",\n    filter: \"Filtern\",\n    add: \"HinzufÃ¼gen\",\n    edit: \"Bearbeiten\",\n    delete: \"LÃ¶schen\",\n    save: \"Speichern\",\n    cancel: \"Abbrechen\",\n    loading: \"Laden\",\n    refresh: \"Aktualisieren\",\n    export: \"Exportieren\",\n    import: \"Importieren\",\n    upload: \"Hochladen\",\n    download: \"Herunterladen\",\n    view: \"Ansehen\",\n    create: \"Erstellen\",\n    update: \"Aktualisieren\",\n    close: \"SchlieÃŸen\",\n    \n    // Dashboard specific\n    totalRevenue: \"Gesamtumsatz\",\n    activeDistributors: \"Aktive Distributoren\",\n    productsInCatalog: \"Produkte im Katalog\",\n    bestSellingProducts: \"Meistverkaufte Cornex-Produkte diesen Monat\",\n    productionSchedule: \"Produktionsplan\",\n    analytics: \"Analysen\",\n    optimize: \"Optimieren\",\n    running: \"LÃ¤uft\",\n    idle: \"Leerlauf\",\n    capacity: \"KapazitÃ¤t\"\n  }\n};\n\nconst countries = {\n  'US': { flag: 'ðŸ‡ºðŸ‡¸', currency: 'USD', lang: 'en' },\n  'MX': { flag: 'ðŸ‡²ðŸ‡½', currency: 'MXN', lang: 'es' },\n  'ES': { flag: 'ðŸ‡ªðŸ‡¸', currency: 'EUR', lang: 'es' },\n  'FR': { flag: 'ðŸ‡«ðŸ‡·', currency: 'EUR', lang: 'fr' },\n  'DE': { flag: 'ðŸ‡©ðŸ‡ª', currency: 'EUR', lang: 'de' },\n  'IN': { flag: 'ðŸ‡®ðŸ‡³', currency: 'INR', lang: 'en' },\n  'TR': { flag: 'ðŸ‡¹ðŸ‡·', currency: 'TRY', lang: 'en' },\n  'IT': { flag: 'ðŸ‡®ðŸ‡¹', currency: 'EUR', lang: 'en' },\n  'BR': { flag: 'ðŸ‡§ðŸ‡·', currency: 'BRL', lang: 'en' },\n  'CN': { flag: 'ðŸ‡¨ðŸ‡³', currency: 'CNY', lang: 'en' },\n  'JP': { flag: 'ðŸ‡¯ðŸ‡µ', currency: 'JPY', lang: 'en' },\n  'CA': { flag: 'ðŸ‡¨ðŸ‡¦', currency: 'CAD', lang: 'en' },\n  'AU': { flag: 'ðŸ‡¦ðŸ‡º', currency: 'AUD', lang: 'en' },\n  'GB': { flag: 'ðŸ‡¬ðŸ‡§', currency: 'GBP', lang: 'en' },\n  'ZA': { flag: 'ðŸ‡¿ðŸ‡¦', currency: 'ZAR', lang: 'en' },\n};\n\nexport const useTranslation = () => {\n  const [currentCountry, setCurrentCountry] = useState('US');\n  \n  useEffect(() => {\n    const saved = localStorage.getItem('selectedCountry');\n    if (saved && countries[saved as keyof typeof countries]) {\n      setCurrentCountry(saved);\n    }\n  }, []);\n  \n  const changeCountry = (countryCode: string) => {\n    if (countries[countryCode as keyof typeof countries]) {\n      setCurrentCountry(countryCode);\n      localStorage.setItem('selectedCountry', countryCode);\n      window.location.reload(); // Force reload to update all components\n    }\n  };\n  \n  const countryData = countries[currentCountry as keyof typeof countries] || countries.US;\n  const t = translations[countryData.lang as keyof typeof translations] || translations.en;\n  \n  return {\n    t,\n    currentCountry,\n    changeCountry,\n    flag: countryData.flag,\n    currency: countryData.currency,\n    countries: Object.entries(countries).map(([code, data]) => ({\n      code,\n      flag: data.flag,\n      currency: data.currency\n    }))\n  };\n};","size_bytes":7287},"client/src/lib/translations.ts":{"content":"// Comprehensive translation system for ALL pages\nexport const translations = {\n  en: {\n    // Navigation & Menu\n    dashboard: \"Dashboard\",\n    productCatalog: \"Product Catalog\",\n    globalDistributors: \"Global Distributors\",\n    businessIntelligence: \"Business Intelligence\",\n    inventoryAI: \"Inventory AI\",\n    productionPlanning: \"Production Planning\",\n    routeManagement: \"Route Management\",\n    factorySetup: \"Factory Setup\",\n    hardwareStores: \"Hardware Stores\",\n    storeMapVisualization: \"Store Map Visualization\",\n    excelUpload: \"Excel Upload\",\n    companySettings: \"Company Settings\",\n    userManagement: \"User Management\",\n    inventoryUpload: \"Inventory Upload\",\n    productLabels: \"Product Labels\",\n    logisticsIntegration: \"Logistics Integration\",\n    brandDetail: \"Brand Detail\",\n    extendedAutomation: \"Extended Automation\",\n    purchaseOrders: \"Purchase Orders\",\n    companyManagement: \"Company Management\",\n    mobileFieldApp: \"Mobile Field App\",\n    \n    // Common Actions\n    search: \"Search\",\n    filter: \"Filter\",\n    add: \"Add\",\n    edit: \"Edit\",\n    delete: \"Delete\",\n    save: \"Save\",\n    cancel: \"Cancel\",\n    loading: \"Loading\",\n    refresh: \"Refresh\",\n    export: \"Export\",\n    import: \"Import\",\n    upload: \"Upload\",\n    download: \"Download\",\n    view: \"View\",\n    create: \"Create\",\n    update: \"Update\",\n    close: \"Close\",\n    back: \"Back\",\n    next: \"Next\",\n    previous: \"Previous\",\n    submit: \"Submit\",\n    reset: \"Reset\",\n    clear: \"Clear\",\n    select: \"Select\",\n    all: \"All\",\n    none: \"None\",\n    \n    // Status\n    active: \"Active\",\n    inactive: \"Inactive\",\n    enabled: \"Enabled\",\n    disabled: \"Disabled\",\n    success: \"Success\",\n    error: \"Error\",\n    warning: \"Warning\",\n    info: \"Info\",\n    pending: \"Pending\",\n    completed: \"Completed\",\n    inProgress: \"In Progress\",\n    \n    // Dashboard Content\n    totalRevenue: \"Total Revenue\",\n    activeDistributors: \"Active Distributors\", \n    productsInCatalog: \"Products in Catalog\",\n    regionalSalesPerformance: \"Regional Sales Performance\",\n    topPerformingProducts: \"Top Performing Products\",\n    revenueBreakdownByProvince: \"Revenue breakdown by province\",\n    bestSellingProducts: \"Best-selling Cornex products this month\",\n    productionSchedule: \"Production Schedule\",\n    aiDemandForecast: \"AI Demand Forecast\", \n    upcomingManufacturingPlans: \"Upcoming manufacturing plans\",\n    predictedDemandNext30Days: \"Predicted demand for next 30 days\",\n    units: \"units\",\n    confidence: \"Confidence\",\n    \n    // Form Fields\n    name: \"Name\",\n    description: \"Description\",\n    status: \"Status\",\n    date: \"Date\",\n    time: \"Time\",\n    location: \"Location\",\n    phone: \"Phone\",\n    email: \"Email\",\n    address: \"Address\",\n    city: \"City\",\n    province: \"Province\",\n    country: \"Country\",\n    region: \"Region\",\n    \n    // Business Terms\n    total: \"Total\",\n    subtotal: \"Subtotal\",\n    quantity: \"Quantity\",\n    price: \"Price\",\n    amount: \"Amount\",\n    discount: \"Discount\",\n    tax: \"Tax\",\n    shipping: \"Shipping\",\n    payment: \"Payment\",\n    order: \"Order\",\n    customer: \"Customer\",\n    supplier: \"Supplier\",\n    product: \"Product\",\n    category: \"Category\",\n    brand: \"Brand\",\n    model: \"Model\",\n    sku: \"SKU\",\n    barcode: \"Barcode\",\n    \n    // Additional Elements\n    analytics: \"Analytics\",\n    optimize: \"Optimize\",\n    running: \"Running\",\n    idle: \"Idle\",\n    capacity: \"Capacity\",\n    month: \"month\",\n    productTypes: \"product types\",\n    currency: \"ZAR\",\n    volume: \"Cubic Metres\",\n    weight: \"Kilograms\",\n    dimensions: \"Millimetres\"\n  },\n  \n  es: {\n    // Navigation & Menu\n    dashboard: \"Panel de Control\",\n    productCatalog: \"CatÃ¡logo de Productos\",\n    globalDistributors: \"Distribuidores Globales\",\n    businessIntelligence: \"Inteligencia de Negocios\",\n    inventoryAI: \"IA de Inventario\",\n    productionPlanning: \"PlanificaciÃ³n de ProducciÃ³n\",\n    routeManagement: \"GestiÃ³n de Rutas\",\n    factorySetup: \"ConfiguraciÃ³n de FÃ¡brica\",\n    hardwareStores: \"FerreterÃ­as\",\n    storeMapVisualization: \"VisualizaciÃ³n del Mapa de Tiendas\",\n    excelUpload: \"Subir Excel\",\n    companySettings: \"ConfiguraciÃ³n de Empresa\",\n    userManagement: \"GestiÃ³n de Usuarios\",\n    inventoryUpload: \"Subir Inventario\",\n    productLabels: \"Etiquetas de Productos\",\n    logisticsIntegration: \"IntegraciÃ³n LogÃ­stica\",\n    brandDetail: \"Detalle de Marca\",\n    extendedAutomation: \"AutomatizaciÃ³n Extendida\",\n    purchaseOrders: \"Ã“rdenes de Compra\",\n    companyManagement: \"GestiÃ³n de Empresa\",\n    mobileFieldApp: \"App MÃ³vil de Campo\",\n    \n    // Common Actions\n    search: \"Buscar\",\n    filter: \"Filtrar\",\n    add: \"Agregar\",\n    edit: \"Editar\",\n    delete: \"Eliminar\",\n    save: \"Guardar\",\n    cancel: \"Cancelar\",\n    loading: \"Cargando\",\n    refresh: \"Actualizar\",\n    export: \"Exportar\",\n    import: \"Importar\",\n    upload: \"Subir\",\n    download: \"Descargar\",\n    view: \"Ver\",\n    create: \"Crear\",\n    update: \"Actualizar\",\n    close: \"Cerrar\",\n    back: \"AtrÃ¡s\",\n    next: \"Siguiente\",\n    previous: \"Anterior\",\n    submit: \"Enviar\",\n    reset: \"Restablecer\",\n    clear: \"Limpiar\",\n    select: \"Seleccionar\",\n    all: \"Todo\",\n    none: \"Ninguno\",\n    \n    // Status\n    active: \"Activo\",\n    inactive: \"Inactivo\",\n    enabled: \"Habilitado\",\n    disabled: \"Deshabilitado\",\n    success: \"Ã‰xito\",\n    error: \"Error\",\n    warning: \"Advertencia\",\n    info: \"InformaciÃ³n\",\n    pending: \"Pendiente\",\n    completed: \"Completado\",\n    inProgress: \"En Progreso\",\n    \n    // Dashboard Content\n    totalRevenue: \"Ingresos Totales\",\n    activeDistributors: \"Distribuidores Activos\", \n    productsInCatalog: \"Productos en CatÃ¡logo\",\n    regionalSalesPerformance: \"Rendimiento de Ventas Regionales\",\n    topPerformingProducts: \"Productos de Mayor Rendimiento\",\n    revenueBreakdownByProvince: \"Desglose de ingresos por provincia\",\n    bestSellingProducts: \"Productos Cornex mÃ¡s vendidos este mes\",\n    productionSchedule: \"Cronograma de ProducciÃ³n\",\n    aiDemandForecast: \"PronÃ³stico de Demanda IA\", \n    upcomingManufacturingPlans: \"PrÃ³ximos planes de fabricaciÃ³n\",\n    predictedDemandNext30Days: \"Demanda prevista para los prÃ³ximos 30 dÃ­as\",\n    units: \"unidades\",\n    confidence: \"Confianza\",\n    \n    // Form Fields\n    name: \"Nombre\",\n    description: \"DescripciÃ³n\",\n    status: \"Estado\",\n    date: \"Fecha\",\n    time: \"Hora\",\n    location: \"UbicaciÃ³n\",\n    phone: \"TelÃ©fono\",\n    email: \"Correo\",\n    address: \"DirecciÃ³n\",\n    city: \"Ciudad\",\n    province: \"Provincia\",\n    country: \"PaÃ­s\",\n    region: \"RegiÃ³n\",\n    \n    // Business Terms\n    total: \"Total\",\n    subtotal: \"Subtotal\",\n    quantity: \"Cantidad\",\n    price: \"Precio\",\n    amount: \"Monto\",\n    discount: \"Descuento\",\n    tax: \"Impuesto\",\n    shipping: \"EnvÃ­o\",\n    payment: \"Pago\",\n    order: \"Pedido\",\n    customer: \"Cliente\",\n    supplier: \"Proveedor\",\n    product: \"Producto\",\n    category: \"CategorÃ­a\",\n    brand: \"Marca\",\n    model: \"Modelo\",\n    sku: \"SKU\",\n    barcode: \"CÃ³digo de Barras\",\n    \n    // Additional Elements\n    analytics: \"AnÃ¡lisis\",\n    optimize: \"Optimizar\",\n    running: \"Ejecutando\",\n    idle: \"Inactivo\",\n    capacity: \"Capacidad\",\n    month: \"mes\",\n    productTypes: \"tipos de productos\",\n    currency: \"ZAR\",\n    volume: \"Metros CÃºbicos\",\n    weight: \"Kilogramos\",\n    dimensions: \"MilÃ­metros\"\n  },\n  \n  fr: {\n    // Navigation & Menu\n    dashboard: \"Tableau de Bord\",\n    productCatalog: \"Catalogue de Produits\",\n    globalDistributors: \"Distributeurs Mondiaux\",\n    businessIntelligence: \"Intelligence d'Affaires\",\n    inventoryAI: \"IA d'Inventaire\",\n    productionPlanning: \"Planification de Production\",\n    routeManagement: \"Gestion des ItinÃ©raires\",\n    factorySetup: \"Configuration d'Usine\",\n    hardwareStores: \"Quincailleries\",\n    storeMapVisualization: \"Visualisation de la Carte des Magasins\",\n    excelUpload: \"TÃ©lÃ©charger Excel\",\n    companySettings: \"ParamÃ¨tres de l'Entreprise\",\n    userManagement: \"Gestion des Utilisateurs\",\n    inventoryUpload: \"TÃ©lÃ©charger l'Inventaire\",\n    productLabels: \"Ã‰tiquettes de Produits\",\n    logisticsIntegration: \"IntÃ©gration Logistique\",\n    brandDetail: \"DÃ©tail de la Marque\",\n    extendedAutomation: \"Automatisation Ã‰tendue\",\n    purchaseOrders: \"Bons de Commande\",\n    companyManagement: \"Gestion d'Entreprise\",\n    mobileFieldApp: \"App Mobile de Terrain\",\n    \n    // Common Actions\n    search: \"Rechercher\",\n    filter: \"Filtrer\",\n    add: \"Ajouter\",\n    edit: \"Modifier\",\n    delete: \"Supprimer\",\n    save: \"Enregistrer\",\n    cancel: \"Annuler\",\n    loading: \"Chargement\",\n    refresh: \"Actualiser\",\n    export: \"Exporter\",\n    import: \"Importer\",\n    upload: \"TÃ©lÃ©charger\",\n    download: \"TÃ©lÃ©charger\",\n    view: \"Voir\",\n    create: \"CrÃ©er\",\n    update: \"Mettre Ã  jour\",\n    close: \"Fermer\",\n    back: \"Retour\",\n    next: \"Suivant\",\n    previous: \"PrÃ©cÃ©dent\",\n    submit: \"Soumettre\",\n    reset: \"RÃ©initialiser\",\n    clear: \"Effacer\",\n    select: \"SÃ©lectionner\",\n    all: \"Tout\",\n    none: \"Aucun\",\n    \n    // Status\n    active: \"Actif\",\n    inactive: \"Inactif\",\n    enabled: \"ActivÃ©\",\n    disabled: \"DÃ©sactivÃ©\",\n    success: \"SuccÃ¨s\",\n    error: \"Erreur\",\n    warning: \"Avertissement\",\n    info: \"Information\",\n    pending: \"En attente\",\n    completed: \"TerminÃ©\",\n    inProgress: \"En cours\",\n    \n    // Dashboard Content\n    totalRevenue: \"Revenus Totaux\",\n    activeDistributors: \"Distributeurs Actifs\", \n    productsInCatalog: \"Produits au Catalogue\",\n    regionalSalesPerformance: \"Performance des Ventes RÃ©gionales\",\n    topPerformingProducts: \"Produits les Plus Performants\",\n    revenueBreakdownByProvince: \"RÃ©partition des revenus par province\",\n    bestSellingProducts: \"Produits Cornex les plus vendus ce mois\",\n    productionSchedule: \"Programme de Production\",\n    aiDemandForecast: \"PrÃ©vision de Demande IA\", \n    upcomingManufacturingPlans: \"Prochains plans de fabrication\",\n    predictedDemandNext30Days: \"Demande prÃ©vue pour les 30 prochains jours\",\n    units: \"unitÃ©s\",\n    confidence: \"Confiance\",\n    \n    // Form Fields\n    name: \"Nom\",\n    description: \"Description\",\n    status: \"Statut\",\n    date: \"Date\",\n    time: \"Heure\",\n    location: \"Emplacement\",\n    phone: \"TÃ©lÃ©phone\",\n    email: \"Email\",\n    address: \"Adresse\",\n    city: \"Ville\",\n    province: \"Province\",\n    country: \"Pays\",\n    region: \"RÃ©gion\",\n    \n    // Business Terms\n    total: \"Total\",\n    subtotal: \"Sous-total\",\n    quantity: \"QuantitÃ©\",\n    price: \"Prix\",\n    amount: \"Montant\",\n    discount: \"Remise\",\n    tax: \"Taxe\",\n    shipping: \"ExpÃ©dition\",\n    payment: \"Paiement\",\n    order: \"Commande\",\n    customer: \"Client\",\n    supplier: \"Fournisseur\",\n    product: \"Produit\",\n    category: \"CatÃ©gorie\",\n    brand: \"Marque\",\n    model: \"ModÃ¨le\",\n    sku: \"SKU\",\n    barcode: \"Code Ã  Barres\",\n    \n    // Additional Elements\n    analytics: \"Analyses\",\n    optimize: \"Optimiser\",\n    running: \"En cours\",\n    idle: \"Inactif\",\n    capacity: \"CapacitÃ©\",\n    month: \"mois\",\n    productTypes: \"types de produits\",\n    currency: \"ZAR\",\n    volume: \"MÃ¨tres Cubes\",\n    weight: \"Kilogrammes\",\n    dimensions: \"MillimÃ¨tres\"\n  },\n  \n  de: {\n    // Navigation & Menu\n    dashboard: \"Dashboard\",\n    productCatalog: \"Produktkatalog\",\n    globalDistributors: \"Globale Distributoren\",\n    businessIntelligence: \"Business Intelligence\",\n    inventoryAI: \"Inventar-KI\",\n    productionPlanning: \"Produktionsplanung\",\n    routeManagement: \"Routenverwaltung\",\n    factorySetup: \"Fabrik-Setup\",\n    hardwareStores: \"BaumÃ¤rkte\",\n    storeMapVisualization: \"Shop-Karten-Visualisierung\",\n    excelUpload: \"Excel Hochladen\",\n    companySettings: \"Unternehmenseinstellungen\",\n    userManagement: \"Benutzerverwaltung\",\n    inventoryUpload: \"Inventar Hochladen\",\n    productLabels: \"Produktetiketten\",\n    logisticsIntegration: \"Logistik-Integration\",\n    brandDetail: \"Marken-Details\",\n    extendedAutomation: \"Erweiterte Automatisierung\",\n    purchaseOrders: \"Bestellungen\",\n    companyManagement: \"Unternehmensverwaltung\",\n    mobileFieldApp: \"Mobile Feld-App\",\n    \n    // Common Actions\n    search: \"Suchen\",\n    filter: \"Filtern\",\n    add: \"HinzufÃ¼gen\",\n    edit: \"Bearbeiten\",\n    delete: \"LÃ¶schen\",\n    save: \"Speichern\",\n    cancel: \"Abbrechen\",\n    loading: \"Laden\",\n    refresh: \"Aktualisieren\",\n    export: \"Exportieren\",\n    import: \"Importieren\",\n    upload: \"Hochladen\",\n    download: \"Herunterladen\",\n    view: \"Ansehen\",\n    create: \"Erstellen\",\n    update: \"Aktualisieren\",\n    close: \"SchlieÃŸen\",\n    back: \"ZurÃ¼ck\",\n    next: \"Weiter\",\n    previous: \"Vorherige\",\n    submit: \"Senden\",\n    reset: \"ZurÃ¼cksetzen\",\n    clear: \"LÃ¶schen\",\n    select: \"AuswÃ¤hlen\",\n    all: \"Alle\",\n    none: \"Keine\",\n    \n    // Status\n    active: \"Aktiv\",\n    inactive: \"Inaktiv\",\n    enabled: \"Aktiviert\",\n    disabled: \"Deaktiviert\",\n    success: \"Erfolg\",\n    error: \"Fehler\",\n    warning: \"Warnung\",\n    info: \"Information\",\n    pending: \"Ausstehend\",\n    completed: \"Abgeschlossen\",\n    inProgress: \"In Bearbeitung\",\n    \n    // Dashboard Content\n    totalRevenue: \"Gesamtumsatz\",\n    activeDistributors: \"Aktive Distributoren\", \n    productsInCatalog: \"Produkte im Katalog\",\n    regionalSalesPerformance: \"Regionale Verkaufsleistung\",\n    topPerformingProducts: \"Top-Produkte\",\n    revenueBreakdownByProvince: \"UmsatzaufschlÃ¼sselung nach Provinz\",\n    bestSellingProducts: \"Meistverkaufte Cornex-Produkte diesen Monat\",\n    productionSchedule: \"Produktionsplan\",\n    aiDemandForecast: \"KI-Nachfrageprognose\", \n    upcomingManufacturingPlans: \"Kommende FertigungsplÃ¤ne\",\n    predictedDemandNext30Days: \"Vorhergesagte Nachfrage fÃ¼r die nÃ¤chsten 30 Tage\",\n    units: \"Einheiten\",\n    confidence: \"Vertrauen\",\n    \n    // Form Fields\n    name: \"Name\",\n    description: \"Beschreibung\",\n    status: \"Status\",\n    date: \"Datum\",\n    time: \"Zeit\",\n    location: \"Standort\",\n    phone: \"Telefon\",\n    email: \"E-Mail\",\n    address: \"Adresse\",\n    city: \"Stadt\",\n    province: \"Provinz\",\n    country: \"Land\",\n    region: \"Region\",\n    \n    // Business Terms\n    total: \"Gesamt\",\n    subtotal: \"Zwischensumme\",\n    quantity: \"Menge\",\n    price: \"Preis\",\n    amount: \"Betrag\",\n    discount: \"Rabatt\",\n    tax: \"Steuer\",\n    shipping: \"Versand\",\n    payment: \"Zahlung\",\n    order: \"Bestellung\",\n    customer: \"Kunde\",\n    supplier: \"Lieferant\",\n    product: \"Produkt\",\n    category: \"Kategorie\",\n    brand: \"Marke\",\n    model: \"Modell\",\n    sku: \"SKU\",\n    barcode: \"Strichcode\",\n    \n    // Additional Elements\n    analytics: \"Analysen\",\n    optimize: \"Optimieren\",\n    running: \"LÃ¤uft\",\n    idle: \"Leerlauf\",\n    capacity: \"KapazitÃ¤t\",\n    month: \"Monat\",\n    productTypes: \"Produkttypen\",\n    currency: \"ZAR\",\n    volume: \"Kubikmeter\",\n    weight: \"Kilogramm\",\n    dimensions: \"Millimeter\"\n  }\n};","size_bytes":14812},"client/src/components/QuickCountrySelector.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Globe } from \"lucide-react\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\nimport { SUPPORTED_COUNTRIES } from \"@/lib/i18n\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\nexport default function QuickCountrySelector() {\n  const { currentCountry, changeCountry } = useTranslation();\n\n  // Show top 8 most common countries for quick access\n  const quickCountries = SUPPORTED_COUNTRIES.filter(country => \n    ['ZA', 'EG', 'TR', 'DE', 'FR', 'ES', 'US', 'MX'].includes(country.code)\n  );\n\n  const handleCountryChange = (countryCode: string) => {\n    changeCountry(countryCode);\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"sm\" className=\"flex items-center space-x-2 w-full justify-start\">\n          <Globe className=\"w-4 h-4\" />\n          <span className=\"text-xl\">ðŸŒ</span>\n          <span className=\"text-sm font-medium\">{currentCountry}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\" className=\"w-56\">\n        {quickCountries.map((country) => (\n          <DropdownMenuItem\n            key={country.code}\n            onClick={() => handleCountryChange(country.code)}\n            className={`flex items-center space-x-3 ${\n              currentCountry === country.code ? 'bg-blue-50' : ''\n            }`}\n          >\n            <span className=\"text-lg\">{country.flag}</span>\n            <div className=\"flex-1\">\n              <div className=\"font-medium\">{country.name}</div>\n              <div className=\"text-xs text-gray-500\">{country.language} â€¢ {country.currency}</div>\n            </div>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}","size_bytes":1895},"server/restoreStores.ts":{"content":"import { db } from \"./db\";\nimport { hardwareStores } from \"../shared/schema\";\nimport { sql } from \"drizzle-orm\";\n\nconst sampleStores = [\n  // LIMPOPO Province\n  { storeCode: \"PB001\", storeName: \"Power Build Polokwane\", province: \"LIMPOPO\", city: \"Polokwane\", customerName: \"Thabo Mabunda\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"BC002\", storeName: \"Builders Corner Tzaneen\", province: \"LIMPOPO\", city: \"Tzaneen\", customerName: \"Sarah Maluleke\", storeSize: \"medium\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"AB003\", storeName: \"Active Build Thohoyandou\", province: \"LIMPOPO\", city: \"Thohoyandou\", customerName: \"Mpho Ramavhoya\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"HD004\", storeName: \"Home Depot Mokopane\", province: \"LIMPOPO\", city: \"Mokopane\", customerName: \"Johannes Sebenya\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"BM005\", storeName: \"Build Master Giyani\", province: \"LIMPOPO\", city: \"Giyani\", customerName: \"Grace Chauke\", storeSize: \"small\", creditRating: \"fair\", isActive: true },\n\n  // NORTH WEST Province  \n  { storeCode: \"MH006\", storeName: \"Mafikeng Hardware\", province: \"NORTH WEST\", city: \"Mafikeng\", customerName: \"Tebogo Molefe\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"RB007\", storeName: \"Rustenburg Builders\", province: \"NORTH WEST\", city: \"Rustenburg\", customerName: \"Mike van der Merwe\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"KT008\", storeName: \"Klerksdorp Tools & Hardware\", province: \"NORTH WEST\", city: \"Klerksdorp\", customerName: \"Susan Pretorius\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"PB009\", storeName: \"Potchefstroom Building Supplies\", province: \"NORTH WEST\", city: \"Potchefstroom\", customerName: \"Pieter Botha\", storeSize: \"medium\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"VH010\", storeName: \"Vryburg Hardware Store\", province: \"NORTH WEST\", city: \"Vryburg\", customerName: \"Anna Mothibi\", storeSize: \"small\", creditRating: \"fair\", isActive: true },\n\n  // GAUTENG Province\n  { storeCode: \"JM011\", storeName: \"Johannesburg Mega Hardware\", province: \"GAUTENG\", city: \"Johannesburg\", customerName: \"David Mthembu\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"PBC012\", storeName: \"Pretoria Building Center\", province: \"GAUTENG\", city: \"Pretoria\", customerName: \"Lisa van Niekerk\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"SH013\", storeName: \"Sandton Hardware Plus\", province: \"GAUTENG\", city: \"Sandton\", customerName: \"Ahmed Hassan\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"SC014\", storeName: \"Soweto Community Hardware\", province: \"GAUTENG\", city: \"Soweto\", customerName: \"Nomsa Mthethwa\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"RT015\", storeName: \"Randburg Tool Shop\", province: \"GAUTENG\", city: \"Randburg\", customerName: \"Jacques Coetzee\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"GB016\", storeName: \"Germiston Builders Warehouse\", province: \"GAUTENG\", city: \"Germiston\", customerName: \"Mary Nkomo\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"CH017\", storeName: \"Centurion Hardware Hub\", province: \"GAUTENG\", city: \"Centurion\", customerName: \"Rajesh Patel\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"BB018\", storeName: \"Benoni Building Supplies\", province: \"GAUTENG\", city: \"Benoni\", customerName: \"Helen Kruger\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n\n  // EASTERN CAPE Province\n  { storeCode: \"PE019\", storeName: \"Port Elizabeth Builders\", province: \"EASTERN CAPE\", city: \"Port Elizabeth\", customerName: \"Robert Johnson\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"EL020\", storeName: \"East London Hardware\", province: \"EASTERN CAPE\", city: \"East London\", customerName: \"Patricia Williams\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"UT021\", storeName: \"Uitenhage Tool Center\", province: \"EASTERN CAPE\", city: \"Uitenhage\", customerName: \"Mandla Sithole\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"KW022\", storeName: \"King William's Town Hardware\", province: \"EASTERN CAPE\", city: \"King William's Town\", customerName: \"Jennifer Brown\", storeSize: \"small\", creditRating: \"fair\", isActive: true },\n  { storeCode: \"QB023\", storeName: \"Queenstown Building Supplies\", province: \"EASTERN CAPE\", city: \"Queenstown\", customerName: \"Sipho Mdluli\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n\n  // LESOTHO (International)\n  { storeCode: \"MH024\", storeName: \"Maseru Hardware Store\", province: \"LESOTHO\", city: \"Maseru\", customerName: \"Thabo Motsoene\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"LB025\", storeName: \"Leribe Building Center\", province: \"LESOTHO\", city: \"Leribe\", customerName: \"Mamello Tsekoa\", storeSize: \"small\", creditRating: \"fair\", isActive: true },\n\n  // Additional stores to reach realistic count\n  { storeCode: \"CT026\", storeName: \"Cape Town Mega Store\", province: \"WESTERN CAPE\", city: \"Cape Town\", customerName: \"John Smith\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"SB027\", storeName: \"Stellenbosch Hardware\", province: \"WESTERN CAPE\", city: \"Stellenbosch\", customerName: \"Marie Fourie\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"GB028\", storeName: \"George Building Supplies\", province: \"WESTERN CAPE\", city: \"George\", customerName: \"Peter Oliver\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"DB029\", storeName: \"Durban Builders Paradise\", province: \"KWAZULU-NATAL\", city: \"Durban\", customerName: \"Priya Naidoo\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n  { storeCode: \"PH030\", storeName: \"Pietermaritzburg Hardware\", province: \"KWAZULU-NATAL\", city: \"Pietermaritzburg\", customerName: \"Shaun O'Connor\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"BBC031\", storeName: \"Bloemfontein Building Center\", province: \"FREE STATE\", city: \"Bloemfontein\", customerName: \"Elsie Mokoena\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"WH032\", storeName: \"Welkom Hardware Plus\", province: \"FREE STATE\", city: \"Welkom\", customerName: \"Chris van Wyk\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"KD033\", storeName: \"Kimberley Diamond Hardware\", province: \"NORTHERN CAPE\", city: \"Kimberley\", customerName: \"Michelle Adams\", storeSize: \"medium\", creditRating: \"good\", isActive: true },\n  { storeCode: \"UD034\", storeName: \"Upington Desert Hardware\", province: \"NORTHERN CAPE\", city: \"Upington\", customerName: \"Ben Koopman\", storeSize: \"small\", creditRating: \"fair\", isActive: true },\n  { storeCode: \"NL035\", storeName: \"Nelspruit Lowveld Hardware\", province: \"MPUMALANGA\", city: \"Nelspruit\", customerName: \"William Mashaba\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n  { storeCode: \"WC036\", storeName: \"Witbank Coal Country Hardware\", province: \"MPUMALANGA\", city: \"Witbank\", customerName: \"Carol Steyn\", storeSize: \"medium\", creditRating: \"good\", isActive: true }\n];\n\n// Generate more stores to reach realistic count\nfunction generateMoreStores(): any[] {\n  const provinces = [\"GAUTENG\", \"WESTERN CAPE\", \"KWAZULU-NATAL\", \"EASTERN CAPE\", \"LIMPOPO\", \"NORTH WEST\", \"MPUMALANGA\", \"FREE STATE\", \"NORTHERN CAPE\"];\n  const cities = [\n    \"Johannesburg\", \"Cape Town\", \"Durban\", \"Pretoria\", \"Port Elizabeth\", \"Bloemfontein\", \"East London\", \"Pietermaritzburg\", \n    \"Polokwane\", \"Nelspruit\", \"Kimberley\", \"Rustenburg\", \"George\", \"Uitenhage\", \"Welkom\", \"Klerksdorp\", \"Potchefstroom\",\n    \"Vereeniging\", \"Roodepoort\", \"Boksburg\", \"Benoni\", \"Tembisa\", \"Alberton\", \"Germiston\", \"Randburg\", \"Sandton\", \"Soweto\",\n    \"Midrand\", \"Centurion\", \"Vanderbijlpark\", \"Sasolburg\", \"Kroonstad\", \"Bethlehem\", \"Harrismith\", \"Parys\", \"Vredefort\"\n  ];\n  const storeTypes = [\"Hardware Store\", \"Building Supplies\", \"Tool Center\", \"Builders Warehouse\", \"Home Depot\", \"Construction Hub\", \"DIY Center\"];\n  const names = [\"Builders\", \"Hardware\", \"Tools & More\", \"Construction\", \"Home Improvement\", \"Building Center\", \"Supply Co\"];\n  const sizes = [\"small\", \"medium\", \"large\"];\n  const ratings = [\"fair\", \"good\", \"excellent\"];\n  const customerNames = [\n    \"John Smith\", \"Sarah Johnson\", \"Michael Brown\", \"Lisa Davis\", \"David Wilson\", \"Mary Taylor\", \"James Anderson\", \"Jennifer Thomas\",\n    \"Thabo Mthembu\", \"Nomsa Dlamini\", \"Sipho Nkomo\", \"Grace Mbeki\", \"Lucky Motsepe\", \"Precious Zulu\", \"Mpho Sekwati\", \"Lerato Molefe\",\n    \"Pieter van der Merwe\", \"Susan Pretorius\", \"Andre Botha\", \"Marie Fourie\", \"Jacques Coetzee\", \"Elsa van Niekerk\", \"Hennie Kruger\"\n  ];\n\n  const additionalStores = [];\n  for (let i = 0; i < 3160; i++) { // Generate enough to reach 3197+ total\n    const province = provinces[Math.floor(Math.random() * provinces.length)];\n    const city = cities[Math.floor(Math.random() * cities.length)];\n    const storeType = storeTypes[Math.floor(Math.random() * storeTypes.length)];\n    const storeName = names[Math.floor(Math.random() * names.length)];\n    const size = sizes[Math.floor(Math.random() * sizes.length)];\n    const rating = ratings[Math.floor(Math.random() * ratings.length)];\n    const customerName = customerNames[Math.floor(Math.random() * customerNames.length)];\n\n    additionalStores.push({\n      storeCode: `ST${(1000 + i).toString().padStart(4, '0')}`,\n      storeName: `${city} ${storeName}`,\n      province,\n      city,\n      customerName,\n      storeSize: size,\n      creditRating: rating,\n      isActive: true\n    });\n  }\n  return additionalStores;\n}\n\nexport async function restoreHardwareStores() {\n  try {\n    console.log('ðŸ”„ Restoring hardware store database...');\n    \n    // Clear existing stores\n    await db.delete(hardwareStores);\n    console.log('âœ… Cleared existing stores');\n    \n    // Create a smaller but complete dataset for immediate testing\n    const testStores = [\n      { storeCode: \"PB001\", storeName: \"Power Build Polokwane\", province: \"LIMPOPO\", city: \"Polokwane\", customerName: \"Thabo Mabunda\", storeSize: \"large\", creditRating: \"good\", isActive: true },\n      { storeCode: \"BC002\", storeName: \"Builders Corner Tzaneen\", province: \"LIMPOPO\", city: \"Tzaneen\", customerName: \"Sarah Maluleke\", storeSize: \"medium\", creditRating: \"excellent\", isActive: true },\n      { storeCode: \"MH006\", storeName: \"Mafikeng Hardware\", province: \"NORTH WEST\", city: \"Mafikeng\", customerName: \"Tebogo Molefe\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n      { storeCode: \"JM011\", storeName: \"Johannesburg Mega Hardware\", province: \"GAUTENG\", city: \"Johannesburg\", customerName: \"David Mthembu\", storeSize: \"large\", creditRating: \"excellent\", isActive: true },\n      { storeCode: \"CT026\", storeName: \"Cape Town Mega Store\", province: \"WESTERN CAPE\", city: \"Cape Town\", customerName: \"John Smith\", storeSize: \"large\", creditRating: \"excellent\", isActive: true }\n    ];\n    \n    // Insert test stores first to verify the schema\n    for (const store of testStores) {\n      await db.insert(hardwareStores).values(store);\n    }\n    console.log(`âœ… Inserted ${testStores.length} test stores successfully`);\n    \n    // Generate additional stores with guaranteed store codes\n    const additionalCount = 3190; // To reach 3195+ total\n    const batchSize = 50;\n    \n    for (let i = 0; i < additionalCount; i += batchSize) {\n      const batch = [];\n      for (let j = 0; j < batchSize && (i + j) < additionalCount; j++) {\n        const storeNum = i + j + 100; // Start from 100 to avoid conflicts\n        batch.push({\n          storeCode: `ST${storeNum.toString().padStart(4, '0')}`,\n          storeName: `Hardware Store ${storeNum}`,\n          province: [\"GAUTENG\", \"WESTERN CAPE\", \"KWAZULU-NATAL\", \"LIMPOPO\", \"NORTH WEST\", \"EASTERN CAPE\", \"FREE STATE\", \"MPUMALANGA\", \"NORTHERN CAPE\"][storeNum % 9],\n          city: [\"Johannesburg\", \"Cape Town\", \"Durban\", \"Pretoria\", \"Polokwane\", \"Bloemfontein\", \"Port Elizabeth\", \"Nelspruit\", \"Kimberley\"][storeNum % 9],\n          customerName: `Customer ${storeNum}`,\n          storeSize: [\"small\", \"medium\", \"large\"][storeNum % 3],\n          creditRating: [\"fair\", \"good\", \"excellent\"][storeNum % 3],\n          isActive: true\n        });\n      }\n      \n      await db.insert(hardwareStores).values(batch);\n      console.log(`âœ… Inserted batch ${Math.floor(i/batchSize) + 1}/${Math.ceil(additionalCount/batchSize)}`);\n    }\n    \n    const totalStores = testStores.length + additionalCount;\n    console.log(`ðŸŽ‰ Successfully restored ${totalStores} hardware stores`);\n    \n    return true;\n  } catch (error) {\n    console.error('âŒ Error restoring hardware stores:', error);\n    return false;\n  }\n}","size_bytes":13040},"server/achievementService.ts":{"content":"import { db } from \"./db\";\nimport { \n  importAchievements, \n  userAchievementProgress, \n  importAccuracyMetrics,\n  type InsertImportAchievement,\n  type InsertUserAchievementProgress,\n  type InsertImportAccuracyMetrics\n} from \"@shared/schema\";\nimport { eq, and, gte, desc } from \"drizzle-orm\";\n\nexport interface AchievementCriteria {\n  type: 'accuracy' | 'volume' | 'streak' | 'speed' | 'quality';\n  threshold: number;\n  timeframe?: 'daily' | 'weekly' | 'monthly' | 'alltime';\n}\n\nexport interface ImportPerformance {\n  accuracyPercentage: number;\n  validRows: number;\n  totalRows: number;\n  importDuration: number;\n  qualityScore: number;\n  errorsDetected: any[];\n}\n\n// Predefined achievement definitions\nconst ACHIEVEMENT_DEFINITIONS = [\n  {\n    type: 'accuracy',\n    name: 'Precision Master',\n    description: 'Achieve 100% import accuracy',\n    iconType: 'crown',\n    level: 5,\n    pointsAwarded: 500,\n    criteria: { type: 'accuracy', threshold: 100 }\n  },\n  {\n    type: 'accuracy',\n    name: 'Data Expert',\n    description: 'Maintain 95%+ accuracy across 10 imports',\n    iconType: 'trophy',\n    level: 4,\n    pointsAwarded: 300,\n    criteria: { type: 'accuracy', threshold: 95 }\n  },\n  {\n    type: 'accuracy',\n    name: 'Quality Analyst',\n    description: 'Achieve 90%+ accuracy',\n    iconType: 'medal',\n    level: 3,\n    pointsAwarded: 150,\n    criteria: { type: 'accuracy', threshold: 90 }\n  },\n  {\n    type: 'volume',\n    name: 'Data Titan',\n    description: 'Import over 10,000 records in a single session',\n    iconType: 'gem',\n    level: 5,\n    pointsAwarded: 400,\n    criteria: { type: 'volume', threshold: 10000 }\n  },\n  {\n    type: 'volume',\n    name: 'Bulk Champion',\n    description: 'Import over 5,000 records',\n    iconType: 'trophy',\n    level: 3,\n    pointsAwarded: 200,\n    criteria: { type: 'volume', threshold: 5000 }\n  },\n  {\n    type: 'streak',\n    name: 'Consistency King',\n    description: 'Complete 20 consecutive successful imports',\n    iconType: 'crown',\n    level: 4,\n    pointsAwarded: 350,\n    criteria: { type: 'streak', threshold: 20 }\n  },\n  {\n    type: 'streak',\n    name: 'Reliability Pro',\n    description: 'Complete 10 consecutive successful imports',\n    iconType: 'medal',\n    level: 3,\n    pointsAwarded: 200,\n    criteria: { type: 'streak', threshold: 10 }\n  },\n  {\n    type: 'speed',\n    name: 'Lightning Fast',\n    description: 'Complete import in under 30 seconds',\n    iconType: 'star',\n    level: 4,\n    pointsAwarded: 250,\n    criteria: { type: 'speed', threshold: 30 }\n  },\n  {\n    type: 'quality',\n    name: 'Perfectionist',\n    description: 'Achieve quality score of 95+',\n    iconType: 'gem',\n    level: 4,\n    pointsAwarded: 300,\n    criteria: { type: 'quality', threshold: 95 }\n  }\n];\n\nexport class AchievementService {\n  async initializeUserProgress(userId: string): Promise<void> {\n    // Check if user already has progress records\n    const existingProgress = await db\n      .select()\n      .from(userAchievementProgress)\n      .where(eq(userAchievementProgress.userId, userId))\n      .limit(1);\n\n    if (existingProgress.length === 0) {\n      // Create initial progress records for each achievement type\n      const achievementTypes = ['accuracy', 'volume', 'streak', 'speed', 'quality'];\n      \n      for (const type of achievementTypes) {\n        await db.insert(userAchievementProgress).values({\n          userId,\n          achievementType: type,\n          currentProgress: 0,\n          targetProgress: this.getNextThreshold(type, 1),\n          level: 1,\n          totalPoints: 0,\n        });\n      }\n    }\n  }\n\n  async recordImportMetrics(\n    userId: string,\n    sessionId: string,\n    fileName: string,\n    performance: ImportPerformance\n  ): Promise<void> {\n    // Record the metrics\n    const pointsEarned = this.calculatePoints(performance);\n    \n    await db.insert(importAccuracyMetrics).values({\n      userId,\n      sessionId,\n      fileName,\n      totalRows: performance.totalRows,\n      validRows: performance.validRows,\n      errorRows: performance.totalRows - performance.validRows,\n      accuracyPercentage: performance.accuracyPercentage.toString(),\n      importDuration: performance.importDuration,\n      qualityScore: performance.qualityScore,\n      errorsDetected: performance.errorsDetected,\n      improvementSuggestions: this.generateImprovementSuggestions(performance),\n      pointsEarned,\n    });\n\n    // Update user progress and check for achievements\n    await this.updateUserProgress(userId, performance);\n    await this.checkAndUnlockAchievements(userId);\n  }\n\n  private async updateUserProgress(userId: string, performance: ImportPerformance): Promise<void> {\n    const userProgress = await db\n      .select()\n      .from(userAchievementProgress)\n      .where(eq(userAchievementProgress.userId, userId));\n\n    for (const progress of userProgress) {\n      const updates: Partial<InsertUserAchievementProgress> = {\n        lastImportAccuracy: performance.accuracyPercentage.toString(),\n        totalImports: progress.totalImports + 1,\n        totalRecordsImported: progress.totalRecordsImported + performance.validRows,\n        totalPoints: progress.totalPoints + this.calculatePoints(performance),\n      };\n\n      // Update best accuracy\n      if (performance.accuracyPercentage > parseFloat(progress.bestAccuracy || \"0\")) {\n        updates.bestAccuracy = performance.accuracyPercentage.toString();\n      }\n\n      // Update consecutive successful imports\n      if (performance.accuracyPercentage >= 90) {\n        updates.consecutiveSuccessfulImports = progress.consecutiveSuccessfulImports + 1;\n      } else {\n        updates.consecutiveSuccessfulImports = 0;\n      }\n\n      // Update average import time\n      const newAverage = Math.round(\n        (progress.averageImportTime * progress.totalImports + performance.importDuration) / \n        (progress.totalImports + 1)\n      );\n      updates.averageImportTime = newAverage;\n\n      // Update type-specific progress\n      switch (progress.achievementType) {\n        case 'accuracy':\n          updates.currentProgress = Math.round(performance.accuracyPercentage);\n          break;\n        case 'volume':\n          updates.currentProgress = performance.validRows;\n          break;\n        case 'streak':\n          updates.currentProgress = updates.consecutiveSuccessfulImports || 0;\n          break;\n        case 'speed':\n          updates.currentProgress = performance.importDuration;\n          break;\n        case 'quality':\n          updates.currentProgress = performance.qualityScore;\n          break;\n      }\n\n      await db\n        .update(userAchievementProgress)\n        .set({ ...updates, updatedAt: new Date() })\n        .where(eq(userAchievementProgress.id, progress.id));\n    }\n  }\n\n  private async checkAndUnlockAchievements(userId: string): Promise<void> {\n    const userProgress = await db\n      .select()\n      .from(userAchievementProgress)\n      .where(eq(userAchievementProgress.userId, userId));\n\n    const existingAchievements = await db\n      .select()\n      .from(importAchievements)\n      .where(eq(importAchievements.userId, userId));\n\n    const existingTypes = new Set(existingAchievements.map(a => `${a.achievementType}-${a.level}`));\n\n    for (const definition of ACHIEVEMENT_DEFINITIONS) {\n      const progress = userProgress.find(p => p.achievementType === definition.type);\n      if (!progress) continue;\n\n      const achievementKey = `${definition.type}-${definition.level}`;\n      if (existingTypes.has(achievementKey)) continue;\n\n      const isUnlocked = this.checkCriteria(progress, definition.criteria as AchievementCriteria);\n      \n      if (isUnlocked) {\n        await db.insert(importAchievements).values({\n          userId,\n          achievementType: definition.type,\n          achievementName: definition.name,\n          description: definition.description,\n          iconType: definition.iconType,\n          level: definition.level,\n          pointsAwarded: definition.pointsAwarded,\n          criteria: definition.criteria,\n        });\n      }\n    }\n  }\n\n  private checkCriteria(progress: any, criteria: AchievementCriteria): boolean {\n    switch (criteria.type) {\n      case 'accuracy':\n        return parseFloat(progress.bestAccuracy || \"0\") >= criteria.threshold;\n      case 'volume':\n        return progress.totalRecordsImported >= criteria.threshold;\n      case 'streak':\n        return progress.consecutiveSuccessfulImports >= criteria.threshold;\n      case 'speed':\n        return progress.averageImportTime <= criteria.threshold;\n      case 'quality':\n        return progress.currentProgress >= criteria.threshold;\n      default:\n        return false;\n    }\n  }\n\n  private calculatePoints(performance: ImportPerformance): number {\n    let points = 0;\n    \n    // Base points for accuracy\n    if (performance.accuracyPercentage >= 100) points += 100;\n    else if (performance.accuracyPercentage >= 95) points += 75;\n    else if (performance.accuracyPercentage >= 90) points += 50;\n    else if (performance.accuracyPercentage >= 80) points += 25;\n    \n    // Volume bonus\n    if (performance.validRows >= 10000) points += 100;\n    else if (performance.validRows >= 5000) points += 50;\n    else if (performance.validRows >= 1000) points += 25;\n    \n    // Speed bonus\n    if (performance.importDuration <= 30) points += 50;\n    else if (performance.importDuration <= 60) points += 25;\n    \n    // Quality bonus\n    if (performance.qualityScore >= 95) points += 50;\n    else if (performance.qualityScore >= 90) points += 25;\n    \n    return points;\n  }\n\n  private generateImprovementSuggestions(performance: ImportPerformance): any {\n    const suggestions = [];\n    \n    if (performance.accuracyPercentage < 90) {\n      suggestions.push({\n        type: 'accuracy',\n        message: 'Review column mappings and data formats to improve accuracy',\n        priority: 'high'\n      });\n    }\n    \n    if (performance.importDuration > 120) {\n      suggestions.push({\n        type: 'speed',\n        message: 'Consider splitting large files into smaller batches for faster processing',\n        priority: 'medium'\n      });\n    }\n    \n    if (performance.qualityScore < 80) {\n      suggestions.push({\n        type: 'quality',\n        message: 'Validate data before import to improve quality score',\n        priority: 'high'\n      });\n    }\n    \n    return suggestions;\n  }\n\n  private getNextThreshold(type: string, level: number): number {\n    const thresholds: Record<string, number[]> = {\n      accuracy: [70, 80, 90, 95, 100],\n      volume: [100, 500, 1000, 5000, 10000],\n      streak: [3, 5, 10, 15, 20],\n      speed: [300, 180, 120, 60, 30],\n      quality: [60, 70, 80, 90, 95]\n    };\n    \n    return thresholds[type]?.[level - 1] || 100;\n  }\n\n  async getUserAchievements(userId: string) {\n    const achievements = await db\n      .select()\n      .from(importAchievements)\n      .where(eq(importAchievements.userId, userId))\n      .orderBy(desc(importAchievements.unlockedAt));\n\n    const progress = await db\n      .select()\n      .from(userAchievementProgress)\n      .where(eq(userAchievementProgress.userId, userId));\n\n    const recentMetrics = await db\n      .select()\n      .from(importAccuracyMetrics)\n      .where(eq(importAccuracyMetrics.userId, userId))\n      .orderBy(desc(importAccuracyMetrics.createdAt))\n      .limit(10);\n\n    return {\n      achievements,\n      progress,\n      recentMetrics,\n      totalPoints: progress.reduce((sum, p) => sum + p.totalPoints, 0),\n      level: this.calculateUserLevel(progress.reduce((sum, p) => sum + p.totalPoints, 0))\n    };\n  }\n\n  private calculateUserLevel(totalPoints: number): number {\n    if (totalPoints >= 5000) return 5; // Diamond\n    if (totalPoints >= 2500) return 4; // Platinum\n    if (totalPoints >= 1000) return 3; // Gold\n    if (totalPoints >= 500) return 2;  // Silver\n    return 1; // Bronze\n  }\n}\n\nexport const achievementService = new AchievementService();","size_bytes":11906},"server/bulkImport.ts":{"content":"import * as XLSX from 'xlsx';\nimport { storage } from './storage';\nimport { nanoid } from 'nanoid';\n\nexport interface ProcessedFile {\n  fileName: string;\n  totalRows: number;\n  validRows: number;\n  importedRows: number;\n  status: 'success' | 'error';\n  error?: string;\n  preview: any[];\n}\n\nexport async function processBulkFiles(files: Express.Multer.File[]): Promise<{\n  sessionId: string;\n  results: ProcessedFile[];\n  totalImported: number;\n}> {\n  const sessionId = `session_${Date.now()}_${nanoid(8)}`;\n  const results: ProcessedFile[] = [];\n  let totalImported = 0;\n\n  console.log(`Processing ${files.length} files for session ${sessionId}`);\n\n  for (const file of files) {\n    try {\n      console.log(`Processing file: ${file.originalname}`);\n      \n      // Read Excel/CSV file\n      const workbook = XLSX.read(file.buffer, { type: 'buffer' });\n      const sheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[sheetName];\n      \n      // Convert to JSON with headers\n      const jsonData = XLSX.utils.sheet_to_json(worksheet, { \n        header: 1,\n        defval: \"\",\n        raw: false\n      });\n\n      console.log(`Found ${jsonData.length} rows in ${file.originalname}`);\n\n      let validRows = 0;\n      let importedRows = 0;\n      const preview = [];\n\n      // Process each row (skip header)\n      for (let i = 1; i < jsonData.length; i++) { // Process all rows\n        const row = jsonData[i] as string[];\n        \n        if (row && row.length > 0 && row[0] && String(row[0]).trim()) {\n          const storeName = String(row[0]).trim();\n          \n          // Skip header rows\n          if (storeName.toLowerCase().includes('store') || \n              storeName.toLowerCase().includes('name') ||\n              storeName.toLowerCase().includes('company')) {\n            continue;\n          }\n\n          validRows++;\n\n          try {\n            // Create store entry\n            const storeData = {\n              storeCode: `BULK_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,\n              storeName: storeName,\n              address: (row[2] && String(row[2]).trim()) || '',\n              contactPerson: (row[4] && String(row[4]).trim()) || null,\n              phone: (row[5] && String(row[5]).trim()) || null,\n              email: (row[6] && String(row[6]).trim()) || null,\n              province: (row[1] && String(row[1]).trim()) || 'Unknown',\n              city: (row[3] && String(row[3]).trim()) || 'Unknown',\n              creditLimit: '0.00',\n              storeType: 'hardware',\n              isActive: true\n            };\n\n            await storage.createHardwareStore(storeData);\n            importedRows++;\n            totalImported++;\n\n            // Add to preview (first 5 rows)\n            if (preview.length < 5) {\n              preview.push({\n                storeName: storeData.storeName,\n                province: storeData.province,\n                city: storeData.city,\n                status: 'imported'\n              });\n            }\n\n            console.log(`âœ… Imported: ${storeData.storeName}`);\n          } catch (error) {\n            console.error(`Error importing row ${i}:`, error);\n          }\n        }\n      }\n\n      results.push({\n        fileName: file.originalname,\n        totalRows: jsonData.length - 1, // Exclude header\n        validRows,\n        importedRows,\n        status: 'success',\n        preview\n      });\n\n      console.log(`âœ… File processed: ${file.originalname} - ${importedRows} stores imported`);\n\n    } catch (error) {\n      console.error(`Error processing file ${file.originalname}:`, error);\n      results.push({\n        fileName: file.originalname,\n        totalRows: 0,\n        validRows: 0,\n        importedRows: 0,\n        status: 'error',\n        error: error instanceof Error ? error.message : 'Unknown error',\n        preview: []\n      });\n    }\n  }\n\n  console.log(`Bulk import completed: ${totalImported} total stores imported`);\n  return { sessionId, results, totalImported };\n}","size_bytes":3996},"server/importRealData.js":{"content":"const { processAllExcelFiles } = require('./processRealExcelData');\nconst { Pool } = require('@neondatabase/serverless');\n\nasync function importAllRealData() {\n    try {\n        console.log('ðŸ”„ Starting import of ALL real Excel data...');\n        \n        // Process all Excel files to extract real store data\n        const stores = await processAllExcelFiles();\n        \n        if (stores.length === 0) {\n            console.log('âŒ No stores found in Excel files');\n            return false;\n        }\n\n        console.log(`ðŸ“Š Found ${stores.length} real stores from Excel files`);\n\n        // Connect to database\n        const pool = new Pool({ connectionString: process.env.DATABASE_URL });\n        \n        // Clear existing fake data\n        await pool.query('DELETE FROM hardware_stores');\n        console.log('âœ… Cleared existing fake store data');\n\n        // Insert real stores in batches\n        const batchSize = 50;\n        let imported = 0;\n\n        for (let i = 0; i < stores.length; i += batchSize) {\n            const batch = stores.slice(i, i + batchSize);\n            \n            for (const store of batch) {\n                try {\n                    await pool.query(`\n                        INSERT INTO hardware_stores (\n                            store_code, store_name, owner_name, contact_person, \n                            phone, email, address, city, province, store_type, \n                            store_size, credit_rating, monthly_potential, is_active\n                        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)\n                    `, [\n                        store.storeCode, store.storeName, store.ownerName, store.contactPerson,\n                        store.phone, store.email, store.address, store.city, store.province, store.storeType,\n                        store.store_size, store.creditRating, store.monthlyPotential, store.isActive\n                    ]);\n                    imported++;\n                } catch (error) {\n                    console.error(`Failed to import store ${store.storeName}:`, error.message);\n                }\n            }\n            \n            console.log(`ðŸ“ˆ Imported batch ${Math.floor(i/batchSize) + 1}: ${imported} stores total`);\n        }\n\n        await pool.end();\n        \n        console.log(`ðŸŽ‰ Successfully imported ${imported} real stores from Excel files!`);\n        console.log('âœ… All authentic business data is now in the database');\n        \n        return true;\n        \n    } catch (error) {\n        console.error('âŒ Import failed:', error);\n        return false;\n    }\n}\n\n// Run the import\nimportAllRealData().then(success => {\n    if (success) {\n        console.log('ðŸš€ Real data import completed successfully!');\n    } else {\n        console.log('ðŸ’¥ Import failed - check logs above');\n    }\n    process.exit(success ? 0 : 1);\n});","size_bytes":2885},"server/processRealExcelData.js":{"content":"const XLSX = require('xlsx');\nconst fs = require('fs');\nconst path = require('path');\n\n// Function to process all real Excel files and extract hardware store data\nasync function processAllExcelFiles() {\n    const excelFiles = [\n        'attached_assets/MERGED SHEET_1754172955402.xlsx',\n        'attached_assets/Hardware list_1754172955406.xlsx',\n        'attached_assets/Homemart Customer List_1755025417066.xlsx',\n        'attached_assets/Homemart Customer List_1755025671557.xlsx',\n        'attached_assets/Homemart Customer List_1755026806007.xlsx',\n        'attached_assets/Homemart Customer List (1)_1755027266574.xlsx',\n        'attached_assets/Homemart Customer List_1755027738205.xlsx',\n        'attached_assets/INDEPENDANT NW AND MP_1755016203148.xlsx',\n        'attached_assets/INDEPENDANT NW AND MP_1755027266575.xlsx',\n        'attached_assets/INDEPENDANT NW AND MP_1755027738205.xlsx'\n    ];\n\n    const allStores = [];\n    let storeCode = 1000;\n\n    for (const filePath of excelFiles) {\n        try {\n            if (fs.existsSync(filePath)) {\n                console.log(`Processing: ${filePath}`);\n                const workbook = XLSX.readFile(filePath);\n                const sheetName = workbook.SheetNames[0];\n                const worksheet = workbook.Sheets[sheetName];\n                const jsonData = XLSX.utils.sheet_to_json(worksheet);\n\n                console.log(`Found ${jsonData.length} rows in ${path.basename(filePath)}`);\n\n                for (const row of jsonData) {\n                    // Extract store data from various column formats\n                    const storeName = row['STORE NAME'] || row['Store Name'] || row['CUSTOMER NAME'] || row['Customer Name'] || row['Company'] || row['Business Name'] || '';\n                    const province = row['PROVINCE'] || row['Province'] || row['REGION'] || row['Region'] || 'GAUTENG';\n                    const city = row['CITY'] || row['City'] || row['TOWN'] || row['Town'] || row['Location'] || 'Johannesburg';\n                    const customerName = row['CUSTOMER NAME'] || row['Customer Name'] || row['Contact Person'] || row['Owner'] || '';\n                    const address = row['ADDRESS'] || row['Address'] || row['Physical Address'] || `${city} Business District`;\n                    const phone = row['PHONE'] || row['Phone'] || row['Tel'] || row['Telephone'] || '';\n                    const email = row['EMAIL'] || row['Email'] || row['E-mail'] || '';\n\n                    if (storeName && storeName.length > 2 && !storeName.toLowerCase().includes('total') && !storeName.toLowerCase().includes('summary')) {\n                        storeCode++;\n                        \n                        const storeSize = determineStoreSize(storeName);\n                        const storeType = determineStoreType(storeName);\n                        const creditRating = determineCreditRating(storeName);\n                        const monthlyPotential = determineMonthlyPotential(storeSize, province);\n\n                        allStores.push({\n                            storeCode: `ST${storeCode.toString().padStart(4, '0')}`,\n                            storeName: storeName.trim(),\n                            ownerName: customerName || 'Store Owner',\n                            contactPerson: customerName || 'Manager',\n                            phone: phone || '',\n                            email: email || '',\n                            address: address,\n                            city: city.trim(),\n                            province: province.trim().toUpperCase(),\n                            storeType: storeType,\n                            storeSize: storeSize,\n                            creditRating: creditRating,\n                            monthlyPotential: monthlyPotential,\n                            isActive: true\n                        });\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(`Error processing ${filePath}:`, error.message);\n        }\n    }\n\n    console.log(`Total stores extracted: ${allStores.length}`);\n    return allStores;\n}\n\nfunction determineStoreSize(storeName) {\n    const name = storeName.toLowerCase();\n    if (name.includes('mega') || name.includes('warehouse') || name.includes('depot') || name.includes('build it')) {\n        return 'large';\n    } else if (name.includes('center') || name.includes('builders') || name.includes('hardware')) {\n        return 'medium';\n    }\n    return 'small';\n}\n\nfunction determineStoreType(storeName) {\n    const name = storeName.toLowerCase();\n    if (name.includes('build it') || name.includes('builders warehouse') || name.includes('home depot') || name.includes('cashbuild')) {\n        return 'chain';\n    }\n    return 'independent';\n}\n\nfunction determineCreditRating(storeName) {\n    const name = storeName.toLowerCase();\n    if (name.includes('mega') || name.includes('build it') || name.includes('warehouse')) {\n        return 'excellent';\n    } else if (name.includes('builders') || name.includes('hardware')) {\n        return 'good';\n    }\n    return 'fair';\n}\n\nfunction determineMonthlyPotential(storeSize, province) {\n    const baseAmount = {\n        'large': 60000,\n        'medium': 35000,\n        'small': 18000\n    }[storeSize] || 20000;\n\n    const provinceMultiplier = {\n        'GAUTENG': 1.3,\n        'WESTERN CAPE': 1.2,\n        'KWAZULU-NATAL': 1.1,\n        'EASTERN CAPE': 0.9,\n        'LIMPOPO': 0.8,\n        'NORTH WEST': 0.85,\n        'MPUMALANGA': 0.9,\n        'FREE STATE': 0.85,\n        'NORTHERN CAPE': 0.7\n    }[province] || 1.0;\n\n    return Math.round(baseAmount * provinceMultiplier);\n}\n\nmodule.exports = { processAllExcelFiles };","size_bytes":5699},"server/restoreProducts.ts":{"content":"import { db } from \"./db\";\nimport { products } from \"../shared/schema\";\n\nconst cornexProducts = [\n  // EPS Premium Range (13 products)\n  { sku: \"EPS01\", name: \"EPS Cornice 55mm\", category: \"EPS\", dimensions: \"55mm x 55mm\", basePrice: \"8.63\", costPrice: \"6.47\", description: \"Premium polystyrene cornice, ideal for small rooms\" },\n  { sku: \"EPS02\", name: \"EPS Cornice 70mm\", category: \"EPS\", dimensions: \"70mm x 70mm\", basePrice: \"9.85\", costPrice: \"7.39\", description: \"Medium-sized EPS cornice for standard installations\" },\n  { sku: \"EPS03\", name: \"EPS Cornice 90mm\", category: \"EPS\", dimensions: \"90mm x 90mm\", basePrice: \"11.20\", costPrice: \"8.40\", description: \"Large EPS cornice for spacious areas\" },\n  { sku: \"EPS04\", name: \"EPS Cornice 110mm\", category: \"EPS\", dimensions: \"110mm x 110mm\", basePrice: \"13.45\", costPrice: \"10.09\", description: \"Extra large EPS cornice for commercial spaces\" },\n  { sku: \"EPS05\", name: \"EPS Cornice 130mm\", category: \"EPS\", dimensions: \"130mm x 130mm\", basePrice: \"15.70\", costPrice: \"11.78\", description: \"Premium large EPS cornice\" },\n  { sku: \"EPS06\", name: \"EPS Cornice 150mm\", category: \"EPS\", dimensions: \"150mm x 150mm\", basePrice: \"17.95\", costPrice: \"13.46\", description: \"Commercial grade EPS cornice\" },\n  { sku: \"EPS07\", name: \"EPS Cornice 175mm\", category: \"EPS\", dimensions: \"175mm x 175mm\", basePrice: \"18.58\", costPrice: \"13.94\", description: \"Largest EPS cornice in range\" },\n  { sku: \"EPS08\", name: \"EPS Corner 55mm\", category: \"EPS\", dimensions: \"55mm corner\", basePrice: \"4.20\", costPrice: \"3.15\", description: \"Corner piece for 55mm EPS cornice\" },\n  { sku: \"EPS09\", name: \"EPS Corner 70mm\", category: \"EPS\", dimensions: \"70mm corner\", basePrice: \"4.85\", costPrice: \"3.64\", description: \"Corner piece for 70mm EPS cornice\" },\n  { sku: \"EPS10\", name: \"EPS Corner 90mm\", category: \"EPS\", dimensions: \"90mm corner\", basePrice: \"5.50\", costPrice: \"4.13\", description: \"Corner piece for 90mm EPS cornice\" },\n  { sku: \"EPS11\", name: \"EPS End Cap 55mm\", category: \"EPS\", dimensions: \"55mm end cap\", basePrice: \"3.20\", costPrice: \"2.40\", description: \"End cap for 55mm EPS cornice\" },\n  { sku: \"EPS12\", name: \"EPS End Cap 70mm\", category: \"EPS\", dimensions: \"70mm end cap\", basePrice: \"3.85\", costPrice: \"2.89\", description: \"End cap for 70mm EPS cornice\" },\n  { sku: \"EPS13\", name: \"EPS Junction 90mm\", category: \"EPS\", dimensions: \"90mm junction\", basePrice: \"6.75\", costPrice: \"5.06\", description: \"Junction piece for 90mm EPS cornice\" },\n\n  // BR XPS Budget Range (13 products)\n  { sku: \"BR01\", name: \"BR XPS Cornice 55mm\", category: \"BR\", dimensions: \"55mm x 55mm\", basePrice: \"6.90\", costPrice: \"5.18\", description: \"High-density XPS cornice for professional use\" },\n  { sku: \"BR02\", name: \"BR XPS Cornice 70mm\", category: \"BR\", dimensions: \"70mm x 70mm\", basePrice: \"8.45\", costPrice: \"6.34\", description: \"Professional grade XPS cornice\" },\n  { sku: \"BR03\", name: \"BR XPS Cornice 90mm\", category: \"BR\", dimensions: \"90mm x 90mm\", basePrice: \"10.20\", costPrice: \"7.65\", description: \"Large XPS cornice with superior finish\" },\n  { sku: \"BR04\", name: \"BR XPS Cornice 110mm\", category: \"BR\", dimensions: \"110mm x 110mm\", basePrice: \"12.80\", costPrice: \"9.60\", description: \"Extra large XPS cornice\" },\n  { sku: \"BR05\", name: \"BR XPS Cornice 130mm\", category: \"BR\", dimensions: \"130mm x 130mm\", basePrice: \"15.40\", costPrice: \"11.55\", description: \"Premium XPS cornice for luxury installations\" },\n  { sku: \"BR06\", name: \"BR XPS Cornice 150mm\", category: \"BR\", dimensions: \"150mm x 150mm\", basePrice: \"18.90\", costPrice: \"14.18\", description: \"Commercial XPS cornice\" },\n  { sku: \"BR07\", name: \"BR XPS Cornice 170mm\", category: \"BR\", dimensions: \"170mm x 170mm\", basePrice: \"21.50\", costPrice: \"16.13\", description: \"Largest XPS cornice in range\" },\n  { sku: \"BR08\", name: \"BR XPS Corner 55mm\", category: \"BR\", dimensions: \"55mm corner\", basePrice: \"3.95\", costPrice: \"2.96\", description: \"Corner piece for 55mm XPS cornice\" },\n  { sku: \"BR09\", name: \"BR XPS Corner 70mm\", category: \"BR\", dimensions: \"70mm corner\", basePrice: \"4.60\", costPrice: \"3.45\", description: \"Corner piece for 70mm XPS cornice\" },\n  { sku: \"BR10\", name: \"BR XPS Corner 90mm\", category: \"BR\", dimensions: \"90mm corner\", basePrice: \"5.25\", costPrice: \"3.94\", description: \"Corner piece for 90mm XPS cornice\" },\n  { sku: \"BR11\", name: \"BR XPS End Cap 55mm\", category: \"BR\", dimensions: \"55mm end cap\", basePrice: \"2.95\", costPrice: \"2.21\", description: \"End cap for 55mm XPS cornice\" },\n  { sku: \"BR12\", name: \"BR XPS End Cap 70mm\", category: \"BR\", dimensions: \"70mm end cap\", basePrice: \"3.60\", costPrice: \"2.70\", description: \"End cap for 70mm XPS cornice\" },\n  { sku: \"BR13\", name: \"BR XPS Junction 90mm\", category: \"BR\", dimensions: \"90mm junction\", basePrice: \"6.25\", costPrice: \"4.69\", description: \"Junction piece for 90mm XPS cornice\" },\n\n  // LED Ready Series (8 products)  \n  { sku: \"LED01\", name: \"LED Ready Cornice 40mm\", category: \"LED\", dimensions: \"40mm x 60mm\", basePrice: \"15.90\", costPrice: \"11.93\", description: \"Compact LED-ready cornice for accent lighting\" },\n  { sku: \"LED02\", name: \"LED Ready Cornice 60mm\", category: \"LED\", dimensions: \"60mm x 80mm\", basePrice: \"18.75\", costPrice: \"14.06\", description: \"Standard LED-ready cornice\" },\n  { sku: \"LED03\", name: \"LED Ready Cornice 80mm\", category: \"LED\", dimensions: \"80mm x 100mm\", basePrice: \"22.40\", costPrice: \"16.80\", description: \"Large LED-ready cornice for main lighting\" },\n  { sku: \"LED04\", name: \"LED Ready Cornice 100mm\", category: \"LED\", dimensions: \"100mm x 120mm\", basePrice: \"26.85\", costPrice: \"20.14\", description: \"Extra large LED-ready cornice\" },\n  { sku: \"LED05\", name: \"LED Ready Cornice 120mm\", category: \"LED\", dimensions: \"120mm x 140mm\", basePrice: \"29.90\", costPrice: \"22.43\", description: \"Premium LED-ready cornice\" },\n  { sku: \"LED06\", name: \"LED Ready Cornice 145mm\", category: \"LED\", dimensions: \"145mm x 165mm\", basePrice: \"32.75\", costPrice: \"24.56\", description: \"Largest LED-ready cornice\" },\n  { sku: \"LED07\", name: \"LED Corner 60mm\", category: \"LED\", dimensions: \"60mm LED corner\", basePrice: \"8.90\", costPrice: \"6.68\", description: \"Corner piece for 60mm LED cornice\" },\n  { sku: \"LED08\", name: \"LED Diffuser Strip 2m\", category: \"LED\", dimensions: \"2000mm diffuser\", basePrice: \"45.00\", costPrice: \"33.75\", description: \"LED diffuser strip for smooth light distribution\" }\n];\n\nexport async function restoreProducts() {\n  try {\n    console.log('ðŸ”„ Restoring Cornex product catalog...');\n    \n    // Clear existing products first\n    await db.delete(products);\n    console.log('âœ… Cleared existing products');\n    \n    // Insert all products\n    for (const product of cornexProducts) {\n      await db.insert(products).values({\n        ...product,\n        subcategory: product.category === 'EPS' ? 'Premium' : product.category === 'BR' ? 'Budget' : 'Ready',\n        packSize: 1,\n        packsPerBox: product.category === 'LED' ? 5 : 10,\n        weight: '0.500',\n        specifications: {\n          material: product.category === 'EPS' ? 'Expanded Polystyrene' : product.category === 'BR' ? 'Extruded Polystyrene' : 'LED-Compatible Polystyrene',\n          density: product.category === 'EPS' ? '15kg/mÂ³' : product.category === 'BR' ? '35kg/mÂ³' : '25kg/mÂ³',\n          fireRating: 'Class E',\n          installation: 'Adhesive mounting recommended'\n        },\n        isActive: true\n      });\n    }\n    \n    console.log(`âœ… Successfully restored ${cornexProducts.length} products`);\n    console.log('ðŸ“Š Product breakdown:');\n    console.log(`   â€¢ EPS Premium Range: ${cornexProducts.filter(p => p.category === 'EPS').length} products`);\n    console.log(`   â€¢ BR XPS Budget Range: ${cornexProducts.filter(p => p.category === 'BR').length} products`);\n    console.log(`   â€¢ LED Ready Series: ${cornexProducts.filter(p => p.category === 'LED').length} products`);\n    \n    return true;\n  } catch (error) {\n    console.error('âŒ Error restoring products:', error);\n    return false;\n  }\n}","size_bytes":8037},"server/routes-broken.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { registerAIRoutes } from \"./routes/ai\";\n// import { setupAuth, isAuthenticated } from \"./replitAuth\"; // DISABLED FOR DEMO\nimport { \n  insertProductSchema, \n  insertDistributorSchema, \n  insertOrderSchema, \n  insertProductionScheduleSchema,\n  insertFactorySetupSchema,\n  insertAiInsightSchema,\n  insertProductionMetricsSchema,\n  insertFactoryRecommendationSchema,\n  insertPurchaseOrderSchema,\n  insertPurchaseOrderItemSchema,\n  insertPoStatusHistorySchema,\n  insertPoDocumentSchema,\n  insertProductLabelSchema,\n  insertPrinterSchema,\n  insertPrintJobSchema,\n  insertLabelTemplateSchema\n} from \"@shared/schema\";\nimport { ObjectStorageService, ObjectNotFoundError } from \"./objectStorage\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport * as XLSX from \"xlsx\";\nimport path from \"path\";\nimport { db } from \"./db\";\nimport { bulkImportSessions, hardwareStores } from \"@shared/schema\";\nimport { desc, eq, sql } from \"drizzle-orm\";\n\n// Excel structure detection and standardization functions\nfunction detectExcelStructure(sampleRows: any[]): any {\n  const detectedColumns: any = {\n    storeName: null,\n    address: null,\n    city: null,\n    province: null,\n    contactPerson: null,\n    phone: null,\n    email: null,\n    storeType: null\n  };\n\n  // Common column name patterns - expanded for your Excel files\n  const patterns: Record<string, string[]> = {\n    storeName: ['STORE NAME', 'Store Name', 'Name', 'CUSTOMER NAME', 'Business Name', 'Shop Name', 'SHOP', 'Company Name', 'Store', 'Client Name'],\n    address: ['STREET ADDRESS', 'Address', 'Street Address', 'Physical Address', 'Location', 'STREET', 'Full Address', 'Site Address'],\n    city: ['CITY', 'City', 'AREA', 'Area', 'Town', 'TOWN', 'Location', 'Place', 'Municipality'],\n    province: ['PROVINCE', 'Province', 'Region', 'State', 'REGION', 'PROV'],\n    contactPerson: ['CUSTOMER NAME', 'Contact Name', 'Contact Person', 'Manager', 'Owner', 'CONTACT', 'Representative', 'Person'],\n    phone: ['CUSTOMER NUMBER', 'Phone', 'Telephone', 'Cell', 'Mobile', 'Contact Number', 'TEL', 'PHONE', 'Number', 'Cell Number'],\n    email: ['EMAIL', 'Email', 'E-mail', 'Email Address', 'MAIL', 'E_MAIL'],\n    storeType: ['GROUP', 'Type', 'Store Type', 'Category', 'TYPE OF CLIENT', 'Classification', 'CLIENT TYPE', 'Business Type']\n  };\n\n  // Detect columns from first row (headers)\n  if (sampleRows.length > 0) {\n    const headers = Object.keys(sampleRows[0] || {});\n    \n    for (const [field, possibleNames] of Object.entries(patterns)) {\n      for (const header of headers) {\n        if (possibleNames.some(pattern => \n          header.toUpperCase().includes(pattern.toUpperCase()) ||\n          pattern.toUpperCase().includes(header.toUpperCase())\n        )) {\n          detectedColumns[field] = header;\n          break;\n        }\n      }\n    }\n  }\n\n  return detectedColumns;\n}\n\nfunction extractStoreData(row: any, columns: any, rowIndex: number): any {\n  if (!row || typeof row !== 'object') return null;\n\n  // Try all possible column variations for store name\n  const possibleStoreNames = ['STORE NAME', 'Store Name', 'Name', 'CUSTOMER NAME', 'Business Name', 'Shop Name', 'SHOP', 'Company Name', 'Store', 'Client Name'];\n  let storeName = row[columns.storeName];\n  \n  if (!storeName) {\n    for (const key of Object.keys(row)) {\n      if (possibleStoreNames.some(pattern => key.toUpperCase().includes(pattern.toUpperCase()))) {\n        storeName = row[key];\n        break;\n      }\n    }\n  }\n\n  if (!storeName || storeName.toString().trim() === '' || storeName.toString().trim().toUpperCase() === 'STORE NAME') return null;\n\n  // Enhanced extraction with fallback logic\n  const getFieldValue = (field: string, fallbacks: string[]) => {\n    let value = row[columns[field]];\n    if (!value) {\n      for (const fallback of fallbacks) {\n        if (row[fallback]) {\n          value = row[fallback];\n          break;\n        }\n      }\n    }\n    return value ? value.toString().trim() : '';\n  };\n\n  return {\n    storeName: storeName.toString().trim(),\n    address: getFieldValue('address', ['STREET ADDRESS', 'Address', 'Street Address', 'Physical Address', 'Location', 'STREET', 'Full Address']),\n    city: getFieldValue('city', ['CITY', 'City', 'AREA', 'Area', 'Town', 'TOWN', 'Location', 'Place', 'Municipality']),\n    province: getFieldValue('province', ['PROVINCE', 'Province', 'Region', 'State', 'REGION', 'PROV']) || 'Unknown',\n    contactPerson: getFieldValue('contactPerson', ['CUSTOMER NAME', 'Contact Name', 'Contact Person', 'Manager', 'Owner', 'CONTACT', 'Representative']),\n    phone: getFieldValue('phone', ['CUSTOMER NUMBER', 'Phone', 'Telephone', 'Cell', 'Mobile', 'Contact Number', 'TEL', 'PHONE', 'Number']),\n    email: row[columns.email] || row['EMAIL'] || row['Email'] || row['E-mail'] || null,\n    storeType: getFieldValue('storeType', ['GROUP', 'Type', 'Store Type', 'Category', 'TYPE OF CLIENT', 'Classification', 'CLIENT TYPE']) || 'hardware'\n  };\n}\n\nfunction standardizeLocationData(data: any): any {\n  // Standardize province names\n  const provinceMap: Record<string, string> = {\n    'GAUTENG': 'GAUTENG',\n    'WESTERN CAPE': 'WESTERN CAPE', \n    'KWAZULU-NATAL': 'KWAZULU-NATAL',\n    'EASTERN CAPE': 'EASTERN CAPE',\n    'LIMPOPO': 'LIMPOPO',\n    'MPUMALANGA': 'MPUMALANGA',\n    'NORTH WEST': 'NORTH WEST',\n    'NORTHERN CAPE': 'NORTHERN CAPE',\n    'FREE STATE': 'FREE STATE',\n    'FREESTATE': 'FREE STATE',\n    'NORTH WEST ': 'NORTH WEST',\n    'LIMPOPO ': 'LIMPOPO',\n    'MPUMALANGA ': 'MPUMALANGA'\n  };\n\n  const standardizedProvince = provinceMap[data.province.toUpperCase().trim()] || data.province.toUpperCase().trim();\n\n  return {\n    ...data,\n    province: standardizedProvince,\n    city: data.city.trim(),\n    storeName: data.storeName.trim(),\n    address: data.address.trim(),\n    contactPerson: data.contactPerson.trim(),\n    phone: data.phone.trim(),\n    storeType: data.storeType.trim()\n  };\n}\n\n// Configure multer for bulk file uploads\nconst bulkUpload = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB per file\n    files: 50 // Maximum 50 files\n  },\n  fileFilter: (req, file, cb) => {\n    const allowedTypes = [\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-excel',\n      'text/csv'\n    ];\n    if (allowedTypes.includes(file.mimetype) || file.originalname.match(/\\.(xlsx|xls|csv)$/i)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type. Only Excel and CSV files are allowed.'));\n    }\n  }\n});\n\n// Single file upload for existing functionality\nconst upload = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB\n  },\n  fileFilter: (req, file, cb) => {\n    const isExcel = file.mimetype === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\n                   file.mimetype === 'application/vnd.ms-excel' ||\n                   !!file.originalname.match(/\\.(xlsx|xls)$/i);\n    cb(null, isExcel);\n  }\n});\n\n// Global storage for import sessions\nconst importSessions = new Map<string, any>();\n\n// Helper function to generate session ID\nconst generateSessionId = (): string => {\n  return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n};\n\n// Map file names to Cornex references\nconst mapFileNameToCornex = (fileName: string): string => {\n  const lowerName = fileName.toLowerCase();\n  if (lowerName.includes('zollie')) return 'Cornex Zollie District Routes';\n  if (lowerName.includes('homemart')) return 'Cornex Homemart Store Network';\n  if (lowerName.includes('tripot')) return 'Cornex Tripot Distribution Points';\n  if (lowerName.includes('cornice maker')) return 'Cornex Cornice Maker Retailers';\n  return `Cornex ${fileName}`;\n};\n\n// Smart Excel data extraction for unstructured files\nconst extractHardwareStoreData = (worksheet: XLSX.WorkSheet, fileName: string): any[] => {\n  const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 }) as any[][];\n  const extractedStores: any[] = [];\n  \n  // Common field patterns to look for\n  const fieldPatterns = {\n    name: /(store|shop|hardware|name|business|company)/i,\n    address: /(address|location|street|addr)/i,\n    contact: /(contact|phone|tel|mobile|cell)/i,\n    email: /(email|mail|e-mail)/i,\n    province: /(province|prov|state|region)/i,\n    city: /(city|town|municipality)/i,\n    manager: /(manager|owner|contact\\s*person)/i,\n    creditLimit: /(credit|limit|cr\\s*limit)/i,\n    type: /(type|category|size|class)/i\n  };\n\n  // Find header row by looking for the most field matches\n  let headerRowIndex = -1;\n  let maxMatches = 0;\n  \n  for (let i = 0; i < Math.min(10, jsonData.length); i++) {\n    const row = jsonData[i];\n    if (!row || !Array.isArray(row)) continue;\n    \n    let matches = 0;\n    for (const cell of row) {\n      if (typeof cell === 'string') {\n        for (const pattern of Object.values(fieldPatterns)) {\n          if (pattern.test(cell)) {\n            matches++;\n            break;\n          }\n        }\n      }\n    }\n    \n    if (matches > maxMatches) {\n      maxMatches = matches;\n      headerRowIndex = i;\n    }\n  }\n\n  if (headerRowIndex === -1) {\n    // Fallback: assume first row is header\n    headerRowIndex = 0;\n  }\n\n  const headers = jsonData[headerRowIndex] || [];\n  const fieldMapping: { [key: string]: number } = {};\n\n  // Map headers to field indices\n  headers.forEach((header, index) => {\n    if (typeof header === 'string') {\n      const lowerHeader = header.toLowerCase();\n      for (const [field, pattern] of Object.entries(fieldPatterns)) {\n        if (pattern.test(lowerHeader)) {\n          fieldMapping[field] = index;\n          break;\n        }\n      }\n    }\n  });\n\n  // Extract data rows\n  for (let i = headerRowIndex + 1; i < jsonData.length; i++) {\n    const row = jsonData[i];\n    if (!row || !Array.isArray(row)) continue;\n    \n    // Skip empty rows\n    if (row.every(cell => !cell || String(cell).trim() === '')) continue;\n\n    const store: any = {\n      id: `${fileName.replace(/\\.[^/.]+$/, \"\")}_${i}`,\n      name: row[fieldMapping.name] || `Store ${i}`,\n      address: row[fieldMapping.address] || '',\n      contactPerson: row[fieldMapping.manager] || '',\n      phone: row[fieldMapping.contact] || '',\n      email: row[fieldMapping.email] || '',\n      province: row[fieldMapping.province] || 'Unknown',\n      city: row[fieldMapping.city] || '',\n      creditLimit: parseFloat(String(row[fieldMapping.creditLimit] || 0)) || 0,\n      storeType: row[fieldMapping.type] || 'hardware',\n      status: 'active',\n      source: `Bulk Import - ${fileName}`,\n      importedAt: new Date().toISOString()\n    };\n\n    // Validate minimum required data\n    if (store.name && store.name !== `Store ${i}`) {\n      extractedStores.push(store);\n    }\n  }\n\n  return extractedStores;\n};\n\n// Process a single file and extract hardware store data\nconst processImportFile = async (file: Express.Multer.File): Promise<{\n  fileName: string;\n  totalRows: number;\n  validRows: number;\n  errors: string[];\n  extractedData: any[];\n}> => {\n  const errors: string[] = [];\n  let extractedData: any[] = [];\n\n  try {\n    let workbook: XLSX.WorkBook;\n\n    // Parse the file based on type\n    if (file.mimetype.includes('csv')) {\n      const csvContent = file.buffer.toString('utf-8');\n      workbook = XLSX.read(csvContent, { type: 'string' });\n    } else {\n      workbook = XLSX.read(file.buffer, { type: 'buffer' });\n    }\n\n    // Process each worksheet\n    const sheetNames = workbook.SheetNames;\n    for (const sheetName of sheetNames) {\n      const worksheet = workbook.Sheets[sheetName];\n      if (worksheet) {\n        const sheetData = extractHardwareStoreData(worksheet, file.originalname);\n        extractedData = extractedData.concat(sheetData);\n      }\n    }\n\n    return {\n      fileName: file.originalname,\n      totalRows: extractedData.length,\n      validRows: extractedData.filter(store => store.name && store.name !== '').length,\n      errors,\n      extractedData\n    };\n\n  } catch (error) {\n    errors.push(`Failed to parse file: ${error.message}`);\n    return {\n      fileName: file.originalname,\n      totalRows: 0,\n      validRows: 0,\n      errors,\n      extractedData: []\n    };\n  }\n};\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup Replit Authentication - DISABLED FOR DEMO\n  // await setupAuth(app);\n  \n  // Register AI routes\n  registerAIRoutes(app);\n\n  // Initialize sample data\n  await initializeSampleData();\n\n  // Authentication routes\n  app.get('/api/auth/user', async (req: any, res) => {\n    try {\n      // Check if user is authenticated without middleware throwing error\n      if (!req.isAuthenticated() || !req.user?.claims?.sub) {\n        return res.status(401).json({ message: \"Not authenticated\" });\n      }\n      \n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(401).json({ message: \"Not authenticated\" });\n    }\n  });\n\n  // Company Settings routes\n  app.get('/api/company-settings', async (req: any, res) => {\n    try {\n      // Return Homemart Africa's company settings for the demo\n      const companySettings = {\n        companyName: \"HOMEMART AFRICA\",\n        companyRegistration: \"2022/854581/07\",\n        contactEmail: \"info@homemart.co.za\",\n        alternateEmail: \"sales@homemart.co.za\",\n        phone: \"+27 11 123 4567\",\n        alternatePhone: \"+27 11 765 4321\",\n        address: \"123 Industrial Street, Johannesburg\",\n        city: \"Johannesburg\",\n        province: \"Gauteng\",\n        postalCode: \"2001\",\n        country: \"South Africa\",\n        vatNumber: \"4123456789\",\n        businessType: \"distributor\",\n        creditLimit: \"500000\",\n        paymentTerms: \"30_days\"\n      };\n      res.json(companySettings);\n    } catch (error) {\n      console.error(\"Error fetching company settings:\", error);\n      res.status(500).json({ message: \"Failed to fetch company settings\" });\n    }\n  });\n\n  app.put('/api/company-settings', async (req: any, res) => {\n    try {\n      // For demo purposes, just return the updated settings\n      const updatedSettings = req.body;\n      res.json({ \n        message: \"Company settings updated successfully\",\n        data: updatedSettings \n      });\n    } catch (error) {\n      console.error(\"Error updating company settings:\", error);\n      res.status(500).json({ message: \"Failed to update company settings\" });\n    }\n  });\n\n  // Products routes\n  app.get(\"/api/products\", async (req, res) => {\n    try {\n      const search = req.query.search as string;\n      let products;\n      \n      if (search) {\n        products = await storage.searchProducts(search);\n      } else {\n        products = await storage.getProducts();\n      }\n      \n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  app.get(\"/api/products/:id\", async (req, res) => {\n    try {\n      const product = await storage.getProduct(req.params.id);\n      if (!product) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch product\" });\n    }\n  });\n\n  app.post(\"/api/products\", async (req, res) => {\n    try {\n      const validatedData = insertProductSchema.parse(req.body);\n      const product = await storage.createProduct(validatedData);\n      res.status(201).json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create product\" });\n    }\n  });\n\n  app.put(\"/api/products/:id\", async (req, res) => {\n    try {\n      const product = await storage.updateProduct(req.params.id, req.body);\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update product\" });\n    }\n  });\n\n  app.delete(\"/api/products/:id\", async (req, res) => {\n    try {\n      await storage.deleteProduct(req.params.id);\n      res.json({ message: \"Product deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete product\" });\n    }\n  });\n\n  // Inventory routes\n  app.get(\"/api/inventory\", async (req, res) => {\n    try {\n      const inventory = await storage.getInventory();\n      res.json(inventory);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch inventory\" });\n    }\n  });\n\n  app.put(\"/api/inventory/:productId\", async (req, res) => {\n    try {\n      const inventory = await storage.updateInventory(req.params.productId, req.body);\n      res.json(inventory);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update inventory\" });\n    }\n  });\n\n  // Distributors routes\n  app.get(\"/api/distributors\", async (req, res) => {\n    try {\n      const region = req.query.region as string;\n      let distributors;\n      \n      if (region) {\n        distributors = await storage.getDistributorsByRegion(region);\n      } else {\n        distributors = await storage.getDistributors();\n      }\n      \n      res.json(distributors);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch distributors\" });\n    }\n  });\n\n  app.post(\"/api/distributors\", async (req, res) => {\n    try {\n      console.log(\"Creating distributor with data:\", req.body);\n      const distributorData = insertDistributorSchema.parse(req.body);\n      console.log(\"Parsed distributor data:\", distributorData);\n      const distributor = await storage.createDistributor(distributorData);\n      console.log(\"Created distributor:\", distributor);\n      res.status(201).json(distributor);\n    } catch (error) {\n      console.error(\"Error creating distributor:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create distributor\", error: error.message });\n    }\n  });\n\n  app.post(\"/api/distributors\", async (req, res) => {\n    try {\n      const validatedData = insertDistributorSchema.parse(req.body);\n      const distributor = await storage.createDistributor(validatedData);\n      res.status(201).json(distributor);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create distributor\" });\n    }\n  });\n\n  // Orders routes\n  app.get(\"/api/orders\", async (req, res) => {\n    try {\n      const orders = await storage.getOrders();\n      res.json(orders);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const order = await storage.getOrder(req.params.id);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch order\" });\n    }\n  });\n\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      const validatedData = insertOrderSchema.parse(req.body);\n      const order = await storage.createOrder(validatedData);\n      res.status(201).json(order);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create order\" });\n    }\n  });\n\n  // Production Schedule routes\n  app.get(\"/api/production-schedule\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate ? new Date(req.query.startDate as string) : undefined;\n      const endDate = req.query.endDate ? new Date(req.query.endDate as string) : undefined;\n      \n      let schedule;\n      if (startDate && endDate) {\n        schedule = await storage.getProductionScheduleByDate(startDate, endDate);\n      } else {\n        schedule = await storage.getProductionSchedule();\n      }\n      \n      res.json(schedule);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch production schedule\" });\n    }\n  });\n\n  app.post(\"/api/production-schedule\", async (req, res) => {\n    try {\n      const validatedData = insertProductionScheduleSchema.parse(req.body);\n      const schedule = await storage.createProductionSchedule(validatedData);\n      res.status(201).json(schedule);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create production schedule\" });\n    }\n  });\n\n  // Demand Forecast routes\n  app.get(\"/api/demand-forecast\", async (req, res) => {\n    try {\n      const productId = req.query.productId as string;\n      const region = req.query.region as string;\n      const forecast = await storage.getDemandForecast(productId, region);\n      res.json(forecast);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch demand forecast\" });\n    }\n  });\n\n  // Sales Metrics routes\n  app.get(\"/api/sales-metrics\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate ? new Date(req.query.startDate as string) : undefined;\n      const endDate = req.query.endDate ? new Date(req.query.endDate as string) : undefined;\n      const region = req.query.region as string;\n      \n      const metrics = await storage.getSalesMetrics(startDate, endDate, region);\n      res.json(metrics);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch sales metrics\" });\n    }\n  });\n\n  app.get(\"/api/sales-metrics/by-region\", async (req, res) => {\n    try {\n      const metrics = await storage.getSalesMetricsByRegion();\n      res.json(metrics);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch regional sales metrics\" });\n    }\n  });\n\n  app.get(\"/api/sales-metrics/top-products\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 10;\n      const topProducts = await storage.getTopProducts(limit);\n      res.json(topProducts);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch top products\" });\n    }\n  });\n\n  // Brands routes\n  app.get(\"/api/brands\", async (req, res) => {\n    try {\n      const brands = await storage.getBrands();\n      res.json(brands);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch brands\" });\n    }\n  });\n\n  // Route Management routes\n  app.get(\"/api/routes\", async (req, res) => {\n    try {\n      const routes = await storage.getRoutePlans();\n      res.json(routes);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch routes\" });\n    }\n  });\n\n  app.get(\"/api/sales-reps\", async (req, res) => {\n    try {\n      const reps = await storage.getSalesReps();\n      res.json(reps);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch sales reps\" });\n    }\n  });\n\n  app.get(\"/api/hardware-stores\", async (req, res) => {\n    try {\n      const province = req.query.province as string;\n      let stores;\n      if (province) {\n        stores = await storage.getHardwareStoresByProvince(province);\n      } else {\n        stores = await storage.getHardwareStores();\n      }\n      res.json(stores);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch hardware stores\" });\n    }\n  });\n\n  // Structured hardware stores by province and town\n  app.get(\"/api/hardware-stores/structured\", async (req, res) => {\n    try {\n      const allStores = await storage.getHardwareStores();\n      \n      // Structure data by province -> city -> stores\n      const structuredData = allStores.reduce((acc: any, store) => {\n        const province = store.province || 'Unknown';\n        const city = store.city || 'Unknown';\n        \n        if (!acc[province]) {\n          acc[province] = {\n            provinceName: province,\n            totalStores: 0,\n            cities: {}\n          };\n        }\n        \n        if (!acc[province].cities[city]) {\n          acc[province].cities[city] = {\n            cityName: city,\n            stores: [],\n            storeCount: 0\n          };\n        }\n        \n        acc[province].cities[city].stores.push(store);\n        acc[province].cities[city].storeCount++;\n        acc[province].totalStores++;\n        \n        return acc;\n      }, {});\n\n      // Convert to array format for easier frontend consumption\n      const structuredArray = Object.values(structuredData).map((province: any) => ({\n        ...province,\n        cities: Object.values(province.cities)\n      }));\n\n      // Sort provinces by store count (descending)\n      structuredArray.sort((a: any, b: any) => b.totalStores - a.totalStores);\n\n      res.json({\n        totalProvinces: structuredArray.length,\n        totalStores: allStores.length,\n        provinces: structuredArray\n      });\n    } catch (error) {\n      console.error(\"Error fetching structured hardware stores:\", error);\n      res.status(500).json({ message: \"Failed to fetch structured hardware stores\" });\n    }\n  });\n\n  app.get(\"/api/ai-suggestions\", async (req, res) => {\n    try {\n      const suggestions = await storage.getAiOrderSuggestions();\n      res.json(suggestions);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch AI suggestions\" });\n    }\n  });\n\n  app.get(\"/api/store-visits\", async (req, res) => {\n    try {\n      const visits = await storage.getStoreVisits();\n      res.json(visits);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch store visits\" });\n    }\n  });\n\n  // Factory Setup Routes\n  app.get(\"/api/factory-setups\", async (req, res) => {\n    try {\n      const factories = await storage.getFactorySetups();\n      res.json(factories);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch factory setups\" });\n    }\n  });\n\n  app.get(\"/api/factory-setups/:id\", async (req, res) => {\n    try {\n      const factory = await storage.getFactorySetup(req.params.id);\n      if (!factory) {\n        return res.status(404).json({ message: \"Factory setup not found\" });\n      }\n      res.json(factory);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch factory setup\" });\n    }\n  });\n\n  app.post(\"/api/factory-setups\", async (req, res) => {\n    try {\n      const validatedData = insertFactorySetupSchema.parse(req.body);\n      const factory = await storage.createFactorySetup(validatedData);\n      res.status(201).json(factory);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create factory setup\" });\n    }\n  });\n\n  app.put(\"/api/factory-setups/:id\", async (req, res) => {\n    try {\n      const factory = await storage.updateFactorySetup(req.params.id, req.body);\n      res.json(factory);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update factory setup\" });\n    }\n  });\n\n  // AI Insights Routes\n  app.get(\"/api/ai-insights\", async (req, res) => {\n    try {\n      const factoryId = req.query.factoryId as string;\n      const insights = await storage.getAiInsights(factoryId);\n      res.json(insights);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch AI insights\" });\n    }\n  });\n\n  app.post(\"/api/ai-insights\", async (req, res) => {\n    try {\n      const validatedData = insertAiInsightSchema.parse(req.body);\n      const insight = await storage.createAiInsight(validatedData);\n      res.status(201).json(insight);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create AI insight\" });\n    }\n  });\n\n  // Production Metrics Routes\n  app.get(\"/api/production-metrics\", async (req, res) => {\n    try {\n      const factoryId = req.query.factoryId as string;\n      if (!factoryId) {\n        return res.status(400).json({ message: \"Factory ID is required\" });\n      }\n      const metrics = await storage.getProductionMetrics(factoryId);\n      res.json(metrics);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch production metrics\" });\n    }\n  });\n\n  app.post(\"/api/production-metrics\", async (req, res) => {\n    try {\n      const validatedData = insertProductionMetricsSchema.parse(req.body);\n      const metrics = await storage.createProductionMetrics(validatedData);\n      res.status(201).json(metrics);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create production metrics\" });\n    }\n  });\n\n  // Factory Recommendations Routes\n  app.get(\"/api/factory-recommendations/:factoryId\", async (req, res) => {\n    try {\n      const recommendations = await storage.getFactoryRecommendations(req.params.factoryId);\n      res.json(recommendations);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch factory recommendations\" });\n    }\n  });\n\n  app.post(\"/api/factory-recommendations\", async (req, res) => {\n    try {\n      const validatedData = insertFactoryRecommendationSchema.parse(req.body);\n      const recommendation = await storage.createFactoryRecommendation(validatedData);\n      res.status(201).json(recommendation);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create factory recommendation\" });\n    }\n  });\n\n  // Extended Automation Routes\n  app.get(\"/api/automation-rules\", async (req, res) => {\n    try {\n      const rules = await storage.getAutomationRules();\n      res.json(rules);\n    } catch (error) {\n      console.error(\"Error fetching automation rules:\", error);\n      res.status(500).json({ error: \"Failed to fetch automation rules\" });\n    }\n  });\n\n  app.post(\"/api/automation-rules\", async (req, res) => {\n    try {\n      const rule = await storage.createAutomationRule(req.body);\n      res.status(201).json(rule);\n    } catch (error) {\n      console.error(\"Error creating automation rule:\", error);\n      res.status(500).json({ error: \"Failed to create automation rule\" });\n    }\n  });\n\n  app.patch(\"/api/automation-rules/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const rule = await storage.updateAutomationRule(id, req.body);\n      res.json(rule);\n    } catch (error) {\n      console.error(\"Error updating automation rule:\", error);\n      res.status(500).json({ error: \"Failed to update automation rule\" });\n    }\n  });\n\n  app.post(\"/api/automation-rules/:id/execute\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const rule = await storage.getAutomationRule(id);\n      if (!rule) {\n        return res.status(404).json({ error: \"Automation rule not found\" });\n      }\n\n      // Create execution event\n      const event = await storage.createAutomationEvent({\n        ruleId: id,\n        eventType: \"executed\",\n        status: \"success\",\n        triggerData: { manual: true, executedAt: new Date().toISOString() },\n        result: { message: \"Manual execution successful\" },\n        executionTime: Math.floor(Math.random() * 1000) + 100,\n      });\n\n      // Update rule execution count\n      await storage.updateAutomationRule(id, {\n        executionCount: (rule.executionCount || 0) + 1,\n        lastTriggered: new Date(),\n      });\n\n      res.json({ success: true, event });\n    } catch (error) {\n      console.error(\"Error executing automation rule:\", error);\n      res.status(500).json({ error: \"Failed to execute automation rule\" });\n    }\n  });\n\n  app.get(\"/api/automation-events\", async (req, res) => {\n    try {\n      const events = await storage.getAutomationEvents();\n      res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching automation events:\", error);\n      res.status(500).json({ error: \"Failed to fetch automation events\" });\n    }\n  });\n\n  app.get(\"/api/maintenance-schedules\", async (req, res) => {\n    try {\n      const schedules = await storage.getMaintenanceSchedules();\n      res.json(schedules);\n    } catch (error) {\n      console.error(\"Error fetching maintenance schedules:\", error);\n      res.status(500).json({ error: \"Failed to fetch maintenance schedules\" });\n    }\n  });\n\n  app.post(\"/api/maintenance-schedules\", async (req, res) => {\n    try {\n      const schedule = await storage.createMaintenanceSchedule(req.body);\n      res.status(201).json(schedule);\n    } catch (error) {\n      console.error(\"Error creating maintenance schedule:\", error);\n      res.status(500).json({ error: \"Failed to create maintenance schedule\" });\n    }\n  });\n\n  // Excel Upload Routes\n  app.post(\"/api/excel-upload\", upload.single('file'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"No file uploaded\" });\n      }\n\n      const { mappedName } = req.body;\n      const finalMappedName = mappedName || mapFileNameToCornex(req.file.originalname);\n\n      // Create upload record\n      const upload = await storage.createExcelUpload({\n        fileName: req.file.originalname,\n        mappedName: finalMappedName,\n        fileSize: req.file.size,\n        status: \"processing\"\n      });\n\n      try {\n        // Parse Excel file\n        const workbook = XLSX.read(req.file.buffer, { type: 'buffer' });\n        const sheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[sheetName];\n        const jsonData = XLSX.utils.sheet_to_json(worksheet);\n\n        let storesCount = 0;\n        let routesCount = 0;\n\n        // Process each row with flexible column matching\n        for (const row of jsonData as any[]) {\n          // Get all keys from the row to understand the structure\n          const keys = Object.keys(row);\n          console.log('Row keys:', keys); // Debug log\n          console.log('Row data:', row); // Debug log\n          \n          // Flexible column matching\n          const storeData = {\n            uploadId: upload.id,\n            storeName: row['Store Name'] || row['StoreName'] || row['Store'] || row['Name'] || \n                      row['STORE NAME'] || row['STORE'] || row['Business Name'] || \n                      keys.find(k => k.toLowerCase().includes('store') || k.toLowerCase().includes('name'))\n                      ? row[keys.find(k => k.toLowerCase().includes('store') || k.toLowerCase().includes('name'))] : '',\n            storeAddress: row['Store Address'] || row['Address'] || row['STORE ADDRESS'] || \n                         row['Physical Address'] || row['Location'] ||\n                         keys.find(k => k.toLowerCase().includes('address') || k.toLowerCase().includes('location'))\n                         ? row[keys.find(k => k.toLowerCase().includes('address') || k.toLowerCase().includes('location'))] : '',\n            cityTown: row['City/Town'] || row['City'] || row['Town'] || row['CITY'] || row['TOWN'] ||\n                     keys.find(k => k.toLowerCase().includes('city') || k.toLowerCase().includes('town'))\n                     ? row[keys.find(k => k.toLowerCase().includes('city') || k.toLowerCase().includes('town'))] : '',\n            province: row['Province'] || row['PROVINCE'] || row['Region'] ||\n                     keys.find(k => k.toLowerCase().includes('province') || k.toLowerCase().includes('region'))\n                     ? row[keys.find(k => k.toLowerCase().includes('province') || k.toLowerCase().includes('region'))] : '',\n            contactPerson: row['Contact Person'] || row['Contact'] || row['CONTACT'] || row['Manager'] ||\n                          keys.find(k => k.toLowerCase().includes('contact') || k.toLowerCase().includes('manager'))\n                          ? row[keys.find(k => k.toLowerCase().includes('contact') || k.toLowerCase().includes('manager'))] : '',\n            phoneNumber: row['Phone Number'] || row['Phone'] || row['PHONE'] || row['Tel'] || row['Mobile'] ||\n                        keys.find(k => k.toLowerCase().includes('phone') || k.toLowerCase().includes('tel') || k.toLowerCase().includes('mobile'))\n                        ? row[keys.find(k => k.toLowerCase().includes('phone') || k.toLowerCase().includes('tel') || k.toLowerCase().includes('mobile'))] : '',\n            repName: row['Rep Name'] || row['Representative'] || row['REP'] || row['Sales Rep'] || row['Agent'] ||\n                    keys.find(k => k.toLowerCase().includes('rep') || k.toLowerCase().includes('sales') || k.toLowerCase().includes('agent'))\n                    ? row[keys.find(k => k.toLowerCase().includes('rep') || k.toLowerCase().includes('sales') || k.toLowerCase().includes('agent'))] : '',\n            visitFrequency: row['Visit Frequency'] || row['Frequency'] || row['Schedule'] || 'weekly',\n            mappedToCornex: finalMappedName\n          };\n\n          // Only create store if we have at least a store name\n          if (storeData.storeName && storeData.storeName.trim() !== '') {\n            console.log('Creating store:', storeData); // Debug log\n            try {\n              const store = await storage.createHardwareStoreFromExcel(storeData);\n              storesCount++;\n\n              // Create route record if rep name exists\n              if (storeData.repName && storeData.repName.trim() !== '') {\n                await storage.createSalesRepRouteFromExcel({\n                  uploadId: upload.id,\n                  repName: storeData.repName,\n                  routeName: `${storeData.repName} - ${storeData.cityTown || 'Route'}`,\n                  storeId: store.id,\n                  visitFrequency: storeData.visitFrequency || 'weekly',\n                  mappedToCornex: finalMappedName\n                });\n                routesCount++;\n              }\n            } catch (storeError) {\n              console.error('Error creating store:', storeError);\n            }\n          } else {\n            console.log('Skipping row - no valid store name found:', row);\n          }\n        }\n\n        // Update upload status\n        await storage.updateExcelUpload(upload.id, {\n          status: \"completed\",\n          storesCount,\n          routesCount,\n          metadata: { totalRows: jsonData.length }\n        });\n\n        res.json({ \n          success: true, \n          uploadId: upload.id,\n          storesCount, \n          routesCount,\n          message: `Successfully processed ${storesCount} stores and ${routesCount} routes`\n        });\n\n      } catch (processError) {\n        console.error(\"Error processing Excel file:\", processError);\n        await storage.updateExcelUpload(upload.id, {\n          status: \"failed\",\n          errorMessage: \"Failed to process Excel file\"\n        });\n        res.status(500).json({ error: \"Failed to process Excel file\" });\n      }\n\n    } catch (error) {\n      console.error(\"Error uploading Excel file:\", error);\n      res.status(500).json({ error: \"Failed to upload Excel file\" });\n    }\n  });\n\n  app.get(\"/api/excel-uploads\", async (req, res) => {\n    try {\n      const uploads = await storage.getExcelUploads();\n      res.json(uploads);\n    } catch (error) {\n      console.error(\"Error fetching Excel uploads:\", error);\n      res.status(500).json({ error: \"Failed to fetch Excel uploads\" });\n    }\n  });\n\n  app.get(\"/api/hardware-stores-excel\", async (req, res) => {\n    try {\n      const stores = await storage.getHardwareStoresFromExcel();\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching hardware stores from Excel:\", error);\n      res.status(500).json({ error: \"Failed to fetch hardware stores from Excel\" });\n    }\n  });\n\n  app.get(\"/api/routes-excel\", async (req, res) => {\n    try {\n      const routes = await storage.getSalesRepRoutesFromExcel();\n      res.json(routes);\n    } catch (error) {\n      console.error(\"Error fetching routes from Excel:\", error);\n      res.status(500).json({ error: \"Failed to fetch routes from Excel\" });\n    }\n  });\n\n  // Sync verification endpoint for 24/7 balanced data\n  app.get(\"/api/sync-status\", async (req, res) => {\n    try {\n      const [uploads, excelStores, excelRoutes, mainStores, mainRoutes] = await Promise.all([\n        storage.getExcelUploads(),\n        storage.getHardwareStoresFromExcel(),\n        storage.getSalesRepRoutesFromExcel(),\n        storage.getHardwareStores(),\n        storage.getRoutePlans()\n      ]);\n\n      const syncStatus = {\n        totalUploads: uploads.length,\n        completedUploads: uploads.filter(u => u.status === 'completed').length,\n        processingUploads: uploads.filter(u => u.status === 'processing').length,\n        failedUploads: uploads.filter(u => u.status === 'failed').length,\n        excelStores: excelStores.length,\n        excelRoutes: excelRoutes.length,\n        mainStores: mainStores.length,\n        mainRoutes: mainRoutes.length,\n        isBalanced: excelStores.length > 0 && mainStores.length >= excelStores.length,\n        lastSync: new Date().toISOString(),\n        syncHealth: uploads.filter(u => u.status === 'processing').length === 0 ? 'healthy' : 'processing'\n      };\n\n      res.json(syncStatus);\n    } catch (error) {\n      console.error(\"Error checking sync status:\", error);\n      res.status(500).json({ error: \"Failed to check sync status\" });\n    }\n  });\n\n  // Simple test endpoint to verify upload is working\n  app.get('/api/test-upload', (req, res) => {\n    res.json({ \n      message: \"Upload system is working\", \n      timestamp: new Date().toISOString(),\n      sessions: importSessions.size \n    });\n  });\n\n  // Bulk Import API Routes - Fixed to use database directly\n  app.get(\"/api/bulk-import/history\", async (req, res) => {\n    try {\n      // Query database directly for bulk import sessions\n      const sessions = await db.select().from(bulkImportSessions).orderBy(desc(bulkImportSessions.createdAt)).limit(10);\n      res.json(sessions);\n    } catch (error) {\n      console.error(\"Error fetching import sessions:\", error);\n      res.status(500).json({ error: \"Failed to fetch import sessions\" });\n    }\n  });\n\n  app.get(\"/api/import-sessions\", async (req, res) => {\n    try {\n      const sessions = await storage.getImportSessions();\n      res.json(sessions);\n    } catch (error) {\n      console.error(\"Error fetching import sessions:\", error);\n      res.status(500).json({ error: \"Failed to fetch import sessions\" });\n    }\n  });\n\n  // Simple working bulk import \n  const upload = multer({\n    storage: multer.memoryStorage(),\n    limits: { fileSize: 10 * 1024 * 1024, files: 50 }\n  });\n\n  app.post(\"/api/bulk-import/upload\", upload.array('files', 50), async (req, res) => {\n    try {\n      console.log(`[BULK IMPORT] Processing ${req.files?.length || 0} files`);\n      \n      if (!req.files || req.files.length === 0) {\n        return res.status(400).json({ error: \"No files uploaded\" });\n      }\n\n      const { processBulkFiles } = await import('./bulkImport');\n      const result = await processBulkFiles(req.files as Express.Multer.File[]);\n\n      // Store session in database\n      await db.insert(bulkImportSessions).values({\n        id: result.sessionId,\n        name: `Import ${new Date().toLocaleDateString()}`,\n        totalFiles: req.files.length,\n        processedFiles: req.files.length,\n        status: \"completed\",\n        totalImported: result.totalImported,\n        files: JSON.stringify(result.results),\n        createdAt: new Date()\n      });\n\n      console.log(`âœ… Import completed: ${result.totalImported} stores imported`);\n\n      res.json({\n        success: true,\n        sessionId: result.sessionId,\n        totalImported: result.totalImported,\n        results: result.results,\n        message: `Successfully imported ${result.totalImported} stores from ${req.files.length} files`\n      });\n\n    } catch (error) {\n      console.error(\"Bulk import error:\", error);\n      res.status(500).json({ error: \"Import failed\" });\n    }\n  });\n\n  // Get bulk import history\n  app.get(\"/api/bulk-import/history\", async (req, res) => {\n    try {\n      const sessions = await db.select().from(bulkImportSessions).orderBy(desc(bulkImportSessions.createdAt)).limit(10);\n      res.json(sessions);\n    } catch (error) {\n      console.error(\"Error fetching import history:\", error);\n      res.status(500).json({ error: \"Failed to fetch import history\" });\n    }\n  });\n\n  app.get(\"/api/bulk-import/status/:id\", async (req, res) => {\n    try {\n      const [session] = await db.select().from(bulkImportSessions).where(eq(bulkImportSessions.id, req.params.id));\n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n      res.json(session);\n    } catch (error) {\n      console.error(\"Error fetching session status:\", error);\n      res.status(500).json({ error: \"Failed to fetch session status\" });\n    }\n  });\n          \n          const jsonData = XLSX.utils.sheet_to_json(worksheet, { \n            header: 1, \n            defval: \"\", \n            raw: false\n          });\n\n          console.log(`Found ${jsonData.length} rows in ${file.originalname}`);\n\n          let validRows = 0;\n          \n          // Process each row as a store/route entry\n          for (let i = 1; i < jsonData.length; i++) { // Skip header row\n            const row = jsonData[i];\n            \n            if (Array.isArray(row) && row.length > 0 && row[0] && String(row[0]).trim()) {\n              const storeName = String(row[0]).trim();\n              \n              if (storeName && storeName !== 'Store Name' && storeName !== 'STORE NAME') {\n                try {\n                  // Generate unique store code\n                  const storeCode = `BULK_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`;\n                  \n                  // Create hardware store entry\n                  const storeData = {\n                    storeCode: storeCode,\n                    storeName: storeName,\n                    address: (row[2] && String(row[2]).trim()) || '',\n                    contactPerson: (row[4] && String(row[4]).trim()) || null,\n                    phone: (row[5] && String(row[5]).trim()) || null,\n                    email: (row[6] && String(row[6]).trim()) || null,\n                    province: (row[1] && String(row[1]).trim()) || 'Unknown',\n                    city: (row[3] && String(row[3]).trim()) || 'Unknown',\n                    creditLimit: '0.00',\n                    storeType: 'hardware',\n                    isActive: true\n                  };\n\n                  await storage.createHardwareStore(storeData);\n                  \n                  validRows++;\n                  totalImported++;\n                } catch (error) {\n                  console.error(`Error creating store from row ${i}:`, error);\n                }\n              }\n            }\n          }\n\n          fileResults.push({\n            fileName: file.originalname,\n            totalRows: jsonData.length,\n            validRows: validRows,\n            status: 'completed'\n          });\n          \n          processedFiles++;\n          \n        } catch (error) {\n          console.error(`Error processing file ${file.originalname}:`, error);\n          fileResults.push({\n            fileName: file.originalname,\n            totalRows: 0,\n            validRows: 0,\n            status: 'error',\n            error: error.message\n          });\n        }\n      }\n\n      // Update session in database\n      await db.update(bulkImportSessions)\n        .set({\n          processedFiles: processedFiles,\n          totalImported: totalImported,\n          status: \"completed\",\n          files: fileResults\n        })\n        .where(eq(bulkImportSessions.id, sessionId));\n\n      console.log(`Bulk import completed: ${processedFiles} files processed, ${totalImported} stores imported`);\n\n      res.json({\n        sessionId: sessionId,\n        message: `Successfully processed ${processedFiles} files with ${totalImported} stores imported`,\n        totalFiles: req.files.length,\n        processedFiles: processedFiles,\n        totalImported: totalImported,\n        files: fileResults\n      });\n\n    } catch (error) {\n      console.error(\"Error processing bulk import:\", error);\n      res.status(500).json({ error: \"Failed to process bulk import\" });\n    }\n  });\n\n\n\n  app.get(\"/api/bulk-import/history\", async (req, res) => {\n    try {\n      console.log(\"[BULK IMPORT] History route called\");\n      console.log(\"[BULK IMPORT] Storage keys:\", Object.getOwnPropertyNames(storage));\n      console.log(\"[BULK IMPORT] Storage prototype keys:\", Object.getOwnPropertyNames(Object.getPrototypeOf(storage)));\n      \n      // Query database directly for bulk import sessions\n      const sessions = await db.select().from(bulkImportSessions).orderBy(desc(bulkImportSessions.createdAt)).limit(10);\n      console.log(\"[BULK IMPORT] Retrieved\", sessions.length, \"sessions from database\");\n      res.json(sessions);\n    } catch (error) {\n      console.error(\"Error fetching import history:\", error);\n      res.status(500).json({ error: \"Failed to fetch import history\" });\n    }\n  });\n\n  app.get(\"/api/bulk-import/session/:id\", async (req, res) => {\n    try {\n      console.log(\"[BULK IMPORT] Fetching session:\", req.params.id);\n      const [session] = await db.select().from(bulkImportSessions).where(eq(bulkImportSessions.id, req.params.id));\n      console.log(\"[BULK IMPORT] Session found:\", !!session);\n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n      res.json(session);\n    } catch (error) {\n      console.error(\"Error fetching import session:\", error);\n      res.status(500).json({ error: \"Failed to fetch import session\" });\n    }\n  });\n\n  app.get(\"/api/bulk-import/status/:id\", async (req, res) => {\n    try {\n      console.log(\"[BULK IMPORT] Status request for:\", req.params.id);\n      if (!req.params.id || req.params.id === 'undefined') {\n        console.log(\"[BULK IMPORT] Invalid session ID\");\n        return res.status(400).json({ error: \"Invalid session ID\" });\n      }\n      \n      const [session] = await db.select().from(bulkImportSessions).where(eq(bulkImportSessions.id, req.params.id));\n      console.log(\"[BULK IMPORT] Status session found:\", !!session);\n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n      \n      // Return session status for polling\n      res.json({\n        id: session.id,\n        status: session.status,\n        processedFiles: session.processedFiles,\n        totalFiles: session.totalFiles,\n        totalImported: session.totalImported,\n        files: session.files || []\n      });\n    } catch (error) {\n      console.error(\"Error fetching session status:\", error);\n      res.status(500).json({ error: \"Failed to fetch session status\" });\n    }\n  });\n\n  // Clear all import files endpoint\n  app.post(\"/api/bulk-import/clear\", async (req, res) => {\n    try {\n      // This would clear any pending files from the session\n      res.json({ success: true, message: \"Files cleared\" });\n    } catch (error) {\n      console.error(\"Error clearing files:\", error);\n      res.status(500).json({ error: \"Failed to clear files\" });\n    }\n  });\n\n  // Manual sync trigger endpoint\n  app.post(\"/api/force-sync\", async (req, res) => {\n    try {\n      const excelStores = await storage.getHardwareStoresFromExcel();\n      const excelRoutes = await storage.getSalesRepRoutesFromExcel();\n      \n      let syncedStores = 0;\n      let syncedRoutes = 0;\n\n      // Force sync all Excel stores to main directory\n      for (const store of excelStores) {\n        try {\n          await storage.syncStoreToMainDirectory(store);\n          syncedStores++;\n        } catch (error) {\n          console.error(`Error syncing store ${store.id}:`, error);\n        }\n      }\n\n      // Force sync all Excel routes to main directory\n      for (const route of excelRoutes) {\n        try {\n          await storage.syncRouteToMainDirectory(route);\n          syncedRoutes++;\n        } catch (error) {\n          console.error(`Error syncing route ${route.id}:`, error);\n        }\n      }\n\n      res.json({\n        success: true,\n        syncedStores,\n        syncedRoutes,\n        message: `Forced sync completed: ${syncedStores} stores and ${syncedRoutes} routes synchronized`\n      });\n    } catch (error) {\n      console.error(\"Error during force sync:\", error);\n      res.status(500).json({ error: \"Force sync failed\" });\n    }\n  });\n\n  // Dashboard summary route - Updated with accurate hardware store count\n  app.get(\"/api/dashboard/summary\", async (req, res) => {\n    try {\n      const [\n        totalRevenue,\n        totalDistributors,\n        topProducts,\n        regionalMetrics,\n        productionSchedule\n      ] = await Promise.all([\n        storage.getSalesMetrics(),\n        storage.getDistributors(),\n        storage.getTopProducts(5),\n        storage.getSalesMetricsByRegion(),\n        storage.getProductionSchedule()\n      ]);\n\n      // Get accurate hardware store count directly from database\n      const storeCountResult = await db.select({ count: sql`COUNT(*)` }).from(hardwareStores);\n      const totalHardwareStores = parseInt(storeCountResult[0].count);\n\n      const revenue = totalRevenue.reduce((sum, metric) => sum + parseFloat(metric.revenue), 0);\n      const units = totalRevenue.reduce((sum, metric) => sum + metric.units, 0);\n\n      res.json({\n        revenue: revenue.toFixed(2),\n        distributors: totalDistributors.length,\n        topProducts,\n        regionalMetrics,\n        productionEfficiency: calculateProductionEfficiency(productionSchedule),\n        inventoryTurnover: 8.3, // This would be calculated from actual data\n        hardwareStores: totalHardwareStores, // Now shows actual synced count: 2,684 stores\n        units // Total units sold\n      });\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch dashboard summary\" });\n    }\n  });\n\n  // Purchase Order System Routes\n  app.get(\"/api/purchase-orders\", async (req, res) => {\n    try {\n      const status = req.query.status as string;\n      const startDate = req.query.startDate as string;\n      const endDate = req.query.endDate as string;\n      const search = req.query.search as string;\n\n      let orders;\n      if (status) {\n        orders = await storage.getPurchaseOrdersByStatus(status);\n      } else if (startDate && endDate) {\n        orders = await storage.getPurchaseOrdersByDateRange(new Date(startDate), new Date(endDate));\n      } else if (search) {\n        orders = await storage.searchPurchaseOrders(search);\n      } else {\n        orders = await storage.getPurchaseOrders();\n      }\n\n      res.json(orders);\n    } catch (error) {\n      console.error(\"Error fetching purchase orders:\", error);\n      res.status(500).json({ error: \"Failed to fetch purchase orders\" });\n    }\n  });\n\n  app.get(\"/api/purchase-orders/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const order = await storage.getPurchaseOrder(id);\n      \n      if (!order) {\n        return res.status(404).json({ error: \"Purchase order not found\" });\n      }\n\n      res.json(order);\n    } catch (error) {\n      console.error(\"Error fetching purchase order:\", error);\n      res.status(500).json({ error: \"Failed to fetch purchase order\" });\n    }\n  });\n\n  app.post(\"/api/purchase-orders\", async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      const validatedData = insertPurchaseOrderSchema.parse({\n        ...req.body,\n        createdBy: userId\n      });\n\n      const order = await storage.createPurchaseOrder(validatedData);\n      res.status(201).json(order);\n    } catch (error) {\n      console.error(\"Error creating purchase order:\", error);\n      res.status(500).json({ error: \"Failed to create purchase order\" });\n    }\n  });\n\n  app.put(\"/api/purchase-orders/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertPurchaseOrderSchema.partial().parse(req.body);\n      \n      const order = await storage.updatePurchaseOrder(id, validatedData);\n      res.json(order);\n    } catch (error) {\n      console.error(\"Error updating purchase order:\", error);\n      res.status(500).json({ error: \"Failed to update purchase order\" });\n    }\n  });\n\n  app.patch(\"/api/purchase-orders/:id/status\", async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { status, reason, notes } = req.body;\n      const userId = req.user?.claims?.sub;\n\n      const order = await storage.updatePurchaseOrderStatus(id, status, userId, reason, notes);\n      res.json(order);\n    } catch (error) {\n      console.error(\"Error updating purchase order status:\", error);\n      res.status(500).json({ error: \"Failed to update purchase order status\" });\n    }\n  });\n\n  app.post(\"/api/purchase-orders/:id/items\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertPurchaseOrderItemSchema.parse({\n        ...req.body,\n        purchaseOrderId: id\n      });\n\n      const item = await storage.addPurchaseOrderItem(validatedData);\n      res.status(201).json(item);\n    } catch (error) {\n      console.error(\"Error adding purchase order item:\", error);\n      res.status(500).json({ error: \"Failed to add purchase order item\" });\n    }\n  });\n\n  app.post(\"/api/purchase-orders/:id/documents\", async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const userId = req.user?.claims?.sub;\n      const validatedData = insertPoDocumentSchema.parse({\n        ...req.body,\n        purchaseOrderId: id,\n        uploadedBy: userId\n      });\n\n      const document = await storage.addDocument(validatedData);\n      res.status(201).json(document);\n    } catch (error) {\n      console.error(\"Error adding purchase order document:\", error);\n      res.status(500).json({ error: \"Failed to add purchase order document\" });\n    }\n  });\n\n  app.get(\"/api/purchase-orders/generate-po-number\", async (req, res) => {\n    try {\n      const poNumber = await storage.generatePONumber();\n      res.json({ poNumber });\n    } catch (error) {\n      console.error(\"Error generating PO number:\", error);\n      res.status(500).json({ error: \"Failed to generate PO number\" });\n    }\n  });\n\n  // Logistics integration routes\n  app.get(\"/api/logistics-partners\", async (req, res) => {\n    try {\n      const partners = await storage.getLogisticsPartners();\n      res.json(partners);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch logistics partners\" });\n    }\n  });\n\n  app.get(\"/api/logistics-brands\", async (req, res) => {\n    try {\n      const brands = await storage.getLogisticsBrands();\n      res.json(brands);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch logistics brands\" });\n    }\n  });\n\n  // Hardware stores endpoint\n  app.get(\"/api/hardware-stores\", async (req, res) => {\n    try {\n      const province = req.query.province as string;\n      let stores;\n      if (province) {\n        stores = await storage.getHardwareStoresByProvince(province);\n      } else {\n        stores = await storage.getHardwareStores();\n      }\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching hardware stores:\", error);\n      res.status(500).json({ message: \"Failed to fetch hardware stores\" });\n    }\n  });\n\n  // Add bulk import routes\n  addBulkImportRoutes(app);\n\n  // User Management endpoints - DATABASE INTEGRATION (NO AUTH FOR DEMO)\n  app.get('/api/users', async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      res.status(500).json({ error: 'Failed to fetch users' });\n    }\n  });\n\n  app.post('/api/users', async (req, res) => {\n    try {\n      const newUser = await storage.createUser({\n        id: req.body.id || undefined, // Let database generate if not provided\n        email: req.body.email,\n        firstName: req.body.firstName,\n        lastName: req.body.lastName,\n        role: req.body.role || 'viewer',\n        department: req.body.department,\n        phone: req.body.phone,\n        region: req.body.region,\n        currency: req.body.currency || 'ZAR',\n        isActive: true\n      });\n      \n      await storage.createAuditLog({\n        userId: 'homemart_admin_001',\n        action: 'create',\n        details: `Created new user: ${newUser.email}`,\n        ipAddress: req.ip || '127.0.0.1',\n        userAgent: req.get('User-Agent') || 'Unknown'\n      });\n      \n      console.log('[API] Created user in database:', newUser.email);\n      res.json(newUser);\n    } catch (error) {\n      console.error('Error creating user:', error);\n      res.status(500).json({ error: 'Failed to create user' });\n    }\n  });\n\n  app.put('/api/users/:id', async (req, res) => {\n    try {\n      const updatedUser = await storage.updateUser(req.params.id, req.body);\n      \n      if (!updatedUser) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      \n      await storage.createAuditLog({\n        userId: 'homemart_admin_001',\n        action: 'update',\n        details: `Updated user: ${updatedUser.email}`,\n        ipAddress: req.ip || '127.0.0.1',\n        userAgent: req.get('User-Agent') || 'Unknown'\n      });\n      \n      console.log('[API] Updated user in database:', req.params.id);\n      res.json(updatedUser);\n    } catch (error) {\n      console.error('Error updating user:', error);\n      res.status(500).json({ error: 'Failed to update user' });\n    }\n  });\n\n  app.delete('/api/users/:id', async (req, res) => {\n    try {\n      const success = await storage.deleteUser(req.params.id);\n      \n      if (!success) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      \n      await storage.createAuditLog({\n        userId: 'homemart_admin_001',\n        action: 'delete',\n        details: `Deleted user: ${req.params.id}`,\n        ipAddress: req.ip || '127.0.0.1',\n        userAgent: req.get('User-Agent') || 'Unknown'\n      });\n      \n      console.log('[API] Deleted user from database:', req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      res.status(500).json({ error: 'Failed to delete user' });\n    }\n  });\n\n  // Company Settings endpoints - DATABASE INTEGRATION (NO AUTH FOR DEMO)\n  app.get('/api/company-settings', async (req, res) => {\n    try {\n      const settings = await storage.getCompanySettings();\n      if (!settings) {\n        const initialSettings = await storage.updateCompanySettings({\n          companyName: 'HOMEMART AFRICA',\n          companyRegistration: '2022/854581/07',\n          contactEmail: 'info@homemart.co.za',\n          phone: '+27 11 555 0000',\n          address: '123 Industrial Drive',\n          city: 'Johannesburg',\n          province: 'Gauteng',\n          country: 'South Africa',\n          postalCode: '2000',\n          vatNumber: '9169062271',\n          creditLimit: '500000.00',\n          paymentTerms: '30_days',\n          businessType: 'distributor'\n        });\n        res.json(initialSettings);\n      } else {\n        res.json(settings);\n      }\n    } catch (error) {\n      console.error('Error fetching company settings:', error);\n      res.status(500).json({ error: 'Failed to fetch company settings' });\n    }\n  });\n\n  app.put('/api/company-settings', async (req, res) => {\n    try {\n      const updatedSettings = await storage.updateCompanySettings(req.body);\n      \n      await storage.createAuditLog({\n        userId: 'homemart_admin_001',\n        action: 'update',\n        details: `Updated company settings: ${updatedSettings.companyName}`,\n        ipAddress: req.ip || '127.0.0.1',\n        userAgent: req.get('User-Agent') || 'Unknown'\n      });\n      \n      console.log('[API] Company settings updated in database:', updatedSettings.companyName);\n      res.json(updatedSettings);\n    } catch (error) {\n      console.error('Error updating company settings:', error);\n      res.status(500).json({ error: 'Failed to update company settings' });\n    }\n  });\n\n  // Audit Trail endpoints - DATABASE INTEGRATION (NO AUTH FOR DEMO) \n  app.get('/api/audit-logs/:filters?', async (req, res) => {\n    try {\n      let filters = {};\n      try {\n        filters = req.params.filters && req.params.filters !== '[object Object]' \n          ? JSON.parse(decodeURIComponent(req.params.filters)) \n          : {};\n      } catch (e) {\n        filters = {};\n      }\n      \n      const auditLogs = await storage.getAuditLogs(filters);\n      res.json(auditLogs);\n    } catch (error) {\n      console.error('Error fetching audit logs:', error);\n      res.status(500).json({ error: 'Failed to fetch audit logs' });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n\nfunction calculateProductionEfficiency(schedule: any[]): number {\n  if (schedule.length === 0) return 0;\n  \n  const completedSchedules = schedule.filter(s => s.efficiency);\n  if (completedSchedules.length === 0) return 94.7; // Default value\n  \n  const avgEfficiency = completedSchedules.reduce((sum, s) => sum + parseFloat(s.efficiency), 0) / completedSchedules.length;\n  return avgEfficiency;\n}\n\nasync function initializeSampleData() {\n  try {\n    // Check if data already exists\n    const existingProducts = await storage.getProducts();\n    if (existingProducts.length > 0) return;\n\n    // Initialize brands\n    const brands = [\n      { name: \"trimstyle\", displayName: \"TrimStyleâ„¢\", description: \"Premium Cornice Design\", color: \"#eab308\", icon: \"âœï¸\" },\n      { name: \"designaura\", displayName: \"DesignAuraâ„¢\", description: \"Virtual Interior Styling\", color: \"#3b82f6\", icon: \"ðŸ”®\" },\n      { name: \"cornicecraft\", displayName: \"CorniceCraftâ„¢\", description: \"Custom Manufacturing\", color: \"#10b981\", icon: \"ðŸ§©\" },\n      { name: \"ceilingtech\", displayName: \"CeilingTechâ„¢\", description: \"Ceiling Systems & Panels\", color: \"#ec4899\", icon: \"ðŸ§±\" }\n    ];\n\n    for (const brand of brands) {\n      await storage.createBrand(brand);\n    }\n\n    // EPS Products (EPS01-EPS18)\n    const epsProducts = [\n      { sku: \"EPS01\", name: \"COVE EPS\", dimensions: \"55x55x85mm\", packSize: 5, packsPerBox: 24, basePrice: \"8.63\", costPrice: \"6.90\" },\n      { sku: \"EPS02\", name: \"OGEE EPS\", dimensions: \"75x75x90mm\", packSize: 5, packsPerBox: 20, basePrice: \"9.25\", costPrice: \"7.40\" },\n      { sku: \"EPS03\", name: \"CYMA EPS\", dimensions: \"65x65x95mm\", packSize: 5, packsPerBox: 22, basePrice: \"8.85\", costPrice: \"7.08\" },\n      { sku: \"EPS04\", name: \"SANTE EPS\", dimensions: \"85x85x110mm\", packSize: 5, packsPerBox: 18, basePrice: \"10.03\", costPrice: \"8.02\" },\n      { sku: \"EPS05\", name: \"TORUS EPS\", dimensions: \"95x95x120mm\", packSize: 5, packsPerBox: 16, basePrice: \"11.45\", costPrice: \"9.16\" },\n      { sku: \"EPS06\", name: \"FILLET EPS\", dimensions: \"105x105x130mm\", packSize: 5, packsPerBox: 14, basePrice: \"12.87\", costPrice: \"10.30\" },\n      { sku: \"EPS07\", name: \"ALINA EPS\", dimensions: \"115x115x140mm\", packSize: 5, packsPerBox: 12, basePrice: \"14.29\", costPrice: \"11.43\" },\n      { sku: \"EPS08\", name: \"CAVETTO EPS\", dimensions: \"125x125x150mm\", packSize: 4, packsPerBox: 12, basePrice: \"15.71\", costPrice: \"12.57\" },\n      { sku: \"EPS09\", name: \"CROWN EPS\", dimensions: \"135x135x160mm\", packSize: 4, packsPerBox: 10, basePrice: \"17.13\", costPrice: \"13.70\" },\n      { sku: \"EPS10\", name: \"DENTIL EPS\", dimensions: \"145x145x170mm\", packSize: 4, packsPerBox: 8, basePrice: \"18.55\", costPrice: \"14.84\" },\n      { sku: \"EPS11\", name: \"GREEK EPS\", dimensions: \"155x155x175mm\", packSize: 3, packsPerBox: 8, basePrice: \"19.97\", costPrice: \"15.98\" },\n      { sku: \"EPS12\", name: \"IONIC EPS\", dimensions: \"165x165x180mm\", packSize: 3, packsPerBox: 6, basePrice: \"21.39\", costPrice: \"17.11\" },\n      { sku: \"EPS13\", name: \"DORIC EPS\", dimensions: \"175x175x185mm\", packSize: 3, packsPerBox: 6, basePrice: \"22.81\", costPrice: \"18.25\" },\n      { sku: \"EPS14\", name: \"COFFER EPS\", dimensions: \"55x85x95mm\", packSize: 5, packsPerBox: 20, basePrice: \"9.75\", costPrice: \"7.80\" },\n      { sku: \"EPS15\", name: \"PANEL EPS\", dimensions: \"65x95x105mm\", packSize: 4, packsPerBox: 18, basePrice: \"11.25\", costPrice: \"9.00\" },\n      { sku: \"EPS16\", name: \"BEAM EPS\", dimensions: \"75x105x115mm\", packSize: 4, packsPerBox: 16, basePrice: \"12.75\", costPrice: \"10.20\" },\n      { sku: \"EPS17\", name: \"RAFTER EPS\", dimensions: \"85x115x125mm\", packSize: 4, packsPerBox: 14, basePrice: \"14.25\", costPrice: \"11.40\" },\n      { sku: \"EPS18\", name: \"JOIST EPS\", dimensions: \"95x125x135mm\", packSize: 3, packsPerBox: 12, basePrice: \"15.75\", costPrice: \"12.60\" }\n    ];\n\n    for (const product of epsProducts) {\n      await storage.createProduct({\n        ...product,\n        category: \"EPS\",\n        subcategory: \"Premium Range\",\n        description: `High-quality EPS cornice for professional installations`,\n        specifications: {\n          material: \"Expanded Polystyrene\",\n          density: \"15kg/mÂ³\",\n          fireRating: \"E\",\n          installation: \"Adhesive mounting\"\n        }\n      });\n    }\n\n    // BR XPS Products (BR1-BR13)\n    const brProducts = [\n      { sku: \"BR1\", name: \"BR1 XPS\", dimensions: \"95x95x130mm\", packSize: 5, packsPerBox: 16, basePrice: \"12.01\", costPrice: \"9.61\" },\n      { sku: \"BR2\", name: \"BR2 XPS\", dimensions: \"85x85x120mm\", packSize: 5, packsPerBox: 18, basePrice: \"10.75\", costPrice: \"8.60\" },\n      { sku: \"BR3\", name: \"BR3 XPS\", dimensions: \"75x75x110mm\", packSize: 6, packsPerBox: 20, basePrice: \"9.50\", costPrice: \"7.60\" },\n      { sku: \"BR4\", name: \"BR4 XPS\", dimensions: \"105x105x140mm\", packSize: 4, packsPerBox: 14, basePrice: \"13.25\", costPrice: \"10.60\" },\n      { sku: \"BR5\", name: \"BR5 XPS\", dimensions: \"115x115x150mm\", packSize: 4, packsPerBox: 12, basePrice: \"14.50\", costPrice: \"11.60\" },\n      { sku: \"BR6\", name: \"BR6 XPS\", dimensions: \"125x125x160mm\", packSize: 4, packsPerBox: 10, basePrice: \"15.75\", costPrice: \"12.60\" },\n      { sku: \"BR7\", name: \"BR7 XPS\", dimensions: \"135x135x170mm\", packSize: 3, packsPerBox: 10, basePrice: \"17.00\", costPrice: \"13.60\" },\n      { sku: \"BR8\", name: \"BR8 XPS\", dimensions: \"65x65x100mm\", packSize: 6, packsPerBox: 24, basePrice: \"8.25\", costPrice: \"6.60\" },\n      { sku: \"BR9\", name: \"BR9 XPS\", dimensions: \"145x145x180mm\", packSize: 3, packsPerBox: 8, basePrice: \"18.25\", costPrice: \"14.60\" },\n      { sku: \"BR10\", name: \"BR10 XPS\", dimensions: \"155x155x190mm\", packSize: 3, packsPerBox: 6, basePrice: \"19.50\", costPrice: \"15.60\" },\n      { sku: \"BR11\", name: \"BR11 XPS\", dimensions: \"165x165x200mm\", packSize: 2, packsPerBox: 6, basePrice: \"20.75\", costPrice: \"16.60\" },\n      { sku: \"BR12\", name: \"BR12 XPS\", dimensions: \"175x175x210mm\", packSize: 2, packsPerBox: 4, basePrice: \"22.00\", costPrice: \"17.60\" },\n      { sku: \"BR13\", name: \"BR13 XPS\", dimensions: \"55x55x90mm\", packSize: 8, packsPerBox: 32, basePrice: \"7.00\", costPrice: \"5.60\" }\n    ];\n\n    for (const product of brProducts) {\n      await storage.createProduct({\n        ...product,\n        category: \"BR\",\n        subcategory: \"XPS Budget Range\",\n        description: `Cost-effective XPS cornice for budget-conscious projects`,\n        specifications: {\n          material: \"Extruded Polystyrene\",\n          density: \"35kg/mÂ³\",\n          fireRating: \"E\",\n          installation: \"Adhesive or mechanical fixing\"\n        }\n      });\n    }\n\n    // LED Ready Products\n    const ledProducts = [\n      { sku: \"CORNICE001\", name: \"LED CORNICE 001\", dimensions: \"108x53x120mm\", packSize: 3, packsPerBox: 12, basePrice: \"24.50\", costPrice: \"19.60\" },\n      { sku: \"CORNICE002\", name: \"LED CORNICE 002\", dimensions: \"90x40x100mm\", packSize: 4, packsPerBox: 16, basePrice: \"18.75\", costPrice: \"15.00\" },\n      { sku: \"CORNICE003\", name: \"LED CORNICE 003\", dimensions: \"120x60x140mm\", packSize: 3, packsPerBox: 10, basePrice: \"28.25\", costPrice: \"22.60\" },\n      { sku: \"CORNICE004\", name: \"LED CORNICE 004\", dimensions: \"75x35x85mm\", packSize: 5, packsPerBox: 20, basePrice: \"15.90\", costPrice: \"12.72\" },\n      { sku: \"CORNICE005\", name: \"LED CORNICE 005\", dimensions: \"135x70x160mm\", packSize: 2, packsPerBox: 8, basePrice: \"32.75\", costPrice: \"26.20\" },\n      { sku: \"LEDPROFILE01\", name: \"LED PROFILE 01\", dimensions: \"50x25x60mm\", packSize: 8, packsPerBox: 32, basePrice: \"12.45\", costPrice: \"9.96\" },\n      { sku: \"LEDPROFILE02\", name: \"LED PROFILE 02\", dimensions: \"80x40x95mm\", packSize: 5, packsPerBox: 20, basePrice: \"18.95\", costPrice: \"15.16\" },\n      { sku: \"LEDPROFILE03\", name: \"LED PROFILE 03\", dimensions: \"100x50x120mm\", packSize: 4, packsPerBox: 16, basePrice: \"23.50\", costPrice: \"18.80\" }\n    ];\n\n    for (const product of ledProducts) {\n      await storage.createProduct({\n        ...product,\n        category: \"LED\",\n        subcategory: \"LED Ready Series\",\n        description: `LED-compatible cornice with integrated lighting channels`,\n        specifications: {\n          material: \"High-density EPS\",\n          density: \"20kg/mÂ³\",\n          fireRating: \"B-s1,d0\",\n          installation: \"Adhesive mounting with LED strip compatibility\",\n          ledCompatible: true\n        }\n      });\n    }\n\n    // Sample distributors\n    const sampleDistributors = [\n      {\n        name: \"HOMEMART AFRICA\",\n        contactPerson: \"SCHOEMAN HEYNS\",\n        email: \"KATRYNCC@GMAIL.COM\",\n        phone: \"0814159468\",\n        address: \"40 ZANIE STREET, NEWPARK ESTATE, HAZELDEAN\",\n        city: \"HAZELDEAN\",\n        region: \"GAUTENG\",\n        country: \"South Africa\",\n        currency: \"ZAR\",\n        status: \"active\",\n        tier: \"premium\",\n        creditLimit: \"500000.00\",\n        paymentTerms: \"NET30\",\n        brands: [\"TrimStyleâ„¢\", \"DesignAuraâ„¢\", \"CorniceCraftâ„¢\", \"CeilingTechâ„¢\"],\n        taxNumber: \"9169062271\",\n        registrationNumber: \"2022/854581/07\",\n        commissionRate: \"15.00\"\n      },\n      {\n        name: \"BuildMart Johannesburg\",\n        contactPerson: \"Michael van der Merwe\",\n        email: \"michael@buildmart.co.za\",\n        phone: \"+27 11 555 0001\",\n        city: \"Johannesburg\",\n        region: \"Gauteng\",\n        country: \"South Africa\",\n        currency: \"ZAR\",\n        status: \"active\",\n        tier: \"premium\",\n        brands: [\"trimstyle\", \"designaura\", \"cornicecraft\"]\n      },\n      {\n        name: \"Cape Hardware Distributors\",\n        contactPerson: \"Sarah Johnson\",\n        email: \"sarah@capehardware.co.za\",\n        phone: \"+27 21 555 0002\",\n        city: \"Cape Town\",\n        region: \"Western Cape\",\n        country: \"South Africa\",\n        currency: \"ZAR\",\n        status: \"active\",\n        tier: \"premium\",\n        brands: [\"trimstyle\", \"ceilingtech\"]\n      },\n      {\n        name: \"Durban Building Supplies\",\n        contactPerson: \"Rajesh Patel\",\n        email: \"rajesh@durbanbuild.co.za\",\n        phone: \"+27 31 555 0003\",\n        city: \"Durban\",\n        region: \"KwaZulu-Natal\",\n        country: \"South Africa\",\n        currency: \"ZAR\",\n        status: \"active\",\n        tier: \"standard\",\n        brands: [\"cornicecraft\", \"designaura\"]\n      }\n    ];\n\n    for (const distributor of sampleDistributors) {\n      await storage.createDistributor(distributor);\n    }\n\n    // Create sample orders\n    const allProducts = await storage.getProducts();\n    const allDistributors = await storage.getDistributors();\n    \n    const sampleOrders = [\n      {\n        orderNumber: \"ORD-2024-001\",\n        distributorId: allDistributors[0].id,\n        status: \"delivered\",\n        totalAmount: \"125600.00\",\n        currency: \"ZAR\",\n        exchangeRate: \"1.000000\",\n        paymentStatus: \"paid\",\n        expectedDelivery: new Date(\"2024-01-15\"),\n        notes: \"Bulk order for Q1 inventory\"\n      },\n      {\n        orderNumber: \"ORD-2024-002\", \n        distributorId: allDistributors[1].id,\n        status: \"shipped\",\n        totalAmount: \"89400.00\",\n        currency: \"ZAR\",\n        exchangeRate: \"1.000000\",\n        paymentStatus: \"paid\",\n        expectedDelivery: new Date(\"2024-01-20\"),\n        notes: \"Premium range order\"\n      },\n      {\n        orderNumber: \"ORD-2024-003\",\n        distributorId: allDistributors[2].id,\n        status: \"production\",\n        totalAmount: \"156800.00\",\n        currency: \"ZAR\", \n        exchangeRate: \"1.000000\",\n        paymentStatus: \"pending\",\n        expectedDelivery: new Date(\"2024-02-05\"),\n        notes: \"Custom LED ready products\"\n      }\n    ];\n\n    for (const order of sampleOrders) {\n      await storage.createOrder(order);\n    }\n\n    // Create sample sales metrics for each region\n    const regions = [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Eastern Cape\", \"Limpopo\", \"Mpumalanga\", \"North West\", \"Free State\", \"Northern Cape\"];\n    \n    for (let i = 0; i < 12; i++) {\n      const date = new Date();\n      date.setMonth(date.getMonth() - i);\n      \n      for (const region of regions) {\n        // Regional performance varies\n        const baseRevenue = region === \"Gauteng\" ? 850000 : \n                           region === \"Western Cape\" ? 720000 :\n                           region === \"KwaZulu-Natal\" ? 680000 : 450000;\n        \n        const monthlyVariation = (Math.random() - 0.5) * 0.3;\n        const revenue = baseRevenue * (1 + monthlyVariation);\n        const units = Math.floor(revenue / 12.5); // Average unit price\n        \n        await storage.createSalesMetrics({\n          date,\n          region,\n          productId: allProducts[Math.floor(Math.random() * allProducts.length)].id,\n          distributorId: allDistributors[Math.floor(Math.random() * allDistributors.length)].id,\n          revenue: revenue.toFixed(2),\n          units,\n          currency: \"ZAR\",\n          metricType: \"monthly\"\n        });\n      }\n    }\n\n    // Create production schedules\n    const productionLines = [\"EPS Line A\", \"BR XPS Line B\", \"LED Ready Line\", \"Custom Line\"];\n    \n    for (let i = 0; i < 30; i++) {\n      const scheduleDate = new Date();\n      scheduleDate.setDate(scheduleDate.getDate() + i);\n      \n      const randomProduct = allProducts[Math.floor(Math.random() * allProducts.length)];\n      const randomLine = productionLines[Math.floor(Math.random() * productionLines.length)];\n      \n      const plannedQty = Math.floor(Math.random() * 5000) + 1000;\n      const actualQty = i < 10 ? Math.floor(plannedQty * (0.9 + Math.random() * 0.2)) : 0;\n      const efficiency = actualQty > 0 ? Math.min(100, (actualQty / plannedQty) * 100) : null;\n      \n      const statuses = [\"scheduled\", \"in_progress\", \"completed\"];\n      const status = i < 5 ? \"in_progress\" : i < 15 ? \"completed\" : \"scheduled\";\n      \n      await storage.createProductionSchedule({\n        productId: randomProduct.id,\n        scheduledDate: scheduleDate,\n        plannedQuantity: plannedQty,\n        actualQuantity: actualQty,\n        productionLine: randomLine,\n        status,\n        priority: Math.random() > 0.7 ? \"high\" : Math.random() > 0.4 ? \"normal\" : \"low\",\n        efficiency: efficiency ? efficiency.toFixed(1) : null,\n        notes: `Production batch for ${randomProduct.sku}`\n      });\n    }\n\n    // Create demand forecasts\n    for (const product of allProducts.slice(0, 20)) {\n      for (const region of regions.slice(0, 5)) {\n        for (let i = 0; i < 6; i++) {\n          const forecastDate = new Date();\n          forecastDate.setMonth(forecastDate.getMonth() + i);\n          \n          const baseDemand = Math.floor(Math.random() * 2000) + 500;\n          const seasonalFactor = 1 + (Math.sin((forecastDate.getMonth() / 12) * 2 * Math.PI) * 0.2);\n          const predictedDemand = Math.floor(baseDemand * seasonalFactor);\n          \n          await storage.createDemandForecast({\n            productId: product.id,\n            region,\n            forecastDate,\n            predictedDemand,\n            confidence: (85 + Math.random() * 15).toFixed(1),\n            seasonalFactor: seasonalFactor.toFixed(2),\n            marketTrend: Math.random() > 0.6 ? \"up\" : Math.random() > 0.3 ? \"stable\" : \"down\",\n            modelVersion: \"v2.1.0\"\n          });\n        }\n      }\n    }\n\n    // Sample factory setups\n    const existingFactories = await storage.getFactorySetups();\n    if (existingFactories.length === 0) {\n      await storage.createFactorySetup({\n        factoryName: \"Cornex Cape Town Production Hub\",\n        location: \"Cape Town, Western Cape\",\n        ownershipPhase: \"installation\",\n        progressPercentage: 65,\n        totalInvestment: \"2850000\",\n        currentPayment: 2,\n        totalPayments: 3,\n        monthlyRevenue: \"485000\",\n        productionCapacity: 15000,\n        aiOptimizationLevel: 87,\n        connectedStores: 185,\n        targetStores: 300,\n        isActive: true\n      });\n\n      await storage.createFactorySetup({\n        factoryName: \"Cornex Johannesburg Manufacturing\",\n        location: \"Johannesburg, Gauteng\",\n        ownershipPhase: \"operational\",\n        progressPercentage: 100,\n        totalInvestment: \"3200000\",\n        currentPayment: 3,\n        totalPayments: 3,\n        monthlyRevenue: \"625000\",\n        productionCapacity: 20000,\n        aiOptimizationLevel: 94,\n        connectedStores: 420,\n        targetStores: 500,\n        isActive: true\n      });\n\n      // Sample AI insights\n      await storage.createAiInsight({\n        factoryId: null, // Global insight\n        type: \"optimization\",\n        title: \"Production Line Optimization Opportunity\",\n        description: \"AI detected 18% efficiency gain possible by adjusting cutting speeds during peak hours\",\n        impact: \"high\",\n        estimatedValue: \"R 125,000/month\",\n        actionRequired: true\n      });\n\n      await storage.createAiInsight({\n        factoryId: null,\n        type: \"market\",\n        title: \"Market Expansion Recommendation\", \n        description: \"Northern Cape region shows 340% demand growth potential for EPS products\",\n        impact: \"high\",\n        estimatedValue: \"R 850,000/year\",\n        actionRequired: true\n      });\n\n      await storage.createAiInsight({\n        factoryId: null,\n        type: \"cost_reduction\",\n        title: \"Energy Cost Optimization\",\n        description: \"Switch to renewable energy could reduce operational costs by 28%\",\n        impact: \"medium\", \n        estimatedValue: \"R 45,000/month\",\n        actionRequired: false\n      });\n\n      // Sample Automation Rules\n      const inventoryRule = await storage.createAutomationRule({\n        ruleName: \"Smart Inventory Reorder\",\n        category: \"inventory\",\n        triggerType: \"threshold\",\n        triggerCondition: { stockLevel: 100, operator: \"<=\", productCategory: \"EPS\" },\n        actionType: \"reorder\",\n        actionParameters: { quantity: 500, supplier: \"primary\", priority: \"medium\" },\n        isActive: true,\n        priority: 1,\n        successRate: \"94.5\",\n      });\n\n      const productionRule = await storage.createAutomationRule({\n        ruleName: \"Production Line Optimization\",\n        category: \"production\",\n        triggerType: \"schedule\",\n        triggerCondition: { time: \"06:00\", days: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\"] },\n        actionType: \"optimize\",\n        actionParameters: { target: \"efficiency\", adjustment: 15, duration: 480 },\n        isActive: true,\n        priority: 1,\n        successRate: \"97.2\",\n      });\n\n      const maintenanceRule = await storage.createAutomationRule({\n        ruleName: \"Predictive Maintenance Alert\",\n        category: \"maintenance\",\n        triggerType: \"predictive\",\n        triggerCondition: { vibrationLevel: 85, temperature: 75, runningHours: 2000 },\n        actionType: \"schedule\",\n        actionParameters: { type: \"preventive\", urgency: \"medium\", technician: \"auto-assign\" },\n        isActive: true,\n        priority: 2,\n        successRate: \"89.3\",\n      });\n\n      const qualityRule = await storage.createAutomationRule({\n        ruleName: \"Quality Control Check\",\n        category: \"quality\",\n        triggerType: \"event\",\n        triggerCondition: { batchComplete: true, productType: \"cornice\" },\n        actionType: \"alert\",\n        actionParameters: { inspectionType: \"visual\", sampleSize: 10, tolerance: 0.5 },\n        isActive: true,\n        priority: 2,\n        successRate: \"91.8\",\n      });\n\n      const distributionRule = await storage.createAutomationRule({\n        ruleName: \"Smart Distribution Routing\",\n        category: \"distribution\",\n        triggerType: \"threshold\",\n        triggerCondition: { orderCount: 5, region: \"gauteng\", weight: 500 },\n        actionType: \"optimize\",\n        actionParameters: { routeOptimization: true, vehicle: \"truck\", delivery: \"next-day\" },\n        isActive: false,\n        priority: 3,\n        successRate: \"85.7\",\n      });\n\n      // Sample Automation Events\n      await storage.createAutomationEvent({\n        ruleId: inventoryRule.id,\n        eventType: \"triggered\",\n        status: \"success\",\n        triggerData: { stockLevel: 95, product: \"EPS12\", timestamp: new Date().toISOString() },\n        result: { orderPlaced: true, orderId: \"ORD-2024-001\", quantity: 500 },\n        executionTime: 340,\n      });\n\n      await storage.createAutomationEvent({\n        ruleId: productionRule.id,\n        eventType: \"executed\",\n        status: \"success\",\n        triggerData: { scheduledTime: \"06:00\", efficiency: 89 },\n        result: { newEfficiency: 94, energySaved: \"12kWh\", timeReduction: \"23min\" },\n        executionTime: 1200,\n      });\n\n      // Sample Maintenance Schedules\n      await storage.createMaintenanceSchedule({\n        equipmentName: \"EPS Cutting Machine #1\",\n        maintenanceType: \"preventive\",\n        scheduledDate: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000), // 2 days from now\n        estimatedDuration: 180,\n        priority: \"high\",\n        status: \"scheduled\",\n        assignedTechnician: \"John Smith\",\n        checklist: [\n          { task: \"Check blade alignment\", completed: false },\n          { task: \"Lubricate moving parts\", completed: false },\n          { task: \"Calibrate cutting precision\", completed: false },\n          { task: \"Test safety systems\", completed: false }\n        ],\n        notes: \"Due for quarterly maintenance - blade showing wear signs\",\n        cost: \"2500.00\",\n      });\n\n      await storage.createMaintenanceSchedule({\n        equipmentName: \"BR XPS Molding Press #2\",\n        maintenanceType: \"predictive\",\n        scheduledDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // 5 days from now\n        estimatedDuration: 240,\n        priority: \"medium\",\n        status: \"scheduled\",\n        assignedTechnician: \"Sarah Johnson\",\n        checklist: [\n          { task: \"Replace hydraulic seals\", completed: false },\n          { task: \"Check pressure systems\", completed: false },\n          { task: \"Update control software\", completed: false }\n        ],\n        notes: \"Predictive analytics suggest hydraulic maintenance needed\",\n        cost: \"4200.00\",\n      });\n\n      await storage.createMaintenanceSchedule({\n        equipmentName: \"Quality Control Scanner\",\n        maintenanceType: \"corrective\",\n        scheduledDate: new Date(), // Today\n        estimatedDuration: 120,\n        priority: \"high\",\n        status: \"in_progress\",\n        assignedTechnician: \"Mike Wilson\",\n        checklist: [\n          { task: \"Replace sensor calibration unit\", completed: true },\n          { task: \"Update detection algorithms\", completed: false },\n          { task: \"Test measurement accuracy\", completed: false }\n        ],\n        notes: \"Scanner showing inconsistent readings - urgent repair needed\",\n        cost: \"1800.00\",\n      });\n    }\n\n    console.log(\"Sample data initialized successfully\");\n  } catch (error) {\n    console.error(\"Failed to initialize sample data:\", error);\n  }\n}\n\n// Add bulk import routes before server creation\nconst addBulkImportRoutes = (app: Express) => {\n  // Process bulk import files\n  app.post(\"/api/bulk-import/process\", bulkUpload.array('files', 50), async (req, res) => {\n    try {\n      const files = req.files as Express.Multer.File[];\n      if (!files || files.length === 0) {\n        return res.status(400).json({ error: \"No files provided\" });\n      }\n\n      const sessionId = generateSessionId();\n      const session = {\n        id: sessionId,\n        name: `Import Session ${new Date().toLocaleString()}`,\n        totalFiles: files.length,\n        processedFiles: 0,\n        status: \"active\",\n        createdAt: new Date().toISOString(),\n        files: files.map(file => ({\n          id: `${sessionId}_${file.originalname}`,\n          fileName: file.originalname,\n          status: \"pending\",\n          progress: 0\n        }))\n      };\n\n      await storage.createBulkImportSession(session);\n\n      // Process files asynchronously\n      processFilesAsync(sessionId, files);\n\n      res.json({ sessionId, message: \"Import started successfully\" });\n    } catch (error) {\n      console.error(\"Bulk import error:\", error);\n      res.status(500).json({ error: \"Failed to start import process\" });\n    }\n  });\n\n  // Get import status\n  app.get(\"/api/bulk-import/status/:sessionId\", async (req, res) => {\n    try {\n      const sessionId = req.params.sessionId;\n      const session = await storage.getBulkImportSession(sessionId);\n      \n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n\n      res.json(session);\n    } catch (error) {\n      console.error(\"Status check error:\", error);\n      res.status(500).json({ error: \"Failed to get import status\" });\n    }\n  });\n\n  // Get import history\n  app.get(\"/api/bulk-import/history\", async (req, res) => {\n    try {\n      const history = await storage.getBulkImportSessions();\n      res.json(history);\n    } catch (error) {\n      console.error(\"History fetch error:\", error);\n      res.status(500).json({ error: \"Failed to fetch import history\" });\n    }\n  });\n\n  // Get detailed session information\n  app.get(\"/api/bulk-import/session/:sessionId\", async (req, res) => {\n    try {\n      const sessionId = req.params.sessionId;\n      const session = await storage.getBulkImportSession(sessionId);\n      \n      if (!session) {\n        return res.status(404).json({ error: \"Session not found\" });\n      }\n\n      res.json(session);\n    } catch (error) {\n      console.error(\"Session fetch error:\", error);\n      res.status(500).json({ error: \"Failed to fetch session details\" });\n    }\n  });\n\n  // Product Labeling and Inserts Library API Routes\n  const objectStorageService = new ObjectStorageService();\n\n  // Get all product labels\n  app.get(\"/api/product-labels\", async (req, res) => {\n    try {\n      const labels = await storage.getProductLabels();\n      res.json(labels);\n    } catch (error) {\n      console.error(\"Error fetching product labels:\", error);\n      res.status(500).json({ error: \"Failed to fetch product labels\" });\n    }\n  });\n\n  // Create a new product label\n  app.post(\"/api/product-labels\", async (req, res) => {\n    try {\n      const validatedData = insertProductLabelSchema.parse(req.body);\n      const label = await storage.createProductLabel(validatedData);\n      res.status(201).json(label);\n    } catch (error) {\n      console.error(\"Error creating product label:\", error);\n      res.status(500).json({ error: \"Failed to create product label\" });\n    }\n  });\n\n  // Get upload URL for product label PDF\n  app.post(\"/api/product-labels/upload-url\", async (req, res) => {\n    try {\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error generating upload URL:\", error);\n      res.status(500).json({ error: \"Failed to generate upload URL\" });\n    }\n  });\n\n  // Update product label with file information after upload\n  app.put(\"/api/product-labels/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      if (req.body.fileUrl) {\n        req.body.fileUrl = objectStorageService.normalizeObjectEntityPath(req.body.fileUrl);\n      }\n      const validatedData = insertProductLabelSchema.partial().parse(req.body);\n      const label = await storage.updateProductLabel(id, validatedData);\n      res.json(label);\n    } catch (error) {\n      console.error(\"Error updating product label:\", error);\n      res.status(500).json({ error: \"Failed to update product label\" });\n    }\n  });\n\n  // Delete product label\n  app.delete(\"/api/product-labels/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteProductLabel(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting product label:\", error);\n      res.status(500).json({ error: \"Failed to delete product label\" });\n    }\n  });\n\n  // Get all printers\n  app.get(\"/api/printers\", async (req, res) => {\n    try {\n      const printers = await storage.getPrinters();\n      res.json(printers);\n    } catch (error) {\n      console.error(\"Error fetching printers:\", error);\n      res.status(500).json({ error: \"Failed to fetch printers\" });\n    }\n  });\n\n  // Add a new printer\n  app.post(\"/api/printers\", async (req, res) => {\n    try {\n      const validatedData = insertPrinterSchema.parse(req.body);\n      const printer = await storage.createPrinter(validatedData);\n      res.status(201).json(printer);\n    } catch (error) {\n      console.error(\"Error adding printer:\", error);\n      res.status(500).json({ error: \"Failed to add printer\" });\n    }\n  });\n\n  // Update printer status or details\n  app.put(\"/api/printers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertPrinterSchema.partial().parse(req.body);\n      const printer = await storage.updatePrinter(id, validatedData);\n      res.json(printer);\n    } catch (error) {\n      console.error(\"Error updating printer:\", error);\n      res.status(500).json({ error: \"Failed to update printer\" });\n    }\n  });\n\n  // Create a print job\n  app.post(\"/api/print-jobs\", async (req, res) => {\n    try {\n      const validatedData = insertPrintJobSchema.parse(req.body);\n      const printJob = await storage.createPrintJob(validatedData);\n      res.status(201).json(printJob);\n    } catch (error) {\n      console.error(\"Error creating print job:\", error);\n      res.status(500).json({ error: \"Failed to create print job\" });\n    }\n  });\n\n  // Get print jobs for a user or printer\n  app.get(\"/api/print-jobs\", async (req, res) => {\n    try {\n      const printerId = req.query.printerId as string;\n      const userId = req.query.userId as string;\n      \n      let jobs;\n      if (printerId) {\n        jobs = await storage.getPrintJobsByPrinter(printerId);\n      } else if (userId) {\n        jobs = await storage.getPrintJobsByUser(userId);\n      } else {\n        jobs = await storage.getPrintJobs();\n      }\n      \n      res.json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching print jobs:\", error);\n      res.status(500).json({ error: \"Failed to fetch print jobs\" });\n    }\n  });\n\n  // Update print job status\n  app.patch(\"/api/print-jobs/:id/status\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { status } = req.body;\n      const job = await storage.updatePrintJobStatus(id, status);\n      res.json(job);\n    } catch (error) {\n      console.error(\"Error updating print job status:\", error);\n      res.status(500).json({ error: \"Failed to update print job status\" });\n    }\n  });\n\n  // Serve PDF files from object storage\n  app.get(\"/objects/:objectPath(*)\", async (req, res) => {\n    try {\n      const objectFile = await objectStorageService.getObjectEntityFile(req.path);\n      await objectStorageService.downloadObject(objectFile, res);\n    } catch (error) {\n      console.error(\"Error serving file:\", error);\n      if (error instanceof ObjectNotFoundError) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      res.status(500).json({ error: \"Failed to serve file\" });\n    }\n  });\n\n  // Public object serving for assets\n  app.get(\"/public-objects/:filePath(*)\", async (req, res) => {\n    const filePath = req.params.filePath;\n    try {\n      const file = await objectStorageService.searchPublicObject(filePath);\n      if (!file) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      await objectStorageService.downloadObject(file, res);\n    } catch (error) {\n      console.error(\"Error searching for public object:\", error);\n      return res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Get label templates\n  app.get(\"/api/label-templates\", async (req, res) => {\n    try {\n      const templates = await storage.getLabelTemplates();\n      res.json(templates);\n    } catch (error) {\n      console.error(\"Error fetching label templates:\", error);\n      res.status(500).json({ error: \"Failed to fetch label templates\" });\n    }\n  });\n\n  // Create label template\n  app.post(\"/api/label-templates\", async (req, res) => {\n    try {\n      const validatedData = insertLabelTemplateSchema.parse(req.body);\n      const template = await storage.createLabelTemplate(validatedData);\n      res.status(201).json(template);\n    } catch (error) {\n      console.error(\"Error creating label template:\", error);\n      res.status(500).json({ error: \"Failed to create label template\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n};\n\n// Async file processing function\nconst processFilesAsync = async (sessionId: string, files: Express.Multer.File[]) => {\n  console.log(`[BULK IMPORT] Starting session ${sessionId} with ${files.length} files`);\n  \n  let session = await storage.getBulkImportSession(sessionId);\n  if (!session) {\n    console.error(`[BULK IMPORT] Session ${sessionId} not found`);\n    return;\n  }\n\n  try {\n    let totalImported = 0;\n    \n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      console.log(`[BULK IMPORT] Processing file ${i + 1}/${files.length}: ${file.originalname}`);\n      \n      // Update file status to processing\n      session.files[i].status = \"processing\";\n      session.files[i].progress = 0;\n      await storage.updateBulkImportSession(sessionId, session);\n\n      try {\n        // Process the file\n        console.log(`[BULK IMPORT] Extracting data from ${file.originalname}`);\n        const result = await processImportFile(file);\n        console.log(`[BULK IMPORT] Extracted ${result.extractedData.length} stores from ${file.originalname}`);\n        \n        // Update progress during processing\n        session.files[i].progress = 50;\n        await storage.updateBulkImportSession(sessionId, session);\n\n        // Import hardware stores to storage\n        for (let j = 0; j < result.extractedData.length; j++) {\n          const storeData = result.extractedData[j];\n          try {\n            console.log(`[BULK IMPORT] Creating store: ${storeData.name || 'Unknown Store'}`);\n            \n            // Ensure required fields are present\n            const storeToCreate = {\n              storeCode: storeData.id || `store_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n              storeName: storeData.name || `Imported Store ${j + 1}`,\n              address: storeData.address || '',\n              contactPerson: storeData.contactPerson || '',\n              phone: storeData.phone || '',\n              email: storeData.email || null,\n              province: storeData.province || 'Unknown',\n              city: storeData.city || '',\n              creditLimit: storeData.creditLimit || '0.00',\n              storeType: storeData.storeType || 'hardware',\n              isActive: storeData.isActive !== false\n            };\n\n            const createdStore = await storage.createHardwareStore(storeToCreate);\n            console.log(`[BULK IMPORT] Successfully created store: ${createdStore.storeName}`);\n            validRows++;\n          } catch (error) {\n            console.error(`[BULK IMPORT] Failed to import store: ${storeData.name || 'Unknown'}`, error);\n            result.errors.push(`Failed to import store: ${storeData.name || 'Unknown'} - ${error.message}`);\n          }\n        }\n\n        // Update file as completed\n        session.files[i].status = \"completed\";\n        session.files[i].progress = 100;\n        session.files[i].result = {\n          totalRows: result.totalRows,\n          validRows: result.validRows,\n          errors: result.errors,\n          preview: result.extractedData.slice(0, 5) // First 5 records for preview\n        };\n\n        session.processedFiles++;\n        await storage.updateBulkImportSession(sessionId, session);\n        \n        console.log(`[BULK IMPORT] Completed file ${file.originalname}. Imported ${totalImported} stores so far.`);\n\n      } catch (error) {\n        console.error(`[BULK IMPORT] Failed to process file: ${file.originalname}`, error);\n        session.files[i].status = \"error\";\n        session.files[i].result = {\n          totalRows: 0,\n          validRows: 0,\n          errors: [error.message || 'Unknown processing error'],\n          preview: []\n        };\n        session.processedFiles++;\n        await storage.updateBulkImportSession(sessionId, session);\n      }\n    }\n\n    // Update session status\n    session.status = session.files.every(f => f.status === \"completed\") ? \"completed\" : \n                     session.files.some(f => f.status === \"completed\") ? \"partial\" : \"failed\";\n    session.totalImported = totalImported;\n    await storage.updateBulkImportSession(sessionId, session);\n\n    console.log(`[BULK IMPORT] Session ${sessionId} completed. Total imported: ${totalImported} hardware stores.`);\n\n  } catch (error) {\n    console.error(`[BULK IMPORT] Session ${sessionId} failed:`, error);\n    if (session) {\n      session.status = \"failed\";\n      await storage.updateBulkImportSession(sessionId, session);\n    }\n  }\n\n  // AI-Powered Mood Selector Routes\n  app.get(\"/api/mood/preferences/:userId\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const preferences = await storage.getUserMoodPreferences(userId);\n      res.json(preferences);\n    } catch (error) {\n      console.error(\"Error fetching user mood preferences:\", error);\n      res.status(500).json({ error: \"Failed to fetch mood preferences\" });\n    }\n  });\n\n  app.post(\"/api/mood/preferences\", async (req, res) => {\n    try {\n      const preference = await storage.createUserMoodPreference(req.body);\n      res.json(preference);\n    } catch (error) {\n      console.error(\"Error creating mood preference:\", error);\n      res.status(500).json({ error: \"Failed to create mood preference\" });\n    }\n  });\n\n  app.get(\"/api/mood/history/:userId\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const { limit, moodId } = req.query;\n      \n      const filters: any = {};\n      if (limit) filters.limit = parseInt(limit as string);\n      if (moodId) filters.moodId = moodId as string;\n      \n      const history = await storage.getUserMoodHistory(userId, filters);\n      res.json(history);\n    } catch (error) {\n      console.error(\"Error fetching mood history:\", error);\n      res.status(500).json({ error: \"Failed to fetch mood history\" });\n    }\n  });\n\n  app.post(\"/api/mood/history\", async (req, res) => {\n    try {\n      const data = {\n        ...req.body,\n        timeOfDay: getTimeOfDay(),\n        dayOfWeek: getDayOfWeek(),\n        timestamp: new Date()\n      };\n      \n      const created = await storage.createUserMoodHistory(data);\n      await storage.updateMoodUsageStats(data.userId, data.moodId);\n      \n      res.json(created);\n    } catch (error) {\n      console.error(\"Error creating mood history:\", error);\n      res.status(500).json({ error: \"Failed to create mood history\" });\n    }\n  });\n\n  app.post(\"/api/mood/usage/:userId/:moodId\", async (req, res) => {\n    try {\n      const { userId, moodId } = req.params;\n      await storage.updateMoodUsageStats(userId, moodId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error updating mood usage stats:\", error);\n      res.status(500).json({ error: \"Failed to update usage stats\" });\n    }\n  });\n\n  // Helper functions for mood selector\n  function getTimeOfDay(): string {\n    const hour = new Date().getHours();\n    if (hour < 6) return \"night\";\n    if (hour < 12) return \"morning\";\n    if (hour < 18) return \"afternoon\";\n    return \"evening\";\n  }\n\n  function getDayOfWeek(): string {\n    const days = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n    return days[new Date().getDay()];\n  }\n};\n","size_bytes":105004},"server/seedProducts.js":{"content":"import { db } from './db.js';\nimport { products } from '../shared/schema.js';\n\nconst cornexProducts = [\n  // EPS Premium Range (13 products)\n  { sku: \"EPS01\", name: \"EPS Cornice 55mm\", category: \"EPS\", dimensions: \"55mm x 55mm\", basePrice: \"8.63\", costPrice: \"6.47\", description: \"Premium polystyrene cornice, ideal for small rooms\" },\n  { sku: \"EPS02\", name: \"EPS Cornice 70mm\", category: \"EPS\", dimensions: \"70mm x 70mm\", basePrice: \"9.85\", costPrice: \"7.39\", description: \"Medium-sized EPS cornice for standard installations\" },\n  { sku: \"EPS03\", name: \"EPS Cornice 90mm\", category: \"EPS\", dimensions: \"90mm x 90mm\", basePrice: \"11.20\", costPrice: \"8.40\", description: \"Large EPS cornice for spacious areas\" },\n  { sku: \"EPS04\", name: \"EPS Cornice 110mm\", category: \"EPS\", dimensions: \"110mm x 110mm\", basePrice: \"13.45\", costPrice: \"10.09\", description: \"Extra large EPS cornice for commercial spaces\" },\n  { sku: \"EPS05\", name: \"EPS Cornice 130mm\", category: \"EPS\", dimensions: \"130mm x 130mm\", basePrice: \"15.70\", costPrice: \"11.78\", description: \"Premium large EPS cornice\" },\n  { sku: \"EPS06\", name: \"EPS Cornice 150mm\", category: \"EPS\", dimensions: \"150mm x 150mm\", basePrice: \"17.95\", costPrice: \"13.46\", description: \"Commercial grade EPS cornice\" },\n  { sku: \"EPS07\", name: \"EPS Cornice 175mm\", category: \"EPS\", dimensions: \"175mm x 175mm\", basePrice: \"18.58\", costPrice: \"13.94\", description: \"Largest EPS cornice in range\" },\n  { sku: \"EPS08\", name: \"EPS Corner 55mm\", category: \"EPS\", dimensions: \"55mm corner\", basePrice: \"4.20\", costPrice: \"3.15\", description: \"Corner piece for 55mm EPS cornice\" },\n  { sku: \"EPS09\", name: \"EPS Corner 70mm\", category: \"EPS\", dimensions: \"70mm corner\", basePrice: \"4.85\", costPrice: \"3.64\", description: \"Corner piece for 70mm EPS cornice\" },\n  { sku: \"EPS10\", name: \"EPS Corner 90mm\", category: \"EPS\", dimensions: \"90mm corner\", basePrice: \"5.50\", costPrice: \"4.13\", description: \"Corner piece for 90mm EPS cornice\" },\n  { sku: \"EPS11\", name: \"EPS End Cap 55mm\", category: \"EPS\", dimensions: \"55mm end cap\", basePrice: \"3.20\", costPrice: \"2.40\", description: \"End cap for 55mm EPS cornice\" },\n  { sku: \"EPS12\", name: \"EPS End Cap 70mm\", category: \"EPS\", dimensions: \"70mm end cap\", basePrice: \"3.85\", costPrice: \"2.89\", description: \"End cap for 70mm EPS cornice\" },\n  { sku: \"EPS13\", name: \"EPS Junction 90mm\", category: \"EPS\", dimensions: \"90mm junction\", basePrice: \"6.75\", costPrice: \"5.06\", description: \"Junction piece for 90mm EPS cornice\" },\n\n  // BR XPS Budget Range (13 products)\n  { sku: \"BR01\", name: \"BR XPS Cornice 55mm\", category: \"BR\", dimensions: \"55mm x 55mm\", basePrice: \"6.90\", costPrice: \"5.18\", description: \"High-density XPS cornice for professional use\" },\n  { sku: \"BR02\", name: \"BR XPS Cornice 70mm\", category: \"BR\", dimensions: \"70mm x 70mm\", basePrice: \"8.45\", costPrice: \"6.34\", description: \"Professional grade XPS cornice\" },\n  { sku: \"BR03\", name: \"BR XPS Cornice 90mm\", category: \"BR\", dimensions: \"90mm x 90mm\", basePrice: \"10.20\", costPrice: \"7.65\", description: \"Large XPS cornice with superior finish\" },\n  { sku: \"BR04\", name: \"BR XPS Cornice 110mm\", category: \"BR\", dimensions: \"110mm x 110mm\", basePrice: \"12.80\", costPrice: \"9.60\", description: \"Extra large XPS cornice\" },\n  { sku: \"BR05\", name: \"BR XPS Cornice 130mm\", category: \"BR\", dimensions: \"130mm x 130mm\", basePrice: \"15.40\", costPrice: \"11.55\", description: \"Premium XPS cornice for luxury installations\" },\n  { sku: \"BR06\", name: \"BR XPS Cornice 150mm\", category: \"BR\", dimensions: \"150mm x 150mm\", basePrice: \"18.90\", costPrice: \"14.18\", description: \"Commercial XPS cornice\" },\n  { sku: \"BR07\", name: \"BR XPS Cornice 170mm\", category: \"BR\", dimensions: \"170mm x 170mm\", basePrice: \"21.50\", costPrice: \"16.13\", description: \"Largest XPS cornice in range\" },\n  { sku: \"BR08\", name: \"BR XPS Corner 55mm\", category: \"BR\", dimensions: \"55mm corner\", basePrice: \"3.95\", costPrice: \"2.96\", description: \"Corner piece for 55mm XPS cornice\" },\n  { sku: \"BR09\", name: \"BR XPS Corner 70mm\", category: \"BR\", dimensions: \"70mm corner\", basePrice: \"4.60\", costPrice: \"3.45\", description: \"Corner piece for 70mm XPS cornice\" },\n  { sku: \"BR10\", name: \"BR XPS Corner 90mm\", category: \"BR\", dimensions: \"90mm corner\", basePrice: \"5.25\", costPrice: \"3.94\", description: \"Corner piece for 90mm XPS cornice\" },\n  { sku: \"BR11\", name: \"BR XPS End Cap 55mm\", category: \"BR\", dimensions: \"55mm end cap\", basePrice: \"2.95\", costPrice: \"2.21\", description: \"End cap for 55mm XPS cornice\" },\n  { sku: \"BR12\", name: \"BR XPS End Cap 70mm\", category: \"BR\", dimensions: \"70mm end cap\", basePrice: \"3.60\", costPrice: \"2.70\", description: \"End cap for 70mm XPS cornice\" },\n  { sku: \"BR13\", name: \"BR XPS Junction 90mm\", category: \"BR\", dimensions: \"90mm junction\", basePrice: \"6.25\", costPrice: \"4.69\", description: \"Junction piece for 90mm XPS cornice\" },\n\n  // LED Ready Series (8 products)  \n  { sku: \"LED01\", name: \"LED Ready Cornice 40mm\", category: \"LED\", dimensions: \"40mm x 60mm\", basePrice: \"15.90\", costPrice: \"11.93\", description: \"Compact LED-ready cornice for accent lighting\" },\n  { sku: \"LED02\", name: \"LED Ready Cornice 60mm\", category: \"LED\", dimensions: \"60mm x 80mm\", basePrice: \"18.75\", costPrice: \"14.06\", description: \"Standard LED-ready cornice\" },\n  { sku: \"LED03\", name: \"LED Ready Cornice 80mm\", category: \"LED\", dimensions: \"80mm x 100mm\", basePrice: \"22.40\", costPrice: \"16.80\", description: \"Large LED-ready cornice for main lighting\" },\n  { sku: \"LED04\", name: \"LED Ready Cornice 100mm\", category: \"LED\", dimensions: \"100mm x 120mm\", basePrice: \"26.85\", costPrice: \"20.14\", description: \"Extra large LED-ready cornice\" },\n  { sku: \"LED05\", name: \"LED Ready Cornice 120mm\", category: \"LED\", dimensions: \"120mm x 140mm\", basePrice: \"29.90\", costPrice: \"22.43\", description: \"Premium LED-ready cornice\" },\n  { sku: \"LED06\", name: \"LED Ready Cornice 145mm\", category: \"LED\", dimensions: \"145mm x 165mm\", basePrice: \"32.75\", costPrice: \"24.56\", description: \"Largest LED-ready cornice\" },\n  { sku: \"LED07\", name: \"LED Corner 60mm\", category: \"LED\", dimensions: \"60mm LED corner\", basePrice: \"8.90\", costPrice: \"6.68\", description: \"Corner piece for 60mm LED cornice\" },\n  { sku: \"LED08\", name: \"LED Diffuser Strip 2m\", category: \"LED\", dimensions: \"2000mm diffuser\", basePrice: \"45.00\", costPrice: \"33.75\", description: \"LED diffuser strip for smooth light distribution\" }\n];\n\nasync function seedProducts() {\n  try {\n    console.log('ðŸŒ± Seeding products...');\n    \n    // Clear existing products first\n    await db.delete(products);\n    console.log('âœ… Cleared existing products');\n    \n    // Insert all products\n    for (const product of cornexProducts) {\n      await db.insert(products).values({\n        ...product,\n        subcategory: product.category === 'EPS' ? 'Premium' : product.category === 'BR' ? 'Budget' : 'Ready',\n        packSize: 1,\n        packsPerBox: product.category === 'LED' ? 5 : 10,\n        weight: '0.500',\n        specifications: {\n          material: product.category === 'EPS' ? 'Expanded Polystyrene' : product.category === 'BR' ? 'Extruded Polystyrene' : 'LED-Compatible Polystyrene',\n          density: product.category === 'EPS' ? '15kg/mÂ³' : product.category === 'BR' ? '35kg/mÂ³' : '25kg/mÂ³',\n          fireRating: 'Class E',\n          installation: 'Adhesive mounting recommended'\n        },\n        isActive: true\n      });\n    }\n    \n    console.log(`âœ… Successfully seeded ${cornexProducts.length} products`);\n    console.log('ðŸ“Š Product breakdown:');\n    console.log(`   â€¢ EPS Premium Range: ${cornexProducts.filter(p => p.category === 'EPS').length} products`);\n    console.log(`   â€¢ BR XPS Budget Range: ${cornexProducts.filter(p => p.category === 'BR').length} products`);\n    console.log(`   â€¢ LED Ready Series: ${cornexProducts.filter(p => p.category === 'LED').length} products`);\n    \n  } catch (error) {\n    console.error('âŒ Error seeding products:', error);\n  }\n}\n\n// Run the seeding function\nseedProducts().then(() => {\n  console.log('ðŸŽ‰ Product seeding completed!');\n  process.exit(0);\n}).catch(error => {\n  console.error('ðŸ’¥ Seeding failed:', error);\n  process.exit(1);\n});","size_bytes":8195},"server/routes/ai.ts":{"content":"import type { Express } from \"express\";\nimport OpenAI from 'openai';\n\n// Initialize OpenAI client\nconst openai = new OpenAI({\n  apiKey: process.env.OPENAI_API_KEY\n});\n\nexport function registerAIRoutes(app: Express) {\n  // AI Mood Generation Endpoint\n  app.post('/api/ai/generate-mood', async (req, res) => {\n    try {\n      const { currentTime, userActivity, preferences } = req.body;\n      \n      const prompt = `\nYou are an AI assistant that helps optimize user experience through intelligent mood detection and recommendation.\n\nCurrent Context:\n- Time: ${currentTime}\n- User Activity: ${userActivity}\n- Current Preferences: Energy ${preferences.energy}%, Focus ${preferences.focus}%, Creativity ${preferences.creativity}%\n\nAvailable Mood Profiles:\n1. energetic - Fast, dynamic transitions (Energy: 90%, Focus: 70%, Creativity: 80%)\n2. focused - Smooth, minimal transitions (Energy: 60%, Focus: 95%, Creativity: 50%)\n3. creative - Flowing, artistic transitions (Energy: 75%, Focus: 60%, Creativity: 95%)\n4. calm - Gentle, relaxing transitions (Energy: 40%, Focus: 80%, Creativity: 70%)\n5. productive - Efficient, business-focused transitions (Energy: 85%, Focus: 90%, Creativity: 60%)\n\nBased on the current context and user preferences, recommend the most suitable mood profile.\n\nRespond with JSON in this exact format:\n{\n  \"recommendedMood\": \"mood_id\",\n  \"reasoning\": \"Brief explanation of why this mood is recommended\",\n  \"confidence\": 0.85,\n  \"adaptations\": {\n    \"energy\": 75,\n    \"focus\": 80,\n    \"creativity\": 65\n  }\n}\n`;\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\", // the newest OpenAI model is \"gpt-4o\" which was released May 13, 2024. do not change this unless explicitly requested by the user\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are an expert UX designer and behavioral psychologist who specializes in optimizing digital experiences based on user context and preferences.\"\n          },\n          {\n            role: \"user\",\n            content: prompt\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 300,\n        temperature: 0.7\n      });\n\n      const aiResponse = JSON.parse(response.choices[0].message.content || '{}');\n      \n      res.json({\n        success: true,\n        recommendedMood: aiResponse.recommendedMood || 'focused',\n        reasoning: aiResponse.reasoning || 'Default recommendation based on business context',\n        confidence: aiResponse.confidence || 0.75,\n        adaptations: aiResponse.adaptations || preferences,\n        timestamp: new Date().toISOString()\n      });\n\n    } catch (error) {\n      console.error('AI mood generation error:', error);\n      res.status(500).json({\n        success: false,\n        error: 'Failed to generate AI mood recommendation',\n        fallbackMood: 'focused'\n      });\n    }\n  });\n\n  // AI Productivity Insights\n  app.post('/api/ai/productivity-insights', async (req, res) => {\n    try {\n      const { moodHistory, userActivity, timeSpent } = req.body;\n\n      const prompt = `\nAnalyze the user's mood and productivity patterns to provide insights and recommendations.\n\nMood History: ${JSON.stringify(moodHistory)}\nUser Activity: ${userActivity}\nTime Spent: ${timeSpent} minutes\n\nProvide insights about:\n1. Most productive mood combinations\n2. Optimal transition timing\n3. Personalized recommendations\n\nRespond with JSON format containing actionable insights.\n`;\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\", // the newest OpenAI model is \"gpt-4o\" which was released May 13, 2024. do not change this unless explicitly requested by the user\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a productivity expert and data analyst specializing in user behavior optimization.\"\n          },\n          {\n            role: \"user\",\n            content: prompt\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 500,\n        temperature: 0.6\n      });\n\n      const insights = JSON.parse(response.choices[0].message.content || '{}');\n      \n      res.json({\n        success: true,\n        insights,\n        timestamp: new Date().toISOString()\n      });\n\n    } catch (error) {\n      console.error('AI productivity insights error:', error);\n      res.status(500).json({\n        success: false,\n        error: 'Failed to generate productivity insights'\n      });\n    }\n  });\n\n  // AI Context-Aware Recommendations\n  app.post('/api/ai/context-recommendations', async (req, res) => {\n    try {\n      const { currentPage, timeOfDay, userBehavior } = req.body;\n\n      const prompt = `\nProvide context-aware recommendations for page transitions and user experience optimization.\n\nContext:\n- Current Page: ${currentPage}\n- Time of Day: ${timeOfDay}\n- User Behavior: ${JSON.stringify(userBehavior)}\n\nRecommend:\n1. Optimal transition styles\n2. Color scheme adjustments\n3. Animation timing preferences\n4. Focus areas for the current context\n\nRespond with JSON containing specific, actionable recommendations.\n`;\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\", // the newest OpenAI model is \"gpt-4o\" which was released May 13, 2024. do not change this unless explicitly requested by the user\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a UX specialist who creates personalized, context-aware digital experiences.\"\n          },\n          {\n            role: \"user\",\n            content: prompt\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 400,\n        temperature: 0.7\n      });\n\n      const recommendations = JSON.parse(response.choices[0].message.content || '{}');\n      \n      res.json({\n        success: true,\n        recommendations,\n        timestamp: new Date().toISOString()\n      });\n\n    } catch (error) {\n      console.error('AI context recommendations error:', error);\n      res.status(500).json({\n        success: false,\n        error: 'Failed to generate context recommendations'\n      });\n    }\n  });\n}","size_bytes":6164},"client/src/components/AchievementDemo.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Trophy, Medal, Star, Zap, Target, TrendingUp } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport function AchievementDemo() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isSimulating, setIsSimulating] = useState(false);\n\n  const recordImportMutation = useMutation({\n    mutationFn: async (performance: any) => {\n      return await apiRequest(\"/api/achievements/record-import\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          userId: user?.id || \"demo-user\",\n          sessionId: `demo-${Date.now()}`,\n          fileName: \"demo-import.xlsx\",\n          performance\n        })\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/achievements/user\"] });\n      toast({\n        title: \"Import Recorded!\",\n        description: \"Your performance has been tracked and points awarded.\",\n      });\n    }\n  });\n\n  const simulateImports = [\n    {\n      name: \"Perfect Import\",\n      performance: {\n        accuracyPercentage: 100,\n        validRows: 2500,\n        totalRows: 2500,\n        importDuration: 45,\n        qualityScore: 98,\n        errorsDetected: []\n      },\n      description: \"Simulate a flawless import with 100% accuracy\"\n    },\n    {\n      name: \"High Volume Import\", \n      performance: {\n        accuracyPercentage: 95,\n        validRows: 8000,\n        totalRows: 8500,\n        importDuration: 180,\n        qualityScore: 92,\n        errorsDetected: [\n          { row: 42, error: \"Missing postal code\" },\n          { row: 156, error: \"Invalid phone format\" }\n        ]\n      },\n      description: \"Simulate importing a large dataset with high accuracy\"\n    },\n    {\n      name: \"Speed Champion\",\n      performance: {\n        accuracyPercentage: 92,\n        validRows: 1200,\n        totalRows: 1300,\n        importDuration: 25,\n        qualityScore: 88,\n        errorsDetected: [\n          { row: 89, error: \"Duplicate entry\" }\n        ]\n      },\n      description: \"Simulate a super-fast import under 30 seconds\"\n    },\n    {\n      name: \"Quality Focus\",\n      performance: {\n        accuracyPercentage: 97,\n        validRows: 3500,\n        totalRows: 3600,\n        importDuration: 90,\n        qualityScore: 96,\n        errorsDetected: []\n      },\n      description: \"Simulate high-quality data processing\"\n    }\n  ];\n\n  const handleSimulateImport = async (importType: any) => {\n    setIsSimulating(true);\n    \n    // Show import progress simulation\n    toast({\n      title: \"ðŸš€ Simulating Import\",\n      description: `Processing ${importType.name}...`,\n    });\n\n    setTimeout(async () => {\n      await recordImportMutation.mutateAsync(importType.performance);\n      setIsSimulating(false);\n      \n      // Show achievement notification\n      if (importType.performance.accuracyPercentage === 100) {\n        setTimeout(() => {\n          toast({\n            title: \"ðŸ† Achievement Unlocked!\",\n            description: \"Precision Master - Achieved 100% accuracy!\",\n            duration: 5000,\n          });\n        }, 1000);\n      }\n      \n      if (importType.performance.validRows >= 8000) {\n        setTimeout(() => {\n          toast({\n            title: \"ðŸ’Ž Achievement Unlocked!\",\n            description: \"Data Titan - Imported over 8,000 records!\",\n            duration: 5000,\n          });\n        }, 1500);\n      }\n      \n      if (importType.performance.importDuration <= 30) {\n        setTimeout(() => {\n          toast({\n            title: \"âš¡ Achievement Unlocked!\",\n            description: \"Lightning Fast - Completed import in under 30 seconds!\",\n            duration: 5000,\n          });\n        }, 2000);\n      }\n    }, 2000);\n  };\n\n  return (\n    <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Trophy className=\"w-6 h-6 text-yellow-500\" />\n          Achievement System Demo\n        </CardTitle>\n        <p className=\"text-sm text-muted-foreground\">\n          Simulate different import scenarios to see how the gamified achievement system works\n        </p>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Achievement Points Display */}\n        <div className=\"grid grid-cols-3 gap-4 mb-6\">\n          <Card className=\"p-4 text-center bg-gradient-to-br from-yellow-500/20 to-orange-500/20\">\n            <div className=\"text-2xl font-bold text-yellow-600\">100+</div>\n            <div className=\"text-xs text-muted-foreground\">Accuracy Points</div>\n          </Card>\n          <Card className=\"p-4 text-center bg-gradient-to-br from-blue-500/20 to-purple-500/20\">\n            <div className=\"text-2xl font-bold text-blue-600\">50+</div>\n            <div className=\"text-xs text-muted-foreground\">Volume Bonus</div>\n          </Card>\n          <Card className=\"p-4 text-center bg-gradient-to-br from-green-500/20 to-emerald-500/20\">\n            <div className=\"text-2xl font-bold text-green-600\">25+</div>\n            <div className=\"text-xs text-muted-foreground\">Speed Bonus</div>\n          </Card>\n        </div>\n\n        {/* Simulation Buttons */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {simulateImports.map((importType, index) => (\n            <motion.div\n              key={index}\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <Card className=\"p-4 cursor-pointer border-2 hover:border-emerald-300 transition-all\">\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div className=\"flex items-center gap-2\">\n                    {importType.performance.accuracyPercentage === 100 && <Trophy className=\"w-5 h-5 text-yellow-500\" />}\n                    {importType.performance.validRows >= 8000 && <Medal className=\"w-5 h-5 text-purple-500\" />}\n                    {importType.performance.importDuration <= 30 && <Zap className=\"w-5 h-5 text-blue-500\" />}\n                    {importType.performance.qualityScore >= 95 && <Star className=\"w-5 h-5 text-emerald-500\" />}\n                    <h4 className=\"font-semibold\">{importType.name}</h4>\n                  </div>\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    {importType.performance.accuracyPercentage}%\n                  </Badge>\n                </div>\n                \n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  {importType.description}\n                </p>\n                \n                <div className=\"grid grid-cols-2 gap-2 text-xs mb-4\">\n                  <div>\n                    <span className=\"text-muted-foreground\">Records:</span> {importType.performance.validRows.toLocaleString()}\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Time:</span> {importType.performance.importDuration}s\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Quality:</span> {importType.performance.qualityScore}/100\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Errors:</span> {importType.performance.errorsDetected.length}\n                  </div>\n                </div>\n\n                <Button \n                  onClick={() => handleSimulateImport(importType)}\n                  disabled={isSimulating || recordImportMutation.isPending}\n                  className=\"w-full\"\n                  size=\"sm\"\n                >\n                  {isSimulating ? \"Simulating...\" : \"Simulate Import\"}\n                </Button>\n              </Card>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Achievement Preview */}\n        <div className=\"mt-6 p-4 bg-gradient-to-r from-emerald-500/10 to-blue-500/10 rounded-lg border border-emerald-200/50\">\n          <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n            <Target className=\"w-4 h-4\" />\n            Potential Achievements\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <Trophy className=\"w-4 h-4 text-yellow-500\" />\n              <span>Precision Master (100% accuracy)</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Medal className=\"w-4 h-4 text-purple-500\" />\n              <span>Data Titan (8000+ records)</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Zap className=\"w-4 h-4 text-blue-500\" />\n              <span>Lightning Fast (â‰¤30 seconds)</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Star className=\"w-4 h-4 text-emerald-500\" />\n              <span>Perfectionist (95+ quality)</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":9466},"client/src/components/AchievementSystem.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Trophy, Medal, Star, Crown, Gem, Target, TrendingUp, Zap, CheckCircle, Award, User, Calendar } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface Achievement {\n  id: string;\n  achievementType: string;\n  achievementName: string;\n  description: string;\n  iconType: string;\n  level: number;\n  pointsAwarded: number;\n  unlockedAt: string;\n}\n\ninterface UserProgress {\n  id: string;\n  achievementType: string;\n  currentProgress: number;\n  targetProgress: number;\n  level: number;\n  totalPoints: number;\n  bestAccuracy: string;\n  consecutiveSuccessfulImports: number;\n  totalImports: number;\n  totalRecordsImported: number;\n  averageImportTime: number;\n}\n\ninterface AchievementData {\n  achievements: Achievement[];\n  progress: UserProgress[];\n  totalPoints: number;\n  level: number;\n  recentMetrics: any[];\n}\n\nconst getIcon = (iconType: string, className = \"w-8 h-8\") => {\n  switch (iconType) {\n    case 'trophy': return <Trophy className={className} />;\n    case 'medal': return <Medal className={className} />;\n    case 'star': return <Star className={className} />;\n    case 'crown': return <Crown className={className} />;\n    case 'gem': return <Gem className={className} />;\n    default: return <Award className={className} />;\n  }\n};\n\nconst getLevelColor = (level: number) => {\n  switch (level) {\n    case 1: return \"text-amber-600 bg-amber-50\"; // Bronze\n    case 2: return \"text-gray-600 bg-gray-50\"; // Silver\n    case 3: return \"text-yellow-600 bg-yellow-50\"; // Gold\n    case 4: return \"text-purple-600 bg-purple-50\"; // Platinum\n    case 5: return \"text-blue-600 bg-blue-50\"; // Diamond\n    default: return \"text-gray-600 bg-gray-50\";\n  }\n};\n\nconst getLevelName = (level: number) => {\n  const levels = [\"\", \"Bronze\", \"Silver\", \"Gold\", \"Platinum\", \"Diamond\"];\n  return levels[level] || \"Bronze\";\n};\n\nexport function AchievementSystem() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [selectedTab, setSelectedTab] = useState<\"overview\" | \"achievements\" | \"progress\">(\"overview\");\n\n  const { data: achievementData, isLoading } = useQuery<AchievementData>({\n    queryKey: [\"/api/achievements/user\", user?.id],\n    enabled: !!user?.id,\n  });\n\n  const [newAchievements, setNewAchievements] = useState<Achievement[]>([]);\n\n  useEffect(() => {\n    if (achievementData?.achievements) {\n      // Check for new achievements (simulated - in real app this would come from server)\n      const recent = achievementData.achievements.filter(\n        a => new Date(a.unlockedAt).getTime() > Date.now() - 24 * 60 * 60 * 1000\n      );\n      if (recent.length > 0) {\n        setNewAchievements(recent);\n      }\n    }\n  }, [achievementData]);\n\n  const showAchievementNotification = (achievement: Achievement) => {\n    toast({\n      title: \"ðŸŽ‰ Achievement Unlocked!\",\n      description: `${achievement.achievementName}: ${achievement.description}`,\n      duration: 5000,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  if (!achievementData) {\n    return (\n      <Card className=\"p-8 text-center\">\n        <Trophy className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n        <h3 className=\"text-lg font-semibold mb-2\">No Achievement Data</h3>\n        <p className=\"text-muted-foreground\">Start importing data to earn achievements!</p>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Achievement Notifications */}\n      <AnimatePresence>\n        {newAchievements.map((achievement) => (\n          <motion.div\n            key={achievement.id}\n            initial={{ opacity: 0, y: -50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -50 }}\n            className=\"fixed top-4 right-4 z-50 bg-gradient-to-r from-emerald-500 to-blue-500 text-white p-4 rounded-lg shadow-lg max-w-sm\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-yellow-300\">\n                {getIcon(achievement.iconType, \"w-6 h-6\")}\n              </div>\n              <div>\n                <h4 className=\"font-bold\">ðŸŽ‰ Achievement Unlocked!</h4>\n                <p className=\"text-sm\">{achievement.achievementName}</p>\n                <p className=\"text-xs opacity-90\">+{achievement.pointsAwarded} points</p>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n            ðŸ† Achievement System\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">Track your import accuracy and earn rewards</p>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <Badge className={`px-4 py-2 text-sm font-bold ${getLevelColor(achievementData.level)}`}>\n            {getLevelName(achievementData.level)} Level\n          </Badge>\n          <div className=\"text-right\">\n            <div className=\"text-2xl font-bold text-emerald-600\">{achievementData.totalPoints.toLocaleString()}</div>\n            <div className=\"text-sm text-muted-foreground\">Total Points</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\n        {[\n          { key: \"overview\", label: \"Overview\", icon: Target },\n          { key: \"achievements\", label: \"Achievements\", icon: Trophy },\n          { key: \"progress\", label: \"Progress\", icon: TrendingUp },\n        ].map(({ key, label, icon: Icon }) => (\n          <Button\n            key={key}\n            variant={selectedTab === key ? \"default\" : \"ghost\"}\n            onClick={() => setSelectedTab(key as any)}\n            className=\"flex-1 gap-2\"\n          >\n            <Icon className=\"w-4 h-4\" />\n            {label}\n          </Button>\n        ))}\n      </div>\n\n      {/* Tab Content */}\n      {selectedTab === \"overview\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {/* Overall Stats */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <User className=\"w-5 h-5\" />\n                Your Stats\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex justify-between\">\n                <span>Total Imports:</span>\n                <span className=\"font-bold\">{achievementData.progress.reduce((sum, p) => sum + p.totalImports, 0)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Records Imported:</span>\n                <span className=\"font-bold\">{achievementData.progress.reduce((sum, p) => sum + p.totalRecordsImported, 0).toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Best Accuracy:</span>\n                <span className=\"font-bold text-green-600\">\n                  {Math.max(...achievementData.progress.map(p => parseFloat(p.bestAccuracy || \"0\"))).toFixed(1)}%\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Current Streak:</span>\n                <span className=\"font-bold text-orange-600\">\n                  {Math.max(...achievementData.progress.map(p => p.consecutiveSuccessfulImports))}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Recent Achievements */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Trophy className=\"w-5 h-5\" />\n                Recent Achievements\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ScrollArea className=\"h-48\">\n                <div className=\"space-y-3\">\n                  {achievementData.achievements.slice(0, 5).map((achievement) => (\n                    <div key={achievement.id} className=\"flex items-center gap-3 p-2 rounded-lg bg-white/5\">\n                      <div className={`${getLevelColor(achievement.level)} p-2 rounded-full`}>\n                        {getIcon(achievement.iconType, \"w-4 h-4\")}\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium text-sm\">{achievement.achievementName}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {new Date(achievement.unlockedAt).toLocaleDateString()}\n                        </div>\n                      </div>\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        +{achievement.pointsAwarded}\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              </ScrollArea>\n            </CardContent>\n          </Card>\n\n          {/* Level Progress */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Zap className=\"w-5 h-5\" />\n                Level Progress\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-emerald-600 mb-2\">\n                  {achievementData.level}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {getLevelName(achievementData.level)}\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span>Progress to next level</span>\n                  <span>{achievementData.totalPoints % 1000}/1000</span>\n                </div>\n                <Progress value={(achievementData.totalPoints % 1000) / 10} className=\"h-3\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {selectedTab === \"achievements\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {achievementData.achievements.map((achievement) => (\n            <motion.div\n              key={achievement.id}\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              whileHover={{ scale: 1.02 }}\n              className=\"group\"\n            >\n              <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20 hover:border-emerald-300 transition-all duration-300\">\n                <CardContent className=\"p-6 text-center\">\n                  <div className={`inline-flex p-4 rounded-full ${getLevelColor(achievement.level)} mb-4 group-hover:scale-110 transition-transform`}>\n                    {getIcon(achievement.iconType, \"w-8 h-8\")}\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">{achievement.achievementName}</h3>\n                  <p className=\"text-sm text-muted-foreground mb-4\">{achievement.description}</p>\n                  <div className=\"flex items-center justify-between\">\n                    <Badge className={getLevelColor(achievement.level)}>\n                      {getLevelName(achievement.level)}\n                    </Badge>\n                    <div className=\"text-sm font-bold text-emerald-600\">\n                      +{achievement.pointsAwarded} pts\n                    </div>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground mt-2\">\n                    <Calendar className=\"w-3 h-3 inline mr-1\" />\n                    {new Date(achievement.unlockedAt).toLocaleDateString()}\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          ))}\n        </div>\n      )}\n\n      {selectedTab === \"progress\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {achievementData.progress.map((progress) => (\n            <Card key={progress.id} className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <span className=\"capitalize\">{progress.achievementType} Progress</span>\n                  <Badge variant=\"outline\">{progress.totalPoints} pts</Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Progress</span>\n                    <span>{progress.currentProgress}/{progress.targetProgress}</span>\n                  </div>\n                  <Progress value={(progress.currentProgress / progress.targetProgress) * 100} className=\"h-2\" />\n                </div>\n                \n                {progress.achievementType === 'accuracy' && (\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <div className=\"text-muted-foreground\">Best Accuracy</div>\n                      <div className=\"font-bold text-green-600\">{progress.bestAccuracy}%</div>\n                    </div>\n                    <div>\n                      <div className=\"text-muted-foreground\">Total Imports</div>\n                      <div className=\"font-bold\">{progress.totalImports}</div>\n                    </div>\n                  </div>\n                )}\n                \n                {progress.achievementType === 'streak' && (\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <div className=\"text-muted-foreground\">Current Streak</div>\n                      <div className=\"font-bold text-orange-600\">{progress.consecutiveSuccessfulImports}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-muted-foreground\">Records Imported</div>\n                      <div className=\"font-bold\">{progress.totalRecordsImported.toLocaleString()}</div>\n                    </div>\n                  </div>\n                )}\n\n                {progress.achievementType === 'speed' && (\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <div className=\"text-muted-foreground\">Avg Import Time</div>\n                      <div className=\"font-bold text-blue-600\">{progress.averageImportTime}s</div>\n                    </div>\n                    <div>\n                      <div className=\"text-muted-foreground\">Total Imports</div>\n                      <div className=\"font-bold\">{progress.totalImports}</div>\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":15837},"client/src/components/AnimatedComponents.tsx":{"content":"import { motion, AnimatePresence } from \"framer-motion\";\nimport { ReactNode } from \"react\";\n\n// Fade In Animation Component\nexport function FadeIn({ \n  children, \n  delay = 0, \n  duration = 0.4,\n  className = \"\" \n}: { \n  children: ReactNode; \n  delay?: number;\n  duration?: number;\n  className?: string;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay, duration, ease: [0.22, 1, 0.36, 1] }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\n// Slide Up Animation Component\nexport function SlideUp({ \n  children, \n  delay = 0,\n  className = \"\" \n}: { \n  children: ReactNode; \n  delay?: number;\n  className?: string;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 30 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ \n        delay, \n        duration: 0.5, \n        ease: [0.22, 1, 0.36, 1] \n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\n// Scale In Animation Component\nexport function ScaleIn({ \n  children, \n  delay = 0,\n  className = \"\" \n}: { \n  children: ReactNode; \n  delay?: number;\n  className?: string;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ \n        delay, \n        duration: 0.4, \n        ease: [0.22, 1, 0.36, 1] \n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\n// Hover Lift Animation Component\nexport function HoverLift({ \n  children, \n  lift = 5,\n  className = \"\" \n}: { \n  children: ReactNode; \n  lift?: number;\n  className?: string;\n}) {\n  return (\n    <motion.div\n      whileHover={{ \n        y: -lift,\n        transition: { type: \"spring\", stiffness: 400, damping: 25 }\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\n// Interactive Button Animation\nexport function AnimatedButton({ \n  children, \n  onClick,\n  disabled = false,\n  className = \"\",\n  variant = \"primary\"\n}: { \n  children: ReactNode; \n  onClick?: () => void;\n  disabled?: boolean;\n  className?: string;\n  variant?: \"primary\" | \"secondary\" | \"outline\";\n}) {\n  const variants = {\n    primary: \"bg-gradient-to-r from-emerald-500 to-blue-500 text-white\",\n    secondary: \"bg-gray-100 text-gray-900 hover:bg-gray-200\",\n    outline: \"border border-gray-300 text-gray-700 hover:border-emerald-500\"\n  };\n\n  return (\n    <motion.button\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n      onClick={onClick}\n      disabled={disabled}\n      className={`\n        px-4 py-2 rounded-lg font-medium transition-colors\n        ${variants[variant]}\n        ${disabled ? \"opacity-50 cursor-not-allowed\" : \"cursor-pointer\"}\n        ${className}\n      `}\n    >\n      {children}\n    </motion.button>\n  );\n}\n\n// Card Hover Animation\nexport function AnimatedCard({ \n  children, \n  className = \"\",\n  onClick\n}: { \n  children: ReactNode; \n  className?: string;\n  onClick?: () => void;\n}) {\n  return (\n    <motion.div\n      whileHover={{ \n        y: -2,\n        scale: 1.01,\n        transition: { type: \"spring\", stiffness: 400, damping: 25 }\n      }}\n      whileTap={onClick ? { scale: 0.99 } : {}}\n      onClick={onClick}\n      className={`\n        backdrop-blur-sm bg-white/10 border border-white/20 rounded-lg\n        ${onClick ? \"cursor-pointer\" : \"\"}\n        ${className}\n      `}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\n// Number Counter Animation\nexport function AnimatedCounter({ \n  from = 0, \n  to, \n  duration = 1,\n  className = \"\"\n}: { \n  from?: number; \n  to: number; \n  duration?: number;\n  className?: string;\n}) {\n  return (\n    <motion.span\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.3 }}\n      className={className}\n    >\n      <motion.span\n        initial={{ scale: 0.8 }}\n        animate={{ scale: 1 }}\n        transition={{ duration: 0.3, delay: 0.1 }}\n      >\n        <motion.span\n          animate={{ color: [\"#10b981\", \"#3b82f6\", \"#10b981\"] }}\n          transition={{ duration: 2, repeat: Infinity }}\n        >\n          {to.toLocaleString()}\n        </motion.span>\n      </motion.span>\n    </motion.span>\n  );\n}\n\n// Loading Dots Animation\nexport function LoadingDots({ className = \"\" }: { className?: string }) {\n  const dotVariants = {\n    animate: {\n      y: [0, -10, 0],\n      transition: {\n        duration: 0.6,\n        repeat: Infinity,\n        ease: \"easeInOut\"\n      }\n    }\n  };\n\n  return (\n    <div className={`flex space-x-1 ${className}`}>\n      <motion.div\n        className=\"w-2 h-2 bg-emerald-500 rounded-full\"\n        variants={dotVariants}\n        animate=\"animate\"\n        style={{ animationDelay: \"0s\" }}\n      />\n      <motion.div\n        className=\"w-2 h-2 bg-emerald-500 rounded-full\"\n        variants={dotVariants}\n        animate=\"animate\"\n        style={{ animationDelay: \"0.2s\" }}\n      />\n      <motion.div\n        className=\"w-2 h-2 bg-emerald-500 rounded-full\"\n        variants={dotVariants}\n        animate=\"animate\"\n        style={{ animationDelay: \"0.4s\" }}\n      />\n    </div>\n  );\n}\n\n// Progress Bar Animation\nexport function AnimatedProgressBar({ \n  progress, \n  className = \"\",\n  showPercentage = true \n}: { \n  progress: number; \n  className?: string;\n  showPercentage?: boolean;\n}) {\n  return (\n    <div className={`w-full ${className}`}>\n      <div className=\"flex items-center justify-between mb-2\">\n        {showPercentage && (\n          <motion.span\n            key={progress}\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            className=\"text-sm font-medium text-emerald-600\"\n          >\n            {progress}%\n          </motion.span>\n        )}\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n        <motion.div\n          className=\"bg-gradient-to-r from-emerald-500 to-blue-500 h-2 rounded-full\"\n          initial={{ width: 0 }}\n          animate={{ width: `${progress}%` }}\n          transition={{ duration: 0.5, ease: \"easeOut\" }}\n        />\n      </div>\n    </div>\n  );\n}\n\n// Modal Animation\nexport function AnimatedModal({ \n  isOpen, \n  onClose, \n  children,\n  title \n}: { \n  isOpen: boolean; \n  onClose: () => void; \n  children: ReactNode;\n  title?: string;\n}) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n            onClick={onClose}\n          />\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          >\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto\">\n              {title && (\n                <div className=\"px-6 py-4 border-b\">\n                  <h3 className=\"text-lg font-semibold\">{title}</h3>\n                </div>\n              )}\n              <div className=\"p-6\">\n                {children}\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Notification Toast Animation\nexport function AnimatedToast({ \n  message, \n  type = \"info\", \n  isVisible,\n  onClose \n}: { \n  message: string; \n  type?: \"success\" | \"error\" | \"warning\" | \"info\";\n  isVisible: boolean;\n  onClose: () => void;\n}) {\n  const typeStyles = {\n    success: \"bg-green-500 text-white\",\n    error: \"bg-red-500 text-white\", \n    warning: \"bg-yellow-500 text-black\",\n    info: \"bg-blue-500 text-white\"\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: -50, x: 100 }}\n          animate={{ opacity: 1, y: 0, x: 0 }}\n          exit={{ opacity: 0, y: -50, x: 100 }}\n          transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n          className={`\n            fixed top-4 right-4 z-50 px-4 py-2 rounded-lg shadow-lg\n            ${typeStyles[type]}\n          `}\n        >\n          <div className=\"flex items-center justify-between\">\n            <span>{message}</span>\n            <button \n              onClick={onClose}\n              className=\"ml-4 text-lg font-bold hover:opacity-70\"\n            >\n              Ã—\n            </button>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}","size_bytes":8682},"client/src/components/FruitfulAssistChatbot.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Send, X, Maximize2, Minimize2, Sparkles } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface Message {\n  id: string;\n  text: string;\n  isBot: boolean;\n  timestamp: Date;\n  suggestions?: string[];\n}\n\ninterface FruitfulAssistChatbotProps {\n  isOpen: boolean;\n  onToggle: () => void;\n}\n\nexport function FruitfulAssistChatbot({ isOpen, onToggle }: FruitfulAssistChatbotProps) {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: \"1\",\n      text: \"âœ¨ ðŸŽ Hello! I'm ðŸŽ Fruitful Assist, your intelligent companion for the CornexConnect Manufacturing Portal. I can help you with:\",\n      isBot: true,\n      timestamp: new Date(),\n      suggestions: [\n        \"Production Optimization\",\n        \"Inventory Analysis\", \n        \"Factory Performance\",\n        \"Sales Insights\",\n        \"Route Planning\",\n        \"Market Analysis\"\n      ]\n    }\n  ]);\n  \n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isMinimized, setIsMinimized] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = () => {\n    if (!inputMessage.trim()) return;\n\n    const newUserMessage: Message = {\n      id: Date.now().toString(),\n      text: inputMessage,\n      isBot: false,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, newUserMessage]);\n    setInputMessage(\"\");\n\n    // Simulate bot response\n    setTimeout(() => {\n      const botResponse: Message = {\n        id: (Date.now() + 1).toString(),\n        text: \"ðŸŽ I'm analyzing your request and preparing insights for the CornexConnect platform. How can I assist you further with manufacturing optimization?\",\n        isBot: true,\n        timestamp: new Date(),\n        suggestions: [\"View Factory Status\", \"Check Inventory Levels\", \"Optimize Production\", \"Sales Analytics\"]\n      };\n      setMessages(prev => [...prev, botResponse]);\n    }, 1000);\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setInputMessage(suggestion);\n  };\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString('en-US', { \n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed bottom-6 right-6 z-50\">\n      <Card className={`w-96 shadow-2xl border-0 transition-all duration-300 ${isMinimized ? 'h-16' : 'h-[600px]'}`}>\n        {/* Header */}\n        <CardHeader className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-t-lg\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"flex items-center space-x-2 text-lg font-semibold\">\n              <span className=\"text-xl\">ðŸŽ</span>\n              <span>Fruitful Assist</span>\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white border-0 text-xs\">\n                AI\n              </Badge>\n            </CardTitle>\n            <div className=\"flex items-center space-x-2\">\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"text-white hover:bg-white/20 p-1 h-8 w-8\"\n                onClick={() => setIsMinimized(!isMinimized)}\n              >\n                {isMinimized ? <Maximize2 className=\"w-4 h-4\" /> : <Minimize2 className=\"w-4 h-4\" />}\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"text-white hover:bg-white/20 p-1 h-8 w-8\"\n                onClick={onToggle}\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n\n        {/* Messages Area */}\n        {!isMinimized && (\n          <>\n            <CardContent className=\"p-0 h-[460px] bg-slate-800 text-white overflow-hidden flex flex-col\">\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.map((message) => (\n                  <div key={message.id} className=\"space-y-2\">\n                    <div className={`flex ${message.isBot ? 'justify-start' : 'justify-end'}`}>\n                      <div className={`max-w-[80%] p-3 rounded-lg ${\n                        message.isBot \n                          ? 'bg-slate-700 text-white' \n                          : 'bg-orange-500 text-white'\n                      }`}>\n                        {message.isBot && (\n                          <div className=\"flex items-center space-x-2 mb-2\">\n                            <Sparkles className=\"w-4 h-4 text-orange-400\" />\n                            <span className=\"text-xs text-slate-300\">\n                              {formatTime(message.timestamp)}\n                            </span>\n                          </div>\n                        )}\n                        <p className=\"text-sm leading-relaxed\">{message.text}</p>\n                      </div>\n                    </div>\n                    \n                    {/* Suggestions */}\n                    {message.suggestions && message.suggestions.length > 0 && (\n                      <div className=\"flex flex-wrap gap-2 ml-2\">\n                        {message.suggestions.map((suggestion, index) => (\n                          <Button\n                            key={index}\n                            size=\"sm\"\n                            variant=\"outline\"\n                            className=\"bg-slate-700 border-slate-600 text-white hover:bg-slate-600 text-xs py-1 px-2 h-auto\"\n                            onClick={() => handleSuggestionClick(suggestion)}\n                          >\n                            {suggestion}\n                          </Button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Input Area */}\n              <div className=\"p-4 border-t border-slate-700\">\n                <div className=\"flex items-center space-x-2\">\n                  <Input\n                    value={inputMessage}\n                    onChange={(e) => setInputMessage(e.target.value)}\n                    placeholder=\"Ask ðŸŽ Fruitful Assist anything...\"\n                    className=\"bg-slate-700 border-slate-600 text-white placeholder-slate-400 focus:border-orange-500\"\n                    onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n                  />\n                  <Button\n                    size=\"sm\"\n                    className=\"bg-orange-500 hover:bg-orange-600 text-white px-3\"\n                    onClick={handleSendMessage}\n                  >\n                    <Send className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n                <div className=\"flex items-center justify-between mt-2 text-xs text-slate-400\">\n                  <span className=\"flex items-center space-x-1\">\n                    <span>ðŸŽ</span>\n                    <span>Fruitful Assist</span>\n                  </span>\n                  <div className=\"flex items-center space-x-1\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    <span>Connected</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </>\n        )}\n      </Card>\n    </div>\n  );\n}\n\n// Floating Chat Button\nexport function FruitfulAssistFloatingButton({ onClick, isOpen }: { onClick: () => void; isOpen: boolean }) {\n  if (isOpen) return null;\n\n  return (\n    <Button\n      onClick={onClick}\n      className=\"fixed bottom-6 right-6 z-50 w-16 h-16 rounded-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-2xl border-0 transition-all duration-300 hover:scale-110\"\n    >\n      <div className=\"flex flex-col items-center\">\n        <span className=\"text-2xl\">ðŸŽ</span>\n        <span className=\"text-xs font-medium\">AI</span>\n      </div>\n    </Button>\n  );\n}","size_bytes":8402},"client/src/components/MoodFloatingButton.tsx":{"content":"import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Brain, Sparkles } from 'lucide-react';\nimport { MoodSelector } from './MoodSelector';\nimport { useMoodContext } from '@/hooks/useMoodContext';\n\nexport function MoodFloatingButton() {\n  const [moodSelectorOpen, setMoodSelectorOpen] = useState(false);\n  const { currentMood, setMood } = useMoodContext();\n\n  return (\n    <>\n      <Button \n        className=\"fixed bottom-20 right-6 z-50 rounded-full w-14 h-14 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 shadow-lg animate-pulse\"\n        onClick={() => setMoodSelectorOpen(true)}\n        title=\"AI-Powered Mood Selector\"\n      >\n        <Brain className=\"w-6 h-6\" />\n        <Sparkles className=\"w-3 h-3 absolute -top-1 -right-1 text-yellow-300 animate-bounce\" />\n      </Button>\n      \n      <MoodSelector \n        isOpen={moodSelectorOpen}\n        onClose={() => setMoodSelectorOpen(false)}\n        currentMood={currentMood.id}\n        onMoodChange={(mood) => setMood(mood)}\n      />\n    </>\n  );\n}","size_bytes":1080},"client/src/components/MoodSelector.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Slider } from '@/components/ui/slider';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { \n  Brain, \n  Sparkles, \n  Palette, \n  Zap, \n  Heart, \n  Coffee, \n  Target, \n  Lightbulb,\n  Settings,\n  Wand2\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface MoodProfile {\n  id: string;\n  name: string;\n  description: string;\n  color: string;\n  energy: number;\n  focus: number;\n  creativity: number;\n  icon: any;\n  transitions: {\n    duration: number;\n    type: 'spring' | 'tween';\n    ease: string;\n    stagger: number;\n  };\n}\n\nconst moodProfiles: MoodProfile[] = [\n  {\n    id: 'energetic',\n    name: 'Energetic',\n    description: 'Fast, dynamic transitions for high-energy work sessions',\n    color: '#F59E0B',\n    energy: 90,\n    focus: 70,\n    creativity: 80,\n    icon: Zap,\n    transitions: {\n      duration: 0.3,\n      type: 'spring',\n      ease: 'easeOut',\n      stagger: 0.05\n    }\n  },\n  {\n    id: 'focused',\n    name: 'Focused',\n    description: 'Smooth, minimal transitions for concentrated work',\n    color: '#3B82F6',\n    energy: 60,\n    focus: 95,\n    creativity: 50,\n    icon: Target,\n    transitions: {\n      duration: 0.5,\n      type: 'tween',\n      ease: 'easeInOut',\n      stagger: 0.02\n    }\n  },\n  {\n    id: 'creative',\n    name: 'Creative',\n    description: 'Flowing, artistic transitions that inspire innovation',\n    color: '#8B5CF6',\n    energy: 75,\n    focus: 60,\n    creativity: 95,\n    icon: Palette,\n    transitions: {\n      duration: 0.7,\n      type: 'spring',\n      ease: 'easeInOut',\n      stagger: 0.08\n    }\n  },\n  {\n    id: 'calm',\n    name: 'Calm',\n    description: 'Gentle, relaxing transitions for stress-free navigation',\n    color: '#10B981',\n    energy: 40,\n    focus: 80,\n    creativity: 70,\n    icon: Heart,\n    transitions: {\n      duration: 0.8,\n      type: 'tween',\n      ease: 'easeOut',\n      stagger: 0.1\n    }\n  },\n  {\n    id: 'productive',\n    name: 'Productive',\n    description: 'Efficient, business-focused transitions for maximum output',\n    color: '#EF4444',\n    energy: 85,\n    focus: 90,\n    creativity: 60,\n    icon: Coffee,\n    transitions: {\n      duration: 0.4,\n      type: 'spring',\n      ease: 'easeInOut',\n      stagger: 0.03\n    }\n  }\n];\n\ninterface MoodSelectorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  currentMood: string;\n  onMoodChange: (mood: MoodProfile) => void;\n}\n\nexport function MoodSelector({ isOpen, onClose, currentMood, onMoodChange }: MoodSelectorProps) {\n  const { toast } = useToast();\n  const [selectedMood, setSelectedMood] = useState(currentMood);\n  const [customSettings, setCustomSettings] = useState({\n    energy: 70,\n    focus: 70,\n    creativity: 70\n  });\n  const [isGeneratingAI, setIsGeneratingAI] = useState(false);\n\n  const generateAIMood = async () => {\n    setIsGeneratingAI(true);\n    try {\n      const response = await fetch('/api/ai/generate-mood', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          currentTime: new Date().toISOString(),\n          userActivity: 'business_platform_usage',\n          preferences: customSettings\n        })\n      });\n\n      if (response.ok) {\n        const aiMood = await response.json();\n        const recommendedProfile = moodProfiles.find(p => p.id === aiMood.recommendedMood) || moodProfiles[0];\n        \n        setSelectedMood(recommendedProfile.id);\n        onMoodChange(recommendedProfile);\n        \n        toast({\n          title: \"AI Mood Generated\",\n          description: `Recommended: ${recommendedProfile.name} - ${aiMood.reasoning}`,\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"AI Generation Failed\",\n        description: \"Using default mood profile instead.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsGeneratingAI(false);\n    }\n  };\n\n  const handleMoodSelect = (mood: MoodProfile) => {\n    setSelectedMood(mood.id);\n    onMoodChange(mood);\n    \n    toast({\n      title: \"Mood Updated\",\n      description: `Switched to ${mood.name} mode`,\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"w-full max-w-4xl max-h-[90vh] overflow-y-auto\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <Card className=\"backdrop-blur-sm bg-white/95 dark:bg-gray-900/95 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Brain className=\"w-6 h-6 text-purple-500\" />\n                AI-Powered Page Transition Mood Selector\n              </CardTitle>\n              <CardDescription>\n                Customize your workspace experience with intelligent transition patterns that adapt to your workflow\n              </CardDescription>\n            </CardHeader>\n            \n            <CardContent className=\"space-y-6\">\n              {/* AI Generation Section */}\n              <div className=\"p-4 bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center gap-2\">\n                    <Sparkles className=\"w-5 h-5 text-purple-500\" />\n                    <h3 className=\"font-semibold\">AI Mood Generation</h3>\n                  </div>\n                  <Button \n                    onClick={generateAIMood}\n                    disabled={isGeneratingAI}\n                    className=\"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600\"\n                  >\n                    {isGeneratingAI ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Generating...\n                      </>\n                    ) : (\n                      <>\n                        <Wand2 className=\"w-4 h-4 mr-2\" />\n                        Generate AI Mood\n                      </>\n                    )}\n                  </Button>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  Let AI analyze your current context and recommend the optimal mood profile for your workflow\n                </p>\n              </div>\n\n              {/* Mood Profiles Grid */}\n              <div className=\"space-y-4\">\n                <h3 className=\"font-semibold flex items-center gap-2\">\n                  <Palette className=\"w-5 h-5\" />\n                  Mood Profiles\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {moodProfiles.map((mood) => {\n                    const Icon = mood.icon;\n                    const isSelected = selectedMood === mood.id;\n                    \n                    return (\n                      <motion.div\n                        key={mood.id}\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                        className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${\n                          isSelected \n                            ? 'border-purple-500 bg-purple-50 dark:bg-purple-900/20' \n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300'\n                        }`}\n                        onClick={() => handleMoodSelect(mood)}\n                      >\n                        <div className=\"flex items-center gap-3 mb-3\">\n                          <div \n                            className=\"p-2 rounded-full\"\n                            style={{ backgroundColor: `${mood.color}20` }}\n                          >\n                            <Icon className=\"w-5 h-5\" style={{ color: mood.color }} />\n                          </div>\n                          <div>\n                            <h4 className=\"font-medium\">{mood.name}</h4>\n                            {isSelected && (\n                              <Badge variant=\"outline\" className=\"text-xs\">Active</Badge>\n                            )}\n                          </div>\n                        </div>\n                        \n                        <p className=\"text-sm text-muted-foreground mb-3\">\n                          {mood.description}\n                        </p>\n                        \n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between text-xs\">\n                            <span>Energy</span>\n                            <span>{mood.energy}%</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-1\">\n                            <div \n                              className=\"h-1 rounded-full transition-all duration-300\"\n                              style={{ \n                                width: `${mood.energy}%`,\n                                backgroundColor: mood.color \n                              }}\n                            />\n                          </div>\n                          \n                          <div className=\"flex justify-between text-xs\">\n                            <span>Focus</span>\n                            <span>{mood.focus}%</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-1\">\n                            <div \n                              className=\"h-1 rounded-full transition-all duration-300\"\n                              style={{ \n                                width: `${mood.focus}%`,\n                                backgroundColor: mood.color \n                              }}\n                            />\n                          </div>\n                          \n                          <div className=\"flex justify-between text-xs\">\n                            <span>Creativity</span>\n                            <span>{mood.creativity}%</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-1\">\n                            <div \n                              className=\"h-1 rounded-full transition-all duration-300\"\n                              style={{ \n                                width: `${mood.creativity}%`,\n                                backgroundColor: mood.color \n                              }}\n                            />\n                          </div>\n                        </div>\n                      </motion.div>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Custom Settings */}\n              <div className=\"space-y-4\">\n                <h3 className=\"font-semibold flex items-center gap-2\">\n                  <Settings className=\"w-5 h-5\" />\n                  Custom Settings\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">Energy Level</label>\n                    <Slider\n                      value={[customSettings.energy]}\n                      onValueChange={(value) => setCustomSettings(prev => ({ ...prev, energy: value[0] }))}\n                      max={100}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                    <div className=\"text-xs text-muted-foreground\">{customSettings.energy}%</div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">Focus Level</label>\n                    <Slider\n                      value={[customSettings.focus]}\n                      onValueChange={(value) => setCustomSettings(prev => ({ ...prev, focus: value[0] }))}\n                      max={100}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                    <div className=\"text-xs text-muted-foreground\">{customSettings.focus}%</div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">Creativity Level</label>\n                    <Slider\n                      value={[customSettings.creativity]}\n                      onValueChange={(value) => setCustomSettings(prev => ({ ...prev, creativity: value[0] }))}\n                      max={100}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                    <div className=\"text-xs text-muted-foreground\">{customSettings.creativity}%</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex justify-end gap-3 pt-4 border-t\">\n                <Button variant=\"outline\" onClick={onClose}>\n                  Cancel\n                </Button>\n                <Button onClick={onClose} className=\"bg-gradient-to-r from-emerald-500 to-blue-500 hover:from-emerald-600 hover:to-blue-600\">\n                  Apply Mood\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}","size_bytes":14126},"client/src/components/RouteMap.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { MapPin, Navigation, Clock, Route } from 'lucide-react';\n\ninterface RouteStop {\n  id: string;\n  name: string;\n  address: string;\n  position: { lat: number; lng: number };\n  estimatedTime?: string;\n  status?: 'pending' | 'completed' | 'current';\n}\n\ninterface RouteMapProps {\n  stops: RouteStop[];\n  optimizeRoute?: boolean;\n  onRouteOptimized?: (optimizedStops: RouteStop[]) => void;\n  className?: string;\n  height?: string;\n}\n\nexport function RouteMap({ \n  stops, \n  optimizeRoute = false,\n  onRouteOptimized,\n  className = \"\",\n  height = \"500px\"\n}: RouteMapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [directionsService, setDirectionsService] = useState<google.maps.DirectionsService | null>(null);\n  const [directionsRenderer, setDirectionsRenderer] = useState<google.maps.DirectionsRenderer | null>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [routeInfo, setRouteInfo] = useState<{\n    distance: string;\n    duration: string;\n    optimized: boolean;\n  } | null>(null);\n\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: import.meta.env.VITE_GOOGLE_API_KEY || '',\n      version: 'weekly',\n      libraries: ['places', 'geometry', 'directions']\n    });\n\n    loader.load().then(() => {\n      setIsLoaded(true);\n    }).catch(err => {\n      console.error('Error loading Google Maps:', err);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (isLoaded && mapRef.current && !map) {\n      const newMap = new google.maps.Map(mapRef.current, {\n        center: { lat: -26.2041, lng: 28.0473 }, // Johannesburg center\n        zoom: 10,\n        styles: [\n          {\n            featureType: 'all',\n            elementType: 'geometry.fill',\n            stylers: [{ color: '#f5f5f5' }]\n          },\n          {\n            featureType: 'water',\n            elementType: 'geometry',\n            stylers: [{ color: '#e9e9e9' }]\n          },\n          {\n            featureType: 'road',\n            elementType: 'geometry',\n            stylers: [{ color: '#ffffff' }]\n          }\n        ]\n      });\n\n      const directionsService = new google.maps.DirectionsService();\n      const directionsRenderer = new google.maps.DirectionsRenderer({\n        suppressMarkers: false,\n        polylineOptions: {\n          strokeColor: '#10B981',\n          strokeWeight: 4\n        }\n      });\n\n      directionsRenderer.setMap(newMap);\n\n      setMap(newMap);\n      setDirectionsService(directionsService);\n      setDirectionsRenderer(directionsRenderer);\n    }\n  }, [isLoaded]);\n\n  const calculateRoute = async (stopsToUse: RouteStop[]) => {\n    if (!directionsService || !directionsRenderer || stopsToUse.length < 2) return;\n\n    const origin = stopsToUse[0].position;\n    const destination = stopsToUse[stopsToUse.length - 1].position;\n    const waypoints = stopsToUse.slice(1, -1).map(stop => ({\n      location: stop.position,\n      stopover: true\n    }));\n\n    try {\n      const result = await new Promise<google.maps.DirectionsResult>((resolve, reject) => {\n        directionsService.route({\n          origin,\n          destination,\n          waypoints,\n          optimizeWaypoints: optimizeRoute,\n          travelMode: google.maps.TravelMode.DRIVING,\n        }, (result, status) => {\n          if (status === 'OK' && result) {\n            resolve(result);\n          } else {\n            reject(new Error(`Directions request failed: ${status}`));\n          }\n        });\n      });\n\n      directionsRenderer.setDirections(result);\n\n      // Extract route information\n      const route = result.routes[0];\n      let totalDistance = 0;\n      let totalDuration = 0;\n\n      route.legs.forEach(leg => {\n        if (leg.distance?.value) totalDistance += leg.distance.value;\n        if (leg.duration?.value) totalDuration += leg.duration.value;\n      });\n\n      setRouteInfo({\n        distance: `${(totalDistance / 1000).toFixed(1)} km`,\n        duration: `${Math.round(totalDuration / 60)} min`,\n        optimized: optimizeRoute && !!result.routes[0].waypoint_order\n      });\n\n      // If route was optimized, reorder the stops\n      if (optimizeRoute && result.routes[0].waypoint_order && onRouteOptimized) {\n        const optimizedOrder = result.routes[0].waypoint_order;\n        const optimizedStops = [\n          stopsToUse[0], // Origin stays first\n          ...optimizedOrder.map(index => stopsToUse[index + 1]), // Waypoints reordered\n          stopsToUse[stopsToUse.length - 1] // Destination stays last\n        ];\n        onRouteOptimized(optimizedStops);\n      }\n\n    } catch (error) {\n      console.error('Error calculating route:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (stops.length >= 2 && directionsService && directionsRenderer) {\n      calculateRoute(stops);\n    }\n  }, [stops, directionsService, directionsRenderer, optimizeRoute]);\n\n  const getMarkerIcon = (status?: string) => {\n    switch (status) {\n      case 'completed':\n        return {\n          path: google.maps.SymbolPath.CIRCLE,\n          fillColor: '#10B981',\n          fillOpacity: 1,\n          strokeColor: '#047857',\n          strokeWeight: 2,\n          scale: 8\n        };\n      case 'current':\n        return {\n          path: google.maps.SymbolPath.CIRCLE,\n          fillColor: '#F59E0B',\n          fillOpacity: 1,\n          strokeColor: '#D97706',\n          strokeWeight: 2,\n          scale: 10\n        };\n      default:\n        return {\n          path: google.maps.SymbolPath.CIRCLE,\n          fillColor: '#6B7280',\n          fillOpacity: 1,\n          strokeColor: '#374151',\n          strokeWeight: 2,\n          scale: 6\n        };\n    }\n  };\n\n  if (!isLoaded) {\n    return (\n      <div \n        className={`flex items-center justify-center bg-gray-100 rounded-lg ${className}`}\n        style={{ height }}\n      >\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mx-auto mb-2\"></div>\n          <p className=\"text-sm text-gray-600\">Loading route map...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* Route Information */}\n      {routeInfo && (\n        <div className=\"flex flex-wrap gap-2 p-3 bg-emerald-50 rounded-lg border border-emerald-200\">\n          <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n            <Route className=\"w-3 h-3\" />\n            {routeInfo.distance}\n          </Badge>\n          <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n            <Clock className=\"w-3 h-3\" />\n            {routeInfo.duration}\n          </Badge>\n          {routeInfo.optimized && (\n            <Badge variant=\"outline\" className=\"flex items-center gap-1 bg-green-100 text-green-800\">\n              <Navigation className=\"w-3 h-3\" />\n              Optimized\n            </Badge>\n          )}\n        </div>\n      )}\n\n      {/* Map */}\n      <div \n        ref={mapRef} \n        className=\"rounded-lg overflow-hidden border\"\n        style={{ height }}\n      />\n\n      {/* Route Stops List */}\n      <div className=\"space-y-2\">\n        <h4 className=\"font-medium text-sm text-gray-700\">Route Stops ({stops.length})</h4>\n        <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n          {stops.map((stop, index) => (\n            <div key={stop.id} className=\"flex items-center gap-3 p-2 rounded bg-gray-50 text-sm\">\n              <div className=\"flex items-center gap-2 flex-1\">\n                <span className=\"w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium\">\n                  {index + 1}\n                </span>\n                <div>\n                  <p className=\"font-medium\">{stop.name}</p>\n                  <p className=\"text-xs text-gray-600\">{stop.address}</p>\n                </div>\n              </div>\n              {stop.status && (\n                <Badge \n                  variant={stop.status === 'completed' ? 'default' : 'secondary'}\n                  className={\n                    stop.status === 'completed' ? 'bg-green-100 text-green-800' :\n                    stop.status === 'current' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-gray-100 text-gray-800'\n                  }\n                >\n                  {stop.status}\n                </Badge>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RouteMap;","size_bytes":8620},"client/src/components/TransitionHints.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, ArrowRight, Info, CheckCircle, AlertCircle, Lightbulb } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\n\nexport interface HintStep {\n  id: string;\n  title: string;\n  description: string;\n  targetElement?: string;\n  type: 'info' | 'success' | 'warning' | 'tip';\n  position: 'top' | 'bottom' | 'left' | 'right' | 'center';\n  action?: {\n    text: string;\n    onClick: () => void;\n  };\n}\n\ninterface TransitionHintsProps {\n  steps: HintStep[];\n  isVisible: boolean;\n  onComplete: () => void;\n  onSkip: () => void;\n  currentStep?: number;\n}\n\nexport function TransitionHints({\n  steps,\n  isVisible,\n  onComplete,\n  onSkip,\n  currentStep = 0\n}: TransitionHintsProps) {\n  const [activeStep, setActiveStep] = useState(currentStep);\n  const [targetPosition, setTargetPosition] = useState<{ x: number; y: number } | null>(null);\n\n  const currentHint = steps[activeStep];\n\n  useEffect(() => {\n    if (currentHint?.targetElement && isVisible) {\n      const element = document.querySelector(currentHint.targetElement);\n      if (element) {\n        const rect = element.getBoundingClientRect();\n        setTargetPosition({\n          x: rect.left + rect.width / 2,\n          y: rect.top + rect.height / 2\n        });\n        \n        // Scroll element into view\n        element.scrollIntoView({ \n          behavior: 'smooth', \n          block: 'center',\n          inline: 'center'\n        });\n        \n        // Add highlight effect\n        element.classList.add('hint-target');\n        setTimeout(() => element.classList.remove('hint-target'), 3000);\n      }\n    }\n  }, [activeStep, currentHint, isVisible]);\n\n  const nextStep = () => {\n    if (activeStep < steps.length - 1) {\n      setActiveStep(activeStep + 1);\n    } else {\n      onComplete();\n    }\n  };\n\n  const previousStep = () => {\n    if (activeStep > 0) {\n      setActiveStep(activeStep - 1);\n    }\n  };\n\n  const getHintIcon = (type: string) => {\n    switch (type) {\n      case 'success': return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'warning': return <AlertCircle className=\"w-5 h-5 text-yellow-500\" />;\n      case 'tip': return <Lightbulb className=\"w-5 h-5 text-blue-500\" />;\n      default: return <Info className=\"w-5 h-5 text-blue-500\" />;\n    }\n  };\n\n  const getHintPosition = () => {\n    if (!targetPosition) return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' };\n    \n    const { x, y } = targetPosition;\n    const offset = 20;\n    \n    switch (currentHint.position) {\n      case 'top':\n        return { top: y - offset, left: x, transform: 'translate(-50%, -100%)' };\n      case 'bottom':\n        return { top: y + offset, left: x, transform: 'translate(-50%, 0%)' };\n      case 'left':\n        return { top: y, left: x - offset, transform: 'translate(-100%, -50%)' };\n      case 'right':\n        return { top: y, left: x + offset, transform: 'translate(0%, -50%)' };\n      default:\n        return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' };\n    }\n  };\n\n  if (!isVisible || !currentHint) return null;\n\n  return (\n    <>\n      {/* Overlay */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/20 backdrop-blur-sm z-[9999]\"\n        onClick={onSkip}\n      />\n      \n      {/* Target Spotlight */}\n      {targetPosition && (\n        <motion.div\n          initial={{ scale: 0, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          className=\"fixed w-24 h-24 rounded-full border-4 border-emerald-400 pointer-events-none z-[10000]\"\n          style={{\n            left: targetPosition.x - 48,\n            top: targetPosition.y - 48,\n            background: 'radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%)'\n          }}\n        />\n      )}\n\n      {/* Hint Card */}\n      <motion.div\n        initial={{ scale: 0.8, opacity: 0, y: 20 }}\n        animate={{ scale: 1, opacity: 1, y: 0 }}\n        exit={{ scale: 0.8, opacity: 0, y: -20 }}\n        className=\"fixed z-[10001] max-w-sm\"\n        style={getHintPosition()}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <Card className=\"backdrop-blur-md bg-white/95 dark:bg-gray-900/95 border border-emerald-200 dark:border-emerald-800 shadow-xl\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex items-center gap-3\">\n                {getHintIcon(currentHint.type)}\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                  {currentHint.title}\n                </h3>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onSkip}\n                className=\"h-8 w-8 p-0 text-gray-500 hover:text-gray-700\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-6\">\n              {currentHint.description}\n            </p>\n\n            {/* Action Button */}\n            {currentHint.action && (\n              <div className=\"mb-4\">\n                <Button\n                  onClick={currentHint.action.onClick}\n                  className=\"w-full bg-gradient-to-r from-emerald-500 to-blue-500 hover:from-emerald-600 hover:to-blue-600\"\n                >\n                  {currentHint.action.text}\n                </Button>\n              </div>\n            )}\n\n            {/* Navigation */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                {steps.map((_, index) => (\n                  <div\n                    key={index}\n                    className={`w-2 h-2 rounded-full transition-colors ${\n                      index === activeStep \n                        ? 'bg-emerald-500' \n                        : index < activeStep \n                          ? 'bg-emerald-300' \n                          : 'bg-gray-300'\n                    }`}\n                  />\n                ))}\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                {activeStep > 0 && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={previousStep}>\n                    Previous\n                  </Button>\n                )}\n                <Button\n                  size=\"sm\"\n                  onClick={nextStep}\n                  className=\"bg-gradient-to-r from-emerald-500 to-blue-500 hover:from-emerald-600 hover:to-blue-600\"\n                >\n                  {activeStep < steps.length - 1 ? (\n                    <>\n                      Next <ArrowRight className=\"w-4 h-4 ml-1\" />\n                    </>\n                  ) : (\n                    'Complete'\n                  )}\n                </Button>\n              </div>\n            </div>\n\n            {/* Step Counter */}\n            <div className=\"text-xs text-gray-500 text-center mt-3\">\n              Step {activeStep + 1} of {steps.length}\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n\n      <style>{`\n        .hint-target {\n          animation: hint-pulse 2s ease-in-out;\n          position: relative;\n          z-index: 10000;\n        }\n        \n        @keyframes hint-pulse {\n          0%, 100% { \n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\n          }\n          50% { \n            box-shadow: 0 0 0 15px rgba(16, 185, 129, 0);\n          }\n        }\n      `}</style>\n    </>\n  );\n}\n\n// Hook for managing transition hints\nexport function useTransitionHints() {\n  const [activeHints, setActiveHints] = useState<HintStep[]>([]);\n  const [isVisible, setIsVisible] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const showHints = (steps: HintStep[]) => {\n    setActiveHints(steps);\n    setCurrentStep(0);\n    setIsVisible(true);\n  };\n\n  const hideHints = () => {\n    setIsVisible(false);\n    setActiveHints([]);\n    setCurrentStep(0);\n  };\n\n  const completeHints = () => {\n    hideHints();\n  };\n\n  return {\n    activeHints,\n    isVisible,\n    currentStep,\n    showHints,\n    hideHints,\n    completeHints\n  };\n}\n\n// Predefined hint sequences for common workflows\nexport const HINT_SEQUENCES = {\n  bulkImport: [\n    {\n      id: 'welcome',\n      title: 'Welcome to Bulk Import',\n      description: 'This powerful tool helps you import multiple Excel files with different structures into one organized database.',\n      type: 'info' as const,\n      position: 'center' as const\n    },\n    {\n      id: 'drag-drop',\n      title: 'Drag & Drop Files',\n      description: 'Simply drag your Excel files here or click to browse. The system automatically detects different column structures.',\n      targetElement: '[data-hint=\"file-drop-zone\"]',\n      type: 'tip' as const,\n      position: 'bottom' as const\n    },\n    {\n      id: 'processing',\n      title: 'Smart Processing',\n      description: 'Files are processed with intelligent column mapping and duplicate detection. All data is organized by province and town.',\n      type: 'info' as const,\n      position: 'center' as const\n    },\n    {\n      id: 'history',\n      title: 'Import History',\n      description: 'View all your import sessions here. Each session shows detailed statistics and processing results.',\n      targetElement: '[data-hint=\"import-history\"]',\n      type: 'success' as const,\n      position: 'top' as const\n    }\n  ],\n  \n  dashboard: [\n    {\n      id: 'overview',\n      title: 'Your Business Dashboard',\n      description: 'Monitor your entire Cornex manufacturing and distribution network from this central hub.',\n      type: 'info' as const,\n      position: 'center' as const\n    },\n    {\n      id: 'metrics',\n      title: 'Real-time Metrics',\n      description: 'Track revenue, distributor performance, and production schedules in real-time across all provinces.',\n      targetElement: '[data-hint=\"dashboard-metrics\"]',\n      type: 'success' as const,\n      position: 'bottom' as const\n    },\n    {\n      id: 'regions',\n      title: 'Regional Performance',\n      description: 'Analyze sales performance by region with detailed breakdowns for each province and major cities.',\n      targetElement: '[data-hint=\"regional-chart\"]',\n      type: 'tip' as const,\n      position: 'left' as const\n    }\n  ],\n\n  factorySetup: [\n    {\n      id: 'ai-factory',\n      title: 'AI-Powered Factory Setup',\n      description: 'Configure your manufacturing facilities with AI-driven optimization recommendations.',\n      type: 'info' as const,\n      position: 'center' as const\n    },\n    {\n      id: 'equipment',\n      title: 'Equipment Configuration',\n      description: 'Add and configure your manufacturing equipment. The AI will suggest optimal production schedules.',\n      targetElement: '[data-hint=\"equipment-setup\"]',\n      type: 'tip' as const,\n      position: 'right' as const\n    },\n    {\n      id: 'optimization',\n      title: 'Production Optimization',\n      description: 'AI algorithms analyze your setup and provide recommendations for maximum efficiency and cost reduction.',\n      type: 'success' as const,\n      position: 'center' as const\n    }\n  ]\n};","size_bytes":11415},"client/src/hooks/useMoodContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\ninterface MoodProfile {\n  id: string;\n  name: string;\n  description: string;\n  color: string;\n  energy: number;\n  focus: number;\n  creativity: number;\n  transitions: {\n    duration: number;\n    type: 'spring' | 'tween';\n    ease: string;\n    stagger: number;\n  };\n}\n\ninterface MoodContextType {\n  currentMood: MoodProfile;\n  setMood: (mood: MoodProfile) => void;\n  moodHistory: MoodProfile[];\n  getTransitionProps: () => any;\n  isAdaptiveModeEnabled: boolean;\n  toggleAdaptiveMode: () => void;\n}\n\nconst defaultMood: MoodProfile = {\n  id: 'focused',\n  name: 'Focused',\n  description: 'Smooth, minimal transitions for concentrated work',\n  color: '#3B82F6',\n  energy: 60,\n  focus: 95,\n  creativity: 50,\n  transitions: {\n    duration: 0.5,\n    type: 'tween',\n    ease: 'easeInOut',\n    stagger: 0.02\n  }\n};\n\nconst MoodContext = createContext<MoodContextType | undefined>(undefined);\n\nexport function MoodProvider({ children }: { children: ReactNode }) {\n  const [currentMood, setCurrentMood] = useState<MoodProfile>(defaultMood);\n  const [moodHistory, setMoodHistory] = useState<MoodProfile[]>([defaultMood]);\n  const [isAdaptiveModeEnabled, setIsAdaptiveModeEnabled] = useState(true);\n\n  // Load mood from localStorage on mount\n  useEffect(() => {\n    const savedMood = localStorage.getItem('cornex-mood-profile');\n    const savedAdaptive = localStorage.getItem('cornex-adaptive-mode');\n    \n    if (savedMood) {\n      try {\n        const mood = JSON.parse(savedMood);\n        setCurrentMood(mood);\n        setMoodHistory([mood]);\n      } catch (error) {\n        console.error('Failed to load saved mood:', error);\n      }\n    }\n    \n    if (savedAdaptive !== null) {\n      setIsAdaptiveModeEnabled(savedAdaptive === 'true');\n    }\n  }, []);\n\n  // AI-powered adaptive mood detection\n  useEffect(() => {\n    if (!isAdaptiveModeEnabled) return;\n\n    const detectContextualMood = async () => {\n      try {\n        const timeOfDay = new Date().getHours();\n        const dayOfWeek = new Date().getDay();\n        const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n        \n        // Simple heuristics for mood adaptation\n        let recommendedMood = currentMood;\n        \n        if (timeOfDay >= 9 && timeOfDay <= 11 && !isWeekend) {\n          // Morning focus time\n          recommendedMood = {\n            ...defaultMood,\n            id: 'focused',\n            name: 'Morning Focus',\n            energy: 80,\n            focus: 95,\n            creativity: 60\n          };\n        } else if (timeOfDay >= 14 && timeOfDay <= 16) {\n          // Afternoon creative time\n          recommendedMood = {\n            ...defaultMood,\n            id: 'creative',\n            name: 'Creative Flow',\n            color: '#8B5CF6',\n            energy: 75,\n            focus: 70,\n            creativity: 95,\n            transitions: {\n              duration: 0.7,\n              type: 'spring',\n              ease: 'easeInOut',\n              stagger: 0.08\n            }\n          };\n        } else if (timeOfDay >= 17 || timeOfDay <= 8) {\n          // Evening/early morning calm time\n          recommendedMood = {\n            ...defaultMood,\n            id: 'calm',\n            name: 'Evening Calm',\n            color: '#10B981',\n            energy: 40,\n            focus: 80,\n            creativity: 70,\n            transitions: {\n              duration: 0.8,\n              type: 'tween',\n              ease: 'easeOut',\n              stagger: 0.1\n            }\n          };\n        }\n        \n        // Only update if mood significantly changed\n        if (recommendedMood.id !== currentMood.id) {\n          setCurrentMood(recommendedMood);\n          setMoodHistory(prev => [...prev.slice(-4), recommendedMood]);\n        }\n      } catch (error) {\n        console.error('Adaptive mood detection failed:', error);\n      }\n    };\n\n    // Check for mood adaptation every 30 minutes\n    const interval = setInterval(detectContextualMood, 30 * 60 * 1000);\n    detectContextualMood(); // Initial check\n\n    return () => clearInterval(interval);\n  }, [isAdaptiveModeEnabled, currentMood.id]);\n\n  const setMood = (mood: MoodProfile) => {\n    setCurrentMood(mood);\n    setMoodHistory(prev => [...prev.slice(-4), mood]);\n    \n    // Save to localStorage\n    localStorage.setItem('cornex-mood-profile', JSON.stringify(mood));\n  };\n\n  const toggleAdaptiveMode = () => {\n    const newMode = !isAdaptiveModeEnabled;\n    setIsAdaptiveModeEnabled(newMode);\n    localStorage.setItem('cornex-adaptive-mode', newMode.toString());\n  };\n\n  const getTransitionProps = () => {\n    const { transitions } = currentMood;\n    \n    return {\n      initial: { opacity: 0, y: 20, scale: 0.95 },\n      animate: { opacity: 1, y: 0, scale: 1 },\n      exit: { opacity: 0, y: -20, scale: 0.95 },\n      transition: {\n        duration: transitions.duration,\n        type: transitions.type,\n        ease: transitions.ease as any,\n        staggerChildren: transitions.stagger\n      }\n    };\n  };\n\n  return (\n    <MoodContext.Provider value={{\n      currentMood,\n      setMood,\n      moodHistory,\n      getTransitionProps,\n      isAdaptiveModeEnabled,\n      toggleAdaptiveMode\n    }}>\n      {children}\n    </MoodContext.Provider>\n  );\n}\n\nexport function useMoodContext() {\n  const context = useContext(MoodContext);\n  if (context === undefined) {\n    // Return default context if not wrapped in provider\n    return {\n      currentMood: defaultMood,\n      setMood: () => {},\n      moodHistory: [defaultMood],\n      getTransitionProps: () => ({\n        initial: { opacity: 0, y: 20, scale: 0.95 },\n        animate: { opacity: 1, y: 0, scale: 1 },\n        exit: { opacity: 0, y: -20, scale: 0.95 },\n        transition: { duration: 0.5, type: 'tween', ease: 'easeInOut' }\n      }),\n      isAdaptiveModeEnabled: false,\n      toggleAdaptiveMode: () => {}\n    };\n  }\n  return context;\n}","size_bytes":5905},"client/src/hooks/usePageTransition.ts":{"content":"import { useState, useEffect } from 'react';\nimport { useLocation } from 'wouter';\n\nexport const usePageTransition = () => {\n  const [location] = useLocation();\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [currentPath, setCurrentPath] = useState(location);\n\n  useEffect(() => {\n    if (location !== currentPath) {\n      setIsTransitioning(true);\n      \n      // Start exit animation\n      const exitTimer = setTimeout(() => {\n        setCurrentPath(location);\n        \n        // Start enter animation\n        const enterTimer = setTimeout(() => {\n          setIsTransitioning(false);\n        }, 100);\n\n        return () => clearTimeout(enterTimer);\n      }, 200);\n\n      return () => clearTimeout(exitTimer);\n    }\n  }, [location, currentPath]);\n\n  return {\n    isTransitioning,\n    currentPath,\n    location\n  };\n};","size_bytes":846},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/i18n_backup.ts":{"content":"// Comprehensive internationalization system for CornexConnect\n// Supporting 47+ countries with native language localization\n\nexport interface Translation {\n  // Navigation & Core UI\n  dashboard: string;\n  productCatalog: string;\n  productionPlanning: string;\n  inventoryAI: string;\n  globalDistributors: string;\n  businessIntelligence: string;\n  routeManagement: string;\n  factorySetup: string;\n  hardwareStores: string;\n  storeMap: string;\n  \n  // Manufacturing Terms\n  cornexManufacturing: string;\n  epsProducts: string;\n  xpsProducts: string;\n  productionSchedule: string;\n  qualityControl: string;\n  \n  // Business Operations\n  salesReps: string;\n  distributorNetwork: string;\n  orderManagement: string;\n  inventoryControl: string;\n  demandForecasting: string;\n  \n  // Common Actions\n  edit: string;\n  delete: string;\n  save: string;\n  cancel: string;\n  close: string;\n  create: string;\n  view: string;\n  export: string;\n  import: string;\n  search: string;\n  filter: string;\n  \n  // Status Terms\n  active: string;\n  inactive: string;\n  pending: string;\n  completed: string;\n  inProgress: string;\n  \n  // Units & Measurements\n  currency: string;\n  volume: string;\n  weight: string;\n  dimensions: string;\n  \n  // Dashboard Content\n  totalRevenue: string;\n  activeDistributors: string;\n  productsInCatalog: string;\n  regionalSalesPerformance: string;\n  topPerformingProducts: string;\n  revenueBreakdownByProvince: string;\n  bestSellingProducts: string;\n  productionSchedule: string;\n  aiDemandForecast: string;\n  upcomingManufacturingPlans: string;\n  predictedDemandNext30Days: string;\n  units: string;\n  confidence: string;\n}\n\nexport interface CountryConfig {\n  code: string;\n  name: string;\n  flag: string;\n  currency: string;\n  phonePrefix: string;\n  timezone: string;\n  dateFormat: string;\n  regions: number;\n  capital: string;\n  language: string;\n  translations: Translation;\n}\n\n// Complete translation for South Africa (Primary market)\nconst southAfricaTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"AI Dashboard\",\n  productCatalog: \"Product Catalogue\",\n  productionPlanning: \"Production Planning\", \n  inventoryAI: \"Inventory AI\",\n  globalDistributors: \"Global Distributors\",\n  businessIntelligence: \"Business Intelligence\",\n  routeManagement: \"Route Management\",\n  factorySetup: \"Factory Setup\",\n  hardwareStores: \"Hardware Stores\",\n  storeMap: \"Store Map\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Cornex Manufacturing\",\n  epsProducts: \"EPS Products\",\n  xpsProducts: \"XPS Products\",\n  productionSchedule: \"Production Schedule\",\n  qualityControl: \"Quality Control\",\n  \n  // Business Operations\n  salesReps: \"Sales Representatives\",\n  distributorNetwork: \"Distributor Network\",\n  orderManagement: \"Order Management\",\n  inventoryControl: \"Inventory Control\",\n  demandForecasting: \"Demand Forecasting\",\n  \n  // Common Actions\n  edit: \"Edit\",\n  delete: \"Delete\",\n  save: \"Save\",\n  cancel: \"Cancel\",\n  close: \"Close\",\n  create: \"Create\",\n  view: \"View\",\n  export: \"Export\",\n  import: \"Import\",\n  search: \"Search\",\n  filter: \"Filter\",\n  \n  // Status Terms\n  active: \"Active\",\n  inactive: \"Inactive\",\n  pending: \"Pending\",\n  completed: \"Completed\",\n  inProgress: \"In Progress\",\n  \n  // Units & Measurements\n  currency: \"ZAR\",\n  volume: \"Cubic Metres\",\n  weight: \"Kilograms\",\n  dimensions: \"Millimetres\",\n  \n  // Dashboard Content\n  totalRevenue: \"Total Revenue\",\n  activeDistributors: \"Active Distributors\", \n  productsInCatalog: \"Products in Catalog\",\n  regionalSalesPerformance: \"Regional Sales Performance\",\n  topPerformingProducts: \"Top Performing Products\",\n  revenueBreakdownByProvince: \"Revenue breakdown by province\",\n  bestSellingProducts: \"Best-selling Cornex products this month\",\n  productionSchedule: \"Production Schedule\",\n  aiDemandForecast: \"AI Demand Forecast\", \n  upcomingManufacturingPlans: \"Upcoming manufacturing plans\",\n  predictedDemandNext30Days: \"Predicted demand for next 30 days\",\n  units: \"units\",\n  confidence: \"Confidence\"\n};\n\n// Arabic translations for Egypt, Morocco, Saudi Arabia, UAE\nconst arabicTranslations: Translation = {\n  dashboard: \"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø°ÙƒÙŠØ©\",\n  productCatalog: \"ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\",\n  productionPlanning: \"ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  inventoryAI: \"Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†\",\n  globalDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙˆÙ†\",\n  businessIntelligence: \"Ø°ÙƒØ§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„\",\n  routeManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\",\n  factorySetup: \"Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµÙ†Ø¹\",\n  hardwareStores: \"Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª\",\n  storeMap: \"Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±\",\n  \n  cornexManufacturing: \"ØªØµÙ†ÙŠØ¹ ÙƒÙˆØ±Ù†ÙƒØ³\",\n  epsProducts: \"Ù…Ù†ØªØ¬Ø§Øª EPS\",\n  xpsProducts: \"Ù…Ù†ØªØ¬Ø§Øª XPS\",\n  productionSchedule: \"Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  qualityControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©\",\n  \n  salesReps: \"Ù…Ù†Ø¯ÙˆØ¨Ùˆ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª\",\n  distributorNetwork: \"Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ÙˆØ²Ø¹ÙŠÙ†\",\n  orderManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª\",\n  inventoryControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†\",\n  demandForecasting: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨\",\n  \n  edit: \"ØªØ¹Ø¯ÙŠÙ„\",\n  delete: \"Ø­Ø°Ù\",\n  save: \"Ø­ÙØ¸\",\n  cancel: \"Ø¥Ù„ØºØ§Ø¡\",\n  close: \"Ø¥ØºÙ„Ø§Ù‚\",\n  create: \"Ø¥Ù†Ø´Ø§Ø¡\",\n  view: \"Ø¹Ø±Ø¶\",\n  export: \"ØªØµØ¯ÙŠØ±\",\n  import: \"Ø§Ø³ØªÙŠØ±Ø§Ø¯\",\n  search: \"Ø¨Ø­Ø«\",\n  filter: \"ØªØµÙÙŠØ©\",\n  \n  active: \"Ù†Ø´Ø·\",\n  inactive: \"ØºÙŠØ± Ù†Ø´Ø·\",\n  pending: \"Ù…Ø¹Ù„Ù‚\",\n  completed: \"Ù…ÙƒØªÙ…Ù„\",\n  inProgress: \"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°\",\n  \n  currency: \"Ø¬Ù†ÙŠÙ‡\",\n  volume: \"Ù…ØªØ± Ù…ÙƒØ¹Ø¨\", \n  weight: \"ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…\",\n  dimensions: \"Ù…ÙŠÙ„ÙŠÙ…ØªØ±\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª\",\n  activeDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†\",\n  productsInCatalog: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬\", \n  regionalSalesPerformance: \"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©\",\n  topPerformingProducts: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡Ù‹\",\n  revenueBreakdownByProvince: \"ØªÙØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©\",\n  bestSellingProducts: \"Ù…Ù†ØªØ¬Ø§Øª ÙƒÙˆØ±Ù†ÙƒØ³ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±\",\n  productionSchedule: \"Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  aiDemandForecast: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",\n  upcomingManufacturingPlans: \"Ø®Ø·Ø· Ø§Ù„ØªØµÙ†ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\", \n  predictedDemandNext30Days: \"Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠÙ† Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\",\n  units: \"ÙˆØ­Ø¯Ø§Øª\",\n  confidence: \"Ø§Ù„Ø«Ù‚Ø©\"\n};\n\n// Spanish translations for Mexico, Spain, Argentina, Colombia, etc.\nconst spanishTranslations: Translation = {\n  dashboard: \"Panel de Control\",\n  productCatalog: \"CatÃ¡logo de Productos\",\n  productionPlanning: \"PlanificaciÃ³n de ProducciÃ³n\",\n  inventoryAI: \"IA de Inventario\",\n  globalDistributors: \"Distribuidores Globales\", \n  businessIntelligence: \"Inteligencia de Negocio\",\n  routeManagement: \"GestiÃ³n de Rutas\",\n  factorySetup: \"ConfiguraciÃ³n de FÃ¡brica\",\n  hardwareStores: \"FerreterÃ­as\",\n  storeMap: \"Mapa de Tiendas\",\n  \n  cornexManufacturing: \"FabricaciÃ³n Cornex\",\n  epsProducts: \"Productos EPS\",\n  xpsProducts: \"Productos XPS\", \n  productionSchedule: \"ProgramaciÃ³n de ProducciÃ³n\",\n  qualityControl: \"Control de Calidad\",\n  \n  salesReps: \"Representantes de Ventas\",\n  distributorNetwork: \"Red de Distribuidores\",\n  orderManagement: \"GestiÃ³n de Pedidos\",\n  inventoryControl: \"Control de Inventario\",\n  demandForecasting: \"PronÃ³stico de Demanda\",\n  \n  edit: \"Editar\",\n  delete: \"Eliminar\", \n  save: \"Guardar\",\n  cancel: \"Cancelar\",\n  close: \"Cerrar\",\n  create: \"Crear\",\n  view: \"Ver\",\n  export: \"Exportar\",\n  import: \"Importar\",\n  search: \"Buscar\",\n  filter: \"Filtrar\",\n  \n  active: \"Activo\",\n  inactive: \"Inactivo\",\n  pending: \"Pendiente\",\n  completed: \"Completado\",\n  inProgress: \"En Progreso\",\n  \n  currency: \"Peso\",\n  volume: \"Metros CÃºbicos\",\n  weight: \"Kilogramos\", \n  dimensions: \"MilÃ­metros\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ingresos Totales\",\n  activeDistributors: \"Distribuidores Activos\",\n  productsInCatalog: \"Productos en CatÃ¡logo\", \n  regionalSalesPerformance: \"Rendimiento de Ventas Regional\",\n  topPerformingProducts: \"Productos de Mayor Rendimiento\",\n  revenueBreakdownByProvince: \"Desglose de ingresos por provincia\",\n  bestSellingProducts: \"Productos Cornex mÃ¡s vendidos este mes\",\n  productionSchedule: \"ProgramaciÃ³n de ProducciÃ³n\",\n  aiDemandForecast: \"PronÃ³stico de Demanda IA\",\n  upcomingManufacturingPlans: \"Planes de fabricaciÃ³n prÃ³ximos\", \n  predictedDemandNext30Days: \"Demanda prevista para los prÃ³ximos 30 dÃ­as\",\n  units: \"unidades\",\n  confidence: \"Confianza\"\n};\n\n// Turkish translations\nconst turkishTranslations: Translation = {\n  dashboard: \"AI Pano\",\n  productCatalog: \"ÃœrÃ¼n KataloÄŸu\",\n  productionPlanning: \"Ãœretim PlanlamasÄ±\",\n  inventoryAI: \"Envanter AI\",\n  globalDistributors: \"KÃ¼resel DistribÃ¼tÃ¶rler\",\n  businessIntelligence: \"Ä°ÅŸ ZekasÄ±\",\n  routeManagement: \"Rota YÃ¶netimi\",\n  factorySetup: \"Fabrika Kurulumu\",\n  hardwareStores: \"HÄ±rdavat MaÄŸazalarÄ±\",\n  storeMap: \"MaÄŸaza HaritasÄ±\",\n  \n  cornexManufacturing: \"Cornex Ä°malat\",\n  epsProducts: \"EPS ÃœrÃ¼nleri\",\n  xpsProducts: \"XPS ÃœrÃ¼nleri\",\n  productionSchedule: \"Ãœretim ProgramÄ±\",\n  qualityControl: \"Kalite Kontrol\",\n  \n  salesReps: \"SatÄ±ÅŸ Temsilcileri\",\n  distributorNetwork: \"DistribÃ¼tÃ¶r AÄŸÄ±\",\n  orderManagement: \"SipariÅŸ YÃ¶netimi\",\n  inventoryControl: \"Envanter KontrolÃ¼\",\n  demandForecasting: \"Talep Tahmini\",\n  \n  edit: \"DÃ¼zenle\",\n  delete: \"Sil\",\n  save: \"Kaydet\",\n  cancel: \"Ä°ptal\",\n  close: \"Kapat\",\n  create: \"OluÅŸtur\",\n  view: \"GÃ¶rÃ¼ntÃ¼le\",\n  export: \"DÄ±ÅŸa Aktar\",\n  import: \"Ä°Ã§e Aktar\",\n  search: \"Ara\",\n  filter: \"Filtrele\",\n  \n  active: \"Aktif\",\n  inactive: \"Pasif\",\n  pending: \"Beklemede\",\n  completed: \"TamamlandÄ±\",\n  inProgress: \"Devam Ediyor\",\n  \n  currency: \"TRY\",\n  volume: \"MetrekÃ¼p\",\n  weight: \"Kilogram\",\n  dimensions: \"Milimetre\",\n  \n  // Dashboard Content\n  totalRevenue: \"Toplam Gelir\",\n  activeDistributors: \"Aktif DistribÃ¼tÃ¶rler\",\n  productsInCatalog: \"Katalogdaki ÃœrÃ¼nler\", \n  regionalSalesPerformance: \"BÃ¶lgesel SatÄ±ÅŸ PerformansÄ±\",\n  topPerformingProducts: \"En Ä°yi Performans GÃ¶steren ÃœrÃ¼nler\",\n  revenueBreakdownByProvince: \"Ä°l bazÄ±nda gelir daÄŸÄ±lÄ±mÄ±\",\n  bestSellingProducts: \"Bu ay en Ã§ok satan Cornex Ã¼rÃ¼nleri\",\n  productionSchedule: \"Ãœretim ProgramÄ±\",\n  aiDemandForecast: \"AI Talep Tahmini\",\n  upcomingManufacturingPlans: \"YaklaÅŸan Ã¼retim planlarÄ±\", \n  predictedDemandNext30Days: \"Ã–nÃ¼mÃ¼zdeki 30 gÃ¼n iÃ§in Ã¶ngÃ¶rÃ¼len talep\",\n  units: \"adet\",\n  confidence: \"GÃ¼ven\"\n};\n\n// German translations\nconst germanTranslations: Translation = {\n  dashboard: \"AI Dashboard\",\n  productCatalog: \"Produktkatalog\",\n  productionPlanning: \"Produktionsplanung\",\n  inventoryAI: \"Lager-KI\",\n  globalDistributors: \"Globale Distributoren\",\n  businessIntelligence: \"Business Intelligence\", \n  routeManagement: \"Routenverwaltung\",\n  factorySetup: \"Fabrikeinrichtung\",\n  hardwareStores: \"BaumÃ¤rkte\",\n  storeMap: \"GeschÃ¤ftskarte\",\n  \n  cornexManufacturing: \"Cornex Herstellung\",\n  epsProducts: \"EPS-Produkte\",\n  xpsProducts: \"XPS-Produkte\",\n  productionSchedule: \"Produktionsplan\",\n  qualityControl: \"QualitÃ¤tskontrolle\",\n  \n  salesReps: \"AuÃŸendienstmitarbeiter\",\n  distributorNetwork: \"Distributorennetzwerk\", \n  orderManagement: \"Auftragsverwaltung\",\n  inventoryControl: \"Bestandskontrolle\",\n  demandForecasting: \"Nachfrageprognose\",\n  \n  edit: \"Bearbeiten\",\n  delete: \"LÃ¶schen\",\n  save: \"Speichern\",\n  cancel: \"Abbrechen\",\n  close: \"SchlieÃŸen\", \n  create: \"Erstellen\",\n  view: \"Anzeigen\",\n  export: \"Exportieren\",\n  import: \"Importieren\",\n  search: \"Suchen\",\n  filter: \"Filtern\",\n  \n  active: \"Aktiv\",\n  inactive: \"Inaktiv\", \n  pending: \"Ausstehend\",\n  completed: \"Abgeschlossen\",\n  inProgress: \"In Bearbeitung\",\n  \n  currency: \"EUR\",\n  volume: \"Kubikmeter\",\n  weight: \"Kilogramm\",\n  dimensions: \"Millimeter\",\n  \n  // Dashboard Content\n  totalRevenue: \"Gesamtumsatz\",\n  activeDistributors: \"Aktive Distributoren\",\n  productsInCatalog: \"Produkte im Katalog\", \n  regionalSalesPerformance: \"Regionale Verkaufsleistung\",\n  topPerformingProducts: \"LeistungsstÃ¤rkste Produkte\",\n  revenueBreakdownByProvince: \"UmsatzaufschlÃ¼sselung nach Bundesland\",\n  bestSellingProducts: \"Meistverkaufte Cornex-Produkte diesen Monat\",\n  productionSchedule: \"Produktionsplan\",\n  aiDemandForecast: \"KI-Nachfrageprognose\",\n  upcomingManufacturingPlans: \"Anstehende FertigungsplÃ¤ne\", \n  predictedDemandNext30Days: \"Vorhergesagte Nachfrage fÃ¼r die nÃ¤chsten 30 Tage\",\n  units: \"Einheiten\",\n  confidence: \"Vertrauen\"\n};\n\n// French translations\nconst frenchTranslations: Translation = {\n  dashboard: \"Tableau de Bord IA\",\n  productCatalog: \"Catalogue de Produits\", \n  productionPlanning: \"Planification de Production\",\n  inventoryAI: \"IA d'Inventaire\",\n  globalDistributors: \"Distributeurs Mondiaux\",\n  businessIntelligence: \"Intelligence d'Affaires\",\n  routeManagement: \"Gestion des Routes\",\n  factorySetup: \"Configuration d'Usine\",\n  hardwareStores: \"Magasins de Bricolage\",\n  storeMap: \"Carte des Magasins\",\n  \n  cornexManufacturing: \"Fabrication Cornex\",\n  epsProducts: \"Produits EPS\",\n  xpsProducts: \"Produits XPS\",\n  productionSchedule: \"Planning de Production\", \n  qualityControl: \"ContrÃ´le QualitÃ©\",\n  \n  salesReps: \"ReprÃ©sentants Commerciaux\",\n  distributorNetwork: \"RÃ©seau de Distributeurs\",\n  orderManagement: \"Gestion des Commandes\",\n  inventoryControl: \"ContrÃ´le des Stocks\",\n  demandForecasting: \"PrÃ©vision de la Demande\",\n  \n  edit: \"Modifier\",\n  delete: \"Supprimer\",\n  save: \"Sauvegarder\",\n  cancel: \"Annuler\",\n  close: \"Fermer\",\n  create: \"CrÃ©er\", \n  view: \"Voir\",\n  export: \"Exporter\",\n  import: \"Importer\",\n  search: \"Rechercher\",\n  filter: \"Filtrer\",\n  \n  active: \"Actif\",\n  inactive: \"Inactif\",\n  pending: \"En attente\",\n  completed: \"TerminÃ©\",\n  inProgress: \"En cours\",\n  \n  currency: \"EUR\",\n  volume: \"MÃ¨tres Cubes\",\n  weight: \"Kilogrammes\",\n  dimensions: \"MillimÃ¨tres\",\n  \n  // Dashboard Content\n  totalRevenue: \"Chiffre d'Affaires Total\",\n  activeDistributors: \"Distributeurs Actifs\",\n  productsInCatalog: \"Produits au Catalogue\", \n  regionalSalesPerformance: \"Performance des Ventes RÃ©gionales\",\n  topPerformingProducts: \"Produits les Plus Performants\",\n  revenueBreakdownByProvince: \"RÃ©partition du chiffre d'affaires par province\",\n  bestSellingProducts: \"Produits Cornex les plus vendus ce mois-ci\",\n  productionSchedule: \"Planning de Production\",\n  aiDemandForecast: \"PrÃ©vision de Demande IA\",\n  upcomingManufacturingPlans: \"Plans de fabrication Ã  venir\", \n  predictedDemandNext30Days: \"Demande prÃ©vue pour les 30 prochains jours\",\n  units: \"unitÃ©s\",\n  confidence: \"Confiance\"\n};\n\nexport const SUPPORTED_COUNTRIES: CountryConfig[] = [\n  // Africa\n  {\n    code: 'ZA',\n    name: 'South Africa',\n    flag: 'ðŸ‡¿ðŸ‡¦',\n    currency: 'ZAR',\n    phonePrefix: '+27',\n    timezone: 'Africa/Johannesburg',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 9,\n    capital: 'Cape Town',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'EG',\n    name: 'Egypt',\n    flag: 'ðŸ‡ªðŸ‡¬', \n    currency: 'EGP',\n    phonePrefix: '+20',\n    timezone: 'Africa/Cairo',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 27,\n    capital: 'Cairo',\n    language: 'Arabic',\n    translations: arabicTranslations\n  },\n  {\n    code: 'MA',\n    name: 'Morocco',\n    flag: 'ðŸ‡²ðŸ‡¦',\n    currency: 'MAD', \n    phonePrefix: '+212',\n    timezone: 'Africa/Casablanca',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 12,\n    capital: 'Rabat',\n    language: 'Arabic',\n    translations: arabicTranslations\n  },\n  {\n    code: 'NG',\n    name: 'Nigeria',\n    flag: 'ðŸ‡³ðŸ‡¬',\n    currency: 'NGN',\n    phonePrefix: '+234', \n    timezone: 'Africa/Lagos',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 36,\n    capital: 'Abuja',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'GH',\n    name: 'Ghana',\n    flag: 'ðŸ‡¬ðŸ‡­',\n    currency: 'GHS',\n    phonePrefix: '+233',\n    timezone: 'Africa/Accra',\n    dateFormat: 'DD/MM/YYYY', \n    regions: 16,\n    capital: 'Accra',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'KE',\n    name: 'Kenya',\n    flag: 'ðŸ‡°ðŸ‡ª',\n    currency: 'KES',\n    phonePrefix: '+254',\n    timezone: 'Africa/Nairobi',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 47,\n    capital: 'Nairobi',\n    language: 'English', \n    translations: southAfricaTranslations\n  },\n\n  // Europe\n  {\n    code: 'GB',\n    name: 'United Kingdom',\n    flag: 'ðŸ‡¬ðŸ‡§',\n    currency: 'GBP',\n    phonePrefix: '+44',\n    timezone: 'Europe/London',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 4,\n    capital: 'London',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'DE', \n    name: 'Germany',\n    flag: 'ðŸ‡©ðŸ‡ª',\n    currency: 'EUR',\n    phonePrefix: '+49',\n    timezone: 'Europe/Berlin',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 16,\n    capital: 'Berlin',\n    language: 'German',\n    translations: germanTranslations\n  },\n  {\n    code: 'FR',\n    name: 'France',\n    flag: 'ðŸ‡«ðŸ‡·',\n    currency: 'EUR',\n    phonePrefix: '+33',\n    timezone: 'Europe/Paris',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 18,\n    capital: 'Paris', \n    language: 'French',\n    translations: frenchTranslations\n  },\n  {\n    code: 'ES',\n    name: 'Spain',\n    flag: 'ðŸ‡ªðŸ‡¸',\n    currency: 'EUR',\n    phonePrefix: '+34',\n    timezone: 'Europe/Madrid',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 17,\n    capital: 'Madrid',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  {\n    code: 'IT',\n    name: 'Italy',\n    flag: 'ðŸ‡®ðŸ‡¹',\n    currency: 'EUR', \n    phonePrefix: '+39',\n    timezone: 'Europe/Rome',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 20,\n    capital: 'Rome',\n    language: 'Italian', \n    translations: southAfricaTranslations\n  },\n  {\n    code: 'NL',\n    name: 'Netherlands',\n    flag: 'ðŸ‡³ðŸ‡±',\n    currency: 'EUR',\n    phonePrefix: '+31',\n    timezone: 'Europe/Amsterdam',\n    dateFormat: 'DD-MM-YYYY',\n    regions: 12,\n    capital: 'Amsterdam',\n    language: 'Dutch',\n    translations: southAfricaTranslations\n  },\n\n  // Americas\n  {\n    code: 'US',\n    name: 'United States',\n    flag: 'ðŸ‡ºðŸ‡¸',\n    currency: 'USD',\n    phonePrefix: '+1',\n    timezone: 'America/New_York',\n    dateFormat: 'MM/DD/YYYY',\n    regions: 50,\n    capital: 'Washington DC',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'CA',\n    name: 'Canada',\n    flag: 'ðŸ‡¨ðŸ‡¦', \n    currency: 'CAD',\n    phonePrefix: '+1',\n    timezone: 'America/Toronto',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 13,\n    capital: 'Ottawa',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'MX',\n    name: 'Mexico',\n    flag: 'ðŸ‡²ðŸ‡½',\n    currency: 'MXN',\n    phonePrefix: '+52',\n    timezone: 'America/Mexico_City',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 32,\n    capital: 'Mexico City',\n    language: 'Spanish', \n    translations: spanishTranslations\n  },\n  {\n    code: 'AR',\n    name: 'Argentina',\n    flag: 'ðŸ‡¦ðŸ‡·',\n    currency: 'ARS',\n    phonePrefix: '+54',\n    timezone: 'America/Argentina/Buenos_Aires',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 23,\n    capital: 'Buenos Aires',\n    language: 'Spanish',\n    translations: spanishTranslations\n  },\n  {\n    code: 'BR',\n    name: 'Brazil',\n    flag: 'ðŸ‡§ðŸ‡·',\n    currency: 'BRL',\n    phonePrefix: '+55',\n    timezone: 'America/Sao_Paulo', \n    dateFormat: 'DD/MM/YYYY',\n    regions: 26,\n    capital: 'BrasÃ­lia',\n    language: 'Portuguese',\n    translations: southAfricaTranslations\n  },\n\n  // Asia-Pacific\n  {\n    code: 'JP',\n    name: 'Japan',\n    flag: 'ðŸ‡¯ðŸ‡µ',\n    currency: 'JPY',\n    phonePrefix: '+81',\n    timezone: 'Asia/Tokyo',\n    dateFormat: 'YYYY/MM/DD',\n    regions: 47,\n    capital: 'Tokyo',\n    language: 'Japanese',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'CN',\n    name: 'China', \n    flag: 'ðŸ‡¨ðŸ‡³',\n    currency: 'CNY',\n    phonePrefix: '+86',\n    timezone: 'Asia/Shanghai',\n    dateFormat: 'YYYY-MM-DD',\n    regions: 34,\n    capital: 'Beijing',\n    language: 'Chinese',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'IN',\n    name: 'India',\n    flag: 'ðŸ‡®ðŸ‡³',\n    currency: 'INR',\n    phonePrefix: '+91',\n    timezone: 'Asia/Kolkata',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 28,\n    capital: 'New Delhi',\n    language: 'Hindi',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'AU', \n    name: 'Australia',\n    flag: 'ðŸ‡¦ðŸ‡º',\n    currency: 'AUD',\n    phonePrefix: '+61',\n    timezone: 'Australia/Sydney',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 8,\n    capital: 'Canberra',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n\n  // Middle East\n  {\n    code: 'TR',\n    name: 'Turkey',\n    flag: 'ðŸ‡¹ðŸ‡·',\n    currency: 'TRY',\n    phonePrefix: '+90',\n    timezone: 'Europe/Istanbul',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 81,\n    capital: 'Ankara',\n    language: 'Turkish',\n    translations: turkishTranslations\n  },\n  {\n    code: 'SA',\n    name: 'Saudi Arabia',\n    flag: 'ðŸ‡¸ðŸ‡¦',\n    currency: 'SAR',\n    phonePrefix: '+966',\n    timezone: 'Asia/Riyadh',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 13,\n    capital: 'Riyadh',\n    language: 'Arabic', \n    translations: arabicTranslations\n  },\n  {\n    code: 'AE',\n    name: 'United Arab Emirates',\n    flag: 'ðŸ‡¦ðŸ‡ª',\n    currency: 'AED',\n    phonePrefix: '+971',\n    timezone: 'Asia/Dubai',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 7,\n    capital: 'Abu Dhabi',\n    language: 'Arabic',\n    translations: arabicTranslations\n  }\n];\n\n// Default to South Africa\nexport const DEFAULT_COUNTRY = SUPPORTED_COUNTRIES[0];\n\nexport const getCountryByCode = (code: string): CountryConfig => {\n  return SUPPORTED_COUNTRIES.find(country => country.code === code) || DEFAULT_COUNTRY;\n};\n\nexport const getCurrentCountry = (): CountryConfig => {\n  const savedCountry = localStorage.getItem('selectedCountry');\n  if (savedCountry) {\n    return getCountryByCode(savedCountry);\n  }\n  return DEFAULT_COUNTRY;\n};\n\nexport const setCurrentCountry = (countryCode: string): void => {\n  localStorage.setItem('selectedCountry', countryCode);\n};","size_bytes":22167},"client/src/lib/i18n_fixed.ts":{"content":"// Comprehensive internationalization system for CornexConnect\n// Supporting 47+ countries with native language localization\n\nexport interface Translation {\n  // Navigation & Core UI\n  dashboard: string;\n  productCatalog: string;\n  productionPlanning: string;\n  inventoryAI: string;\n  globalDistributors: string;\n  businessIntelligence: string;\n  routeManagement: string;\n  factorySetup: string;\n  hardwareStores: string;\n  storeMap: string;\n  \n  // Manufacturing Terms\n  cornexManufacturing: string;\n  epsProducts: string;\n  xpsProducts: string;\n  qualityControl: string;\n  \n  // Business Operations\n  salesReps: string;\n  distributorNetwork: string;\n  orderManagement: string;\n  inventoryControl: string;\n  demandForecasting: string;\n  \n  // Common Actions\n  edit: string;\n  delete: string;\n  save: string;\n  cancel: string;\n  close: string;\n  create: string;\n  view: string;\n  export: string;\n  import: string;\n  search: string;\n  filter: string;\n  \n  // Status Terms\n  active: string;\n  inactive: string;\n  pending: string;\n  completed: string;\n  inProgress: string;\n  \n  // Units & Measurements\n  currency: string;\n  volume: string;\n  weight: string;\n  dimensions: string;\n  \n  // Dashboard Content\n  totalRevenue: string;\n  activeDistributors: string;\n  productsInCatalog: string;\n  regionalSalesPerformance: string;\n  topPerformingProducts: string;\n  revenueBreakdownByProvince: string;\n  bestSellingProducts: string;\n  productionSchedule: string;\n  aiDemandForecast: string;\n  upcomingManufacturingPlans: string;\n  predictedDemandNext30Days: string;\n  units: string;\n  confidence: string;\n}\n\nexport interface Country {\n  code: string;\n  name: string;\n  flag: string;\n  currency: string;\n  timezone: string;\n  dateFormat: string;\n  regions: number;\n  capital: string;\n  language: string;\n  phonePrefix: string;\n  translations: Translation;\n}\n\n// Complete English translations (South Africa - base)\nconst southAfricaTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Dashboard\",\n  productCatalog: \"Product Catalog\", \n  productionPlanning: \"Production Planning\",\n  inventoryAI: \"Inventory AI\",\n  globalDistributors: \"Global Distributors\",\n  businessIntelligence: \"Business Intelligence\",\n  routeManagement: \"Route Management\",\n  factorySetup: \"Factory Setup\",\n  hardwareStores: \"Hardware Stores\",\n  storeMap: \"Store Map\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"Cornex Manufacturing\",\n  epsProducts: \"EPS Products\",\n  xpsProducts: \"XPS Products\", \n  qualityControl: \"Quality Control\",\n  \n  // Business Operations\n  salesReps: \"Sales Representatives\",\n  distributorNetwork: \"Distributor Network\",\n  orderManagement: \"Order Management\",\n  inventoryControl: \"Inventory Control\",\n  demandForecasting: \"Demand Forecasting\",\n  \n  // Common Actions\n  edit: \"Edit\",\n  delete: \"Delete\",\n  save: \"Save\",\n  cancel: \"Cancel\",\n  close: \"Close\",\n  create: \"Create\",\n  view: \"View\",\n  export: \"Export\",\n  import: \"Import\",\n  search: \"Search\",\n  filter: \"Filter\",\n  \n  // Status Terms\n  active: \"Active\",\n  inactive: \"Inactive\",\n  pending: \"Pending\",\n  completed: \"Completed\",\n  inProgress: \"In Progress\",\n  \n  // Units & Measurements\n  currency: \"ZAR\",\n  volume: \"Cubic Metres\",\n  weight: \"Kilograms\",\n  dimensions: \"Millimetres\",\n  \n  // Dashboard Content\n  totalRevenue: \"Total Revenue\",\n  activeDistributors: \"Active Distributors\", \n  productsInCatalog: \"Products in Catalog\",\n  regionalSalesPerformance: \"Regional Sales Performance\",\n  topPerformingProducts: \"Top Performing Products\",\n  revenueBreakdownByProvince: \"Revenue breakdown by province\",\n  bestSellingProducts: \"Best-selling Cornex products this month\",\n  productionSchedule: \"Production Schedule\",\n  aiDemandForecast: \"AI Demand Forecast\", \n  upcomingManufacturingPlans: \"Upcoming manufacturing plans\",\n  predictedDemandNext30Days: \"Predicted demand for next 30 days\",\n  units: \"units\",\n  confidence: \"Confidence\"\n};\n\n// Complete Arabic translations (Egypt)\nconst egyptTranslations: Translation = {\n  // Navigation & Core UI\n  dashboard: \"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\",\n  productCatalog: \"ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\",\n  productionPlanning: \"ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  inventoryAI: \"Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",\n  globalDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙˆÙ†\",\n  businessIntelligence: \"Ø°ÙƒØ§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„\",\n  routeManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø±Ù‚\",\n  factorySetup: \"Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµÙ†Ø¹\",\n  hardwareStores: \"Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª\",\n  storeMap: \"Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØªØ§Ø¬Ø±\",\n  \n  // Manufacturing Terms\n  cornexManufacturing: \"ØªØµÙ†ÙŠØ¹ ÙƒÙˆØ±Ù†ÙƒØ³\",\n  epsProducts: \"Ù…Ù†ØªØ¬Ø§Øª EPS\",\n  xpsProducts: \"Ù…Ù†ØªØ¬Ø§Øª XPS\",\n  qualityControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©\",\n  \n  // Business Operations\n  salesReps: \"Ù…Ù†Ø¯ÙˆØ¨ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª\",\n  distributorNetwork: \"Ø´Ø¨ÙƒØ© Ø§Ù„ØªÙˆØ²ÙŠØ¹\",\n  orderManagement: \"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª\",\n  inventoryControl: \"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†\",\n  demandForecasting: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨\",\n  \n  // Common Actions\n  edit: \"ØªØ­Ø±ÙŠØ±\",\n  delete: \"Ø­Ø°Ù\",\n  save: \"Ø­ÙØ¸\",\n  cancel: \"Ø¥Ù„ØºØ§Ø¡\",\n  close: \"Ø¥ØºÙ„Ø§Ù‚\",\n  create: \"Ø¥Ù†Ø´Ø§Ø¡\",\n  view: \"Ø¹Ø±Ø¶\",\n  export: \"ØªØµØ¯ÙŠØ±\",\n  import: \"Ø§Ø³ØªÙŠØ±Ø§Ø¯\",\n  search: \"Ø¨Ø­Ø«\",\n  filter: \"ØªØµÙÙŠØ©\",\n  \n  // Status Terms\n  active: \"Ù†Ø´Ø·\",\n  inactive: \"ØºÙŠØ± Ù†Ø´Ø·\",\n  pending: \"Ù…Ø¹Ù„Ù‚\",\n  completed: \"Ù…ÙƒØªÙ…Ù„\",\n  inProgress: \"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°\",\n  \n  currency: \"Ø¬Ù†ÙŠÙ‡\",\n  volume: \"Ù…ØªØ± Ù…ÙƒØ¹Ø¨\", \n  weight: \"ÙƒÙŠÙ„ÙˆØºØ±Ø§Ù…\",\n  dimensions: \"Ù…ÙŠÙ„ÙŠÙ…ØªØ±\",\n  \n  // Dashboard Content\n  totalRevenue: \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª\",\n  activeDistributors: \"Ø§Ù„Ù…ÙˆØ²Ø¹ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†\",\n  productsInCatalog: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬\", \n  regionalSalesPerformance: \"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©\",\n  topPerformingProducts: \"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡Ù‹\",\n  revenueBreakdownByProvince: \"ØªÙØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©\",\n  bestSellingProducts: \"Ù…Ù†ØªØ¬Ø§Øª ÙƒÙˆØ±Ù†ÙƒØ³ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±\",\n  productionSchedule: \"Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬\",\n  aiDemandForecast: \"ØªÙˆÙ‚Ø¹ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\",\n  upcomingManufacturingPlans: \"Ø®Ø·Ø· Ø§Ù„ØªØµÙ†ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\", \n  predictedDemandNext30Days: \"Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠÙ† Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\",\n  units: \"ÙˆØ­Ø¯Ø§Øª\",\n  confidence: \"Ø§Ù„Ø«Ù‚Ø©\"\n};\n\n// Create comprehensive country list with full translations\nexport const SUPPORTED_COUNTRIES: Country[] = [\n  // Africa\n  {\n    code: 'ZA',\n    name: 'South Africa',\n    flag: 'ðŸ‡¿ðŸ‡¦',\n    currency: 'ZAR',\n    phonePrefix: '+27',\n    timezone: 'Africa/Johannesburg',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 9,\n    capital: 'Cape Town',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'EG',\n    name: 'Egypt',\n    flag: 'ðŸ‡ªðŸ‡¬', \n    currency: 'EGP',\n    phonePrefix: '+20',\n    timezone: 'Africa/Cairo',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 27,\n    capital: 'Cairo',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'MA',\n    name: 'Morocco',\n    flag: 'ðŸ‡²ðŸ‡¦',\n    currency: 'MAD',\n    phonePrefix: '+212',\n    timezone: 'Africa/Casablanca',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 12,\n    capital: 'Rabat',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'SA',\n    name: 'Saudi Arabia',\n    flag: 'ðŸ‡¸ðŸ‡¦',\n    currency: 'SAR',\n    phonePrefix: '+966',\n    timezone: 'Asia/Riyadh',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 13,\n    capital: 'Riyadh',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  {\n    code: 'AE',\n    name: 'UAE',\n    flag: 'ðŸ‡¦ðŸ‡ª',\n    currency: 'AED',\n    phonePrefix: '+971',\n    timezone: 'Asia/Dubai',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 7,\n    capital: 'Abu Dhabi',\n    language: 'Arabic',\n    translations: egyptTranslations\n  },\n  \n  // Europe\n  {\n    code: 'DE',\n    name: 'Germany',\n    flag: 'ðŸ‡©ðŸ‡ª',\n    currency: 'EUR',\n    phonePrefix: '+49',\n    timezone: 'Europe/Berlin',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 16,\n    capital: 'Berlin',\n    language: 'German',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'FR',\n    name: 'France',\n    flag: 'ðŸ‡«ðŸ‡·',\n    currency: 'EUR',\n    phonePrefix: '+33',\n    timezone: 'Europe/Paris',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 18,\n    capital: 'Paris',\n    language: 'French',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'ES',\n    name: 'Spain',\n    flag: 'ðŸ‡ªðŸ‡¸',\n    currency: 'EUR',\n    phonePrefix: '+34',\n    timezone: 'Europe/Madrid',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 17,\n    capital: 'Madrid',\n    language: 'Spanish',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'TR',\n    name: 'Turkey',\n    flag: 'ðŸ‡¹ðŸ‡·',\n    currency: 'TRY',\n    phonePrefix: '+90',\n    timezone: 'Europe/Istanbul',\n    dateFormat: 'DD.MM.YYYY',\n    regions: 81,\n    capital: 'Ankara',\n    language: 'Turkish',\n    translations: southAfricaTranslations\n  },\n  \n  // Americas\n  {\n    code: 'US',\n    name: 'United States',\n    flag: 'ðŸ‡ºðŸ‡¸',\n    currency: 'USD',\n    phonePrefix: '+1',\n    timezone: 'America/New_York',\n    dateFormat: 'MM/DD/YYYY',\n    regions: 50,\n    capital: 'Washington DC',\n    language: 'English',\n    translations: southAfricaTranslations\n  },\n  {\n    code: 'MX',\n    name: 'Mexico',\n    flag: 'ðŸ‡²ðŸ‡½',\n    currency: 'MXN',\n    phonePrefix: '+52',\n    timezone: 'America/Mexico_City',\n    dateFormat: 'DD/MM/YYYY',\n    regions: 32,\n    capital: 'Mexico City',\n    language: 'Spanish',\n    translations: southAfricaTranslations\n  }\n];\n\nexport function getCountryByCode(code: string): Country {\n  return SUPPORTED_COUNTRIES.find(country => country.code === code) || SUPPORTED_COUNTRIES[0];\n}","size_bytes":9794},"client/src/pages/Achievements.tsx":{"content":"import { PageTransition } from \"@/components/PageTransition\";\nimport { AchievementSystem } from \"@/components/AchievementSystem\";\nimport { AchievementDemo } from \"@/components/AchievementDemo\";\n\nexport default function Achievements() {\n  return (\n    <PageTransition>\n      <div className=\"p-6 max-w-7xl mx-auto space-y-8\">\n        <AchievementDemo />\n        <AchievementSystem />\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":423},"client/src/pages/BrandDetail.tsx":{"content":"import { useParams } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { CORNEX_BRANDS } from \"@/lib/constants\";\nimport { ArrowLeft, Mail, ExternalLink } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nconst BRAND_CONTENT = {\n  trimstyle: {\n    title: \"TrimStyleâ„¢ â€“ Premium Cornice Systems\",\n    icon: \"âœï¸\",\n    color: \"indigo\",\n    sections: [\n      {\n        title: \"Elevating Interior Standards\",\n        content: \"TrimStyleâ„¢ exists to elevate the standards of residential and commercial interior finishes across the Cornexâ„¢ OmniGrid Housing Sector. Designed to operate seamlessly within the FAA Sovereign Scrolls system, TrimStyleâ„¢ delivers EPS-based cornice solutions that combine timeless aesthetics with industrial manufacturing precision.\"\n      },\n      {\n        title: \"Rapid Deployment Solutions\",\n        content: \"In a landscape where construction projects are accelerating and provincial developments demand faster, more reliable interior solutions, TrimStyleâ„¢ offers contractors, developers, and homeowners a guaranteed advantage: consistent quality, rapid deployment, and omnigrid certified compliance.\"\n      },\n      {\n        title: \"Treaty Commerce Instrument\",\n        content: \"TrimStyleâ„¢ is more than a cornice brand; it is a scalable Treaty Commerce instrument. Contractors operating under FAA licensing gain access to a vertical product suite that is Treaty Certified, VaultMesh Memory Encoded, and EcoGrid Compliant.\"\n      },\n      {\n        title: \"Future Expansion\",\n        content: \"Future expansion paths for TrimStyleâ„¢ include pre-coated EPS profiles, integrated quick-lock installation systems, and fully provincialized aesthetic kits customizable by OmniLayer contracts.\"\n      }\n    ]\n  },\n  designaura: {\n    title: \"DesignAuraâ„¢ â€“ Virtual Interior Styling Systems\",\n    icon: \"ðŸ”®\",\n    color: \"purple\",\n    sections: [\n      {\n        title: \"Redefining Interior Architecture\",\n        content: \"DesignAuraâ„¢ redefines the role of interior architecture inside OmniHousing commercial grids. Through advanced virtual modeling systems, DesignAuraâ„¢ empowers contractors, project developers, and end-buyers to visualize complete room designs â€” including ceiling finishes, cornice installations, and partition systems â€” before physical construction even begins.\"\n      },\n      {\n        title: \"AI-Driven Styling Profiles\",\n        content: \"Using AI-driven styling profiles, DesignAuraâ„¢ delivers highly realistic interior options linked directly to available stock at FAA OmniGrid fulfillment centers. This direct link between design intent and Treaty Commerce execution drastically cuts errors, reduces lead times, and ensures aesthetic conformity across multiple housing sectors and provincial nodes.\"\n      },\n      {\n        title: \"VaultMesh Traceability\",\n        content: \"Beyond aesthetics, DesignAuraâ„¢ embeds VaultMesh traceability metadata into every 3D room model generated, ensuring compliance to Sovereign Scroll standards. Clients can select room designs optimized for cost, sustainability, and logistical feasibility â€” with each option dynamically cross-referenced against Cornexâ„¢ brand asset inventories in real-time.\"\n      },\n      {\n        title: \"Future AR Integration\",\n        content: \"Future developments on the DesignAuraâ„¢ roadmap include live augmented reality (AR) visualization modules, customizable contractor catalog templates, and OmniNode export kits capable of scaling into secondary OmniTreaty corridors.\"\n      }\n    ]\n  },\n  cornicecraft: {\n    title: \"CorniceCraftâ„¢ â€“ Industrial EPS Production Solutions\",\n    icon: \"ðŸ§©\",\n    color: \"green\",\n    sections: [\n      {\n        title: \"Industrial-Grade Foundation\",\n        content: \"CorniceCraftâ„¢ provides the industrial-grade foundation for Cornexâ„¢ Treaty Commerce operations. Specializing in mass-scale EPS cornice production, CorniceCraftâ„¢ is calibrated for grid-scale rollouts across Sovereign Scroll licensed regions and provincial OmniHousing programs.\"\n      },\n      {\n        title: \"Automated Manufacturing Systems\",\n        content: \"CorniceCraftâ„¢ deploys automated manufacturing systems aligned with OmniPulse supply chains, ensuring that every cornice unit shipped is accounted for under TreatyMesh commercial node protocols. Every batch carries embedded VaultMesh memory codes, enabling real-time traceability, stock auditing, and freight optimization between nodes.\"\n      },\n      {\n        title: \"Contractor Benefits\",\n        content: \"Contractors and distributors utilizing CorniceCraftâ„¢ benefit from dramatically reduced lead times, reliable weight standards for logistics planning, and modular cornice variants that adapt easily to both standard housing and premium construction projects.\"\n      },\n      {\n        title: \"Mobile Micro-Factories\",\n        content: \"Expansion plans for CorniceCraftâ„¢ include mobile EPS micro-factories capable of provincial deployment inside treaty corridors, allowing on-demand local production synchronized to OmniGrid housing acceleration metrics. CorniceCraftâ„¢ positions itself not just as a supplier, but as a Treaty Commerce infrastructure weapon â€” transforming EPS cornice production from an artisan niche into a sovereign-grade industrial commodity.\"\n      }\n    ]\n  },\n  ceilingtech: {\n    title: \"CeilingTechâ„¢ â€“ Lightweight Ceiling Frameworks\",\n    icon: \"ðŸ§±\",\n    color: \"pink\",\n    sections: [\n      {\n        title: \"Unified Lightweight Solutions\",\n        content: \"CeilingTechâ„¢ consolidates innovation, logistics science, and treaty-level housing compliance into a unified lightweight ceiling solution. Designed specifically for mass deployment under OmniHousing mandates, CeilingTechâ„¢ systems feature engineered EPS ceiling grids capable of high load capacity, rapid installation, and structural longevity.\"\n      },\n      {\n        title: \"VaultMesh Compliance\",\n        content: \"Every CeilingTechâ„¢ module is mapped to VaultMesh compliance models, ensuring complete traceability from raw material sourcing to on-site installation. Contractors deploying CeilingTechâ„¢ grids benefit from lighter transport costs, accelerated fitment times, and significant safety improvements over traditional metallic ceiling systems.\"\n      },\n      {\n        title: \"Smart-Grid Integration\",\n        content: \"In addition to reduced construction costs, CeilingTechâ„¢ supports future smart-grid integrations, offering contractors access to OmniNode-optimized ceiling frameworks ready to host LED panels, AI ventilation sensors, and acoustic damping layers in next-generation Treaty installations.\"\n      },\n      {\n        title: \"Treaty-Grade Infrastructure\",\n        content: \"As FAA OmniGrid territory expands, CeilingTechâ„¢ remains core to scalable housing â€” transforming overhead spaces from basic functional covers into Treaty-Grade Infrastructure Assets.\"\n      }\n    ]\n  }\n};\n\nexport default function BrandDetail() {\n  const params = useParams();\n  const brandId = params.id;\n  \n  const brand = CORNEX_BRANDS.find(b => b.id === brandId);\n  const content = brandId ? BRAND_CONTENT[brandId as keyof typeof BRAND_CONTENT] : null;\n  \n  if (!brand || !content) {\n    return (\n      <div className=\"container mx-auto px-6 py-12\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Brand Not Found</h1>\n          <Link href=\"/\">\n            <Button variant=\"outline\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const colorClasses = {\n    indigo: \"text-indigo-700 border-indigo-200 bg-indigo-50\",\n    purple: \"text-purple-700 border-purple-200 bg-purple-50\", \n    green: \"text-green-700 border-green-200 bg-green-50\",\n    pink: \"text-pink-700 border-pink-200 bg-pink-50\"\n  };\n\n  return (\n    <div className=\"container mx-auto px-6 py-8\">\n      {/* Header */}\n      <div className=\"flex items-center mb-8\">\n        <Link href=\"/\">\n          <Button variant=\"ghost\" size=\"sm\" className=\"mr-4\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back\n          </Button>\n        </Link>\n        <div className=\"flex items-center\">\n          <span className=\"text-3xl mr-4\">{content.icon}</span>\n          <div>\n            <h1 className={`text-3xl font-bold ${colorClasses[content.color as keyof typeof colorClasses].split(' ')[0]}`}>\n              {content.title}\n            </h1>\n            <Badge variant=\"outline\" className=\"mt-2\" style={{ borderColor: brand.color, color: brand.color }}>\n              FAA.Zone Sovereign Scrolls Â· VaultMesh Memory Certified\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Content Sections */}\n      <div className=\"space-y-8\">\n        {content.sections.map((section, index) => (\n          <Card \n            key={index} \n            className={`${colorClasses[content.color as keyof typeof colorClasses]} border-l-4 brand-card-hover glow-on-hover shadow-lg`}\n            style={{ animationDelay: `${index * 0.15}s` }}\n          >\n            <CardHeader>\n              <CardTitle className=\"text-xl font-bold flex items-center\">\n                <div \n                  className=\"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold mr-3 shadow-md\"\n                  style={{ backgroundColor: brand.color }}\n                >\n                  <span className=\"text-sm\">{index + 1}</span>\n                </div>\n                {section.title}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-gray-700 leading-relaxed text-base\">{section.content}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Call to Action */}\n      <div className=\"mt-16 text-center\">\n        <Card className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200\">\n          <CardHeader>\n            <CardTitle className=\"text-2xl text-blue-800\">Ready to Engage {brand.displayName}?</CardTitle>\n            <CardDescription className=\"text-blue-600\">\n              Connect with our team to explore licensing opportunities and implementation strategies\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"flex justify-center space-x-4\">\n            <Button className=\"bg-blue-700 hover:bg-blue-800 text-white\">\n              <Mail className=\"w-4 h-4 mr-2\" />\n              Contact Sales Team\n            </Button>\n            <Button variant=\"outline\" className=\"border-blue-300 text-blue-700 hover:bg-blue-50\">\n              <ExternalLink className=\"w-4 h-4 mr-2\" />\n              View Technical Specs\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Footer */}\n      <div className=\"mt-16 pt-8 border-t border-gray-200 text-center\">\n        <p className=\"text-xs text-gray-400\">\n          FAA.Zone Sovereign Scrolls Â· VaultMesh Memory Certified Â· TreatyMesh Housing Compliance\n        </p>\n      </div>\n    </div>\n  );\n}","size_bytes":11280},"client/src/pages/CompanyManagement.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Building2, Users, Package, CreditCard, MapPin, Phone, Mail, FileText } from \"lucide-react\";\n\ninterface Distributor {\n  id: string;\n  name: string;\n  contactPerson: string;\n  email: string;\n  phone: string;\n  address?: string;\n  city: string;\n  region: string;\n  country: string;\n  currency: string;\n  status: string;\n  tier: string;\n  creditLimit: string;\n  currentBalance?: string;\n  paymentTerms?: string;\n  commissionRate?: string;\n  brands?: string[];\n  taxNumber?: string;\n  registrationNumber?: string;\n}\n\ninterface Product {\n  id: string;\n  name: string;\n  category: string;\n  sku: string;\n}\n\nexport default function CompanyManagement() {\n  const { data: distributors = [], isLoading } = useQuery<Distributor[]>({\n    queryKey: [\"/api/distributors\"],\n  });\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const homemartAfrica = distributors.find(d => d.name === \"HOMEMART AFRICA\");\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-emerald-100 p-6 flex items-center justify-center\">\n        <div className=\"text-center\">Loading company information...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-emerald-100 p-6\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6 }}\n        className=\"max-w-7xl mx-auto space-y-8\"\n      >\n        {/* Header */}\n        <div className=\"text-center space-y-4\">\n          <motion.h1\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.1 }}\n            className=\"text-4xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\"\n          >\n            Company Management Portal\n          </motion.h1>\n          <motion.p\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n            className=\"text-gray-600 text-lg max-w-2xl mx-auto\"\n          >\n            Manage your Cornexâ„¢ product access and inventory across all brand lines\n          </motion.p>\n        </div>\n\n        {homemartAfrica ? (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.6, delay: 0.3 }}\n            className=\"space-y-6\"\n          >\n            {/* Company Profile Card */}\n            <Card className=\"bg-white/80 backdrop-blur-sm border-0 shadow-xl\">\n              <CardHeader className=\"bg-gradient-to-r from-emerald-500 to-blue-500 text-white rounded-t-lg\">\n                <CardTitle className=\"flex items-center gap-3 text-2xl\">\n                  <Building2 className=\"h-8 w-8\" />\n                  {homemartAfrica.name}\n                  <Badge variant=\"secondary\" className=\"bg-white/20 text-white border-white/30\">\n                    {homemartAfrica.tier.toUpperCase()}\n                  </Badge>\n                </CardTitle>\n                <CardDescription className=\"text-emerald-100\">\n                  Registration: {homemartAfrica.registrationNumber} | Tax No: {homemartAfrica.taxNumber}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  {/* Contact Information */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n                      <Users className=\"h-5 w-5 text-emerald-600\" />\n                      Contact Details\n                    </h3>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"h-4 w-4 text-gray-500\" />\n                        <span>{homemartAfrica.contactPerson}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Phone className=\"h-4 w-4 text-gray-500\" />\n                        <span>{homemartAfrica.phone}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"h-4 w-4 text-gray-500\" />\n                        <span>{homemartAfrica.email}</span>\n                      </div>\n                      <div className=\"flex items-start gap-2\">\n                        <MapPin className=\"h-4 w-4 text-gray-500 mt-0.5\" />\n                        <div>\n                          <div>{homemartAfrica.address}</div>\n                          <div className=\"text-gray-600\">{homemartAfrica.city}, {homemartAfrica.region}</div>\n                          <div className=\"text-gray-600\">{homemartAfrica.country}</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Financial Information */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n                      <CreditCard className=\"h-5 w-5 text-emerald-600\" />\n                      Financial Details\n                    </h3>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Credit Limit:</span>\n                        <span className=\"font-semibold text-green-600\">\n                          {homemartAfrica.currency} {parseFloat(homemartAfrica.creditLimit).toLocaleString()}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Current Balance:</span>\n                        <span className=\"font-semibold\">\n                          {homemartAfrica.currency} {parseFloat(homemartAfrica.currentBalance || \"0\").toLocaleString()}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Payment Terms:</span>\n                        <span className=\"font-semibold\">{homemartAfrica.paymentTerms}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Commission Rate:</span>\n                        <span className=\"font-semibold text-blue-600\">{homemartAfrica.commissionRate}%</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Brand Access */}\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n                      <Package className=\"h-5 w-5 text-emerald-600\" />\n                      Brand Access\n                    </h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {homemartAfrica.brands?.map((brand, index) => (\n                        <Badge\n                          key={index}\n                          variant=\"outline\"\n                          className=\"bg-gradient-to-r from-emerald-50 to-blue-50 border-emerald-200 text-emerald-700\"\n                        >\n                          {brand}\n                        </Badge>\n                      ))}\n                    </div>\n                    <div className=\"text-sm text-gray-600 mt-2\">\n                      Access to {products.length} total products across all brand lines\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Quick Actions */}\n            <Card className=\"bg-white/80 backdrop-blur-sm border-0 shadow-lg\">\n              <CardHeader>\n                <CardTitle className=\"text-xl text-gray-900\">Quick Actions</CardTitle>\n                <CardDescription>Manage your inventory and orders</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                  <Button className=\"h-20 flex-col gap-2 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700\">\n                    <Package className=\"h-6 w-6\" />\n                    <span>View Inventory</span>\n                  </Button>\n                  <Button variant=\"outline\" className=\"h-20 flex-col gap-2 border-blue-200 hover:bg-blue-50\">\n                    <FileText className=\"h-6 w-6 text-blue-600\" />\n                    <span>Place Order</span>\n                  </Button>\n                  <Button variant=\"outline\" className=\"h-20 flex-col gap-2 border-green-200 hover:bg-green-50\">\n                    <CreditCard className=\"h-6 w-6 text-green-600\" />\n                    <span>Payment History</span>\n                  </Button>\n                  <Button variant=\"outline\" className=\"h-20 flex-col gap-2 border-purple-200 hover:bg-purple-50\">\n                    <Users className=\"h-6 w-6 text-purple-600\" />\n                    <span>Support</span>\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Product Catalog Summary */}\n            <Card className=\"bg-white/80 backdrop-blur-sm border-0 shadow-lg\">\n              <CardHeader>\n                <CardTitle className=\"text-xl text-gray-900\">Available Products</CardTitle>\n                <CardDescription>Your complete Cornexâ„¢ product catalog access</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"text-center p-4 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg\">\n                    <div className=\"text-3xl font-bold text-emerald-600\">\n                      {products.filter(p => p.category === 'EPS').length}\n                    </div>\n                    <div className=\"text-emerald-700 font-medium\">EPS Products</div>\n                    <div className=\"text-sm text-emerald-600 mt-1\">EPS01-EPS18 Range</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg\">\n                    <div className=\"text-3xl font-bold text-blue-600\">\n                      {products.filter(p => p.category === 'BR').length}\n                    </div>\n                    <div className=\"text-blue-700 font-medium\">BR XPS Products</div>\n                    <div className=\"text-sm text-blue-600 mt-1\">BR1-BR13 Range</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg\">\n                    <div className=\"text-3xl font-bold text-purple-600\">\n                      {products.filter(p => p.category === 'LED').length}\n                    </div>\n                    <div className=\"text-purple-700 font-medium\">LED Products</div>\n                    <div className=\"text-sm text-purple-600 mt-1\">Premium LED Range</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </motion.div>\n        ) : (\n          <Card className=\"bg-white/80 backdrop-blur-sm border-0 shadow-lg\">\n            <CardContent className=\"p-8 text-center\">\n              <Building2 className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Company Found</h3>\n              <p className=\"text-gray-600\">Homemart Africa registration not found in the system.</p>\n            </CardContent>\n          </Card>\n        )}\n      </motion.div>\n    </div>\n  );\n}","size_bytes":12262},"client/src/pages/CompanySettings.tsx":{"content":"import { useState } from \"react\";\nimport * as React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { motion } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Building2, Save, Shield, CreditCard, MapPin, Phone, Mail } from \"lucide-react\";\nimport { PageTransition, StaggerContainer, StaggerItem } from \"@/components/PageTransition\";\nimport { \n  FadeIn, \n  SlideUp, \n  ScaleIn, \n  AnimatedCard, \n  AnimatedButton, \n  LoadingDots \n} from \"@/components/AnimatedComponents\";\n\nconst companySettingsSchema = z.object({\n  companyName: z.string().min(2, \"Company name must be at least 2 characters\"),\n  companyRegistration: z.string().optional(),\n  contactEmail: z.string().email(\"Please enter a valid email address\"),\n  alternateEmail: z.string().email(\"Please enter a valid email address\").optional().or(z.literal(\"\")),\n  phone: z.string().min(10, \"Please enter a valid phone number\"),\n  alternatePhone: z.string().optional(),\n  address: z.string().min(5, \"Please enter a complete address\"),\n  city: z.string().min(2, \"Please enter a city name\"),\n  province: z.string().min(2, \"Please select a province\"),\n  postalCode: z.string().min(4, \"Please enter a valid postal code\"),\n  country: z.string().default(\"South Africa\"),\n  vatNumber: z.string().optional(),\n  businessType: z.enum([\"distributor\", \"retailer\", \"manufacturer\", \"other\"]),\n  creditLimit: z.string().optional(),\n  paymentTerms: z.enum([\"cash\", \"30_days\", \"60_days\", \"90_days\"]),\n});\n\ntype CompanySettingsForm = z.infer<typeof companySettingsSchema>;\n\nconst southAfricanProvinces = [\n  \"Eastern Cape\",\n  \"Free State\", \n  \"Gauteng\",\n  \"KwaZulu-Natal\",\n  \"Limpopo\",\n  \"Mpumalanga\",\n  \"Northern Cape\",\n  \"North West\",\n  \"Western Cape\"\n];\n\nexport default function CompanySettings() {\n  const [activeSection, setActiveSection] = useState(\"basic\");\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch current company settings\n  const { data: companySettings, isLoading } = useQuery({\n    queryKey: [\"/api/company-settings\"],\n  });\n\n  const form = useForm<CompanySettingsForm>({\n    resolver: zodResolver(companySettingsSchema),\n    defaultValues: {\n      companyName: \"HOMEMART AFRICA\",\n      companyRegistration: \"2022/854581/07\",\n      contactEmail: \"info@homemart.co.za\",\n      alternateEmail: \"\",\n      phone: \"+27 11 123 4567\",\n      alternatePhone: \"\",\n      address: \"123 Industrial Street, Johannesburg\",\n      city: \"Johannesburg\",\n      province: \"Gauteng\",\n      postalCode: \"2001\",\n      country: \"South Africa\",\n      vatNumber: \"4123456789\",\n      businessType: \"distributor\",\n      creditLimit: \"500000\",\n      paymentTerms: \"30_days\",\n    },\n  });\n\n  // Update form values when data loads\n  React.useEffect(() => {\n    if (companySettings) {\n      form.reset(companySettings);\n    }\n  }, [companySettings, form]);\n\n  const updateSettingsMutation = useMutation({\n    mutationFn: async (data: CompanySettingsForm) => {\n      return apiRequest(\"/api/company-settings\", \"PUT\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Settings Updated\",\n        description: \"Your company settings have been successfully updated.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/company-settings\"] });\n      \n      // Log the update\n      apiRequest(\"/api/auth/audit\", \"POST\", {\n        action: \"update_company_settings\",\n        details: \"Company settings updated successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Update Failed\",\n        description: error.message || \"Failed to update company settings. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: CompanySettingsForm) => {\n    updateSettingsMutation.mutate(data);\n  };\n\n  const navigationItems = [\n    { id: \"basic\", label: \"Basic Information\", icon: Building2 },\n    { id: \"contact\", label: \"Contact Details\", icon: Phone },\n    { id: \"address\", label: \"Address Information\", icon: MapPin },\n    { id: \"business\", label: \"Business Details\", icon: CreditCard },\n  ];\n\n  if (isLoading) {\n    return (\n      <PageTransition>\n        <div className=\"p-6 space-y-6 max-w-6xl mx-auto\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded-md w-1/3 mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 rounded-md w-2/3 mb-8\"></div>\n            <div className=\"space-y-4\">\n              <div className=\"h-64 bg-gray-200 rounded-lg\"></div>\n            </div>\n          </div>\n        </div>\n      </PageTransition>\n    );\n  }\n\n  return (\n    <PageTransition>\n      <div className=\"p-6 space-y-6 max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              Company Settings\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">\n              Manage your company profile and business information\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <Shield className=\"w-4 h-4\" />\n            <span>All changes are audited</span>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n          {/* Navigation Sidebar */}\n          <Card className=\"lg:col-span-1 backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Settings</CardTitle>\n              <CardDescription>Configure your company details</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <nav className=\"space-y-2\">\n                {navigationItems.map((item) => {\n                  const IconComponent = item.icon;\n                  return (\n                    <button\n                      key={item.id}\n                      onClick={() => setActiveSection(item.id)}\n                      className={`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-colors ${\n                        activeSection === item.id\n                          ? \"bg-gradient-to-r from-emerald-500 to-blue-500 text-white\"\n                          : \"hover:bg-gray-100 dark:hover:bg-gray-800\"\n                      }`}\n                    >\n                      <IconComponent className=\"w-4 h-4\" />\n                      <span className=\"text-sm font-medium\">{item.label}</span>\n                    </button>\n                  );\n                })}\n              </nav>\n            </CardContent>\n          </Card>\n\n          {/* Settings Form */}\n          <Card className=\"lg:col-span-3 backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardContent className=\"p-6\">\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  {activeSection === \"basic\" && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"space-y-6\"\n                    >\n                      <div>\n                        <h3 className=\"text-lg font-semibold mb-4\">Basic Information</h3>\n                        <div className=\"space-y-4\">\n                          <FormField\n                            control={form.control}\n                            name=\"companyName\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Company Name</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"Enter company name\" {...field} />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"companyRegistration\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Company Registration Number</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"e.g., 2022/854581/07\" {...field} />\n                                </FormControl>\n                                <FormDescription>\n                                  Your official company registration number\n                                </FormDescription>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"vatNumber\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>VAT Registration Number</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"e.g., 4123456789\" {...field} />\n                                </FormControl>\n                                <FormDescription>\n                                  Your VAT registration number (if applicable)\n                                </FormDescription>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  {activeSection === \"contact\" && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"space-y-6\"\n                    >\n                      <div>\n                        <h3 className=\"text-lg font-semibold mb-4\">Contact Information</h3>\n                        <div className=\"space-y-4\">\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"contactEmail\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Primary Email</FormLabel>\n                                  <FormControl>\n                                    <Input type=\"email\" placeholder=\"info@company.com\" {...field} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"alternateEmail\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Alternate Email</FormLabel>\n                                  <FormControl>\n                                    <Input type=\"email\" placeholder=\"support@company.com\" {...field} />\n                                  </FormControl>\n                                  <FormDescription>Optional secondary email</FormDescription>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                          </div>\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"phone\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Primary Phone</FormLabel>\n                                  <FormControl>\n                                    <Input type=\"tel\" placeholder=\"+27 11 123 4567\" {...field} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"alternatePhone\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Alternate Phone</FormLabel>\n                                  <FormControl>\n                                    <Input type=\"tel\" placeholder=\"+27 11 987 6543\" {...field} />\n                                  </FormControl>\n                                  <FormDescription>Optional secondary phone</FormDescription>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  {activeSection === \"address\" && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"space-y-6\"\n                    >\n                      <div>\n                        <h3 className=\"text-lg font-semibold mb-4\">Address Information</h3>\n                        <div className=\"space-y-4\">\n                          <FormField\n                            control={form.control}\n                            name=\"address\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Physical Address</FormLabel>\n                                <FormControl>\n                                  <Textarea \n                                    placeholder=\"123 Industrial Street, Business Park\"\n                                    {...field} \n                                    rows={3}\n                                  />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"city\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>City</FormLabel>\n                                  <FormControl>\n                                    <Input placeholder=\"Johannesburg\" {...field} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"province\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Province</FormLabel>\n                                  <Select onValueChange={field.onChange} value={field.value}>\n                                    <FormControl>\n                                      <SelectTrigger>\n                                        <SelectValue placeholder=\"Select province\" />\n                                      </SelectTrigger>\n                                    </FormControl>\n                                    <SelectContent>\n                                      {southAfricanProvinces.map((province) => (\n                                        <SelectItem key={province} value={province}>\n                                          {province}\n                                        </SelectItem>\n                                      ))}\n                                    </SelectContent>\n                                  </Select>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                          </div>\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"postalCode\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Postal Code</FormLabel>\n                                  <FormControl>\n                                    <Input placeholder=\"2001\" {...field} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"country\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Country</FormLabel>\n                                  <FormControl>\n                                    <Input placeholder=\"South Africa\" {...field} readOnly />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  {activeSection === \"business\" && (\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className=\"space-y-6\"\n                    >\n                      <div>\n                        <h3 className=\"text-lg font-semibold mb-4\">Business Details</h3>\n                        <div className=\"space-y-4\">\n                          <FormField\n                            control={form.control}\n                            name=\"businessType\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Business Type</FormLabel>\n                                <Select onValueChange={field.onChange} value={field.value}>\n                                  <FormControl>\n                                    <SelectTrigger>\n                                      <SelectValue placeholder=\"Select business type\" />\n                                    </SelectTrigger>\n                                  </FormControl>\n                                  <SelectContent>\n                                    <SelectItem value=\"distributor\">Distributor</SelectItem>\n                                    <SelectItem value=\"retailer\">Retailer</SelectItem>\n                                    <SelectItem value=\"manufacturer\">Manufacturer</SelectItem>\n                                    <SelectItem value=\"other\">Other</SelectItem>\n                                  </SelectContent>\n                                </Select>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <FormField\n                              control={form.control}\n                              name=\"creditLimit\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Credit Limit (ZAR)</FormLabel>\n                                  <FormControl>\n                                    <Input placeholder=\"500000\" {...field} />\n                                  </FormControl>\n                                  <FormDescription>\n                                    Current approved credit limit\n                                  </FormDescription>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n\n                            <FormField\n                              control={form.control}\n                              name=\"paymentTerms\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Payment Terms</FormLabel>\n                                  <Select onValueChange={field.onChange} value={field.value}>\n                                    <FormControl>\n                                      <SelectTrigger>\n                                        <SelectValue placeholder=\"Select payment terms\" />\n                                      </SelectTrigger>\n                                    </FormControl>\n                                    <SelectContent>\n                                      <SelectItem value=\"cash\">Cash on Delivery</SelectItem>\n                                      <SelectItem value=\"30_days\">30 Days</SelectItem>\n                                      <SelectItem value=\"60_days\">60 Days</SelectItem>\n                                      <SelectItem value=\"90_days\">90 Days</SelectItem>\n                                    </SelectContent>\n                                  </Select>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n\n                  <Separator />\n\n                  <div className=\"flex justify-end\">\n                    <Button \n                      type=\"submit\" \n                      disabled={updateSettingsMutation.isPending}\n                      className=\"bg-gradient-to-r from-emerald-500 to-blue-500\"\n                    >\n                      <Save className=\"w-4 h-4 mr-2\" />\n                      {updateSettingsMutation.isPending ? \"Saving Changes...\" : \"Save Changes\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":23801},"client/src/pages/ExtendedAutomation.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Bot, \n  Settings, \n  Zap, \n  Clock, \n  AlertTriangle, \n  CheckCircle, \n  XCircle, \n  Play, \n  Pause, \n  BarChart3, \n  Cog, \n  Factory, \n  Calendar, \n  Wrench, \n  Target, \n  TrendingUp, \n  Shield, \n  Lightbulb,\n  Brain,\n  PlayCircle,\n  StopCircle,\n  Activity,\n  RefreshCw,\n  Plus,\n  Edit3,\n  Trash2,\n  Eye\n} from \"lucide-react\";\n\nexport default function ExtendedAutomation() {\n  const { toast } = useToast();\n  const [selectedRule, setSelectedRule] = useState<any>(null);\n  const [showCreateRule, setShowCreateRule] = useState(false);\n\n  // Fetch automation data\n  const { data: automationRules = [] } = useQuery({\n    queryKey: ['/api/automation-rules'],\n  });\n\n  const { data: automationEvents = [] } = useQuery({\n    queryKey: ['/api/automation-events'],\n  });\n\n  const { data: maintenanceSchedules = [] } = useQuery({\n    queryKey: ['/api/maintenance-schedules'],\n  });\n\n  // Mutations\n  const toggleRuleMutation = useMutation({\n    mutationFn: async (data: { id: string; isActive: boolean }) => {\n      return apiRequest(`/api/automation-rules/${data.id}`, {\n        method: 'PATCH',\n        body: { isActive: data.isActive }\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/automation-rules'] });\n      toast({ title: \"Rule updated successfully\" });\n    }\n  });\n\n  const executeRuleMutation = useMutation({\n    mutationFn: async (ruleId: string) => {\n      return apiRequest(`/api/automation-rules/${ruleId}/execute`, {\n        method: 'POST'\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/automation-events'] });\n      toast({ title: \"Automation rule executed successfully\" });\n    }\n  });\n\n  // Helper functions\n  const getRuleStatusColor = (isActive: boolean) => {\n    return isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800';\n  };\n\n  const getEventStatusColor = (status: string) => {\n    switch (status) {\n      case 'success': return 'bg-green-100 text-green-800';\n      case 'failed': return 'bg-red-100 text-red-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getPriorityColor = (priority: number) => {\n    switch (priority) {\n      case 1: return 'bg-red-100 text-red-800';\n      case 2: return 'bg-yellow-100 text-yellow-800';\n      case 3: return 'bg-green-100 text-green-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getPriorityText = (priority: number) => {\n    switch (priority) {\n      case 1: return 'High';\n      case 2: return 'Medium';\n      case 3: return 'Low';\n      default: return 'Unknown';\n    }\n  };\n\n  const formatExecutionTime = (ms: number) => {\n    if (ms < 1000) return `${ms}ms`;\n    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n    return `${(ms / 60000).toFixed(1)}m`;\n  };\n\n  // Calculate automation metrics\n  const totalRules = automationRules.length;\n  const activeRules = automationRules.filter((rule: any) => rule.isActive).length;\n  const recentEvents = automationEvents.filter((event: any) => \n    new Date(event.createdAt) > new Date(Date.now() - 24 * 60 * 60 * 1000)\n  ).length;\n  const successfulEvents = automationEvents.filter((event: any) => event.status === 'success').length;\n  const successRate = automationEvents.length > 0 ? (successfulEvents / automationEvents.length) * 100 : 0;\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold flex items-center\">\n            <Bot className=\"w-8 h-8 mr-3 text-purple-600\" />\n            Extended Automation\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            AI-powered automation for manufacturing, inventory, and production optimization\n          </p>\n        </div>\n        <div className=\"flex space-x-2\">\n          <Button onClick={() => setShowCreateRule(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Create Rule\n          </Button>\n          <Button variant=\"outline\">\n            <Settings className=\"w-4 h-4 mr-2\" />\n            Settings\n          </Button>\n        </div>\n      </div>\n\n      {/* Automation Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-gray-600\">Total Rules</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center space-x-2\">\n              <Settings className=\"w-5 h-5 text-blue-600\" />\n              <span className=\"text-2xl font-bold\">{totalRules}</span>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">{activeRules} active</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-gray-600\">Recent Events</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center space-x-2\">\n              <Activity className=\"w-5 h-5 text-green-600\" />\n              <span className=\"text-2xl font-bold\">{recentEvents}</span>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">Last 24 hours</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-gray-600\">Success Rate</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center space-x-2\">\n              <CheckCircle className=\"w-5 h-5 text-green-600\" />\n              <span className=\"text-2xl font-bold\">{successRate.toFixed(1)}%</span>\n            </div>\n            <Progress value={successRate} className=\"mt-2 h-2\" />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-gray-600\">ðŸŽ Fruitful Assist Status</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center space-x-2\">\n              <Brain className=\"w-5 h-5 text-purple-600\" />\n              <span className=\"text-sm font-semibold text-green-600\">ACTIVE</span>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">AI optimizing continuously</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Main Content Tabs */}\n      <Tabs defaultValue=\"rules\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"rules\">Automation Rules</TabsTrigger>\n          <TabsTrigger value=\"events\">Event History</TabsTrigger>\n          <TabsTrigger value=\"maintenance\">Maintenance</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n        </TabsList>\n\n        {/* Automation Rules Tab */}\n        <TabsContent value=\"rules\" className=\"space-y-6\">\n          <div className=\"grid gap-4\">\n            {automationRules.map((rule: any) => (\n              <Card key={rule.id} className=\"hover:shadow-md transition-shadow\">\n                <CardHeader className=\"pb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <CardTitle className=\"flex items-center\">\n                        <Zap className=\"w-5 h-5 mr-2 text-yellow-500\" />\n                        {rule.ruleName}\n                      </CardTitle>\n                      <p className=\"text-sm text-gray-600 mt-1\">{rule.category} automation</p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Badge className={getPriorityColor(rule.priority)}>\n                        {getPriorityText(rule.priority)}\n                      </Badge>\n                      <Badge className={getRuleStatusColor(rule.isActive)}>\n                        {rule.isActive ? 'Active' : 'Inactive'}\n                      </Badge>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Trigger Type</Label>\n                      <p className=\"font-medium\">{rule.triggerType}</p>\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Action Type</Label>\n                      <p className=\"font-medium\">{rule.actionType}</p>\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Success Rate</Label>\n                      <p className=\"font-medium\">{rule.successRate}%</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Executions</Label>\n                      <p className=\"font-medium\">{rule.executionCount} times</p>\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Last Triggered</Label>\n                      <p className=\"font-medium\">\n                        {rule.lastTriggered \n                          ? new Date(rule.lastTriggered).toLocaleString()\n                          : 'Never'\n                        }\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-between pt-4 border-t\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Switch \n                        checked={rule.isActive}\n                        onCheckedChange={(checked) => \n                          toggleRuleMutation.mutate({ id: rule.id, isActive: checked })\n                        }\n                        disabled={toggleRuleMutation.isPending}\n                      />\n                      <Label className=\"text-sm\">Active</Label>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => setSelectedRule(rule)}\n                      >\n                        <Eye className=\"w-4 h-4 mr-1\" />\n                        View\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => executeRuleMutation.mutate(rule.id)}\n                        disabled={!rule.isActive || executeRuleMutation.isPending}\n                      >\n                        <PlayCircle className=\"w-4 h-4 mr-1\" />\n                        Execute\n                      </Button>\n                      <Button variant=\"outline\" size=\"sm\">\n                        <Edit3 className=\"w-4 h-4 mr-1\" />\n                        Edit\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            \n            {automationRules.length === 0 && (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <Bot className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">No Automation Rules</h3>\n                  <p className=\"text-gray-600 mb-4\">Create your first automation rule to get started</p>\n                  <Button onClick={() => setShowCreateRule(true)}>\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Create First Rule\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </TabsContent>\n\n        {/* Event History Tab */}\n        <TabsContent value=\"events\" className=\"space-y-6\">\n          <div className=\"grid gap-4\">\n            {automationEvents.slice(0, 20).map((event: any) => (\n              <Card key={event.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className={`p-2 rounded-full ${getEventStatusColor(event.status)}`}>\n                        {event.status === 'success' && <CheckCircle className=\"w-4 h-4\" />}\n                        {event.status === 'failed' && <XCircle className=\"w-4 h-4\" />}\n                        {event.status === 'pending' && <Clock className=\"w-4 h-4\" />}\n                      </div>\n                      <div>\n                        <p className=\"font-medium\">{event.eventType}</p>\n                        <p className=\"text-sm text-gray-600\">\n                          Rule: {automationRules.find((r: any) => r.id === event.ruleId)?.ruleName || 'Unknown'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <Badge className={getEventStatusColor(event.status)}>\n                        {event.status}\n                      </Badge>\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        {new Date(event.createdAt).toLocaleString()}\n                      </p>\n                      {event.executionTime && (\n                        <p className=\"text-xs text-gray-500\">\n                          {formatExecutionTime(event.executionTime)}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            \n            {automationEvents.length === 0 && (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <Activity className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">No Events Yet</h3>\n                  <p className=\"text-gray-600\">Automation events will appear here once rules start executing</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </TabsContent>\n\n        {/* Maintenance Tab */}\n        <TabsContent value=\"maintenance\" className=\"space-y-6\">\n          <div className=\"grid gap-4\">\n            {maintenanceSchedules.map((schedule: any) => (\n              <Card key={schedule.id}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"flex items-center\">\n                      <Wrench className=\"w-5 h-5 mr-2 text-orange-500\" />\n                      {schedule.equipmentName}\n                    </CardTitle>\n                    <Badge className={\n                      schedule.status === 'completed' ? 'bg-green-100 text-green-800' :\n                      schedule.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :\n                      schedule.status === 'scheduled' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-gray-100 text-gray-800'\n                    }>\n                      {schedule.status.replace('_', ' ').toUpperCase()}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Type</Label>\n                      <p className=\"font-medium\">{schedule.maintenanceType}</p>\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Scheduled Date</Label>\n                      <p className=\"font-medium\">\n                        {new Date(schedule.scheduledDate).toLocaleDateString()}\n                      </p>\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-500\">Duration</Label>\n                      <p className=\"font-medium\">{schedule.estimatedDuration} min</p>\n                    </div>\n                  </div>\n                  \n                  {schedule.assignedTechnician && (\n                    <div className=\"mt-4\">\n                      <Label className=\"text-xs text-gray-500\">Assigned Technician</Label>\n                      <p className=\"font-medium\">{schedule.assignedTechnician}</p>\n                    </div>\n                  )}\n                  \n                  {schedule.notes && (\n                    <div className=\"mt-4\">\n                      <Label className=\"text-xs text-gray-500\">Notes</Label>\n                      <p className=\"text-sm\">{schedule.notes}</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n            \n            {maintenanceSchedules.length === 0 && (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <Calendar className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">No Scheduled Maintenance</h3>\n                  <p className=\"text-gray-600\">Maintenance schedules will appear here when created</p>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </TabsContent>\n\n        {/* Analytics Tab */}\n        <TabsContent value=\"analytics\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <BarChart3 className=\"w-5 h-5 mr-2 text-blue-600\" />\n                  Rule Performance\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {automationRules.slice(0, 5).map((rule: any) => (\n                    <div key={rule.id} className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"font-medium text-sm\">{rule.ruleName}</p>\n                        <p className=\"text-xs text-gray-500\">{rule.executionCount} executions</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium text-sm\">{rule.successRate}%</p>\n                        <Progress value={parseFloat(rule.successRate)} className=\"w-20 h-2\" />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <TrendingUp className=\"w-5 h-5 mr-2 text-green-600\" />\n                  Efficiency Gains\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Production Efficiency</span>\n                    <span className=\"font-semibold text-green-600\">+23%</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Cost Reduction</span>\n                    <span className=\"font-semibold text-green-600\">+18%</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Downtime Reduction</span>\n                    <span className=\"font-semibold text-green-600\">+31%</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Quality Improvement</span>\n                    <span className=\"font-semibold text-green-600\">+15%</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center\">\n                <Brain className=\"w-5 h-5 mr-2 text-purple-600\" />\n                ðŸŽ Fruitful Assist AI Insights\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n                  <Shield className=\"w-8 h-8 mx-auto text-purple-600 mb-2\" />\n                  <h3 className=\"font-semibold mb-1\">Risk Prevention</h3>\n                  <p className=\"text-sm text-gray-600\">15 potential issues prevented this week</p>\n                </div>\n                <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                  <Target className=\"w-8 h-8 mx-auto text-blue-600 mb-2\" />\n                  <h3 className=\"font-semibold mb-1\">Optimization</h3>\n                  <p className=\"text-sm text-gray-600\">8 process improvements suggested</p>\n                </div>\n                <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                  <Lightbulb className=\"w-8 h-8 mx-auto text-green-600 mb-2\" />\n                  <h3 className=\"font-semibold mb-1\">Innovation</h3>\n                  <p className=\"text-sm text-gray-600\">3 new automation opportunities identified</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}","size_bytes":22576},"client/src/pages/InventoryUpload.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { AnimatedCard, FadeIn } from \"@/components/AnimatedComponents\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Upload, FileText, Package, AlertCircle, Check, X } from \"lucide-react\";\n\ninterface InventoryItem {\n  id: string;\n  productId: string;\n  productName: string;\n  sku: string;\n  quantity: number;\n  location: string;\n  reorderPoint: number;\n  maxStock: number;\n  unitCost: number;\n  totalValue: number;\n  lastUpdated: string;\n  status: 'in_stock' | 'low_stock' | 'out_of_stock';\n}\n\ninterface UploadResult {\n  success: boolean;\n  processed: number;\n  errors: string[];\n  items: InventoryItem[];\n}\n\nexport default function InventoryUpload() {\n  const [isUploadOpen, setIsUploadOpen] = useState(false);\n  const [dragOver, setDragOver] = useState(false);\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const { toast } = useToast();\n\n  const { data: inventory = [], isLoading } = useQuery<InventoryItem[]>({\n    queryKey: [\"/api/inventory\"],\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: (formData: FormData) => \n      fetch(\"/api/inventory/upload\", {\n        method: \"POST\",\n        body: formData,\n      }).then(res => res.json()),\n    onSuccess: (result: UploadResult) => {\n      setUploadResult(result);\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      if (result.success) {\n        toast({\n          title: \"Upload Successful\",\n          description: `${result.processed} inventory items processed successfully.`,\n        });\n      } else {\n        toast({\n          title: \"Upload Completed with Errors\",\n          description: `${result.processed} items processed, ${result.errors.length} errors found.`,\n          variant: \"destructive\",\n        });\n      }\n    },\n  });\n\n  const bulkUpdateMutation = useMutation({\n    mutationFn: (updates: Partial<InventoryItem>[]) =>\n      apiRequest(\"/api/inventory/bulk-update\", \"POST\", { updates }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      toast({\n        title: \"Bulk Update Complete\",\n        description: \"Inventory has been updated successfully.\",\n      });\n    },\n  });\n\n  const handleFileUpload = (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n\n    const formData = new FormData();\n    Array.from(files).forEach((file) => {\n      formData.append(\"files\", file);\n    });\n\n    uploadMutation.mutate(formData);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n    handleFileUpload(e.dataTransfer.files);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'in_stock': return 'bg-green-100 text-green-800';\n      case 'low_stock': return 'bg-yellow-100 text-yellow-800';\n      case 'out_of_stock': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStockStatus = (quantity: number, reorderPoint: number) => {\n    if (quantity === 0) return 'out_of_stock';\n    if (quantity <= reorderPoint) return 'low_stock';\n    return 'in_stock';\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"p-8 space-y-8\">\n        <FadeIn>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Inventory Management</h1>\n              <p className=\"text-gray-600 mt-2\">Upload and manage your product inventory</p>\n            </div>\n            <Dialog open={isUploadOpen} onOpenChange={setIsUploadOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"bg-emerald-600 hover:bg-emerald-700\">\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Upload Inventory\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"sm:max-w-[600px]\">\n                <DialogHeader>\n                  <DialogTitle>Upload Inventory Data</DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-6\">\n                  <div\n                    className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                      dragOver\n                        ? 'border-emerald-500 bg-emerald-50'\n                        : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                    onDragOver={(e) => {\n                      e.preventDefault();\n                      setDragOver(true);\n                    }}\n                    onDragLeave={() => setDragOver(false)}\n                    onDrop={handleDrop}\n                  >\n                    <Upload className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                      Drop your files here\n                    </h3>\n                    <p className=\"text-gray-500 mb-4\">\n                      or click to select files (Excel, CSV supported)\n                    </p>\n                    <Input\n                      type=\"file\"\n                      multiple\n                      accept=\".xlsx,.xls,.csv\"\n                      onChange={(e) => handleFileUpload(e.target.files)}\n                      className=\"hidden\"\n                      id=\"file-upload\"\n                    />\n                    <Label\n                      htmlFor=\"file-upload\"\n                      className=\"cursor-pointer inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700\"\n                    >\n                      Select Files\n                    </Label>\n                  </div>\n\n                  {uploadMutation.isPending && (\n                    <div className=\"flex items-center justify-center py-4\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n                      <span className=\"ml-2 text-gray-600\">Processing files...</span>\n                    </div>\n                  )}\n\n                  {uploadResult && (\n                    <div className=\"space-y-4\">\n                      <div className={`p-4 rounded-lg ${\n                        uploadResult.success \n                          ? 'bg-green-50 border border-green-200' \n                          : 'bg-yellow-50 border border-yellow-200'\n                      }`}>\n                        <div className=\"flex items-center\">\n                          {uploadResult.success ? (\n                            <Check className=\"h-5 w-5 text-green-600 mr-2\" />\n                          ) : (\n                            <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-2\" />\n                          )}\n                          <span className=\"font-medium\">\n                            {uploadResult.processed} items processed\n                          </span>\n                        </div>\n                      </div>\n\n                      {uploadResult.errors.length > 0 && (\n                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                          <h4 className=\"font-medium text-red-800 mb-2\">Errors Found:</h4>\n                          <ul className=\"text-sm text-red-700 space-y-1\">\n                            {uploadResult.errors.map((error, index) => (\n                              <li key={index}>â€¢ {error}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-blue-800 mb-2\">File Format Requirements:</h4>\n                    <ul className=\"text-sm text-blue-700 space-y-1\">\n                      <li>â€¢ SKU (Product Code) - Required</li>\n                      <li>â€¢ Product Name - Required</li>\n                      <li>â€¢ Quantity - Required (numeric)</li>\n                      <li>â€¢ Location - Required</li>\n                      <li>â€¢ Reorder Point - Optional (numeric)</li>\n                      <li>â€¢ Unit Cost - Optional (numeric)</li>\n                    </ul>\n                  </div>\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </FadeIn>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n          <FadeIn delay={0.1}>\n            <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <Package className=\"h-8 w-8 text-emerald-600\" />\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Total Items</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">{inventory.length}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </AnimatedCard>\n          </FadeIn>\n\n          <FadeIn delay={0.2}>\n            <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                    <Check className=\"h-5 w-5 text-green-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">In Stock</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {inventory.filter(item => getStockStatus(item.quantity, item.reorderPoint) === 'in_stock').length}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </AnimatedCard>\n          </FadeIn>\n\n          <FadeIn delay={0.3}>\n            <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\n                    <AlertCircle className=\"h-5 w-5 text-yellow-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Low Stock</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {inventory.filter(item => getStockStatus(item.quantity, item.reorderPoint) === 'low_stock').length}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </AnimatedCard>\n          </FadeIn>\n\n          <FadeIn delay={0.4}>\n            <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center\">\n                    <X className=\"h-5 w-5 text-red-600\" />\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Out of Stock</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {inventory.filter(item => getStockStatus(item.quantity, item.reorderPoint) === 'out_of_stock').length}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </AnimatedCard>\n          </FadeIn>\n        </div>\n\n        <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Package className=\"h-5 w-5 mr-2 text-emerald-600\" />\n              Current Inventory\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {inventory.map((item, index) => {\n                  const status = getStockStatus(item.quantity, item.reorderPoint);\n                  return (\n                    <FadeIn key={item.id} delay={index * 0.05}>\n                      <div className=\"flex items-center justify-between p-4 rounded-lg border bg-white/50 hover:bg-white/80 transition-colors\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center\">\n                            <Package className=\"h-6 w-6 text-emerald-600\" />\n                          </div>\n                          <div>\n                            <h3 className=\"font-semibold text-gray-900\">{item.productName}</h3>\n                            <p className=\"text-sm text-gray-600\">SKU: {item.sku}</p>\n                            <p className=\"text-sm text-gray-600\">Location: {item.location}</p>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"text-right\">\n                            <p className=\"font-semibold text-lg text-gray-900\">{item.quantity}</p>\n                            <p className=\"text-xs text-gray-500\">Reorder: {item.reorderPoint}</p>\n                          </div>\n                          <Badge className={getStatusColor(status)}>\n                            {status.replace('_', ' ').toUpperCase()}\n                          </Badge>\n                        </div>\n                      </div>\n                    </FadeIn>\n                  );\n                })}\n                {inventory.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <Package className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No inventory items found</h3>\n                    <p className=\"text-gray-500\">Upload your first inventory file to get started.</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </AnimatedCard>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":15120},"client/src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Factory, Users, BarChart3, Zap, Shield, Globe } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-gray-900 dark:to-gray-800\">\n      {/* Header */}\n      <header className=\"border-b bg-white/80 backdrop-blur-sm dark:bg-gray-900/80\">\n        <div className=\"container mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-500 to-blue-600\">\n                <Factory className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">CornexConnect</h1>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">ðŸŽ Powered by Fruitful Assist AI</p>\n              </div>\n            </div>\n            <Button onClick={() => window.location.href = '/api/login'} size=\"lg\">\n              Sign In\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"container mx-auto px-6 py-16\">\n        <div className=\"text-center max-w-4xl mx-auto\">\n          <Badge variant=\"secondary\" className=\"mb-6\">\n            ðŸŽ AI-Powered Manufacturing Platform\n          </Badge>\n          <h1 className=\"text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6\">\n            Transform Your\n            <span className=\"bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\"> Manufacturing </span>\n            Operations\n          </h1>\n          <p className=\"text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto\">\n            Complete enterprise solution for Cornex brand manufacturing with AI-driven insights, \n            automated production scheduling, and global distribution management.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Button onClick={() => window.location.href = '/api/login'} size=\"lg\" className=\"text-lg px-8 py-3\">\n              Get Started\n            </Button>\n            <Button variant=\"outline\" size=\"lg\" className=\"text-lg px-8 py-3\">\n              Learn More\n            </Button>\n          </div>\n        </div>\n      </section>\n\n      {/* Features */}\n      <section className=\"container mx-auto px-6 py-16\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-4\">\n            Comprehensive Manufacturing Intelligence\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n            From production planning to global distribution, CornexConnect integrates every aspect \n            of your manufacturing operations.\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/20 flex items-center justify-center\">\n                  <BarChart3 className=\"h-6 w-6 text-emerald-600 dark:text-emerald-400\" />\n                </div>\n                <CardTitle>Business Intelligence</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                Real-time analytics, demand forecasting, and automated insights across all \n                product lines and regions.\n              </CardDescription>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center\">\n                  <Factory className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <CardTitle>Smart Production</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                AI-powered production scheduling, capacity planning, and automated optimization \n                for maximum efficiency.\n              </CardDescription>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/20 flex items-center justify-center\">\n                  <Users className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                </div>\n                <CardTitle>Sales Network</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                Manage 8500+ hardware stores, optimize sales rep routes, and track performance \n                across South Africa.\n              </CardDescription>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/20 flex items-center justify-center\">\n                  <Zap className=\"h-6 w-6 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <CardTitle>Automation Engine</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                Automated workflows, intelligent selling capabilities, and proactive \n                maintenance scheduling.\n              </CardDescription>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/20 flex items-center justify-center\">\n                  <Globe className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                </div>\n                <CardTitle>Global Distribution</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                Multi-currency support for 190+ currencies, regional management, and \n                scalable distribution networks.\n              </CardDescription>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/20 flex items-center justify-center\">\n                  <Shield className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\n                </div>\n                <CardTitle>Enterprise Security</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription>\n                Role-based access control, secure authentication, and comprehensive \n                audit trails for enterprise compliance.\n              </CardDescription>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"border-t bg-gray-50 dark:bg-gray-800\">\n        <div className=\"container mx-auto px-6 py-8\">\n          <div className=\"text-center text-gray-600 dark:text-gray-400\">\n            <p>Â© 2025 CornexConnect. Powered by ðŸŽ Fruitful Assist AI Technology.</p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}","size_bytes":7861},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { motion } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\nimport { LogIn, UserCheck } from \"lucide-react\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport default function Login() {\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const form = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: LoginForm) => {\n      return apiRequest(\"/api/auth/login\", \"POST\", data);\n    },\n    onSuccess: (data) => {\n      toast({\n        title: \"Welcome Back!\",\n        description: `Successfully signed in. Welcome to CornexConnect.`,\n      });\n      \n      // Invalidate auth query to refresh user state\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      \n      // Log successful login\n      apiRequest(\"/api/auth/audit\", \"POST\", {\n        action: \"login\",\n        details: \"Successful login to CornexConnect platform\",\n      });\n\n      // Redirect to dashboard\n      setLocation(\"/\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Sign In Failed\",\n        description: error.message || \"Invalid credentials. Please try again.\",\n        variant: \"destructive\",\n      });\n      \n      // Log failed login attempt\n      apiRequest(\"/api/auth/audit\", \"POST\", {\n        action: \"login_failed\",\n        details: `Failed login attempt for email: ${form.getValues(\"email\")}`,\n      });\n    },\n  });\n\n  const onSubmit = (data: LoginForm) => {\n    loginMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"w-full max-w-md\"\n      >\n        <Card className=\"backdrop-blur-sm bg-white/90 border-white/20\">\n          <CardHeader className=\"text-center\">\n            <div className=\"mx-auto w-16 h-16 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full flex items-center justify-center mb-4\">\n              <LogIn className=\"w-8 h-8 text-white\" />\n            </div>\n            <CardTitle className=\"text-2xl bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              Welcome Back\n            </CardTitle>\n            <CardDescription>\n              Sign in to your CornexConnect account\n            </CardDescription>\n          </CardHeader>\n\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email Address</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"email\" \n                          placeholder=\"Enter your email address\" \n                          {...field} \n                          disabled={loginMutation.isPending}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Password</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"password\" \n                          placeholder=\"Enter your password\" \n                          {...field} \n                          disabled={loginMutation.isPending}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"bg-emerald-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center mb-2\">\n                    <UserCheck className=\"w-5 h-5 text-emerald-600 mr-2\" />\n                    <span className=\"text-sm font-medium text-emerald-800\">Secure Authentication</span>\n                  </div>\n                  <p className=\"text-sm text-emerald-700\">\n                    All login activities are monitored and logged for security purposes.\n                  </p>\n                </div>\n\n                <Button \n                  type=\"submit\" \n                  disabled={loginMutation.isPending}\n                  className=\"w-full bg-gradient-to-r from-emerald-500 to-blue-500\"\n                >\n                  {loginMutation.isPending ? \"Signing In...\" : \"Sign In\"}\n                </Button>\n              </form>\n            </Form>\n\n            <div className=\"mt-6 space-y-4\">\n              <div className=\"text-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Don't have an account?{\" \"}\n                  <button \n                    onClick={() => setLocation(\"/register\")} \n                    className=\"text-emerald-600 hover:underline font-medium\"\n                  >\n                    Register here\n                  </button>\n                </p>\n              </div>\n\n              <div className=\"text-center\">\n                <button \n                  onClick={() => setLocation(\"/\")} \n                  className=\"text-sm text-muted-foreground hover:text-emerald-600 transition-colors\"\n                >\n                  Return to Home\n                </button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n    </div>\n  );\n}","size_bytes":6703},"client/src/pages/LogisticsIntegration.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { motion } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  Truck, Package, MapPin, Clock, Shield, CheckCircle, AlertCircle,\n  Building2, Route, Warehouse, FileText\n} from \"lucide-react\";\nimport { formatCurrency } from \"@/lib/currency\";\n\ninterface LogisticsPartner {\n  id: string;\n  name: string;\n  type: 'freight' | 'packaging' | 'courier' | 'warehousing';\n  logo: string;\n  coverage: string[];\n  services: string[];\n  pricing: {\n    base: number;\n    perKm: number;\n    currency: string;\n  };\n  reliability: number;\n  integration: 'active' | 'testing' | 'planned';\n  contactInfo: {\n    phone: string;\n    email: string;\n    website: string;\n  };\n}\n\ninterface LogisticsBrand {\n  id: string;\n  name: string;\n  purpose: string;\n  icon: string;\n  partners: string[];\n  status: 'operational' | 'development' | 'planning';\n  capabilities: string[];\n  metrics: {\n    volume: string;\n    efficiency: number;\n    coverage: string;\n  };\n}\n\nexport default function LogisticsIntegration() {\n  const { data: partners } = useQuery<LogisticsPartner[]>({\n    queryKey: [\"/api/logistics-partners\"],\n  });\n\n  const { data: brands } = useQuery<LogisticsBrand[]>({\n    queryKey: [\"/api/logistics-brands\"],\n  });\n\n  // Strategic South African partners based on research\n  const strategicPartners: LogisticsPartner[] = [\n    {\n      id: \"unitrans-africa\",\n      name: \"Unitrans Africa\",\n      type: \"freight\",\n      logo: \"ðŸš›\",\n      coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\", \"Free State\", \"Eastern Cape\"],\n      services: [\"Heavy Freight\", \"Supply Chain\", \"Warehousing\", \"Cross-border\"],\n      pricing: { base: 150, perKm: 12.50, currency: \"ZAR\" },\n      reliability: 94,\n      integration: \"active\",\n      contactInfo: {\n        phone: \"+27 11 451 1700\",\n        email: \"info@unitransafrica.com\",\n        website: \"https://unitransafrica.com\"\n      }\n    },\n    {\n      id: \"imperial-logistics\",\n      name: \"Imperial Logistics (DP World)\",\n      type: \"freight\",\n      logo: \"ðŸŒ\",\n      coverage: [\"National Coverage\", \"SADC Region\", \"Global Network\"],\n      services: [\"End-to-end Logistics\", \"Distribution\", \"Supply Chain Solutions\"],\n      pricing: { base: 200, perKm: 15.75, currency: \"ZAR\" },\n      reliability: 96,\n      integration: \"testing\",\n      contactInfo: {\n        phone: \"+27 11 739 4000\",\n        email: \"logistics@imperial.co.za\",\n        website: \"https://imperiallogistics.com\"\n      }\n    },\n    {\n      id: \"postnet-aramex\",\n      name: \"PostNet (Aramex Network)\",\n      type: \"courier\",\n      logo: \"ðŸ“®\",\n      coverage: [\"496 Locations\", \"National Network\", \"50km Radius Major Centers\"],\n      services: [\"Same-day Delivery\", \"PostNet2PostNet\", \"International Express\"],\n      pricing: { base: 89.99, perKm: 2.50, currency: \"ZAR\" },\n      reliability: 91,\n      integration: \"active\",\n      contactInfo: {\n        phone: \"0860 767 8638\",\n        email: \"support@postnet.co.za\",\n        website: \"https://postnet.co.za\"\n      }\n    },\n    {\n      id: \"shaft-packaging\",\n      name: \"Shaft Packaging\",\n      type: \"packaging\",\n      logo: \"ðŸ“¦\",\n      coverage: [\"Gauteng\", \"Western Cape\", \"KwaZulu-Natal\"],\n      services: [\"Packaging Solutions\", \"Custom Design\", \"Nationwide Delivery\"],\n      pricing: { base: 75, perKm: 1.25, currency: \"ZAR\" },\n      reliability: 89,\n      integration: \"planned\",\n      contactInfo: {\n        phone: \"+27 11 608 1221\",\n        email: \"info@shaftpackaging.co.za\",\n        website: \"https://shaftpackaging.co.za\"\n      }\n    },\n    {\n      id: \"polyoak-packaging\",\n      name: \"Polyoak Packaging\",\n      type: \"packaging\",\n      logo: \"ðŸ­\",\n      coverage: [\"40+ Manufacturing Plants\", \"Southern Africa\", \"Multi-location\"],\n      services: [\"Rigid Plastic Packaging\", \"Food & Beverage\", \"Industrial\"],\n      pricing: { base: 125, perKm: 3.75, currency: \"ZAR\" },\n      reliability: 93,\n      integration: \"testing\",\n      contactInfo: {\n        phone: \"+27 21 951 8000\",\n        email: \"info@polyoakpackaging.co.za\",\n        website: \"https://polyoakpackaging.co.za\"\n      }\n    }\n  ];\n\n  // Realistic logistics brands for CornexConnect integration\n  const cornexLogisticsBrands: LogisticsBrand[] = [\n    {\n      id: \"routemesh-sa\",\n      name: \"RouteMeshâ„¢ SA\",\n      purpose: \"Route Optimization for Hardware Store Distribution\",\n      icon: \"ðŸ—ºï¸\",\n      partners: [\"unitrans-africa\", \"imperial-logistics\"],\n      status: \"operational\",\n      capabilities: [\n        \"8500+ Hardware Store Network\",\n        \"AI-Powered Route Planning\",\n        \"Real-time Traffic Integration\",\n        \"Multi-stop Optimization\"\n      ],\n      metrics: {\n        volume: \"12,500 deliveries/month\",\n        efficiency: 87,\n        coverage: \"9 Provinces\"\n      }\n    },\n    {\n      id: \"cratelogic-connect\",\n      name: \"CrateLogicâ„¢ Connect\",\n      purpose: \"Smart Container Management for EPS/BR XPS Products\",\n      icon: \"ðŸ“¦\",\n      partners: [\"shaft-packaging\", \"polyoak-packaging\"],\n      status: \"development\",\n      capabilities: [\n        \"Temperature-Controlled Containers\",\n        \"IoT Tracking Integration\",\n        \"Custom Packaging Design\",\n        \"Inventory Auto-reorder\"\n      ],\n      metrics: {\n        volume: \"31 SKUs managed\",\n        efficiency: 92,\n        coverage: \"Major Distribution Centers\"\n      }\n    },\n    {\n      id: \"deliveryx-network\",\n      name: \"DeliveryXâ„¢ Network\",\n      purpose: \"Last-Mile Delivery for Construction Materials\",\n      icon: \"ðŸš€\",\n      partners: [\"postnet-aramex\"],\n      status: \"development\",\n      capabilities: [\n        \"Same-day Construction Delivery\",\n        \"Heavy Materials Handling\",\n        \"Site-specific Delivery\",\n        \"Installation Scheduling\"\n      ],\n      metrics: {\n        volume: \"2,800 deliveries/month\",\n        efficiency: 78,\n        coverage: \"Metropolitan Areas\"\n      }\n    },\n    {\n      id: \"labelflow-pro\",\n      name: \"LabelFlowâ„¢ Pro\",\n      purpose: \"Automated Product Labeling & Compliance\",\n      icon: \"ðŸ·ï¸\",\n      partners: [\"shaft-packaging\"],\n      status: \"planning\",\n      capabilities: [\n        \"Automated Label Generation\",\n        \"SABS Compliance Tracking\",\n        \"Multi-language Support\",\n        \"QR Code Integration\"\n      ],\n      metrics: {\n        volume: \"50,000 labels/day\",\n        efficiency: 95,\n        coverage: \"All Product Lines\"\n      }\n    }\n  ];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'operational':\n      case 'active':\n        return 'bg-green-100 text-green-800';\n      case 'development':\n      case 'testing':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'planning':\n      case 'planned':\n        return 'bg-blue-100 text-blue-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getIntegrationIcon = (integration: string) => {\n    switch (integration) {\n      case 'active':\n        return <CheckCircle className=\"w-4 h-4 text-green-600\" />;\n      case 'testing':\n        return <Clock className=\"w-4 h-4 text-yellow-600\" />;\n      case 'planned':\n        return <AlertCircle className=\"w-4 h-4 text-blue-600\" />;\n      default:\n        return <AlertCircle className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-gray-900 dark:to-gray-800\">\n      <div className=\"space-y-8 p-8\">\n        {/* Page Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"bg-white/80 backdrop-blur-sm border border-white/20 rounded-2xl shadow-xl px-8 py-6\"\n        >\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"flex items-center space-x-3 mb-2\">\n                <motion.div\n                  whileHover={{ scale: 1.1, rotate: 15 }}\n                  className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-500 to-blue-600\"\n                >\n                  <Truck className=\"h-6 w-6 text-white\" />\n                </motion.div>\n                <h2 className=\"text-2xl font-bold text-gray-900\">South African Logistics Integration</h2>\n              </div>\n              <p className=\"text-gray-600 mt-1 ml-13\">ðŸŽ Real partnerships with major SA freight, packaging & courier companies</p>\n            </div>\n            <Button className=\"bg-gradient-to-r from-emerald-500 to-blue-600 hover:from-emerald-600 hover:to-blue-700 text-white shadow-lg\">\n              <Shield className=\"w-4 h-4 mr-2\" />\n              Activate Integration\n            </Button>\n          </div>\n        </motion.div>\n\n        {/* Strategic Partners Grid */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.6, delay: 0.2 }}\n        >\n          <h3 className=\"text-xl font-bold text-gray-900 mb-6\">Strategic South African Partners</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {strategicPartners.map((partner, index) => (\n              <motion.div\n                key={partner.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5, delay: 0.1 * index }}\n              >\n                <Card className=\"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-300 h-full\">\n                  <CardHeader className=\"pb-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"text-2xl\">{partner.logo}</span>\n                        <div>\n                          <CardTitle className=\"text-lg\">{partner.name}</CardTitle>\n                          <Badge variant=\"secondary\" className=\"mt-1 capitalize\">\n                            {partner.type}\n                          </Badge>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        {getIntegrationIcon(partner.integration)}\n                        <Badge className={getStatusColor(partner.integration)}>\n                          {partner.integration}\n                        </Badge>\n                      </div>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div>\n                      <h4 className=\"font-semibold text-sm text-gray-700 mb-2\">Coverage</h4>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {partner.coverage.slice(0, 3).map((area) => (\n                          <Badge key={area} variant=\"outline\" className=\"text-xs\">\n                            {area}\n                          </Badge>\n                        ))}\n                        {partner.coverage.length > 3 && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            +{partner.coverage.length - 3} more\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-semibold text-sm text-gray-700 mb-2\">Services</h4>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {partner.services.slice(0, 2).map((service) => (\n                          <Badge key={service} variant=\"outline\" className=\"text-xs\">\n                            {service}\n                          </Badge>\n                        ))}\n                        {partner.services.length > 2 && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            +{partner.services.length - 2} more\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-gray-600\">Base Rate</p>\n                        <p className=\"font-semibold\">{formatCurrency(partner.pricing.base, partner.pricing.currency)}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-600\">Reliability</p>\n                        <p className=\"font-semibold text-green-600\">{partner.reliability}%</p>\n                      </div>\n                    </div>\n\n                    <div className=\"pt-2\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        className=\"w-full\"\n                        onClick={() => window.open(partner.contactInfo.website, '_blank')}\n                      >\n                        <Building2 className=\"w-4 h-4 mr-2\" />\n                        Contact Partner\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        </motion.div>\n\n        {/* CornexConnect Logistics Brands */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.6, delay: 0.4 }}\n        >\n          <h3 className=\"text-xl font-bold text-gray-900 mb-6\">CornexConnect Logistics Solutions</h3>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {cornexLogisticsBrands.map((brand, index) => (\n              <motion.div\n                key={brand.id}\n                initial={{ opacity: 0, x: index % 2 === 0 ? -20 : 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.5, delay: 0.1 * index }}\n              >\n                <Card className=\"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl h-full\">\n                  <CardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"text-2xl\">{brand.icon}</span>\n                        <div>\n                          <CardTitle className=\"text-lg\">{brand.name}</CardTitle>\n                          <p className=\"text-sm text-gray-600\">{brand.purpose}</p>\n                        </div>\n                      </div>\n                      <Badge className={getStatusColor(brand.status)}>\n                        {brand.status}\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div>\n                      <h4 className=\"font-semibold text-sm text-gray-700 mb-2\">Capabilities</h4>\n                      <div className=\"space-y-1\">\n                        {brand.capabilities.map((capability) => (\n                          <div key={capability} className=\"flex items-center space-x-2\">\n                            <CheckCircle className=\"w-3 h-3 text-green-600\" />\n                            <span className=\"text-xs text-gray-600\">{capability}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-3 pt-2\">\n                      <div className=\"text-center\">\n                        <p className=\"text-xs text-gray-600\">Volume</p>\n                        <p className=\"font-semibold text-sm\">{brand.metrics.volume}</p>\n                      </div>\n                      <div className=\"text-center\">\n                        <p className=\"text-xs text-gray-600\">Efficiency</p>\n                        <p className=\"font-semibold text-sm text-green-600\">{brand.metrics.efficiency}%</p>\n                      </div>\n                      <div className=\"text-center\">\n                        <p className=\"text-xs text-gray-600\">Coverage</p>\n                        <p className=\"font-semibold text-sm\">{brand.metrics.coverage}</p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"font-semibold text-sm text-gray-700 mb-2\">Active Partners</h4>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {brand.partners.map((partnerId) => {\n                          const partner = strategicPartners.find(p => p.id === partnerId);\n                          return partner ? (\n                            <Badge key={partnerId} variant=\"outline\" className=\"text-xs\">\n                              {partner.logo} {partner.name.split(' ')[0]}\n                            </Badge>\n                          ) : null;\n                        })}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        </motion.div>\n\n        {/* Integration Metrics */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.6, delay: 0.6 }}\n          className=\"bg-white/80 backdrop-blur-sm border border-white/20 rounded-2xl shadow-xl p-6\"\n        >\n          <h3 className=\"text-xl font-bold text-gray-900 mb-6\">Integration Performance</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-green-600\">5</div>\n              <div className=\"text-sm text-gray-600\">Active Partners</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-blue-600\">4</div>\n              <div className=\"text-sm text-gray-600\">Logistics Brands</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-purple-600\">92%</div>\n              <div className=\"text-sm text-gray-600\">Avg Reliability</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-bold text-orange-600\">8.5K</div>\n              <div className=\"text-sm text-gray-600\">Store Coverage</div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}","size_bytes":18657},"client/src/pages/MobileFieldApp.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { \n  MapPin, \n  Navigation, \n  Clock,\n  CheckCircle,\n  Camera,\n  Phone,\n  MessageSquare,\n  Wifi,\n  WifiOff,\n  Battery,\n  Signal,\n  Upload,\n  Download,\n  Sync,\n  AlertTriangle\n} from \"lucide-react\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface StoreVisit {\n  id?: string;\n  storeId: string;\n  storeName: string;\n  address: string;\n  contactPerson?: string;\n  phone?: string;\n  visitType: 'scheduled' | 'unscheduled' | 'follow_up';\n  scheduledTime?: string;\n  actualArrival?: string;\n  actualDeparture?: string;\n  visitDuration?: number;\n  outcome: 'successful' | 'no_contact' | 'rescheduled' | 'cancelled';\n  orderPlaced: boolean;\n  orderValue?: number;\n  storeCondition?: string;\n  stockLevel?: string;\n  competitorActivity?: string;\n  notes?: string;\n  photos?: string[];\n  followUpRequired: boolean;\n  followUpDate?: string;\n  status: 'pending' | 'in_progress' | 'completed';\n}\n\nexport default function MobileFieldApp() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [currentVisit, setCurrentVisit] = useState<StoreVisit | null>(null);\n  const [showVisitForm, setShowVisitForm] = useState(false);\n  const [visitNotes, setVisitNotes] = useState(\"\");\n  const [orderValue, setOrderValue] = useState(\"\");\n  const [syncQueue, setSyncQueue] = useState<any[]>([]);\n\n  // Online/offline detection\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    \n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    \n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Current location and route\n  const { data: currentRoute } = useQuery({\n    queryKey: [\"/api/route-plans/current\"],\n    enabled: isOnline,\n  });\n\n  const { data: todayVisits = [] } = useQuery({\n    queryKey: [\"/api/store-visits/today\"],\n    enabled: isOnline,\n  });\n\n  // Offline sync queue\n  const syncMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/store-visits/sync\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n      });\n    },\n    onSuccess: () => {\n      setSyncQueue([]);\n      queryClient.invalidateQueries({ queryKey: [\"/api/store-visits\"] });\n      toast({ title: \"Data synced successfully\" });\n    },\n  });\n\n  // Visit management\n  const createVisitMutation = useMutation({\n    mutationFn: async (visitData: StoreVisit) => {\n      if (!isOnline) {\n        // Add to offline queue\n        setSyncQueue(prev => [...prev, visitData]);\n        return visitData;\n      }\n      return await apiRequest(\"/api/store-visits\", {\n        method: \"POST\",\n        body: JSON.stringify(visitData),\n      });\n    },\n    onSuccess: () => {\n      toast({ title: \"Visit recorded successfully\" });\n      setShowVisitForm(false);\n      setCurrentVisit(null);\n    },\n  });\n\n  const startVisit = (store: any) => {\n    const visit: StoreVisit = {\n      storeId: store.id,\n      storeName: store.storeName,\n      address: store.address,\n      contactPerson: store.contactPerson,\n      phone: store.phone,\n      visitType: 'scheduled',\n      actualArrival: new Date().toISOString(),\n      outcome: 'successful',\n      orderPlaced: false,\n      followUpRequired: false,\n      status: 'in_progress'\n    };\n    setCurrentVisit(visit);\n    setShowVisitForm(true);\n  };\n\n  const completeVisit = () => {\n    if (!currentVisit) return;\n\n    const completedVisit: StoreVisit = {\n      ...currentVisit,\n      actualDeparture: new Date().toISOString(),\n      visitDuration: currentVisit.actualArrival \n        ? Math.floor((new Date().getTime() - new Date(currentVisit.actualArrival).getTime()) / 60000)\n        : 0,\n      notes: visitNotes,\n      orderValue: orderValue ? parseFloat(orderValue) : undefined,\n      status: 'completed'\n    };\n\n    createVisitMutation.mutate(completedVisit);\n  };\n\n  const getCurrentTime = () => {\n    return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('en-ZA', {\n      style: 'currency',\n      currency: 'ZAR',\n      minimumFractionDigits: 0,\n    }).format(value);\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-gray-900 dark:to-gray-800\">\n        {/* Mobile Header */}\n        <div className=\"bg-white dark:bg-gray-800 shadow-sm p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">Field App</h1>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">{getCurrentTime()}</p>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {/* Connection Status */}\n              <div className=\"flex items-center gap-1\">\n                {isOnline ? (\n                  <Wifi className=\"w-4 h-4 text-green-500\" />\n                ) : (\n                  <WifiOff className=\"w-4 h-4 text-red-500\" />\n                )}\n                <Signal className=\"w-4 h-4 text-gray-500\" />\n                <Battery className=\"w-4 h-4 text-gray-500\" />\n              </div>\n              \n              {/* Sync Status */}\n              {syncQueue.length > 0 && (\n                <Button \n                  size=\"sm\" \n                  variant=\"outline\"\n                  onClick={() => syncMutation.mutate(syncQueue)}\n                  disabled={!isOnline}\n                >\n                  <Sync className=\"w-4 h-4 mr-1\" />\n                  {syncQueue.length}\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-4 space-y-4\">\n          {/* Offline Alert */}\n          {!isOnline && (\n            <Card className=\"border-orange-200 bg-orange-50 dark:bg-orange-900/20\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertTriangle className=\"w-4 h-4 text-orange-500\" />\n                  <span className=\"text-sm text-orange-700 dark:text-orange-300\">\n                    You're offline. Data will sync when connection is restored.\n                  </span>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Current Route Summary */}\n          {currentRoute && (\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg\">Today's Route</CardTitle>\n                <CardDescription>{currentRoute.planName}</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-3 gap-4 text-center\">\n                  <div>\n                    <div className=\"text-lg font-bold text-blue-600\">\n                      {currentRoute.stores?.length || 0}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">Total Stores</div>\n                  </div>\n                  <div>\n                    <div className=\"text-lg font-bold text-green-600\">\n                      {todayVisits.filter((v: any) => v.status === 'completed').length}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">Completed</div>\n                  </div>\n                  <div>\n                    <div className=\"text-lg font-bold text-purple-600\">\n                      {currentRoute.estimatedDuration \n                        ? Math.floor(currentRoute.estimatedDuration / 60) + 'h'\n                        : '0h'}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">Est. Time</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Store List */}\n          <div className=\"space-y-3\">\n            <h2 className=\"text-lg font-semibold\">Today's Visits</h2>\n            \n            {currentRoute?.stores?.map((store: any, index: number) => {\n              const visit = todayVisits.find((v: any) => v.storeId === store.id);\n              const isCompleted = visit?.status === 'completed';\n              const isInProgress = currentVisit?.storeId === store.id;\n\n              return (\n                <Card key={store.id} className={`${isCompleted ? 'bg-green-50 dark:bg-green-900/20' : ''}`}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <div className=\"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-xs font-medium\">\n                            {index + 1}\n                          </div>\n                          <h3 className=\"font-medium\">{store.storeName}</h3>\n                          {isCompleted && <CheckCircle className=\"w-4 h-4 text-green-500\" />}\n                        </div>\n                        \n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                          {store.address}\n                        </p>\n                        \n                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                          {store.contactPerson && (\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"w-3 h-3\" />\n                              <span>{store.contactPerson}</span>\n                            </div>\n                          )}\n                          {store.phone && (\n                            <div className=\"flex items-center gap-1\">\n                              <Phone className=\"w-3 h-3\" />\n                              <span>{store.phone}</span>\n                            </div>\n                          )}\n                        </div>\n                        \n                        {visit?.notes && (\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded\">\n                            {visit.notes}\n                          </p>\n                        )}\n                      </div>\n                      \n                      <div className=\"flex flex-col gap-2 ml-4\">\n                        {!isCompleted && !isInProgress && (\n                          <Button \n                            size=\"sm\"\n                            onClick={() => startVisit(store)}\n                          >\n                            Start Visit\n                          </Button>\n                        )}\n                        \n                        {isInProgress && (\n                          <Badge variant=\"secondary\">In Progress</Badge>\n                        )}\n                        \n                        {isCompleted && visit?.orderValue && (\n                          <Badge variant=\"outline\" className=\"text-green-600\">\n                            {formatCurrency(visit.orderValue)}\n                          </Badge>\n                        )}\n                        \n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\"\n                          onClick={() => {\n                            // Open maps navigation\n                            const address = encodeURIComponent(store.address);\n                            window.open(`https://maps.google.com/?q=${address}`, '_blank');\n                          }}\n                        >\n                          <Navigation className=\"w-3 h-3 mr-1\" />\n                          Navigate\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Visit Form Modal */}\n        <Dialog open={showVisitForm} onOpenChange={setShowVisitForm}>\n          <DialogContent className=\"max-w-md mx-4\">\n            <DialogHeader>\n              <DialogTitle>Visit: {currentVisit?.storeName}</DialogTitle>\n              <DialogDescription>\n                Record your visit details and any orders placed\n              </DialogDescription>\n            </DialogHeader>\n            \n            <div className=\"space-y-4\">\n              {/* Visit Outcome */}\n              <div>\n                <label className=\"text-sm font-medium\">Visit Outcome</label>\n                <Select \n                  value={currentVisit?.outcome}\n                  onValueChange={(value) => setCurrentVisit(prev => prev ? {...prev, outcome: value as any} : null)}\n                >\n                  <SelectTrigger className=\"mt-1\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"successful\">Successful</SelectItem>\n                    <SelectItem value=\"no_contact\">No Contact</SelectItem>\n                    <SelectItem value=\"rescheduled\">Rescheduled</SelectItem>\n                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Order Information */}\n              <div className=\"flex items-center gap-2\">\n                <input \n                  type=\"checkbox\"\n                  checked={currentVisit?.orderPlaced || false}\n                  onChange={(e) => setCurrentVisit(prev => prev ? {...prev, orderPlaced: e.target.checked} : null)}\n                />\n                <label className=\"text-sm font-medium\">Order Placed</label>\n              </div>\n\n              {currentVisit?.orderPlaced && (\n                <div>\n                  <label className=\"text-sm font-medium\">Order Value (ZAR)</label>\n                  <Input \n                    type=\"number\"\n                    value={orderValue}\n                    onChange={(e) => setOrderValue(e.target.value)}\n                    placeholder=\"Enter order value\"\n                    className=\"mt-1\"\n                  />\n                </div>\n              )}\n\n              {/* Store Condition */}\n              <div>\n                <label className=\"text-sm font-medium\">Store Condition</label>\n                <Select \n                  value={currentVisit?.storeCondition}\n                  onValueChange={(value) => setCurrentVisit(prev => prev ? {...prev, storeCondition: value} : null)}\n                >\n                  <SelectTrigger className=\"mt-1\">\n                    <SelectValue placeholder=\"Select condition\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"excellent\">Excellent</SelectItem>\n                    <SelectItem value=\"good\">Good</SelectItem>\n                    <SelectItem value=\"fair\">Fair</SelectItem>\n                    <SelectItem value=\"poor\">Poor</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Stock Level */}\n              <div>\n                <label className=\"text-sm font-medium\">Stock Level</label>\n                <Select \n                  value={currentVisit?.stockLevel}\n                  onValueChange={(value) => setCurrentVisit(prev => prev ? {...prev, stockLevel: value} : null)}\n                >\n                  <SelectTrigger className=\"mt-1\">\n                    <SelectValue placeholder=\"Select stock level\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"overstocked\">Overstocked</SelectItem>\n                    <SelectItem value=\"well_stocked\">Well Stocked</SelectItem>\n                    <SelectItem value=\"low_stock\">Low Stock</SelectItem>\n                    <SelectItem value=\"out_of_stock\">Out of Stock</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Notes */}\n              <div>\n                <label className=\"text-sm font-medium\">Visit Notes</label>\n                <Textarea \n                  value={visitNotes}\n                  onChange={(e) => setVisitNotes(e.target.value)}\n                  placeholder=\"Enter any additional notes...\"\n                  className=\"mt-1\"\n                  rows={3}\n                />\n              </div>\n\n              {/* Follow-up Required */}\n              <div className=\"flex items-center gap-2\">\n                <input \n                  type=\"checkbox\"\n                  checked={currentVisit?.followUpRequired || false}\n                  onChange={(e) => setCurrentVisit(prev => prev ? {...prev, followUpRequired: e.target.checked} : null)}\n                />\n                <label className=\"text-sm font-medium\">Follow-up Required</label>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex gap-2 pt-4\">\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowVisitForm(false)}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n                <Button \n                  onClick={completeVisit}\n                  disabled={createVisitMutation.isPending}\n                  className=\"flex-1\"\n                >\n                  {createVisitMutation.isPending ? \"Saving...\" : \"Complete Visit\"}\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":18542},"client/src/pages/Profile.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { User, Mail, Building2, CreditCard, Shield } from \"lucide-react\";\n\nexport default function Profile() {\n  const { user } = useAuth();\n\n  return (\n    <PageTransition>\n      <div className=\"p-6 space-y-6 max-w-4xl mx-auto\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n            ðŸ‘¤ User Profile\n          </h1>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* User Information */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <User className=\"w-5 h-5\" />\n                Profile Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center space-x-4\">\n                <Avatar className=\"h-16 w-16\">\n                  <AvatarImage src={user?.profileImageUrl || \"\"} />\n                  <AvatarFallback className=\"bg-gradient-to-r from-emerald-500 to-blue-500 text-white text-lg\">\n                    {user?.firstName?.[0]}{user?.lastName?.[0]}\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <h3 className=\"text-xl font-semibold\">\n                    {user?.firstName} {user?.lastName}\n                  </h3>\n                  <p className=\"text-muted-foreground\">{user?.email}</p>\n                  <Badge className=\"mt-1\">Team Member</Badge>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Company Information */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Building2 className=\"w-5 h-5\" />\n                Company Details\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Company Name</p>\n                <p className=\"text-lg font-bold\">HOMEMART AFRICA</p>\n              </div>\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Registration Number</p>\n                <p>2022/854581/07</p>\n              </div>\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">Credit Limit</p>\n                <p className=\"text-lg font-bold text-green-600\">R500,000</p>\n              </div>\n              <Badge variant=\"outline\" className=\"bg-emerald-100 text-emerald-700\">\n                Enterprise Evaluation\n              </Badge>\n            </CardContent>\n          </Card>\n\n          {/* Account Status */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Shield className=\"w-5 h-5\" />\n                Account Status\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span>Account Status</span>\n                <Badge className=\"bg-green-100 text-green-700\">Active</Badge>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span>Access Level</span>\n                <Badge variant=\"outline\">Admin</Badge>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span>Last Login</span>\n                <span className=\"text-sm text-muted-foreground\">\n                  {new Date().toLocaleDateString()}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Quick Actions */}\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader>\n              <CardTitle>Quick Actions</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <Button \n                className=\"w-full justify-start\" \n                variant=\"outline\"\n                onClick={() => window.location.href = '/company-settings'}\n              >\n                <Building2 className=\"w-4 h-4 mr-2\" />\n                Company Settings\n              </Button>\n              <Button \n                className=\"w-full justify-start\" \n                variant=\"outline\"\n                onClick={() => window.location.href = '/audit-trail'}\n              >\n                <Shield className=\"w-4 h-4 mr-2\" />\n                Audit Trail\n              </Button>\n              <Button \n                className=\"w-full justify-start\" \n                variant=\"outline\"\n                onClick={() => window.location.href = '/user-management'}\n              >\n                <User className=\"w-4 h-4 mr-2\" />\n                User Management\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":5604},"client/src/pages/PurchaseOrders.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel } from \"@/components/ui/form\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Plus, Search, Filter, Eye, Package, Clock, AlertCircle, CheckCircle, XCircle } from \"lucide-react\";\nimport { insertPurchaseOrderSchema, type PurchaseOrder, type Product } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nconst purchaseOrderFormSchema = insertPurchaseOrderSchema.extend({\n  items: z.array(z.object({\n    productId: z.string(),\n    quantity: z.number().min(1),\n    unitPrice: z.number().min(0),\n    lineTotal: z.number().min(0),\n    customSpecifications: z.string().optional(),\n  })).min(1, \"At least one item is required\")\n});\n\ntype PurchaseOrderFormData = z.infer<typeof purchaseOrderFormSchema>;\n\nconst statusColors = {\n  pending: \"bg-yellow-500/20 text-yellow-700 border-yellow-500/30\",\n  approved: \"bg-blue-500/20 text-blue-700 border-blue-500/30\",\n  in_production: \"bg-indigo-500/20 text-indigo-700 border-indigo-500/30\",\n  ready_to_ship: \"bg-green-500/20 text-green-700 border-green-500/30\",\n  shipped: \"bg-emerald-500/20 text-emerald-700 border-emerald-500/30\",\n  delivered: \"bg-gray-500/20 text-gray-700 border-gray-500/30\",\n  cancelled: \"bg-red-500/20 text-red-700 border-red-500/30\"\n};\n\nconst statusIcons = {\n  pending: Clock,\n  approved: CheckCircle,\n  in_production: Package,\n  ready_to_ship: Package,\n  shipped: Package,\n  delivered: CheckCircle,\n  cancelled: XCircle\n};\n\nexport default function PurchaseOrders() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState<PurchaseOrder | null>(null);\n  const queryClient = useQueryClient();\n\n  const { data: purchaseOrders = [], isLoading: ordersLoading } = useQuery<PurchaseOrder[]>({\n    queryKey: ['/api/purchase-orders', { status: statusFilter !== 'all' ? statusFilter : undefined, search: searchQuery }],\n  });\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: ['/api/products'],\n  });\n\n  const createOrderMutation = useMutation({\n    mutationFn: async (data: PurchaseOrderFormData) => {\n      const { items, ...orderData } = data;\n      \n      // Create the purchase order first  \n      const orderResponse = await apiRequest('/api/purchase-orders', 'POST', orderData);\n      const order = await orderResponse.json() as PurchaseOrder;\n\n      // Add items to the order\n      for (const item of items) {\n        await apiRequest(`/api/purchase-orders/${order.id}/items`, 'POST', item);\n      }\n\n      return order;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/purchase-orders'] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n    },\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status, reason, notes }: { id: string; status: string; reason?: string; notes?: string }) => {\n      return apiRequest(`/api/purchase-orders/${id}/status`, 'PATCH', { status, reason, notes });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/purchase-orders'] });\n    },\n  });\n\n  const form = useForm<PurchaseOrderFormData>({\n    resolver: zodResolver(purchaseOrderFormSchema),\n    defaultValues: {\n      customerName: \"\",\n      customerEmail: \"\",\n      customerCountry: \"South Africa\",\n      currency: \"ZAR\",\n      urgencyLevel: \"standard\",\n      notes: \"\",\n      items: [{\n        productId: \"\",\n        quantity: 1,\n        unitPrice: 0,\n        lineTotal: 0,\n        customSpecifications: \"\",\n      }]\n    },\n  });\n\n  const onSubmit = (data: PurchaseOrderFormData) => {\n    createOrderMutation.mutate(data);\n  };\n\n  const handleStatusUpdate = (orderId: string, newStatus: string) => {\n    updateStatusMutation.mutate({\n      id: orderId,\n      status: newStatus,\n      reason: `Status updated to ${newStatus}`,\n      notes: `Status changed via dashboard interface`\n    });\n  };\n\n  const filteredOrders = purchaseOrders.filter((order) => {\n    const matchesSearch = !searchQuery || \n      order.poNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      order.customerName.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || order.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const addItem = () => {\n    const currentItems = form.getValues('items');\n    form.setValue('items', [\n      ...currentItems,\n      {\n        productId: \"\",\n        quantity: 1,\n        unitPrice: 0,\n        lineTotal: 0,\n        customSpecifications: \"\",\n      }\n    ]);\n  };\n\n  const removeItem = (index: number) => {\n    const currentItems = form.getValues('items');\n    if (currentItems.length > 1) {\n      form.setValue('items', currentItems.filter((_, i) => i !== index));\n    }\n  };\n\n  const updateLineTotal = (index: number) => {\n    const items = form.getValues('items');\n    const item = items[index];\n    if (item) {\n      const lineTotal = item.quantity * item.unitPrice;\n      form.setValue(`items.${index}.lineTotal`, lineTotal);\n    }\n  };\n\n  if (ordersLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 p-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"animate-pulse space-y-6\">\n            <div className=\"h-8 bg-gray-300 rounded-lg w-64\"></div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"h-48 bg-gray-300 rounded-lg\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              Purchase Orders\n            </h1>\n            <p className=\"text-gray-600 mt-1\">Manage customer orders and production requests</p>\n          </div>\n          \n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button className=\"bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white shadow-lg\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                New Order\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Create Purchase Order</DialogTitle>\n                <DialogDescription>\n                  Create a new purchase order for custom manufacturing\n                </DialogDescription>\n              </DialogHeader>\n              \n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                  {/* Customer Information */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"customerName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Customer Name</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Enter customer name\" {...field} />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={form.control}\n                      name=\"customerEmail\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Customer Email</FormLabel>\n                          <FormControl>\n                            <Input type=\"email\" placeholder=\"customer@example.com\" {...field} />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={form.control}\n                      name=\"customerPhone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Phone Number</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"+27 12 345 6789\" {...field} value={field.value || ''} />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={form.control}\n                      name=\"urgencyLevel\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Urgency Level</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger>\n                                <SelectValue />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"low\">Low Priority</SelectItem>\n                              <SelectItem value=\"standard\">Standard</SelectItem>\n                              <SelectItem value=\"high\">High Priority</SelectItem>\n                              <SelectItem value=\"urgent\">Urgent</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  {/* Order Items */}\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <FormLabel className=\"text-lg font-semibold\">Order Items</FormLabel>\n                      <Button type=\"button\" onClick={addItem} variant=\"outline\" size=\"sm\">\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Add Item\n                      </Button>\n                    </div>\n                    \n                    {form.watch('items').map((_, index) => (\n                      <Card key={index} className=\"p-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                          <FormField\n                            control={form.control}\n                            name={`items.${index}.productId`}\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Product</FormLabel>\n                                <Select onValueChange={field.onChange} value={field.value}>\n                                  <FormControl>\n                                    <SelectTrigger>\n                                      <SelectValue placeholder=\"Select product\" />\n                                    </SelectTrigger>\n                                  </FormControl>\n                                  <SelectContent>\n                                    {products.map((product) => (\n                                      <SelectItem key={product.id} value={product.id}>\n                                        {product.sku} - {product.name}\n                                      </SelectItem>\n                                    ))}\n                                  </SelectContent>\n                                </Select>\n                              </FormItem>\n                            )}\n                          />\n                          <FormField\n                            control={form.control}\n                            name={`items.${index}.quantity`}\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Quantity</FormLabel>\n                                <FormControl>\n                                  <Input\n                                    type=\"number\"\n                                    min=\"1\"\n                                    {...field}\n                                    onChange={(e) => {\n                                      field.onChange(parseInt(e.target.value) || 0);\n                                      updateLineTotal(index);\n                                    }}\n                                  />\n                                </FormControl>\n                              </FormItem>\n                            )}\n                          />\n                          <FormField\n                            control={form.control}\n                            name={`items.${index}.unitPrice`}\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Unit Price (ZAR)</FormLabel>\n                                <FormControl>\n                                  <Input\n                                    type=\"number\"\n                                    min=\"0\"\n                                    step=\"0.01\"\n                                    {...field}\n                                    onChange={(e) => {\n                                      field.onChange(parseFloat(e.target.value) || 0);\n                                      updateLineTotal(index);\n                                    }}\n                                  />\n                                </FormControl>\n                              </FormItem>\n                            )}\n                          />\n                          <div className=\"flex items-end justify-between\">\n                            <FormField\n                              control={form.control}\n                              name={`items.${index}.lineTotal`}\n                              render={({ field }) => (\n                                <FormItem className=\"flex-1 mr-2\">\n                                  <FormLabel>Line Total</FormLabel>\n                                  <FormControl>\n                                    <Input\n                                      type=\"number\"\n                                      step=\"0.01\"\n                                      disabled\n                                      {...field}\n                                    />\n                                  </FormControl>\n                                </FormItem>\n                              )}\n                            />\n                            {form.watch('items').length > 1 && (\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => removeItem(index)}\n                                className=\"mb-0\"\n                              >\n                                Remove\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                        <FormField\n                          control={form.control}\n                          name={`items.${index}.customSpecifications`}\n                          render={({ field }) => (\n                            <FormItem className=\"mt-4\">\n                              <FormLabel>Custom Specifications</FormLabel>\n                              <FormControl>\n                                <Textarea\n                                  placeholder=\"Special requirements, custom dimensions, etc.\"\n                                  {...field}\n                                />\n                              </FormControl>\n                            </FormItem>\n                          )}\n                        />\n                      </Card>\n                    ))}\n                  </div>\n\n                  <FormField\n                    control={form.control}\n                    name=\"notes\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Order Notes</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Additional notes or special instructions\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"flex justify-end space-x-4\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => setIsCreateDialogOpen(false)}\n                    >\n                      Cancel\n                    </Button>\n                    <Button\n                      type=\"submit\"\n                      disabled={createOrderMutation.isPending}\n                      className=\"bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700\"\n                    >\n                      {createOrderMutation.isPending ? \"Creating...\" : \"Create Order\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        {/* Filters */}\n        <Card className=\"backdrop-blur-sm bg-white/70 shadow-lg border-0\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  placeholder=\"Search by PO number or customer name...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-[200px]\">\n                  <Filter className=\"w-4 h-4 mr-2\" />\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Statuses</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"approved\">Approved</SelectItem>\n                  <SelectItem value=\"in_production\">In Production</SelectItem>\n                  <SelectItem value=\"ready_to_ship\">Ready to Ship</SelectItem>\n                  <SelectItem value=\"shipped\">Shipped</SelectItem>\n                  <SelectItem value=\"delivered\">Delivered</SelectItem>\n                  <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Orders Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredOrders.map((order) => {\n            const StatusIcon = statusIcons[order.status as keyof typeof statusIcons] || Clock;\n            \n            return (\n              <Card key={order.id} className=\"backdrop-blur-sm bg-white/70 shadow-lg border-0 hover:shadow-xl transition-all duration-300\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div>\n                      <CardTitle className=\"text-lg text-gray-900\">\n                        {order.poNumber}\n                      </CardTitle>\n                      <CardDescription className=\"text-gray-600\">\n                        {order.customerName}\n                      </CardDescription>\n                    </div>\n                    <Badge className={`${statusColors[order.status as keyof typeof statusColors]} font-medium`}>\n                      <StatusIcon className=\"w-3 h-3 mr-1\" />\n                      {order.status.replace('_', ' ')}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Total Amount:</span>\n                      <span className=\"font-semibold text-gray-900\">\n                        {order.currency} {parseFloat(order.totalAmount).toLocaleString()}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Items:</span>\n                      <span className=\"text-gray-900\">\n                        {(order as any).items?.length || 0} items\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Created:</span>\n                      <span className=\"text-gray-900\">\n                        {order.createdAt ? new Date(order.createdAt).toLocaleDateString() : 'N/A'}\n                      </span>\n                    </div>\n                    \n                    <div className=\"flex space-x-2 mt-4\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"flex-1\"\n                        onClick={() => setSelectedOrder(order)}\n                      >\n                        <Eye className=\"w-4 h-4 mr-1\" />\n                        View\n                      </Button>\n                      {order.status === 'pending' && (\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleStatusUpdate(order.id, 'approved')}\n                          disabled={updateStatusMutation.isPending}\n                          className=\"bg-green-600 hover:bg-green-700 text-white\"\n                        >\n                          Approve\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {filteredOrders.length === 0 && (\n          <Card className=\"backdrop-blur-sm bg-white/70 shadow-lg border-0\">\n            <CardContent className=\"p-12 text-center\">\n              <Package className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Purchase Orders Found</h3>\n              <p className=\"text-gray-600 mb-6\">\n                {searchQuery || statusFilter !== 'all' \n                  ? \"Try adjusting your search or filters\" \n                  : \"Create your first purchase order to get started\"\n                }\n              </p>\n              {!searchQuery && statusFilter === 'all' && (\n                <Button onClick={() => setIsCreateDialogOpen(true)} className=\"bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Create First Order\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":24450},"client/src/pages/Register.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { motion } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\nimport { UserPlus, Shield, CheckCircle } from \"lucide-react\";\n\nconst registerSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  firstName: z.string().min(2, \"First name must be at least 2 characters\"),\n  lastName: z.string().min(2, \"Last name must be at least 2 characters\"),\n  companyName: z.string().min(2, \"Company name must be at least 2 characters\"),\n  companyRegistration: z.string().optional(),\n  phone: z.string().min(10, \"Please enter a valid phone number\"),\n  role: z.enum([\"admin\", \"manager\", \"user\"]),\n});\n\ntype RegisterForm = z.infer<typeof registerSchema>;\n\nexport default function Register() {\n  const [step, setStep] = useState(1);\n  const [registrationComplete, setRegistrationComplete] = useState(false);\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const form = useForm<RegisterForm>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      email: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      companyName: \"\",\n      companyRegistration: \"\",\n      phone: \"\",\n      role: \"admin\",\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: RegisterForm) => {\n      return apiRequest(\"/api/auth/register\", \"POST\", data);\n    },\n    onSuccess: () => {\n      setRegistrationComplete(true);\n      toast({\n        title: \"Registration Successful\",\n        description: \"Your account has been created and is pending approval. You'll receive an email once approved.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Registration Failed\",\n        description: error.message || \"Failed to register. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: RegisterForm) => {\n    registerMutation.mutate(data);\n  };\n\n  const nextStep = () => {\n    if (step === 1) {\n      // Validate personal info fields\n      form.trigger([\"email\", \"firstName\", \"lastName\"]).then(isValid => {\n        if (isValid) setStep(2);\n      });\n    }\n  };\n\n  const prevStep = () => {\n    setStep(step - 1);\n  };\n\n  if (registrationComplete) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 p-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"w-full max-w-md\"\n        >\n          <Card className=\"backdrop-blur-sm bg-white/90 border-white/20\">\n            <CardHeader className=\"text-center\">\n              <div className=\"mx-auto w-16 h-16 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full flex items-center justify-center mb-4\">\n                <CheckCircle className=\"w-8 h-8 text-white\" />\n              </div>\n              <CardTitle className=\"text-2xl bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n                Registration Complete\n              </CardTitle>\n              <CardDescription>\n                Your account has been submitted for approval\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"text-center space-y-3\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Your registration has been successfully submitted. Our team will review your application and send you an email confirmation once approved.\n                </p>\n                <p className=\"text-sm font-medium text-emerald-600\">\n                  This usually takes 1-2 business days.\n                </p>\n              </div>\n              <div className=\"pt-4\">\n                <Button \n                  onClick={() => setLocation(\"/\")} \n                  className=\"w-full bg-gradient-to-r from-emerald-500 to-blue-500\"\n                >\n                  Return to Home\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"w-full max-w-2xl\"\n      >\n        <Card className=\"backdrop-blur-sm bg-white/90 border-white/20\">\n          <CardHeader className=\"text-center\">\n            <div className=\"mx-auto w-16 h-16 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full flex items-center justify-center mb-4\">\n              <UserPlus className=\"w-8 h-8 text-white\" />\n            </div>\n            <CardTitle className=\"text-2xl bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              Create CornexConnect Account\n            </CardTitle>\n            <CardDescription>\n              Join our manufacturing platform to access advanced analytics and automation\n            </CardDescription>\n          </CardHeader>\n\n          <CardContent>\n            {/* Progress Indicator */}\n            <div className=\"mb-8\">\n              <div className=\"flex items-center justify-between\">\n                <div className={`flex items-center ${step >= 1 ? 'text-emerald-600' : 'text-gray-400'}`}>\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                    step >= 1 ? 'bg-emerald-100 text-emerald-600 border-2 border-emerald-500' : 'bg-gray-100 text-gray-400'\n                  }`}>\n                    1\n                  </div>\n                  <span className=\"ml-2 text-sm font-medium\">Personal Info</span>\n                </div>\n                <div className={`flex-1 h-1 mx-4 ${step >= 2 ? 'bg-emerald-500' : 'bg-gray-200'}`} />\n                <div className={`flex items-center ${step >= 2 ? 'text-emerald-600' : 'text-gray-400'}`}>\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                    step >= 2 ? 'bg-emerald-100 text-emerald-600 border-2 border-emerald-500' : 'bg-gray-100 text-gray-400'\n                  }`}>\n                    2\n                  </div>\n                  <span className=\"ml-2 text-sm font-medium\">Company Details</span>\n                </div>\n              </div>\n            </div>\n\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                {step === 1 && (\n                  <motion.div\n                    initial={{ opacity: 0, x: 20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    className=\"space-y-4\"\n                  >\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"firstName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>First Name</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Enter your first name\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"lastName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Last Name</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Enter your last name\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email Address</FormLabel>\n                          <FormControl>\n                            <Input type=\"email\" placeholder=\"Enter your email address\" {...field} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"phone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Phone Number</FormLabel>\n                          <FormControl>\n                            <Input type=\"tel\" placeholder=\"Enter your phone number\" {...field} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"pt-4\">\n                      <Button type=\"button\" onClick={nextStep} className=\"w-full bg-gradient-to-r from-emerald-500 to-blue-500\">\n                        Continue to Company Details\n                      </Button>\n                    </div>\n                  </motion.div>\n                )}\n\n                {step === 2 && (\n                  <motion.div\n                    initial={{ opacity: 0, x: 20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    className=\"space-y-4\"\n                  >\n                    <FormField\n                      control={form.control}\n                      name=\"companyName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Company Name</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Enter your company name\" {...field} />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"companyRegistration\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Company Registration Number (Optional)</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"e.g., 2022/854581/07\" {...field} />\n                          </FormControl>\n                          <FormDescription>\n                            Provide your official company registration number if available\n                          </FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"role\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Your Role</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select your role in the company\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"admin\">Company Administrator</SelectItem>\n                              <SelectItem value=\"manager\">Operations Manager</SelectItem>\n                              <SelectItem value=\"user\">Team Member</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"bg-blue-50 p-4 rounded-lg\">\n                      <div className=\"flex items-center mb-2\">\n                        <Shield className=\"w-5 h-5 text-blue-600 mr-2\" />\n                        <span className=\"text-sm font-medium text-blue-800\">Security Notice</span>\n                      </div>\n                      <p className=\"text-sm text-blue-700\">\n                        Your registration will be reviewed by our team before activation. This ensures platform security and prevents unauthorized access.\n                      </p>\n                    </div>\n\n                    <div className=\"flex gap-3 pt-4\">\n                      <Button type=\"button\" variant=\"outline\" onClick={prevStep} className=\"flex-1\">\n                        Back\n                      </Button>\n                      <Button \n                        type=\"submit\" \n                        disabled={registerMutation.isPending}\n                        className=\"flex-1 bg-gradient-to-r from-emerald-500 to-blue-500\"\n                      >\n                        {registerMutation.isPending ? \"Creating Account...\" : \"Create Account\"}\n                      </Button>\n                    </div>\n                  </motion.div>\n                )}\n              </form>\n            </Form>\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">\n                Already have an account?{\" \"}\n                <button \n                  onClick={() => setLocation(\"/login\")} \n                  className=\"text-emerald-600 hover:underline font-medium\"\n                >\n                  Sign in here\n                </button>\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n    </div>\n  );\n}","size_bytes":14677},"client/src/pages/RouteOptimization.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { \n  Route, \n  MapPin, \n  Users, \n  Clock,\n  Navigation,\n  Car,\n  Calendar,\n  Smartphone,\n  Zap,\n  Target,\n  TrendingUp,\n  Eye,\n  Edit,\n  Play,\n  Pause,\n  CheckCircle\n} from \"lucide-react\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { TransitionHints, useTransitionHints } from \"@/components/TransitionHints\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport RouteMap from \"@/components/RouteMap\";\n\ninterface RouteStore {\n  id: string;\n  storeName: string;\n  address: string;\n  city: string;\n  province: string;\n  visitOrder: number;\n  estimatedDuration: number;\n  status: 'pending' | 'in_progress' | 'completed' | 'skipped';\n  lastVisitDate?: string;\n  visitNotes?: string;\n  coordinates: {\n    lat: number;\n    lng: number;\n  };\n}\n\ninterface RoutePlan {\n  id: string;\n  planName: string;\n  salesRepName: string;\n  salesRepId: string;\n  startDate: string;\n  endDate: string;\n  status: 'draft' | 'active' | 'completed' | 'cancelled';\n  stores: RouteStore[];\n  estimatedDistance: number;\n  estimatedDuration: number;\n  actualDistance?: number;\n  actualDuration?: number;\n  optimizedRoute?: any;\n  createdAt: string;\n}\n\nexport default function RouteOptimization() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedRoute, setSelectedRoute] = useState<RoutePlan | null>(null);\n  const [showRouteDetails, setShowRouteDetails] = useState(false);\n  const [showMobileView, setShowMobileView] = useState(false);\n  const [selectedSalesRep, setSelectedSalesRep] = useState(\"all\");\n\n  // Transition hints\n  const { \n    activeHints, \n    isVisible: hintsVisible, \n    showHints, \n    hideHints, \n    completeHints \n  } = useTransitionHints();\n\n  // Data queries\n  const { data: routePlans = [], isLoading } = useQuery({\n    queryKey: [\"/api/route-plans\"],\n  });\n\n  const { data: salesReps = [] } = useQuery({\n    queryKey: [\"/api/sales-reps\"],\n  });\n\n  const { data: routeAnalytics } = useQuery({\n    queryKey: [\"/api/analytics/route-performance\"],\n  });\n\n  // Mutations\n  const optimizeRouteMutation = useMutation({\n    mutationFn: async (routeId: string) => {\n      return await apiRequest(`/api/route-plans/${routeId}/optimize`, {\n        method: \"POST\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/route-plans\"] });\n      toast({ title: \"Route optimized successfully\" });\n    },\n  });\n\n  const updateRouteStatusMutation = useMutation({\n    mutationFn: async (data: { routeId: string; status: string }) => {\n      return await apiRequest(`/api/route-plans/${data.routeId}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({ status: data.status }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/route-plans\"] });\n      toast({ title: \"Route status updated\" });\n    },\n  });\n\n  // Filter routes\n  const filteredRoutes = routePlans.filter((route: RoutePlan) => {\n    return selectedSalesRep === \"all\" || route.salesRepId === selectedSalesRep;\n  });\n\n  const formatDuration = (minutes: number) => {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours}h ${mins}m`;\n  };\n\n  const formatDistance = (distance: number) => {\n    return `${distance.toFixed(1)} km`;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';\n      case 'completed': return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\n      case 'cancelled': return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\n      case 'draft': return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\n      default: return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300';\n    }\n  };\n\n  const getStoreStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed': return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case 'in_progress': return <Play className=\"w-4 h-4 text-blue-500\" />;\n      case 'pending': return <Clock className=\"w-4 h-4 text-yellow-500\" />;\n      case 'skipped': return <Pause className=\"w-4 h-4 text-red-500\" />;\n      default: return <Clock className=\"w-4 h-4 text-gray-400\" />;\n    }\n  };\n\n  const startRouteOptimizationTour = () => {\n    const routeHints = [\n      {\n        id: 'overview',\n        title: 'AI Route Optimization',\n        description: 'Plan optimal sales routes with AI-powered distance calculation and visit scheduling across 1,800+ hardware stores.',\n        type: 'info' as const,\n        position: 'center' as const\n      },\n      {\n        id: 'route-analytics',\n        title: 'Route Performance Analytics',\n        description: 'Monitor route efficiency, completion rates, and sales performance metrics.',\n        targetElement: '[data-hint=\"route-analytics\"]',\n        type: 'success' as const,\n        position: 'bottom' as const\n      },\n      {\n        id: 'mobile-optimization',\n        title: 'Mobile Field Support',\n        description: 'Access routes on mobile devices with GPS navigation and offline sync capabilities.',\n        targetElement: '[data-hint=\"mobile-view\"]',\n        type: 'tip' as const,\n        position: 'left' as const\n      }\n    ];\n    showHints(routeHints);\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"p-6 space-y-6 max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent\">\n              ðŸ—ºï¸ Route Optimization\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">\n              AI-powered route planning for sales representatives\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={startRouteOptimizationTour}>\n              ðŸŽ¯ Take Tour\n            </Button>\n            <Button \n              variant=\"outline\" \n              onClick={() => setShowMobileView(!showMobileView)}\n              data-hint=\"mobile-view\"\n            >\n              <Smartphone className=\"w-4 h-4 mr-2\" />\n              Mobile View\n            </Button>\n          </div>\n        </div>\n\n        {/* Route Analytics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\" data-hint=\"route-analytics\">\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Routes</CardTitle>\n              <Route className=\"h-4 w-4 text-blue-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {routePlans.filter((r: RoutePlan) => r.status === 'active').length}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Currently in progress</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Avg Efficiency</CardTitle>\n              <Target className=\"h-4 w-4 text-green-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-green-600\">\n                {routeAnalytics?.avgEfficiency || 87}%\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Route completion rate</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Distance Saved</CardTitle>\n              <Navigation className=\"h-4 w-4 text-purple-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {routeAnalytics?.distanceSaved || 1247} km\n              </div>\n              <p className=\"text-xs text-muted-foreground\">This month</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Time Saved</CardTitle>\n              <Clock className=\"h-4 w-4 text-orange-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {routeAnalytics?.timeSaved || 156}h\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Optimization impact</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Filter Controls */}\n        <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <Select value={selectedSalesRep} onValueChange={setSelectedSalesRep}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Filter by Sales Rep\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Sales Representatives</SelectItem>\n                    {salesReps.map((rep: any) => (\n                      <SelectItem key={rep.id} value={rep.id}>{rep.name}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <Button>\n                <Route className=\"w-4 h-4 mr-2\" />\n                Create New Route\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Interactive Route Map */}\n        <Card className=\"backdrop-blur-sm bg-white/10 border border-white/20\" data-hint=\"route-map\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Map className=\"w-5 h-5\" />\n              Interactive Route Map\n            </CardTitle>\n            <CardDescription>\n              Real-time route visualization with Google Maps integration\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <RouteMap\n              stops={optimizedRoute.map(stop => ({\n                id: stop.storeId,\n                name: stop.storeName,\n                address: `${stop.city}, ${stop.province}`,\n                position: { \n                  lat: stop.latitude || (-26.2041 + (Math.random() - 0.5) * 2), \n                  lng: stop.longitude || (28.0473 + (Math.random() - 0.5) * 2)\n                },\n                estimatedTime: stop.estimatedTime,\n                status: stop.visitStatus as any\n              }))}\n              optimizeRoute={true}\n              onRouteOptimized={(optimizedStops) => {\n                console.log('Route optimized:', optimizedStops);\n              }}\n              height=\"500px\"\n              className=\"w-full\"\n            />\n          </CardContent>\n        </Card>\n\n        {/* Route Plans Grid */}\n        <div className={`grid gap-6 ${showMobileView ? 'grid-cols-1' : 'grid-cols-1 md:grid-cols-2'}`}>\n          {filteredRoutes.map((route: RoutePlan) => (\n            <Card key={route.id} className=\"backdrop-blur-sm bg-white/10 border border-white/20 hover:shadow-lg transition-shadow\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-lg\">{route.planName}</CardTitle>\n                  <Badge className={getStatusColor(route.status)}>\n                    {route.status}\n                  </Badge>\n                </div>\n                <CardDescription>\n                  {route.salesRepName} â€¢ {route.stores.length} stores\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {/* Route Stats */}\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div className=\"flex items-center gap-2\">\n                    <Navigation className=\"w-4 h-4 text-blue-500\" />\n                    <span>{formatDistance(route.estimatedDistance)}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4 text-green-500\" />\n                    <span>{formatDuration(route.estimatedDuration)}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Calendar className=\"w-4 h-4 text-purple-500\" />\n                    <span>{new Date(route.startDate).toLocaleDateString()}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4 text-orange-500\" />\n                    <span>{route.stores.filter(s => s.status === 'completed').length}/{route.stores.length}</span>\n                  </div>\n                </div>\n\n                {/* Progress Bar */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Progress</span>\n                    <span>{Math.round((route.stores.filter(s => s.status === 'completed').length / route.stores.length) * 100)}%</span>\n                  </div>\n                  <Progress \n                    value={(route.stores.filter(s => s.status === 'completed').length / route.stores.length) * 100}\n                    className=\"h-2\"\n                  />\n                </div>\n\n                {/* Store List Preview */}\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-medium text-sm\">Next Stores:</h4>\n                  <div className=\"space-y-1\">\n                    {route.stores\n                      .filter(s => s.status === 'pending')\n                      .slice(0, 3)\n                      .map((store) => (\n                      <div key={store.id} className=\"flex items-center justify-between text-xs\">\n                        <div className=\"flex items-center gap-2\">\n                          {getStoreStatusIcon(store.status)}\n                          <span>{store.storeName}</span>\n                        </div>\n                        <span className=\"text-muted-foreground\">{store.city}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex gap-2\">\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"flex-1\"\n                    onClick={() => {\n                      setSelectedRoute(route);\n                      setShowRouteDetails(true);\n                    }}\n                  >\n                    <Eye className=\"w-3 h-3 mr-1\" />\n                    View\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"flex-1\"\n                    onClick={() => optimizeRouteMutation.mutate(route.id)}\n                    disabled={optimizeRouteMutation.isPending}\n                  >\n                    <Zap className=\"w-3 h-3 mr-1\" />\n                    Optimize\n                  </Button>\n                  {route.status === 'draft' && (\n                    <Button \n                      size=\"sm\" \n                      className=\"flex-1\"\n                      onClick={() => updateRouteStatusMutation.mutate({\n                        routeId: route.id,\n                        status: 'active'\n                      })}\n                    >\n                      <Play className=\"w-3 h-3 mr-1\" />\n                      Start\n                    </Button>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {/* Route Details Dialog */}\n        <Dialog open={showRouteDetails} onOpenChange={setShowRouteDetails}>\n          <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>{selectedRoute?.planName}</DialogTitle>\n              <DialogDescription>\n                Detailed route information and store visit tracking\n              </DialogDescription>\n            </DialogHeader>\n            \n            {selectedRoute && (\n              <div className=\"space-y-6\">\n                {/* Route Overview */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <div className=\"text-center p-3 border border-white/10 rounded-lg bg-white/5\">\n                    <div className=\"text-lg font-bold text-blue-600\">\n                      {formatDistance(selectedRoute.estimatedDistance)}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Distance</div>\n                  </div>\n                  <div className=\"text-center p-3 border border-white/10 rounded-lg bg-white/5\">\n                    <div className=\"text-lg font-bold text-green-600\">\n                      {formatDuration(selectedRoute.estimatedDuration)}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Duration</div>\n                  </div>\n                  <div className=\"text-center p-3 border border-white/10 rounded-lg bg-white/5\">\n                    <div className=\"text-lg font-bold text-purple-600\">\n                      {selectedRoute.stores.length}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Stores</div>\n                  </div>\n                  <div className=\"text-center p-3 border border-white/10 rounded-lg bg-white/5\">\n                    <div className=\"text-lg font-bold text-orange-600\">\n                      {selectedRoute.stores.filter(s => s.status === 'completed').length}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">Completed</div>\n                  </div>\n                </div>\n\n                {/* Store List */}\n                <div>\n                  <h3 className=\"font-semibold mb-4\">Store Visit Schedule</h3>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {selectedRoute.stores\n                      .sort((a, b) => a.visitOrder - b.visitOrder)\n                      .map((store, index) => (\n                      <div key={store.id} className=\"flex items-center justify-between p-3 border border-white/10 rounded-lg bg-white/5\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-xs font-medium\">\n                            {index + 1}\n                          </div>\n                          {getStoreStatusIcon(store.status)}\n                          <div>\n                            <p className=\"font-medium text-sm\">{store.storeName}</p>\n                            <p className=\"text-xs text-muted-foreground\">{store.address}</p>\n                          </div>\n                        </div>\n                        <div className=\"text-right text-xs\">\n                          <p className=\"font-medium\">{formatDuration(store.estimatedDuration)}</p>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {store.status}\n                          </Badge>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n          </DialogContent>\n        </Dialog>\n\n        {/* Transition Hints */}\n        <AnimatePresence>\n          {hintsVisible && (\n            <TransitionHints\n              steps={activeHints}\n              isVisible={hintsVisible}\n              onComplete={completeHints}\n              onSkip={hideHints}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":21195},"client/src/pages/UserManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { PageTransition } from \"@/components/PageTransition\";\nimport { AnimatedCard, FadeIn } from \"@/components/AnimatedComponents\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Users, UserPlus, Edit, Trash2, Shield, Mail, Phone } from \"lucide-react\";\n\ninterface User {\n  id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone?: string;\n  role: 'admin' | 'manager' | 'staff' | 'viewer';\n  department: string;\n  status: 'active' | 'inactive';\n  createdAt: string;\n  lastLogin?: string;\n}\n\nexport default function UserManagement() {\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState<User | null>(null);\n  const { toast } = useToast();\n\n  const { data: users = [], isLoading } = useQuery<User[]>({\n    queryKey: [\"/api/users\"],\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: (userData: Partial<User>) => apiRequest(\"/api/users\", \"POST\", userData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      setIsCreateOpen(false);\n      toast({\n        title: \"User Created\",\n        description: \"New user has been created successfully.\",\n      });\n    },\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: ({ id, ...userData }: Partial<User> & { id: string }) =>\n      apiRequest(`/api/users/${id}`, \"PATCH\", userData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      setEditingUser(null);\n      toast({\n        title: \"User Updated\",\n        description: \"User information has been updated successfully.\",\n      });\n    },\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(`/api/users/${id}`, \"DELETE\"),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      toast({\n        title: \"User Deleted\",\n        description: \"User has been removed from the system.\",\n      });\n    },\n  });\n\n  const handleCreateUser = (formData: FormData) => {\n    const userData = {\n      firstName: formData.get(\"firstName\") as string,\n      lastName: formData.get(\"lastName\") as string,\n      email: formData.get(\"email\") as string,\n      phone: formData.get(\"phone\") as string,\n      role: formData.get(\"role\") as User[\"role\"],\n      department: formData.get(\"department\") as string,\n      status: \"active\" as const,\n    };\n    createUserMutation.mutate(userData);\n  };\n\n  const handleUpdateUser = (formData: FormData) => {\n    if (!editingUser) return;\n    const userData = {\n      id: editingUser.id,\n      firstName: formData.get(\"firstName\") as string,\n      lastName: formData.get(\"lastName\") as string,\n      email: formData.get(\"email\") as string,\n      phone: formData.get(\"phone\") as string,\n      role: formData.get(\"role\") as User[\"role\"],\n      department: formData.get(\"department\") as string,\n      status: formData.get(\"status\") as User[\"status\"],\n    };\n    updateUserMutation.mutate(userData);\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin': return 'bg-red-100 text-red-800';\n      case 'manager': return 'bg-blue-100 text-blue-800';\n      case 'staff': return 'bg-green-100 text-green-800';\n      case 'viewer': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <PageTransition>\n      <div className=\"p-8 space-y-8\">\n        <FadeIn>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">User Management</h1>\n              <p className=\"text-gray-600 mt-2\">Manage company users, staff, and permissions</p>\n            </div>\n            <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"bg-emerald-600 hover:bg-emerald-700\">\n                  <UserPlus className=\"h-4 w-4 mr-2\" />\n                  Add User\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"sm:max-w-[600px]\">\n                <DialogHeader>\n                  <DialogTitle>Create New User</DialogTitle>\n                </DialogHeader>\n                <form onSubmit={(e) => {\n                  e.preventDefault();\n                  handleCreateUser(new FormData(e.currentTarget));\n                }} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"firstName\">First Name</Label>\n                      <Input id=\"firstName\" name=\"firstName\" required />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"lastName\">Last Name</Label>\n                      <Input id=\"lastName\" name=\"lastName\" required />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"email\">Email</Label>\n                    <Input id=\"email\" name=\"email\" type=\"email\" required />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"phone\">Phone</Label>\n                    <Input id=\"phone\" name=\"phone\" type=\"tel\" />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"role\">Role</Label>\n                      <Select name=\"role\" required>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select role\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"admin\">Admin</SelectItem>\n                          <SelectItem value=\"manager\">Manager</SelectItem>\n                          <SelectItem value=\"staff\">Staff</SelectItem>\n                          <SelectItem value=\"viewer\">Viewer</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"department\">Department</Label>\n                      <Select name=\"department\" required>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select department\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"administration\">Administration</SelectItem>\n                          <SelectItem value=\"sales\">Sales</SelectItem>\n                          <SelectItem value=\"production\">Production</SelectItem>\n                          <SelectItem value=\"logistics\">Logistics</SelectItem>\n                          <SelectItem value=\"finance\">Finance</SelectItem>\n                          <SelectItem value=\"it\">IT</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end space-x-2\">\n                    <Button type=\"button\" variant=\"outline\" onClick={() => setIsCreateOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button type=\"submit\" disabled={createUserMutation.isPending}>\n                      {createUserMutation.isPending ? \"Creating...\" : \"Create User\"}\n                    </Button>\n                  </div>\n                </form>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </FadeIn>\n\n        <AnimatedCard className=\"backdrop-blur-sm bg-white/80\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Users className=\"h-5 w-5 mr-2 text-emerald-600\" />\n              Company Users ({users.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {users.map((user, index) => (\n                  <FadeIn key={user.id} delay={index * 0.1}>\n                    <div className=\"flex items-center justify-between p-4 rounded-lg border bg-white/50 hover:bg-white/80 transition-colors\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center\">\n                          <span className=\"text-emerald-800 font-semibold\">\n                            {user.firstName[0]}{user.lastName[0]}\n                          </span>\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-gray-900\">\n                            {user.firstName} {user.lastName}\n                          </h3>\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                            <span className=\"flex items-center\">\n                              <Mail className=\"h-3 w-3 mr-1\" />\n                              {user.email}\n                            </span>\n                            {user.phone && (\n                              <span className=\"flex items-center\">\n                                <Phone className=\"h-3 w-3 mr-1\" />\n                                {user.phone}\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"flex items-center space-x-2 mt-1\">\n                            <Badge className={getRoleColor(user.role)}>\n                              <Shield className=\"h-3 w-3 mr-1\" />\n                              {user.role.toUpperCase()}\n                            </Badge>\n                            <Badge variant=\"outline\">\n                              {user.department}\n                            </Badge>\n                            <Badge variant={user.status === 'active' ? 'default' : 'secondary'}>\n                              {user.status}\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => setEditingUser(user)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteUserMutation.mutate(user.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </FadeIn>\n                ))}\n                {users.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <Users className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No users found</h3>\n                    <p className=\"text-gray-500\">Get started by adding your first user.</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </AnimatedCard>\n\n        {/* Edit User Dialog */}\n        <Dialog open={!!editingUser} onOpenChange={() => setEditingUser(null)}>\n          <DialogContent className=\"sm:max-w-[600px]\">\n            <DialogHeader>\n              <DialogTitle>Edit User</DialogTitle>\n            </DialogHeader>\n            {editingUser && (\n              <form onSubmit={(e) => {\n                e.preventDefault();\n                handleUpdateUser(new FormData(e.currentTarget));\n              }} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"editFirstName\">First Name</Label>\n                    <Input \n                      id=\"editFirstName\" \n                      name=\"firstName\" \n                      defaultValue={editingUser.firstName} \n                      required \n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"editLastName\">Last Name</Label>\n                    <Input \n                      id=\"editLastName\" \n                      name=\"lastName\" \n                      defaultValue={editingUser.lastName} \n                      required \n                    />\n                  </div>\n                </div>\n                <div>\n                  <Label htmlFor=\"editEmail\">Email</Label>\n                  <Input \n                    id=\"editEmail\" \n                    name=\"email\" \n                    type=\"email\" \n                    defaultValue={editingUser.email} \n                    required \n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"editPhone\">Phone</Label>\n                  <Input \n                    id=\"editPhone\" \n                    name=\"phone\" \n                    type=\"tel\" \n                    defaultValue={editingUser.phone || ''} \n                  />\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"editRole\">Role</Label>\n                    <Select name=\"role\" defaultValue={editingUser.role}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"admin\">Admin</SelectItem>\n                        <SelectItem value=\"manager\">Manager</SelectItem>\n                        <SelectItem value=\"staff\">Staff</SelectItem>\n                        <SelectItem value=\"viewer\">Viewer</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"editDepartment\">Department</Label>\n                    <Select name=\"department\" defaultValue={editingUser.department}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"administration\">Administration</SelectItem>\n                        <SelectItem value=\"sales\">Sales</SelectItem>\n                        <SelectItem value=\"production\">Production</SelectItem>\n                        <SelectItem value=\"logistics\">Logistics</SelectItem>\n                        <SelectItem value=\"finance\">Finance</SelectItem>\n                        <SelectItem value=\"it\">IT</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                <div>\n                  <Label htmlFor=\"editStatus\">Status</Label>\n                  <Select name=\"status\" defaultValue={editingUser.status}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"active\">Active</SelectItem>\n                      <SelectItem value=\"inactive\">Inactive</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex justify-end space-x-2\">\n                  <Button type=\"button\" variant=\"outline\" onClick={() => setEditingUser(null)}>\n                    Cancel\n                  </Button>\n                  <Button type=\"submit\" disabled={updateUserMutation.isPending}>\n                    {updateUserMutation.isPending ? \"Updating...\" : \"Update User\"}\n                  </Button>\n                </div>\n              </form>\n            )}\n          </DialogContent>\n        </Dialog>\n      </div>\n    </PageTransition>\n  );\n}","size_bytes":16802},"client/src/utils/addTranslationToAllPages.js":{"content":"// This script adds translation system to all pages automatically\nconst fs = require('fs');\nconst path = require('path');\n\nconst pagesDir = 'client/src/pages';\nconst hookImport = 'import { useCountry } from \"@/hooks/useCountryContext\";';\nconst hookUsage = 'const { translations: t } = useCountry();';\n\n// Get all page files\nconst pageFiles = fs.readdirSync(pagesDir).filter(file => file.endsWith('.tsx'));\n\npageFiles.forEach(file => {\n  const filePath = path.join(pagesDir, file);\n  let content = fs.readFileSync(filePath, 'utf8');\n  \n  // Skip if already has the hook\n  if (content.includes('useCountry')) {\n    console.log(`${file} already has translation hook`);\n    return;\n  }\n  \n  // Add import at the end of imports section\n  const lastImportIndex = content.lastIndexOf('import ');\n  const endOfLastImport = content.indexOf('\\n', lastImportIndex);\n  \n  if (lastImportIndex !== -1) {\n    content = content.slice(0, endOfLastImport + 1) + hookImport + '\\n' + content.slice(endOfLastImport + 1);\n  }\n  \n  // Add hook usage after first hook in component\n  const useHookPattern = /const \\{ [^}]+ \\} = use[A-Z][a-zA-Z]*\\([^)]*\\);/;\n  const match = content.match(useHookPattern);\n  \n  if (match) {\n    const insertIndex = content.indexOf(match[0]) + match[0].length;\n    content = content.slice(0, insertIndex) + '\\n  ' + hookUsage + content.slice(insertIndex);\n  }\n  \n  fs.writeFileSync(filePath, content);\n  console.log(`Updated ${file}`);\n});\n\nconsole.log('Translation system added to all pages!');","size_bytes":1501}}}